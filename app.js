webpackJsonp([0],{"+Y0l":function(e,t){e.exports={icon:"icon_l3tb-GzN_1",randomUser:"randomUser_3stsmbCm_1",plus:"plus_3ZGLSXGT_1",closeIcon:"closeIcon_2Pp4Xlib_1",minimizeIcon:"minimizeIcon_2ZKWLbVh_1",smallIcon:"smallIcon_2nJfBSO7_1"}},"+hEW":function(e,t){},"+iZm":function(e,t){e.exports={icon:"icon_3B15FVt3_1"}},"/W1e":function(e,t){e.exports={component:"component_1475oSxB"}},"/Y32":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return""!==this.displayMessage?t("div"):this._e()},i=[]},"/tyO":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return this.helpText?t("div",{staticClass:"form-help",class:this.$style.component},[this._v(this._s(this.helpText))]):this._e()},i=[]},"/vmo":function(e,t){e.exports={component:"component_3neYX5BI"}},0:function(e,t){},"04O3":function(e,t,a){"use strict";var s=a("h92M"),i=a("MpNs"),n=a("XyMi");var r=function(e){a("tS1M"),this.$style=a("+Y0l")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-43706de0",null);t.a=o.exports},"08BK":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pgn-container"},[a("div",{staticClass:"pgn-buttons"},[e.game.isLiveGame?e._e():a("div",{staticClass:"button",attrs:{id:"pgn_upload"},on:{click:e.upload}},[e._v("Open..")]),e._v(" "),e.game.isLiveGame?e._e():a("div",{staticClass:"button",on:{click:e.loadpgn}},[e._v("↑ Load")]),e._v(" "),e.game.isLiveGame?e._e():a("div",{staticClass:"button",on:{click:e.clrpgn}},[e._v("Clear")]),e._v(" "),a("div",{staticClass:"button",on:{click:e.selpgn}},[e._v("Select")]),e._v(" "),a("div",{staticClass:"button",on:{click:e.saveas}},[e._v("Save..")])]),e._v(" "),e.showRaw?e._e():a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pgn4,expression:"pgn4"}],ref:"pgn4",staticClass:"pgnbox",style:{height:e.boxHeight},attrs:{placeholder:""},domProps:{value:e.pgn4},on:{input:function(t){t.target.composing||(e.pgn4=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"file",id:"pgn_file"},on:{change:e.openpgn}}),e._v(" "),e.showRaw?a("textarea",{directives:[{name:"model",rawName:"v-model",value:JSON.stringify(e.game,null,2).replace("\n"," "),expression:"JSON.stringify(game, null, 2).replace('\\n', ' ')"}],staticClass:"pgnbox",style:{height:e.boxHeight},attrs:{readonly:"true",id:"gamePgnRaw"},domProps:{value:JSON.stringify(e.game,null,2).replace("\n"," ")},on:{input:function(t){t.target.composing||e.$set(JSON.stringify(e.game,null,2),"replace('\n', ' ')",t.target.value)}}}):e._e(),e._v(" "),e.game.gameNr&&e.userIsAdmin?a("input",{directives:[{name:"model",rawName:"v-model",value:e.showRaw,expression:"showRaw"}],staticStyle:{position:"absolute",right:"0",bottom:"50px"},attrs:{type:"checkbox",title:"Show raw game"},domProps:{checked:Array.isArray(e.showRaw)?e._i(e.showRaw,null)>-1:e.showRaw},on:{change:function(t){var a=e.showRaw,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showRaw=a.concat([null])):n>-1&&(e.showRaw=a.slice(0,n).concat(a.slice(n+1)))}else e.showRaw=i}}}):e._e()])},i=[]},"0U/L":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return this.isMobile?this._e():t("div",{staticClass:"upgrade-content"},[t("div",{class:this.provider,attrs:{id:this.slotId}})])},i=[]},"0YO0":function(e,t){},"1B+S":function(e,t){e.exports={component:"component_26WtfAzP"}},"1XG1":function(e,t,a){"use strict";var s=a("LSlQ"),i=a("08BK"),n=a("XyMi");var r=function(e){a("hyvV")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-ee1c3678",null);t.a=o.exports},"1rFX":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel-watch-item"},[a("div",{staticClass:"numSpectators-wrapper",style:{display:"none",visibility:e.game.numSpectators?"visible":"hidden"}},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"neutral",title:e.game.numSpectators+" Spectators",name:"eye"}}),e._v(" "),a("span",{staticClass:"numSpectators"},[e._v(e._s(e.game.numSpectators))])],1),e._v(" "),"singles"==e.game.type?a("div",{staticClass:"section"},[a("div",{staticClass:"section-player"},e._l([0,1,2,3],function(t){return a("div",{key:t,class:{truncate180:!0,eliminated:!e.game.players[t].alive,red:0==t,blue:1==t,yellow:2==t,green:3==t}},[a("span",{attrs:{title:e.game.players[t].username},on:{click:function(a){e.$bus.emit("showUserPopup",e.game.players[t].playerId,e.game.players[t].username,a)}}},[e._v("\n          "+e._s(e.game.players[t].username)+"\n        ")])])})),e._v(" "),a("div",{staticClass:"section-rating align-right"},e._l([0,1,2,3],function(t){return a("div",{key:t,class:{rating:!0,eliminated:!e.game.players[t].alive}},[e._v("\n        "+e._s("?"!==e.game.players[t].rating?"("+e.game.players[t].rating+")":"")+"\n      ")])})),e._v(" "),a("div",{staticClass:"section-timer align-right"},e._l([0,1,2,3],function(t){return a("div",{key:t,class:{eliminated:!e.game.players[t].alive}},[e._v("\n        "+e._s(e.formatTimer(e.game.players[t].timer))+"\n      ")])})),e._v(" "),a("div",{staticClass:"section-points align-right"},e._l([0,1,2,3],function(t){return a("div",{key:t,class:{eliminated:!e.game.players[t].alive}},[e._v("\n        "+e._s(e.game.playerPoints[t])+"\n      ")])})),e._v(" "),a("div",{},[e.game.customData.timeControl?a("span",[e._v(e._s(e.game.customData.timeControl))]):e._e(),e._v(" "),e.game.customData.creatorId<0?a("span",[e._v(" • "+e._s(e.game.customData.title)),e.game.rated?e._e():a("span",{attrs:{title:"This game is not rated."}},[e._v(" • Casual")])]):e._e(),e._v(" "),e.game.customData.creatorId>0?a("span",[a("custom-data",{attrs:{data:e.game.customData,compact:!0}})],1):e._e()])]):a("div",{staticClass:"section"},[a("div",{staticClass:"section-player"},e._l(e.teamOrder,function(t){return a("div",{key:t,class:{truncate180:!0,red:0==t,blue:1==t,yellow:2==t,green:3==t}},[a("span",{attrs:{title:e.game.players[t].username},on:{click:function(a){e.$bus.emit("showUserPopup",e.game.players[t].playerId,e.game.players[t].username,a)}}},[e._v("\n          "+e._s(e.game.players[t].username)+"\n        ")])])})),e._v(" "),a("div",{staticClass:"section-rating align-right"},e._l(e.teamOrder,function(t){return a("div",{key:t,staticClass:"rating"},[e._v("\n        "+e._s("?"!==e.game.players[t].rating?"("+e.game.players[t].rating+")":"")+"\n      ")])})),e._v(" "),a("div",{staticClass:"section-timer align-right"},e._l(e.teamOrder,function(t){return a("div",{key:t},[e._v("\n        "+e._s(e.formatTimer(e.game.players[t].timer))+"\n      ")])})),e._v(" "),e._m(0),e._v(" "),a("div",{},[e.game.customData.timeControl?a("span",[e._v(e._s(e.game.customData.timeControl))]):e._e(),e._v(" "),e.game.customData.creatorId<0?a("span",[e._v(" • "+e._s(e.game.customData.title)),e.game.rated?e._e():a("span",{attrs:{title:"This game is not rated."}},[e._v(" • Casual")])]):e._e(),e._v(" "),e.game.customData.creatorId>0?a("span",[a("custom-data",{attrs:{data:e.game.customData,compact:!0}})],1):e._e()])])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-points align-right"},[t("div",{},[this._v("¬")]),this._v(" "),t("div",{staticClass:"vmirror"},[this._v("¬")]),this._v(" "),t("div",{},[this._v("¬")]),this._v(" "),t("div",{staticClass:"vmirror"},[this._v("¬")])])}]},"1vU/":function(e,t,a){"use strict";var s=a("N3vy"),i=a("XqNX"),n=a("XyMi");var r=function(e){a("dSpD"),this.$style=a("j697")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-0ca569cc",null);t.a=o.exports},"1wf3":function(e,t,a){"use strict";t.a={data:function(){return{test:!0}},computed:{displayMessage:function(){return this.$store.getters.notification}},methods:{clearDisplayMessage:function(){}},updated:function(){""!==this.displayMessage&&(this.$notify({duration:2500,text:this.displayMessage}),this.clearDisplayMessage())}}},"2K4s":function(e,t,a){"use strict";var s=a("fZjL"),i=a.n(s),n=a("mvHQ"),r=a.n(n),o=a("45FZ");t.a={components:{SelectDark:o.a},props:{},data:function(){return{toPlay:0,dead:[!1,!1,!1,!1],castleKS:[!0,!0,!0,!0],castleQS:[!0,!0,!0,!0],pliesNoCapture:0,points:[0,0,0,0],flexData:{},prettyFen:"",fen:"",boxHeight:0,pcs:["K","Q","D","R","B","N","P"],nCheckOptions:[{label:"N+",value:!1},{label:"1+",value:1},{label:"2+",value:2},{label:"3+",value:3},{label:"4+",value:4},{label:"5+",value:5},{label:"6+",value:6},{label:"7+",value:7},{label:"8+",value:8},{label:"9+",value:9},{label:"12+",value:12},{label:"20+",value:20}],promotionRankOptions:[{label:"Prom",value:0},{label:"Off",value:1},{label:"2nd",value:2},{label:"3rd",value:3},{label:"4th",value:4},{label:"5th",value:5},{label:"6th",value:6},{label:"7th",value:7},{label:"8th",value:8},{label:"9th",value:9},{label:"10th",value:10},{label:"11th",value:11},{label:"12th",value:12},{label:"13th",value:13},{label:"14th",value:14}],promoteToOptions:[{label:"Any",value:""},{label:"=1pQ",value:"D"},{label:"=Q",value:"Q"},{label:"=R",value:"R"},{label:"=B",value:"B"},{label:"=N",value:"N"},{label:"=K",value:"K"}],teammateOptions:[{label:"R&B v Y&G",value:1},{label:"R&Y v B&G",value:2},{label:"R&G v B&Y",value:3}],oppXOptions:[{label:"-",value:0},{label:"Ox1.5",value:1.5},{label:"Ox2",value:2},{label:"Ox2.5",value:2.5},{label:"Ox3",value:3},{label:"Ox3.5",value:3.5}]}},computed:{pieces:function(){return this.isPremium?this.pcs:this.pcs.reverse()},fourPlayer:function(){return this.$store.getters.fourPlayer},game:function(){return this.$store.getters.game},board:function(){return this.$store.getters.board},fenUtils:function(){return this.$store.getters.fenUtils},atMove:function(){return this.$store.getters.atMove},isPremium:function(){return window.context.user.isPremium},showFenbox:function(){return this.boxHeight>20},editPosition:function(){return this.$parent.editPosition},gameType:function(){return this.game.gameType},ruleVariants:function(){return this.game.customData.ruleVariants}},updated:function(){this.setBoxHeight()},watch:{gameType:function(){this.editPosition&&this.update()},editPosition:function(e){this.board.b.hlMoveablePieces(),e&&(this.toPlay=this.fourPlayer.turn(),this.dead=this.fourPlayer.dead(),this.points=this.fourPlayer.points(),this.castleKS=this.fourPlayer.canCastleKS(),this.castleQS=this.fourPlayer.canCastleQS(),this.pliesNoCapture=this.fourPlayer.pliesNoCapture(),this.flexData=this.fourPlayer.getFlexData(),this.update())}},mounted:function(){window.addEventListener("resize",this.setBoxHeight),this.board.b.forceEditPositionUpdate=this.update},methods:{rVsChanged:function(){this.editPosition&&(this.$store.commit("setRuleVariants",this.ruleVariants),this.update())},setBoxHeight:function(){this.boxHeight=this.board.b.calcFenboxHeight()-100},new960:function(){var e=this;clearTimeout(this.new960Timer),this.new960Timer=setTimeout(function(){if(e.ruleVariants.chess960){var t=Math.ceil(960*Math.random());e.ruleVariants.chess960=t;var a=e.fenUtils.generate960Fen(t);e.prettyFen=e.fenUtils.prettyFen(a),e.loadfen()}},30)},continueFromHere:function(){this.loadfen();var e=this.board.getPosition(this.makeFenTailFromOptions());this.validStartFen(e)&&(this.$store.commit("setRuleVariants",this.ruleVariants),this.ruleVariants.chess960?(this.$store.commit("startFromPosition",this.fourPlayer.getDefaultFenWithFlexdata()),this.board.b.forcePgnUpdate(!0)):(this.$store.commit("startFromPosition",e),this.board.b.forceMovesUpdate(),this.board.b.forcePgnUpdate()),this.$parent.selectTab("pgn"),this.board.b.rotate(this.toPlay))},validStartFen:function(e){this.fourPlayer.position(e);var t=this.fourPlayer.turn(),a=this.fourPlayer.isInCheckmate(t);return this.fourPlayer.isInStalemate(t)||a?(this.$store.commit("showNotification",this.board.b.colorNames[t]+" is in "+(a?"checkmate":"stalemate")),!1):!this.fourPlayer.gameOver()||(this.$store.commit("showNotification","In this position, the game is over. ("+this.fourPlayer.gameOverInfo()+")"),!1)},resetfen:function(){this.toPlay=0,this.dead=[!1,!1,!1,!1],this.castleKS=[!0,!0,!0,!0],this.castleQS=[!0,!0,!0,!0],this.points=[0,0,0,0],this.pliesNoCapture=0,this.prettyFen="",this.board.setPosition(this.fourPlayer.getDefaultFenWithFlexdata()),this.update()},update:function(){var e=this;this.editPosition&&(clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){e.dead[0]&&0===e.toPlay&&(e.toPlay=1),e.dead[1]&&1===e.toPlay&&(e.toPlay=2),e.dead[2]&&2===e.toPlay&&(e.toPlay=3),e.dead[3]&&3===e.toPlay&&(e.toPlay=0);var t=e.makeFenTailFromOptions(),a=e.board.getPosition(t);e.fourPlayer.position(a),a=e.fourPlayer.makeFen(),e.prettyFen=e.fenUtils.prettyFen(a),e.$forceUpdate(),e.board.b.hlChecks()},30))},makeFenTailFromOptions:function(){for(var e=[],t=[0,1,2,3],a=0;a<t.length;a++){var s=t[a];e[s]=parseInt(this.points[s])||0}var n="-"+this.toPlay;return n+="-"+r()(this.dead),n+="-"+r()(this.castleKS),n+="-"+r()(this.castleQS),n+="-"+r()(e),n+="-"+this.pliesNoCapture,this.flexData&&i()(this.flexData).length&&(n+="-"+r()(this.flexData)),n},emptyfen:function(){this.dead=[!1,!1,!1,!1],this.castleKS=[!1,!1,!1,!1],this.castleQS=[!1,!1,!1,!1],this.points=[0,0,0,0],this.pliesNoCapture=0;this.board.setPosition("14/14/14/14/14/14/14/14/14/14/14/14/14/14-0-[false,false,false,false]-[true,true,true,true]-[true,true,true,true]-[0,0,0,0]-0"),this.update()},loadfen:function(){var e=this,t=this.fenUtils.unprettyFen(this.prettyFen,function(t){e.$store.commit("showNotification",t)});this.board.setPosition(t),this.board.b.hlChecks();var a=t.split("-"),s=a.length>7?JSON.parse(a[7]):{};this.toPlay=a[1],this.dead=JSON.parse(a[2]),this.castleKS=JSON.parse(a[3]),this.castleQS=JSON.parse(a[4]),this.points=JSON.parse(a[5]),this.pliesNoCapture=a[6],this.flexData=s}}}},"2S6m":function(e,t){},"2Xsc":function(e,t,a){"use strict";var s=a("Hh2A"),i=a("Bbhh"),n=a("XyMi");var r=function(e){a("3rWJ"),this.$style=a("JAFW")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-20366d65",null);t.a=o.exports},"2YhL":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._g({staticClass:"icon-font",class:e.$style.component},e.$listeners),[a("span",{class:[e.$style[e.family],e.$style[e.name],e.$style[e.theme]]})])},i=[]},"2nl0":function(e,t){e.exports={icon:"icon_3mWcQWwx_1"}},"3/ZL":function(e,t,a){"use strict";var s=a("iFe7"),i=a("fOPE"),n=a("XyMi");var r=function(e){this.$style=a("zscW")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},"30vV":function(e,t){e.exports={icon:"icon_3fxNGxcu_1"}},"33mq":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[e.isOpen?a("div",{staticClass:"search-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.playerSearchText,expression:"playerSearchText"}],ref:"searchInput",attrs:{type:"text",placeholder:"Username"},domProps:{value:e.playerSearchText},on:{input:function(t){t.target.composing||(e.playerSearchText=t.target.value)}}}),e._v(" "),a("icon-font",{staticClass:"input-search-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"magnifying-glass"}}),e._v(" "),a("icon-font",{staticClass:"input-close-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},on:{click:e.closeSearch}})],1):a("div",{staticClass:"search-button",on:{click:e.openSearch}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"magnifying-glass"}})],1)])},i=[]},"3rWJ":function(e,t){},"45FZ":function(e,t,a){"use strict";var s=a("Lmkx"),i=a("Cp3r"),n=a("XyMi");var r=function(e){a("Su5O"),this.$style=a("rvRZ")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},"4b1U":function(e,t,a){"use strict";var s=a("Gu7T"),i=(a.n(s),{getLeaderboard:function(e){return e.leaderboard},playersOnline:function(e){return e.playersOnline},numGames:function(e){return e.numGames},topGames:function(e){return e.topGames}});t.a={state:{playersOnline:0,numGames:0,leaderboard:null,topGames:[]},getters:i,mutations:{SOCKET_STATS:function(e,t){e.playersOnline=t.numPlayers,e.numGames=t.numGames,e.topGames=t.topGames},SOCKET_SHOW_LEADERBOARD:function(e,t){e.leaderboard=t}}}},"4qIL":function(e,t){},"4ySx":function(e,t,a){"use strict";var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),o=a("/Hyb"),l=a.n(o),c=a("bnuI"),u=a.n(c);t.a={computed:{},mounted:function(){var e=this;return r()(i.a.mark(function t(){var a,s,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$store.getters.user,s=new u.a("production"),t.next=4,s.getRoles();case 4:null!==(n=t.sent)&&(a.roles=n),console.log("production"),l.a.setUserContext({username:a.username,id:a.id}),r=new Request("https://www.chess.com/callback/auth/app/4pc",{method:"GET",redirect:"error",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"})}),fetch(r).then(function(e){return e.json()}).then(function(t){var s=t.token;if(a.token=s,!s)throw new Error(s+" token from auth endpoint");e.$socket.emit("connect-user",a)}).catch(function(e){console.log("Could not fetch token: ",e)});case 8:case"end":return t.stop()}},t,e)}))()}}},"5qGH":function(e,t,a){"use strict";var s=a("Nq9u"),i=a("1rFX"),n=a("XyMi");var r=function(e){a("Wfyl"),this.$style=a("GtFK")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-1113c5f7",null);t.a=o.exports},"6a66":function(e,t){e.exports={icon:"icon_1V_ISKym_1"}},"6lcz":function(e,t,a){"use strict";var s=a("Upkn"),i=a("J+MK"),n=a("XyMi");var r=function(e){a("T+iH"),this.$style=a("kysi")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-6c52bd5c",null);t.a=o.exports},"6qrf":function(e,t,a){"use strict";var s={activeTab:"watch",selectedLeaderboardType:null!=localStorage.getItem("selectedLeaderboardType")?localStorage.getItem("selectedLeaderboardType"):"singles",selectedWatchGameType:"",playerSearchText:"",rulesType:""},i={setActiveTab:function(e,t){e.activeTab=t,"rules"===t&&(e.rulesType="")},showRulesTeams:function(e){e.rulesType="teams",e.activeTab="rules"},showRulesSingles:function(e){e.activeTab="rules",e.rulesType="singles"},setSelectedLeaderboardType:function(e,t){e.selectedLeaderboardType=t,localStorage.setItem("selectedLeaderboardType",t)},setSelectedWatchGameType:function(e,t){e.selectedWatchGameType=t},setPlayerSearchText:function(e,t){e.playerSearchText=t}},n=window.location.href.match(/t=(watch|leaderboard|archive|friends|chat|rules|)/);n&&setTimeout(function(){i.setActiveTab(s,n[1])},100),t.a={state:s,getters:{activeTab:function(e){return e.activeTab},selectedLeaderboardType:function(e){return e.selectedLeaderboardType},selectedWatchGameType:function(e){return e.selectedWatchGameType},playerSearchText:function(e){return e.playerSearchText},rulesType:function(e){return e.rulesType}},mutations:i}},"6sC9":function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s),n=a("BO1k"),r=a.n(n),o=a("fZjL"),l=a.n(o),c=a("tNyc"),u=a("qP1x"),h=a("2Xsc");t.a={components:{CustomGame:h.a,FormButton:c.a,IconFont:u.a},data:function(){return{opacity:1,collapseGame:{},filters:{rated:"",gameType:"",ruleVariants:"",tcType:""}}},mounted:function(){var e=this;this.$bus.$on("showPreview",function(t){e.opacity=t?.1:1});var t=localStorage.getItem("cgFilters");t&&(this.filters=JSON.parse(t))},computed:{mainScreen:function(){return this.$store.getters.mainScreen},board:function(){return this.$store.getters.board},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},customGames:function(){return this.$store.getters.customGames},numPlayers:function(){var e={},t=!0,a=!1,s=void 0;try{for(var i,n=r()(this.customGames);!(t=(i=n.next()).done);t=!0){var o=i.value;if(!o.gameStarted){var c=!0,u=!1,h=void 0;try{for(var d,m=r()(o.players);!(c=(d=m.next()).done);c=!0){e[d.value.playerId]=1}}catch(e){u=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(u)throw h}}}}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}return l()(e).length},numJoined:function(){return this.joinedGames?this.joinedGames.length:0},showCustomGames:function(){return this.$store.getters.showCustomGames},joinedGames:function(){return this.$store.getters.joinedGames},createdGame:function(){return this.$store.getters.createdGame},titles:function(){var e=[],t=!0,a=!1,s=void 0;try{for(var i,n=r()(this.customGames);!(t=(i=n.next()).done);t=!0){var o=i.value;o.title&&!e.includes(o.title)&&e.push(o.title)}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}return e.sort()}},watch:{createdGame:function(e){e&&(this.$el.querySelector(".custom-games-inner").scrollTop=0)},customGames:function(e){this.$forceUpdate()},showCustomGames:function(e){e&&(this.opacity=1)}},methods:{filter:function(e){var t=this.filters;t.rV||(t.rV="");var a=t.rV.split("_",2)[0],s=t.rV.split("_",2)[1];if(e.userJoined||e.userCreated)return!0;if("rated"===t.rated&&!e.rated)return!1;if("wta"===t.rated&&!/^wta/.test(e.rated))return!1;if("unrated"===t.rated&&e.rated)return!1;if(t.tcType&&t.tcType!==e.timeControlType)return!1;if(t.gameType&&t.gameType!==e.gameType)return!1;if("startFen"===t.rV)return!!e.startFen;if("title"===a){if(e.title!==s)return!1}else{if(a&&!s&&!e.ruleVariants[t.rV])return!1;if(a&&s&&e.ruleVariants[a]!==s)return!1}return!0},filterChanged:function(){localStorage.setItem("cgFilters",i()(this.filters)),this.$forceUpdate()},clearFilters:function(){this.filters={rated:"",gameType:"",ruleVariants:"",tcType:""},this.filterChanged()}}}},"6sQd":function(e,t,a){"use strict";var s=a("z8mp"),i=a("zcSD"),n=a("XyMi");var r=function(e){a("c/6E")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-4164cc5d",null);t.a=o.exports},"74BU":function(e,t){e.exports={icon:"icon_38LXoJtn_1"}},"767p":function(e,t){},"7eiA":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel-wrapper"},[a("div",{staticClass:"header"},[a("div",{staticClass:"toggleadvancedSearchIcon",attrs:{title:"Advanced search"},on:{click:e.toggleadvancedSearch}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:e.advancedSearch?"x":"plus"}})],1),e._v(" "),a("div",{staticClass:"searchForm"},[a("div",{staticClass:"numResults"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isSearching,expression:"isSearching"}],staticClass:"isSearching"},[e._v("...")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSearching,expression:"!isSearching"}],staticClass:"rowCount"},[e._v(" "+e._s(e.rowCount))])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username2id,expression:"username2id"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"},domProps:{value:e.username2id},on:{input:function(t){t.target.composing||(e.username2id=t.target.value)}}}),e._v(" "),a("div",{staticClass:"search-field s_username"},[a("div",{staticClass:"icon-flex"},[a("icon-font",{staticClass:"input-search-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"magnifying-glass"}})],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"username",attrs:{type:"text",placeholder:"User or #",title:"Username or Game #"},domProps:{value:e.username},on:{keyup:e.keyUpUsername,focus:function(t){e.usernameFocused=!0},blur:e.blurUsername,input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("div",{staticClass:"icon-flex"},[""!==e.username?a("icon-font",{staticClass:"input-close-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},on:{click:e.clearUsername}}):e._e()],1),e._v(" "),a("div",{staticClass:"icon-flex"},[a("icon-font",{staticClass:"input-close-icon",class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"users"},on:{click:function(t){e.showFriends=!e.showFriends}}})],1)]),e._v(" "),e.user2?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:e.usernameChoices.length,expression:"usernameChoices.length"}],staticClass:"autocomplete-wrapper"},e._l(e.usernameChoices,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectUsername(t)}}},[e._v(e._s(t.username)+" "),t.numGames?a("span",[e._v("("+e._s(t.numGames)+")")]):e._e()])})),e._v(" "),e.showFriends&&e.friendsUsernames.length?a("div",{staticStyle:{position:"absolute"}},[a("div",{staticClass:"autocomplete-wrapper"},e._l(e.friendsUsernames,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectFriend(t)}}},[e._v(e._s(t.username))])}))]):e._e(),e._v(" "),a("select-dark",{directives:[{name:"show",rawName:"v-show",value:"games"===e.queryType,expression:"queryType === 'games'"}],staticClass:"days-back-select",attrs:{options:e.daysBackOptions},model:{value:e.daysBack,callback:function(t){e.daysBack=t},expression:"daysBack"}}),e._v(" "),a("select-dark",{staticClass:"game-type-select",attrs:{options:e.gameTypeOptions,change:e.searchDatabase},model:{value:e.gameType,callback:function(t){e.gameType=t},expression:"gameType"}})],1),e._v(" "),e.advancedSearch?a("div",{staticClass:"advancedSearchForm"},[a("div",{staticClass:"filler"}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user2name2id,expression:"user2name2id"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text"},domProps:{value:e.user2name2id},on:{input:function(t){t.target.composing||(e.user2name2id=t.target.value)}}}),e._v(" "),"players"!==e.queryType?a("div",{staticClass:"search-field s_username"},[a("div",{staticClass:"icon-flex"},[a("icon-font",{staticClass:"input-search-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"plus"}})],1),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user2name,expression:"user2name"}],ref:"user2name",attrs:{type:"text",placeholder:"Username"},domProps:{value:e.user2name},on:{keyup:e.keyUpUser2name,input:function(t){t.target.composing||(e.user2name=t.target.value)}}}),e._v(" "),a("div",{staticClass:"icon-flex"},[""!==this.user2name?a("icon-font",{staticClass:"input-close-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},on:{click:e.clearUser2name}}):e._e()],1)]):e._e(),e._v(" "),e.user2?a("div",{directives:[{name:"show",rawName:"v-show",value:e.usernameChoices.length,expression:"usernameChoices.length"}],staticClass:"autocomplete-wrapper"},e._l(e.usernameChoices,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectUser2name(t)}}},[e._v(e._s(t.username)+" "),t.numGames?a("span",[e._v("("+e._s(t.numGames)+")")]):e._e()])})):e._e(),e._v(" "),"games"===e.queryType?a("select-dark",{staticClass:"days-back-select",attrs:{options:e.resultOptions,change:e.searchDatabase},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}}):e._e()],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.advancedSearch&&"games"===e.queryType,expression:"advancedSearch && queryType === 'games'"}],staticClass:"advancedSearchForm"},[a("div",{staticClass:"filler"}),e._v(" "),a("div",{staticClass:"search-field small"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDays,expression:"fromDays"}],attrs:{placeholder:"from",type:"text"},domProps:{value:e.fromDays},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.fromDays=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"search-field small"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toDays,expression:"toDays"}],attrs:{placeholder:"to",type:"text"},domProps:{value:e.toDays},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.toDays=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"8px","font-size":"11px"}},[e._v("days back")]),e._v("\n        \n      "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"4px","font-size":"11px"}},["games"===e.queryType?a("select-dark",{staticClass:"days-back-select",attrs:{options:e.ratedOptions,change:e.searchDatabase},model:{value:e.rated,callback:function(t){e.rated=t},expression:"rated"}}):e._e()],1),e._v("\n       \n      "),a("div",{staticClass:"search-field small",staticStyle:{"margin-top":"8px","font-size":"11px"},attrs:{title:"Include aborted games in results"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.includeAborted,expression:"includeAborted"}],style:{"margin-top":e.$store.getters.isFirefox?"-4px":""},attrs:{id:"includeAborted",type:"checkbox"},domProps:{checked:Array.isArray(e.includeAborted)?e._i(e.includeAborted,null)>-1:e.includeAborted},on:{change:[function(t){var a=e.includeAborted,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.includeAborted=a.concat([null])):n>-1&&(e.includeAborted=a.slice(0,n).concat(a.slice(n+1)))}else e.includeAborted=i},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"includeAborted"}},[e._v("Aborted")])])]),e._v(" "),e.ruleVariants?a("div",{directives:[{name:"show",rawName:"v-show",value:e.advancedSearch&&"games"===e.queryType,expression:"advancedSearch && queryType === 'games'"}],staticClass:"advancedSearchForm"},[a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"King of the Hill"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.koth,expression:"ruleVariants.koth"}],attrs:{id:"rv0",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.koth)?e._i(e.ruleVariants.koth,null)>-1:e.ruleVariants.koth},on:{change:[function(t){var a=e.ruleVariants.koth,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"koth",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"koth",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"koth",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv0"}},[e._v("KotH")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"N-Check"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.nCheck,expression:"ruleVariants.nCheck"}],attrs:{id:"rv1",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.nCheck)?e._i(e.ruleVariants.nCheck,null)>-1:e.ruleVariants.nCheck},on:{change:[function(t){var a=e.ruleVariants.nCheck,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"nCheck",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"nCheck",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"nCheck",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv1"}},[e._v("N-Check")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"960"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.chess960,expression:"ruleVariants.chess960"}],attrs:{id:"rv2",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.chess960)?e._i(e.ruleVariants.chess960,null)>-1:e.ruleVariants.chess960},on:{change:[function(t){var a=e.ruleVariants.chess960,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"chess960",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"chess960",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"chess960",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv2"}},[e._v("960")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"DeadWall"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.deadWall,expression:"ruleVariants.deadWall"}],attrs:{id:"rv3",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.deadWall)?e._i(e.ruleVariants.deadWall,null)>-1:e.ruleVariants.deadWall},on:{change:[function(t){var a=e.ruleVariants.deadWall,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"deadWall",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"deadWall",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"deadWall",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv3"}},[e._v("DW")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Capture the king"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.captureTheKing,expression:"ruleVariants.captureTheKing"}],attrs:{id:"rv5",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.captureTheKing)?e._i(e.ruleVariants.captureTheKing,null)>-1:e.ruleVariants.captureTheKing},on:{change:[function(t){var a=e.ruleVariants.captureTheKing,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"captureTheKing",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"captureTheKing",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"captureTheKing",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv5"}},[e._v("Cap.K")])])]):e._e(),e._v(" "),e.ruleVariants?a("div",{directives:[{name:"show",rawName:"v-show",value:e.advancedSearch&&"games"===e.queryType,expression:"advancedSearch && queryType === 'games'"}],staticClass:"advancedSearchForm"},[a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Custom starting position"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.startFen,expression:"ruleVariants.startFen"}],attrs:{id:"rv6",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.startFen)?e._i(e.ruleVariants.startFen,null)>-1:e.ruleVariants.startFen},on:{change:[function(t){var a=e.ruleVariants.startFen,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"startFen",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"startFen",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"startFen",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv6"}},[e._v("Cust.SP")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Opposite X"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.oppX,expression:"ruleVariants.oppX"}],attrs:{id:"rv66",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.oppX)?e._i(e.ruleVariants.oppX,null)>-1:e.ruleVariants.oppX},on:{change:[function(t){var a=e.ruleVariants.oppX,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"oppX",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"oppX",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"oppX",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv66"}},[e._v("OppX")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Antichess"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.antichess,expression:"ruleVariants.antichess"}],attrs:{id:"rv4",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.antichess)?e._i(e.ruleVariants.antichess,null)>-1:e.ruleVariants.antichess},on:{change:[function(t){var a=e.ruleVariants.antichess,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"antichess",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"antichess",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"antichess",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv4"}},[e._v("Anti")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Alternate teammate"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.teammate,expression:"ruleVariants.teammate"}],attrs:{id:"rv7",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.teammate)?e._i(e.ruleVariants.teammate,null)>-1:e.ruleVariants.teammate},on:{change:[function(t){var a=e.ruleVariants.teammate,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"teammate",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"teammate",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"teammate",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv7"}},[e._v("Alt.Teams")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Custom promotion rank"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.promotionRank,expression:"ruleVariants.promotionRank"}],attrs:{id:"rv8",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.promotionRank)?e._i(e.ruleVariants.promotionRank,null)>-1:e.ruleVariants.promotionRank},on:{change:[function(t){var a=e.ruleVariants.promotionRank,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"promotionRank",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"promotionRank",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"promotionRank",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv8"}},[e._v("Pr.rank")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Custom promote to"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.promoteTo,expression:"ruleVariants.promoteTo"}],attrs:{id:"rv9",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.promoteTo)?e._i(e.ruleVariants.promoteTo,null)>-1:e.ruleVariants.promoteTo},on:{change:[function(t){var a=e.ruleVariants.promoteTo,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"promoteTo",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"promoteTo",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"promoteTo",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv9"}},[e._v("Pr.to")])])]):e._e(),e._v(" "),e.ruleVariants?a("div",{directives:[{name:"show",rawName:"v-show",value:e.advancedSearch&&"games"===e.queryType,expression:"advancedSearch && queryType === 'games'"}],staticClass:"advancedSearchForm"},[a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Blindfold"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.blindfold,expression:"ruleVariants.blindfold"}],attrs:{id:"rv51",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.blindfold)?e._i(e.ruleVariants.blindfold,null)>-1:e.ruleVariants.blindfold},on:{change:[function(t){var a=e.ruleVariants.blindfold,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"blindfold",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"blindfold",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"blindfold",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv51"}},[e._v("Blindfold")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Ghost board"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.ghostBoard,expression:"ruleVariants.ghostBoard"}],attrs:{id:"rv52",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.ghostBoard)?e._i(e.ruleVariants.ghostBoard,null)>-1:e.ruleVariants.ghostBoard},on:{change:[function(t){var a=e.ruleVariants.ghostBoard,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"ghostBoard",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"ghostBoard",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"ghostBoard",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv52"}},[e._v("Ghostboard")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Anonymous"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.anonymous,expression:"ruleVariants.anonymous"}],attrs:{id:"rv54",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.anonymous)?e._i(e.ruleVariants.anonymous,null)>-1:e.ruleVariants.anonymous},on:{change:[function(t){var a=e.ruleVariants.anonymous,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"anonymous",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"anonymous",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"anonymous",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv54"}},[e._v("Anonymous")])]),e._v(" "),a("div",{staticClass:"search-field",staticStyle:{"margin-top":"6px","font-size":"11px"},attrs:{title:"Dead King Walking"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.dkw,expression:"ruleVariants.dkw"}],attrs:{id:"rv56",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.dkw)?e._i(e.ruleVariants.dkw,null)>-1:e.ruleVariants.dkw},on:{change:[function(t){var a=e.ruleVariants.dkw,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"dkw",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"dkw",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"dkw",i)},e.searchDatabase]}}),e._v(" "),a("label",{attrs:{for:"rv56"}},[e._v("DKW")])])]):e._e(),e._v(" "),e.userIsAdmin&&e.advancedSearch?a("div",{staticClass:"adminSearchForm"},[a("select-dark",{staticClass:"query-type-select",attrs:{options:e.queryTypeOptions,change:e.searchDatabase},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}}),e._v(" "),a("div",{staticClass:"search-field s_playerId"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.playerId,expression:"playerId"}],attrs:{type:"text",placeholder:"Player ID"},domProps:{value:e.playerId},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.playerId=t.target.value)}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.ipMulti.length,expression:"!ipMulti.length"}],staticClass:"search-field s_ipAddress"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ipAddress,expression:"ipAddress"}],attrs:{type:"text",placeholder:"IP Address"},domProps:{value:e.ipAddress},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.ipAddress=t.target.value)}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ipMulti.length,expression:"ipMulti.length"}],staticClass:"search-field "},[a("input",{staticStyle:{},attrs:{type:"checkbox"},domProps:{checked:e.ipMulti.length},on:{click:function(t){e.ipMulti=[]}}}),e._v(" multi-ip")])],1):e._e(),e._v(" "),e.userIsAdmin&&e.advancedSearch?a("div",{staticClass:"adminSearchForm"},["players"===e.queryType?a("div",{staticClass:"search-field small"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.minRating,expression:"minRating"}],attrs:{type:"text",title:"rating from",placeholder:">500"},domProps:{value:e.minRating},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.minRating=t.target.value)}}})]):e._e(),e._v(" "),"players"===e.queryType?a("div",{staticClass:"search-field small"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.maxRating,expression:"maxRating"}],attrs:{type:"text",title:"rating to",placeholder:"<3500"},domProps:{value:e.maxRating},on:{keyup:e.searchDatabaseDelayed,input:function(t){t.target.composing||(e.maxRating=t.target.value)}}})]):e._e(),e._v(" "),"players"===e.queryType?a("select-dark",{staticClass:"banned-type-select",attrs:{options:e.bannedOptions,change:e.searchDatabase},model:{value:e.banned,callback:function(t){e.banned=t},expression:"banned"}}):e._e()],1):e._e()]),e._v(" "),a("archive-results",{attrs:{show:e.queryType}})],1)},i=[]},"7ta8":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("a",{class:[this.$style.component,this.$style[this.size],this.$style[this.theme]]},[this._t("default")],2)},i=[]},"82sP":function(e,t,a){"use strict";var s=a("XX9+"),i=a("CSEC"),n=a("XyMi");var r=function(e){a("u9lM"),this.$style=a("yW6+")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-10efaa6f",null);t.a=o.exports},"86OT":function(e,t,a){"use strict";var s=a("XVob"),i=a("WScB"),n=a("XyMi");var r=function(e){a("uclK"),this.$style=a("wEhC")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-04d57fbc",null);t.a=o.exports},"8e8d":function(e,t,a){"use strict";var s;console.log.bind(console);var i=function(e){function t(e,t,a){const s=a.startFenData(),i=s[t].K,n="O-O"===e?a.chess960()?"kR":"Kk":a.chess960()?"qR":"Kq",r=s[t][n];return[a.ij2sq(i[0],i[1]),a.ij2sq(r[0],r[1])]}return{parsePgn:function(t,a){let s={},i={},n="",r=[],o=[];try{t=t.replace(/”“/g,'"').replace(/[\r\n]/g," ").trim();let l=/\[(\S+)\s+"([^"]*)"\]/;for(;;){let e=l.exec(t);if(!e)break;s[e[1].trim()]=e[2].trim(),t=t.replace(e[0],"").trim()}s.StartFen4&&((n=e.unprettyFen(s.StartFen4,e=>a(e)))||a("Error: Could'nt read StartFen4")),i.dkw=/\bDeadKingWalking/i.test(s.RuleVariants),i.enPassant=/\bEnPassant/i.test(s.RuleVariants),i.koth=/\bkoth/i.test(s.RuleVariants),i.captureTheKing=/\bCaptureTheKing/i.test(s.RuleVariants),i.antichess=/\bAntichess/i.test(s.RuleVariants),i.deadWall=/\bDeadWall/i.test(s.RuleVariants),i.blindfold=/\bBlindfold/i.test(s.RuleVariants),i.ghostBoard=/\bGhostBoard/i.test(s.RuleVariants),i.anonymous=/\bAnonymous/i.test(s.RuleVariants);const c=/\bchess960=(\d+|true)/i.exec(s.RuleVariants);i.chess960=!!c&&parseInt(c[1]),c&&!/^\d+$/.test(c[1])&&n&&(i.chess960=n);const u=/\b(\d+)-check/i.exec(s.RuleVariants);i.nCheck=!!u&&parseInt(u[1]);const h=/\boppX=(\d+\.?\d*)/i.exec(s.RuleVariants);i.oppX=h?parseFloat(h[1]):0;const d=/\bTeammate=([13])/i.exec(s.RuleVariants);i.teammate=d?parseInt(d[1]):2;const m=/\bProm=(\d+)/i.exec(s.RuleVariants);i.promotionRank=m?parseInt(m[1]):0;const p=/\bPromoteTo=([QRBNKD])/i.exec(s.RuleVariants);i.promoteTo=p?p[1]:"";let v=0,f=-1,g=0;const y=/^([RTS]\b|#|O-O-?O?|\b([KQBRNP])?([a-n][1-9][0-9]?)([x-])([KQBRNP])?([a-n][1-9][0-9]?)(=[DQRBNK])?(\++)?(S|#+[RGBY]*)?)(\s*\{\s*([^}]+)\s*\}\s*)?/;for(;t&&g++<9999;){if(void 0===f&&(f=-1),(t=t.trim().replace(/^(\.\.|\d+\.\.?\s*)/,"").trim()).match(/^\(/)){for(f=0,o[v]||(o[v]=[]);void 0!==o[v][f];)f++;o[v][f]=[],t=t.replace(/^\(/,"").trim();continue}if(t.match(/^\)/)){f=-1,t=t.replace(/^\)/,"").trim();continue}let e=y.exec(t);if(!e&&t&&a("parsePgn: can't read "+t.substr(0,30)+" ... "),!e)break;t=t.replace(e[0],"").trim();let s=e[1],i={from:e[3],to:e[6],san:s,promoteTo:e[7]?e[7].replace("=",""):"",annotation:e[11]};if(f<0)r.push(i),v++;else{let e=v-1;o[e]||(o[e]=[]),o[e][f]||(o[e][f]=[]),o[e][f].push(i)}}return{attributes:s,startFen:n,ruleVariants:i,moves:r,variations:o}}catch(e){return a(e),{attributes:s,startFen:n,ruleVariants:i,moves:r,variations:o}}},castlingSquares:t,playPgnMove:function(e,a){let s;if("R"===e.san)s=a.resign();else if("T"===e.san)s=a.timeout();else if("S"===e.san||"#"===e.san)s=a.playMatingMove(e.san);else{let i=/^(O-O-?O?)/.exec(e.san);if(i){let s=t(i[1],a.turn(),a);e.from=s[0],e.to=s[1]}s=a.play(e)}return s},addSanHtml:function(e,t){let a=e.sanShort;if(e.eliminate&&e.eliminate.length&&a.match(/[S#]+/)){let s="";for(let i of e.eliminate)s+='<span style="color: '+t[i]+'">'+(a.match(/S/)?"S":"#")+"</span>";a=a.replace(/[S#]+/,s)}if(e.checking&&e.checking.length){let s="";for(let a of e.checking)s+='<span style="color: '+t[a]+'">+</span>';a=a.replace(/\++/,s)}if(!e.capture)return void(e.sanHtml=a);const s=e.capture.dead?"rgba(255,255,255, 0.4)":t[e.capture.player];a=a.replace(/x([KQBRN])?/,(e,t)=>t?`x<span style="color: ${s}">${t}</span>`:`<span style="color: ${s}">x</span>`),e.sanHtml=a},checkFor3foldRepetition:function(e,t){const a=t.moves.length;if(a<1)return!1;const s=e.fen.split("-").slice(0,2).join("-");let i=1;s===t.startFen.split("-").slice(0,2).join("-")&&i++;for(let e=0;e<a;e++)s===t.moves[e].fen.split("-").slice(0,2).join("-")&&i++;const n=3===i;if(n&&"singles"===t.gameType){const t=e.fen.split("-"),a=JSON.parse(t[2]);t[5]=JSON.parse(t[5]);for(let e of[0,1,2,3])a[e]||(t[5][e]+=10);t[5]=JSON.stringify(t[5]),e.fen=t.join("-")}return n}}};t.PgnUtils=i,void 0===(s=function(){return i}.call(t,a,t,e))||(e.exports=s)},"8hbL":function(e,t,a){"use strict";var s=a("pmr0"),i=a("kbMD"),n=a("XyMi");var r=function(e){a("ZNqI"),this.$style=a("2nl0")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-fccea1ea",null);t.a=o.exports},"8s4c":function(e,t,a){"use strict";var s=a("6sC9"),i=a("N4ua"),n=a("XyMi");var r=function(e){a("p8Rj"),this.$style=a("lfUJ")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-2971dae4",null);t.a=o.exports},"9WRq":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("notifications",{attrs:{position:"top right",classes:"n-light",width:360}}),this._v(" "),this.isBanned?t("banned"):this.maintenance?t("maintenance"):t("container")],1)},i=[]},"9WXl":function(e,t,a){"use strict";var s=a("wtbN"),i=a("wN2i"),n=a("XyMi");var r=function(e){a("KIze"),this.$style=a("v8ry")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-bc42c396",null);t.a=o.exports},"9nGj":function(e,t,a){"use strict";var s=a("lhq8"),i=a("B/mv"),n=a("XyMi");var r=function(e){a("BLT7")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-612a2c8f",null);t.a=o.exports},"A/7+":function(e,t,a){"use strict";t.a={name:"SectionContent"}},ADW4:function(e,t){},AII2:function(e,t,a){"use strict";var s;console.log.bind(console);var i=function(){const e="3,2R,2N,2B,2K,2Q,2B,2N,2R,3/3,2P,2P,2P,2P,2P,2P,2P,2P,3/14/1R,1P,10,3P,3R/1N,1P,10,3P,3N/1B,1P,10,3P,3B/1K,1P,10,3P,3Q/1Q,1P,10,3P,3K/1B,1P,10,3P,3B/1N,1P,10,3P,3N/1R,1P,10,3P,3R/14/3,0P,0P,0P,0P,0P,0P,0P,0P,3/3,0R,0N,0B,0Q,0K,0B,0N,0R,3-0-[false,false,false,false]-[true,true,true,true]-[true,true,true,true]-[0,0,0,0]-0",t=["r","b","y","g"],a={r:0,b:1,y:2,g:3};const s=["BBQNNRKR","BQNBNRKR","BQNNRBKR","BQNNRKRB","QBBNNRKR","QNBBNRKR","QNBNRBKR","QNBNRKRB","QBNNBRKR","QNNBBRKR","QNNRBBKR","QNNRBKRB","QBNNRKBR","QNNBRKBR","QNNRKBBR","QNNRKRBB","BBNQNRKR","BNQBNRKR","BNQNRBKR","BNQNRKRB","NBBQNRKR","NQBBNRKR","NQBNRBKR","NQBNRKRB","NBQNBRKR","NQNBBRKR","NQNRBBKR","NQNRBKRB","NBQNRKBR","NQNBRKBR","NQNRKBBR","NQNRKRBB","BBNNQRKR","BNNBQRKR","BNNQRBKR","BNNQRKRB","NBBNQRKR","NNBBQRKR","NNBQRBKR","NNBQRKRB","NBNQBRKR","NNQBBRKR","NNQRBBKR","NNQRBKRB","NBNQRKBR","NNQBRKBR","NNQRKBBR","NNQRKRBB","BBNNRQKR","BNNBRQKR","BNNRQBKR","BNNRQKRB","NBBNRQKR","NNBBRQKR","NNBRQBKR","NNBRQKRB","NBNRBQKR","NNRBBQKR","NNRQBBKR","NNRQBKRB","NBNRQKBR","NNRBQKBR","NNRQKBBR","NNRQKRBB","BBNNRKQR","BNNBRKQR","BNNRKBQR","BNNRKQRB","NBBNRKQR","NNBBRKQR","NNBRKBQR","NNBRKQRB","NBNRBKQR","NNRBBKQR","NNRKBBQR","NNRKBQRB","NBNRKQBR","NNRBKQBR","NNRKQBBR","NNRKQRBB","BBNNRKRQ","BNNBRKRQ","BNNRKBRQ","BNNRKRQB","NBBNRKRQ","NNBBRKRQ","NNBRKBRQ","NNBRKRQB","NBNRBKRQ","NNRBBKRQ","NNRKBBRQ","NNRKBRQB","NBNRKRBQ","NNRBKRBQ","NNRKRBBQ","NNRKRQBB","BBQNRNKR","BQNBRNKR","BQNRNBKR","BQNRNKRB","QBBNRNKR","QNBBRNKR","QNBRNBKR","QNBRNKRB","QBNRBNKR","QNRBBNKR","QNRNBBKR","QNRNBKRB","QBNRNKBR","QNRBNKBR","QNRNKBBR","QNRNKRBB","BBNQRNKR","BNQBRNKR","BNQRNBKR","BNQRNKRB","NBBQRNKR","NQBBRNKR","NQBRNBKR","NQBRNKRB","NBQRBNKR","NQRBBNKR","NQRNBBKR","NQRNBKRB","NBQRNKBR","NQRBNKBR","NQRNKBBR","NQRNKRBB","BBNRQNKR","BNRBQNKR","BNRQNBKR","BNRQNKRB","NBBRQNKR","NRBBQNKR","NRBQNBKR","NRBQNKRB","NBRQBNKR","NRQBBNKR","NRQNBBKR","NRQNBKRB","NBRQNKBR","NRQBNKBR","NRQNKBBR","NRQNKRBB","BBNRNQKR","BNRBNQKR","BNRNQBKR","BNRNQKRB","NBBRNQKR","NRBBNQKR","NRBNQBKR","NRBNQKRB","NBRNBQKR","NRNBBQKR","NRNQBBKR","NRNQBKRB","NBRNQKBR","NRNBQKBR","NRNQKBBR","NRNQKRBB","BBNRNKQR","BNRBNKQR","BNRNKBQR","BNRNKQRB","NBBRNKQR","NRBBNKQR","NRBNKBQR","NRBNKQRB","NBRNBKQR","NRNBBKQR","NRNKBBQR","NRNKBQRB","NBRNKQBR","NRNBKQBR","NRNKQBBR","NRNKQRBB","BBNRNKRQ","BNRBNKRQ","BNRNKBRQ","BNRNKRQB","NBBRNKRQ","NRBBNKRQ","NRBNKBRQ","NRBNKRQB","NBRNBKRQ","NRNBBKRQ","NRNKBBRQ","NRNKBRQB","NBRNKRBQ","NRNBKRBQ","NRNKRBBQ","NRNKRQBB","BBQNRKNR","BQNBRKNR","BQNRKBNR","BQNRKNRB","QBBNRKNR","QNBBRKNR","QNBRKBNR","QNBRKNRB","QBNRBKNR","QNRBBKNR","QNRKBBNR","QNRKBNRB","QBNRKNBR","QNRBKNBR","QNRKNBBR","QNRKNRBB","BBNQRKNR","BNQBRKNR","BNQRKBNR","BNQRKNRB","NBBQRKNR","NQBBRKNR","NQBRKBNR","NQBRKNRB","NBQRBKNR","NQRBBKNR","NQRKBBNR","NQRKBNRB","NBQRKNBR","NQRBKNBR","NQRKNBBR","NQRKNRBB","BBNRQKNR","BNRBQKNR","BNRQKBNR","BNRQKNRB","NBBRQKNR","NRBBQKNR","NRBQKBNR","NRBQKNRB","NBRQBKNR","NRQBBKNR","NRQKBBNR","NRQKBNRB","NBRQKNBR","NRQBKNBR","NRQKNBBR","NRQKNRBB","BBNRKQNR","BNRBKQNR","BNRKQBNR","BNRKQNRB","NBBRKQNR","NRBBKQNR","NRBKQBNR","NRBKQNRB","NBRKBQNR","NRKBBQNR","NRKQBBNR","NRKQBNRB","NBRKQNBR","NRKBQNBR","NRKQNBBR","NRKQNRBB","BBNRKNQR","BNRBKNQR","BNRKNBQR","BNRKNQRB","NBBRKNQR","NRBBKNQR","NRBKNBQR","NRBKNQRB","NBRKBNQR","NRKBBNQR","NRKNBBQR","NRKNBQRB","NBRKNQBR","NRKBNQBR","NRKNQBBR","NRKNQRBB","BBNRKNRQ","BNRBKNRQ","BNRKNBRQ","BNRKNRQB","NBBRKNRQ","NRBBKNRQ","NRBKNBRQ","NRBKNRQB","NBRKBNRQ","NRKBBNRQ","NRKNBBRQ","NRKNBRQB","NBRKNRBQ","NRKBNRBQ","NRKNRBBQ","NRKNRQBB","BBQNRKRN","BQNBRKRN","BQNRKBRN","BQNRKRNB","QBBNRKRN","QNBBRKRN","QNBRKBRN","QNBRKRNB","QBNRBKRN","QNRBBKRN","QNRKBBRN","QNRKBRNB","QBNRKRBN","QNRBKRBN","QNRKRBBN","QNRKRNBB","BBNQRKRN","BNQBRKRN","BNQRKBRN","BNQRKRNB","NBBQRKRN","NQBBRKRN","NQBRKBRN","NQBRKRNB","NBQRBKRN","NQRBBKRN","NQRKBBRN","NQRKBRNB","NBQRKRBN","NQRBKRBN","NQRKRBBN","NQRKRNBB","BBNRQKRN","BNRBQKRN","BNRQKBRN","BNRQKRNB","NBBRQKRN","NRBBQKRN","NRBQKBRN","NRBQKRNB","NBRQBKRN","NRQBBKRN","NRQKBBRN","NRQKBRNB","NBRQKRBN","NRQBKRBN","NRQKRBBN","NRQKRNBB","BBNRKQRN","BNRBKQRN","BNRKQBRN","BNRKQRNB","NBBRKQRN","NRBBKQRN","NRBKQBRN","NRBKQRNB","NBRKBQRN","NRKBBQRN","NRKQBBRN","NRKQBRNB","NBRKQRBN","NRKBQRBN","NRKQRBBN","NRKQRNBB","BBNRKRQN","BNRBKRQN","BNRKRBQN","BNRKRQNB","NBBRKRQN","NRBBKRQN","NRBKRBQN","NRBKRQNB","NBRKBRQN","NRKBBRQN","NRKRBBQN","NRKRBQNB","NBRKRQBN","NRKBRQBN","NRKRQBBN","NRKRQNBB","BBNRKRNQ","BNRBKRNQ","BNRKRBNQ","BNRKRNQB","NBBRKRNQ","NRBBKRNQ","NRBKRBNQ","NRBKRNQB","NBRKBRNQ","NRKBBRNQ","NRKRBBNQ","NRKRBNQB","NBRKRNBQ","NRKBRNBQ","NRKRNBBQ","NRKRNQBB","BBQRNNKR","BQRBNNKR","BQRNNBKR","BQRNNKRB","QBBRNNKR","QRBBNNKR","QRBNNBKR","QRBNNKRB","QBRNBNKR","QRNBBNKR","QRNNBBKR","QRNNBKRB","QBRNNKBR","QRNBNKBR","QRNNKBBR","QRNNKRBB","BBRQNNKR","BRQBNNKR","BRQNNBKR","BRQNNKRB","RBBQNNKR","RQBBNNKR","RQBNNBKR","RQBNNKRB","RBQNBNKR","RQNBBNKR","RQNNBBKR","RQNNBKRB","RBQNNKBR","RQNBNKBR","RQNNKBBR","RQNNKRBB","BBRNQNKR","BRNBQNKR","BRNQNBKR","BRNQNKRB","RBBNQNKR","RNBBQNKR","RNBQNBKR","RNBQNKRB","RBNQBNKR","RNQBBNKR","RNQNBBKR","RNQNBKRB","RBNQNKBR","RNQBNKBR","RNQNKBBR","RNQNKRBB","BBRNNQKR","BRNBNQKR","BRNNQBKR","BRNNQKRB","RBBNNQKR","RNBBNQKR","RNBNQBKR","RNBNQKRB","RBNNBQKR","RNNBBQKR","RNNQBBKR","RNNQBKRB","RBNNQKBR","RNNBQKBR","RNNQKBBR","RNNQKRBB","BBRNNKQR","BRNBNKQR","BRNNKBQR","BRNNKQRB","RBBNNKQR","RNBBNKQR","RNBNKBQR","RNBNKQRB","RBNNBKQR","RNNBBKQR","RNNKBBQR","RNNKBQRB","RBNNKQBR","RNNBKQBR","RNNKQBBR","RNNKQRBB","BBRNNKRQ","BRNBNKRQ","BRNNKBRQ","BRNNKRQB","RBBNNKRQ","RNBBNKRQ","RNBNKBRQ","RNBNKRQB","RBNNBKRQ","RNNBBKRQ","RNNKBBRQ","RNNKBRQB","RBNNKRBQ","RNNBKRBQ","RNNKRBBQ","RNNKRQBB","BBQRNKNR","BQRBNKNR","BQRNKBNR","BQRNKNRB","QBBRNKNR","QRBBNKNR","QRBNKBNR","QRBNKNRB","QBRNBKNR","QRNBBKNR","QRNKBBNR","QRNKBNRB","QBRNKNBR","QRNBKNBR","QRNKNBBR","QRNKNRBB","BBRQNKNR","BRQBNKNR","BRQNKBNR","BRQNKNRB","RBBQNKNR","RQBBNKNR","RQBNKBNR","RQBNKNRB","RBQNBKNR","RQNBBKNR","RQNKBBNR","RQNKBNRB","RBQNKNBR","RQNBKNBR","RQNKNBBR","RQNKNRBB","BBRNQKNR","BRNBQKNR","BRNQKBNR","BRNQKNRB","RBBNQKNR","RNBBQKNR","RNBQKBNR","RNBQKNRB","RBNQBKNR","RNQBBKNR","RNQKBBNR","RNQKBNRB","RBNQKNBR","RNQBKNBR","RNQKNBBR","RNQKNRBB","BBRNKQNR","BRNBKQNR","BRNKQBNR","BRNKQNRB","RBBNKQNR","RNBBKQNR","RNBKQBNR","RNBKQNRB","RBNKBQNR","RNKBBQNR","RNKQBBNR","RNKQBNRB","RBNKQNBR","RNKBQNBR","RNKQNBBR","RNKQNRBB","BBRNKNQR","BRNBKNQR","BRNKNBQR","BRNKNQRB","RBBNKNQR","RNBBKNQR","RNBKNBQR","RNBKNQRB","RBNKBNQR","RNKBBNQR","RNKNBBQR","RNKNBQRB","RBNKNQBR","RNKBNQBR","RNKNQBBR","RNKNQRBB","BBRNKNRQ","BRNBKNRQ","BRNKNBRQ","BRNKNRQB","RBBNKNRQ","RNBBKNRQ","RNBKNBRQ","RNBKNRQB","RBNKBNRQ","RNKBBNRQ","RNKNBBRQ","RNKNBRQB","RBNKNRBQ","RNKBNRBQ","RNKNRBBQ","RNKNRQBB","BBQRNKRN","BQRBNKRN","BQRNKBRN","BQRNKRNB","QBBRNKRN","QRBBNKRN","QRBNKBRN","QRBNKRNB","QBRNBKRN","QRNBBKRN","QRNKBBRN","QRNKBRNB","QBRNKRBN","QRNBKRBN","QRNKRBBN","QRNKRNBB","BBRQNKRN","BRQBNKRN","BRQNKBRN","BRQNKRNB","RBBQNKRN","RQBBNKRN","RQBNKBRN","RQBNKRNB","RBQNBKRN","RQNBBKRN","RQNKBBRN","RQNKBRNB","RBQNKRBN","RQNBKRBN","RQNKRBBN","RQNKRNBB","BBRNQKRN","BRNBQKRN","BRNQKBRN","BRNQKRNB","RBBNQKRN","RNBBQKRN","RNBQKBRN","RNBQKRNB","RBNQBKRN","RNQBBKRN","RNQKBBRN","RNQKBRNB","RBNQKRBN","RNQBKRBN","RNQKRBBN","RNQKRNBB","BBRNKQRN","BRNBKQRN","BRNKQBRN","BRNKQRNB","RBBNKQRN","RNBBKQRN","RNBKQBRN","RNBKQRNB","RBNKBQRN","RNKBBQRN","RNKQBBRN","RNKQBRNB","RBNKQRBN","RNKBQRBN","RNKQRBBN","RNKQRNBB","BBRNKRQN","BRNBKRQN","BRNKRBQN","BRNKRQNB","RBBNKRQN","RNBBKRQN","RNBKRBQN","RNBKRQNB","RBNKBRQN","RNKBBRQN","RNKRBBQN","RNKRBQNB","RBNKRQBN","RNKBRQBN","RNKRQBBN","RNKRQNBB","BBRNKRNQ","BRNBKRNQ","BRNKRBNQ","BRNKRNQB","RBBNKRNQ","RNBBKRNQ","RNBKRBNQ","RNBKRNQB","RBNKBRNQ","RNKBBRNQ","RNKRBBNQ","RNKRBNQB","RBNKRNBQ","RNKBRNBQ","RNKRNBBQ","RNKRNQBB","BBQRKNNR","BQRBKNNR","BQRKNBNR","BQRKNNRB","QBBRKNNR","QRBBKNNR","QRBKNBNR","QRBKNNRB","QBRKBNNR","QRKBBNNR","QRKNBBNR","QRKNBNRB","QBRKNNBR","QRKBNNBR","QRKNNBBR","QRKNNRBB","BBRQKNNR","BRQBKNNR","BRQKNBNR","BRQKNNRB","RBBQKNNR","RQBBKNNR","RQBKNBNR","RQBKNNRB","RBQKBNNR","RQKBBNNR","RQKNBBNR","RQKNBNRB","RBQKNNBR","RQKBNNBR","RQKNNBBR","RQKNNRBB","BBRKQNNR","BRKBQNNR","BRKQNBNR","BRKQNNRB","RBBKQNNR","RKBBQNNR","RKBQNBNR","RKBQNNRB","RBKQBNNR","RKQBBNNR","RKQNBBNR","RKQNBNRB","RBKQNNBR","RKQBNNBR","RKQNNBBR","RKQNNRBB","BBRKNQNR","BRKBNQNR","BRKNQBNR","BRKNQNRB","RBBKNQNR","RKBBNQNR","RKBNQBNR","RKBNQNRB","RBKNBQNR","RKNBBQNR","RKNQBBNR","RKNQBNRB","RBKNQNBR","RKNBQNBR","RKNQNBBR","RKNQNRBB","BBRKNNQR","BRKBNNQR","BRKNNBQR","BRKNNQRB","RBBKNNQR","RKBBNNQR","RKBNNBQR","RKBNNQRB","RBKNBNQR","RKNBBNQR","RKNNBBQR","RKNNBQRB","RBKNNQBR","RKNBNQBR","RKNNQBBR","RKNNQRBB","BBRKNNRQ","BRKBNNRQ","BRKNNBRQ","BRKNNRQB","RBBKNNRQ","RKBBNNRQ","RKBNNBRQ","RKBNNRQB","RBKNBNRQ","RKNBBNRQ","RKNNBBRQ","RKNNBRQB","RBKNNRBQ","RKNBNRBQ","RKNNRBBQ","RKNNRQBB","BBQRKNRN","BQRBKNRN","BQRKNBRN","BQRKNRNB","QBBRKNRN","QRBBKNRN","QRBKNBRN","QRBKNRNB","QBRKBNRN","QRKBBNRN","QRKNBBRN","QRKNBRNB","QBRKNRBN","QRKBNRBN","QRKNRBBN","QRKNRNBB","BBRQKNRN","BRQBKNRN","BRQKNBRN","BRQKNRNB","RBBQKNRN","RQBBKNRN","RQBKNBRN","RQBKNRNB","RBQKBNRN","RQKBBNRN","RQKNBBRN","RQKNBRNB","RBQKNRBN","RQKBNRBN","RQKNRBBN","RQKNRNBB","BBRKQNRN","BRKBQNRN","BRKQNBRN","BRKQNRNB","RBBKQNRN","RKBBQNRN","RKBQNBRN","RKBQNRNB","RBKQBNRN","RKQBBNRN","RKQNBBRN","RKQNBRNB","RBKQNRBN","RKQBNRBN","RKQNRBBN","RKQNRNBB","BBRKNQRN","BRKBNQRN","BRKNQBRN","BRKNQRNB","RBBKNQRN","RKBBNQRN","RKBNQBRN","RKBNQRNB","RBKNBQRN","RKNBBQRN","RKNQBBRN","RKNQBRNB","RBKNQRBN","RKNBQRBN","RKNQRBBN","RKNQRNBB","BBRKNRQN","BRKBNRQN","BRKNRBQN","BRKNRQNB","RBBKNRQN","RKBBNRQN","RKBNRBQN","RKBNRQNB","RBKNBRQN","RKNBBRQN","RKNRBBQN","RKNRBQNB","RBKNRQBN","RKNBRQBN","RKNRQBBN","RKNRQNBB","BBRKNRNQ","BRKBNRNQ","BRKNRBNQ","BRKNRNQB","RBBKNRNQ","RKBBNRNQ","RKBNRBNQ","RKBNRNQB","RBKNBRNQ","RKNBBRNQ","RKNRBBNQ","RKNRBNQB","RBKNRNBQ","RKNBRNBQ","RKNRNBBQ","RKNRNQBB","BBQRKRNN","BQRBKRNN","BQRKRBNN","BQRKRNNB","QBBRKRNN","QRBBKRNN","QRBKRBNN","QRBKRNNB","QBRKBRNN","QRKBBRNN","QRKRBBNN","QRKRBNNB","QBRKRNBN","QRKBRNBN","QRKRNBBN","QRKRNNBB","BBRQKRNN","BRQBKRNN","BRQKRBNN","BRQKRNNB","RBBQKRNN","RQBBKRNN","RQBKRBNN","RQBKRNNB","RBQKBRNN","RQKBBRNN","RQKRBBNN","RQKRBNNB","RBQKRNBN","RQKBRNBN","RQKRNBBN","RQKRNNBB","BBRKQRNN","BRKBQRNN","BRKQRBNN","BRKQRNNB","RBBKQRNN","RKBBQRNN","RKBQRBNN","RKBQRNNB","RBKQBRNN","RKQBBRNN","RKQRBBNN","RKQRBNNB","RBKQRNBN","RKQBRNBN","RKQRNBBN","RKQRNNBB","BBRKRQNN","BRKBRQNN","BRKRQBNN","BRKRQNNB","RBBKRQNN","RKBBRQNN","RKBRQBNN","RKBRQNNB","RBKRBQNN","RKRBBQNN","RKRQBBNN","RKRQBNNB","RBKRQNBN","RKRBQNBN","RKRQNBBN","RKRQNNBB","BBRKRNQN","BRKBRNQN","BRKRNBQN","BRKRNQNB","RBBKRNQN","RKBBRNQN","RKBRNBQN","RKBRNQNB","RBKRBNQN","RKRBBNQN","RKRNBBQN","RKRNBQNB","RBKRNQBN","RKRBNQBN","RKRNQBBN","RKRNQNBB","BBRKRNNQ","BRKBRNNQ","BRKRNBNQ","BRKRNNQB","RBBKRNNQ","RKBBRNNQ","RKBRNBNQ","RKBRNNQB","RBKRBNNQ","RKRBBNNQ","RKRNBBNQ","RKRNBNQB","RBKRNNBQ","RKRBNNBQ","RKRNNBBQ","RKRNNQBB"];return{getPoints:function(e,t){var a=void 0===t?[]:void 0;if(!e)return a;const s=JSON.parse(e.split("-")[5]);return s?void 0===t?s:s[t]:a},shuffle:function(e){let t,a,s=e.length;for(;0!==s;)a=Math.floor(Math.random()*s),t=e[--s],e[s]=e[a],e[a]=t;return e},prettyFen:function(e){var a=e.split("-");a[0]=a[0].replace(/([0-3])([KQDRBNPX])/g,function(e,a,s){return t[a]+s}),a[1]=t[a[1]].toUpperCase(),a[2]=a[2].replace(/[\[\]]/g,""),a[2]=a[2].replace(/false/g,"0").replace(/true/g,"1"),a[3]=a[3].replace(/[\[\]]/g,""),a[3]=a[3].replace(/false/g,"0").replace(/true/g,"1"),a[4]=a[4].replace(/[\[\]]/g,""),a[4]=a[4].replace(/false/g,"0").replace(/true/g,"1"),a[5]=a[5].replace(/[\[\]]/g,"");const s=a.length-1;a[s]=a[s].replace(/\[/g,"(").replace(/\]/g,")").replace(/"/g,"'");var i=a.slice(1,a.length).join("-");return i+="-\n"+a[0].replace(/\//g,"/\n")},unprettyFen:function(e,t){if(!e)return"";try{var s=e.replace(/\s+/g,"").split("-");if(s.length<7)return void t('Fen4 must contain at least 6 dashes "-"');if(!/^[RYGB]-[01],[01],[01],[01]-[01],[01],[01],[01]-[01],[01],[01],[01]-\d+,\d+,\d+,\d+-\d+(-\{.+\})?-\s*([^\-]+)$/.exec(e))return void t("Invalid fen");const i=s.length-1,n=s[i].split("/");if(14!==n.length)return void t('fen: must contain 13 slashes "/"');const r=/^((\d+|d?[rgby]?[KQDRBNPX])(,|$))+$/;for(let e of n)if(!r.test(e.trim()))return void t("Invalid fen: can't read \""+e+'"');return s[0]=a[s[0].toLowerCase()],s[1]="["+s[1].replace(/0/g,"false").replace(/1/g,"true")+"]",s[2]="["+s[2].replace(/0/g,"false").replace(/1/g,"true")+"]",s[3]="["+s[3].replace(/0/g,"false").replace(/1/g,"true")+"]",s[4]="["+s[4]+"]",7===i&&(s[6]=s[6].replace(/\(/g,"[").replace(/\)/g,"]").replace(/'/g,'"')),s[i]=s[i].replace(/([rbyg])([KQDRBNPX])/g,function(e,t,s){return a[t]+s}),s[i]=s[i].replace(/\s+/g,""),s[i]+"-"+s.slice(0,i).join("-")}catch(e){t(e)}},generate960Fen:function(t){if(!t||t<1||t>960)return"";const a=s[--t].split(""),i=e.split("-");let n=i[0].split("/");n[13]="3,",n[0]="3,";for(let e of a)n[13]+="0"+e+",";for(let e of a.slice().reverse())n[0]+="2"+e+",";n[13]+="3",n[0]+="3";for(let e=3;e<11;e++){let t=n[e].split(",");t[0]="1"+a.slice().reverse()[e-3],t[t.length-1]="3"+a[e-3],n[e]=t.join(",")}return i[0]=n.join("/"),i.join("-")}}};t.FenUtils=i,void 0===(s=function(){return i}.call(t,a,t,e))||(e.exports=s)},AvxD:function(e,t,a){"use strict";var s=a("iLng"),i=a("Ec8i"),n=a("XyMi");var r=function(e){this.$style=a("UIWm")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},"B/AG":function(e,t,a){"use strict";var s=a("qP1x");t.a={name:"SearchField",components:{IconFont:s.a},data:function(){return{isOpen:!1}},computed:{playerSearchText:{get:function(){return this.$store.getters.playerSearchText},set:function(e){this.$store.commit("setPlayerSearchText",e)}}},methods:{openSearch:function(){var e=this;this.isOpen=!0,this.$nextTick(function(){return e.$refs.searchInput.focus()})},closeSearch:function(){this.isOpen=!1,this.$store.commit("setPlayerSearchText","")}},beforeDestroy:function(){this.$store.commit("setPlayerSearchText","")}}},"B/mv":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-container",style:{height:e.topAdShown?"calc(100vh - 265px)":"100vh"}},[a("div",{staticClass:"sidebar-content"},[a("tabs"),e._v(" "),a("panel-watch",{directives:[{name:"show",rawName:"v-show",value:"watch"===e.activeTab,expression:"activeTab === 'watch'"}]}),e._v(" "),a("panel-leaderboard",{directives:[{name:"show",rawName:"v-show",value:"leaderboard"===e.activeTab,expression:"activeTab === 'leaderboard'"}]}),e._v(" "),a("panel-archive",{directives:[{name:"show",rawName:"v-show",value:"archive"===e.activeTab,expression:"activeTab === 'archive'"}]}),e._v(" "),a("panel-friends",{directives:[{name:"show",rawName:"v-show",value:"friends"===e.activeTab,expression:"activeTab === 'friends'"}]}),e._v(" "),e.chatTabVisited?a("panel-chat",{directives:[{name:"show",rawName:"v-show",value:"chat"===e.activeTab,expression:"activeTab === 'chat'"}]}):e._e(),e._v(" "),a("panel-rules",{directives:[{name:"show",rawName:"v-show",value:"rules"===e.activeTab,expression:"activeTab === 'rules'"}]})],1)])},i=[]},B0rA:function(e,t){},BLT7:function(e,t){},BVef:function(e,t,a){"use strict";var s=a("Su9W"),i=a("JP+h"),n=a("tNyc"),r=a("3/ZL"),o=a("a1iv"),l=a("Gg0z"),c=a("kApn"),u=a("qP1x");t.a={components:{ModalContainer:s.a,ModalContent:i.a,FormButton:n.a,FormInput:r.a,FormLabel:o.a,SectionContainer:l.a,SectionContent:c.a,IconFont:u.a},props:{player:null},data:function(){return{selectedReason:{},players:[],addPlayer:null,message:"",reasons:[{label:"Offenisive chat / Spamming",description:"",gameNrRequired:!0,minNumPlayersRequired:1,messageRequired:!1},{label:"Rule-violating chat",description:'The player attempted to influence other player\'s decisions via chat.<br/>\n            Examples: Begging for points, "Check red", "Let\'s attack green\n            together", "I won\'t take your queen", etc.',gameNrRequired:!0,minNumPlayersRequired:1,messageRequired:!1},{label:"Abandoning games / Sandbagging",description:"The player has a bad habit of disconnecting in lost positions,\n            or aborts games frequently and intentionally to lower his rating.\n            <font size=-2><br/>Mouse-over the number of games in a player-popup\n            will show then number of aborts.<br/></font>",gameNrRequired:!1,minNumPlayersRequired:1,messageRequired:!1},{label:"Self-partnering",description:"The same person played with two accounts in this game.",gameNrRequired:!0,minNumPlayersRequired:2,messageRequired:!1},{label:"Pre-arranged team",description:"Two players that go out of their way to get into games together and consistenlty play in a way that benefits one or both of them.",gameNrRequired:!0,minNumPlayersRequired:2,messageRequired:!1,gameType:"singles"},{label:"Other",description:"",gameNrRequired:!1,minNumPlayersRequired:1,messageRequired:!0}]}},computed:{seat:function(){return this.$store.getters.seat},game:function(){return this.$store.getters.game},showReportModal:function(){return this.$store.getters.showReportModal},b:function(){return this.$store.getters.board.b},colorNames:function(){return this.$store.getters.settings.altColorScheme?this.b.altColorNames:this.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")}},watch:{reason:function(){this.$refs.message.focus()}},mounted:function(){this.player&&(this.player.playerId!==this.playerInfo(0,"playerId")&&this.player.playerId!==this.playerInfo(1,"playerId")&&this.player.playerId!==this.playerInfo(2,"playerId")&&this.player.playerId!==this.playerInfo(3,"playerId")&&(this.addPlayer={playerId:this.player.playerId,username:this.player.username}),this.players=[{playerId:this.player.playerId,username:this.player.username}])},methods:{playerInfo:function(e,t){return this.game.gameNr?this.game.players[e][t]:""},sendReport:function(){if(this.selectedReason&&this.selectedReason.label){if(this.selectedReason.messageRequired&&!this.message.trim())return this.$store.commit("showNotification","Please describe the problem."),void this.$refs.message.focus();if(this.players.length<this.selectedReason.minNumPlayersRequired)this.$store.commit("showNotification","Please check both accused players at the top. (You don't need to send two reports.)");else{var e={playerId:window.context.user.id,username:window.context.user.username,reason:this.selectedReason.label,players:this.players,message:this.message,gameNr:this.game.gameNr};this.$bus.emit("submitReport",e),this.$emit("close")}}else this.$store.commit("showNotification","Please select a reason.")},closeReportModal:function(){this.$emit("close")}}}},Bb9H:function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s);t.a={name:"player-boxes",props:{squareSize:0,player:0},data:function(){return{update:1,timer:null,showDelaySpinner:!1,playerBoxPosition:["br","bl","tl","tr"],rotation:0,left:{0:[1,2],90:[2,3],180:[3,0],270:[0,1]},top:{0:[2,3],90:[3,0],180:[0,1],270:[1,2]}}},computed:{position:function(){return this.playerBoxPosition[this.player]},isLeft:function(){return void 0===this.rotation||void 0===this.left[this.rotation]?1===this.player||2===this.player:this.left[this.rotation][0]===this.player||this.left[this.rotation][1]===this.player},isRight:function(){return!this.isLeft},isTop:function(){return void 0===this.rotation||void 0===this.top[this.rotation]?2===this.player||3===this.player:this.top[this.rotation][0]===this.player||this.top[this.rotation][1]===this.player},isBottom:function(){return!this.isTop},isFirefox:function(){return this.$store.getters.isFirefox},contentEditable:function(){return this.$store.getters.analysisMode&&!this.$parent.editPosition},isPlaying:function(){return this.$store.getters.isPlaying},game:function(){return this.$store.getters.game},board:function(){return this.$store.getters.board},b:function(){return this.board.b},fenUtils:function(){return this.$store.getters.fenUtils},fourPlayer:function(){return this.$store.getters.fourPlayer},atMove:function(){return this.$store.getters.atMove},inVariation:function(){return this.$store.getters.inVariation},atVariationMove:function(){return this.$store.getters.atVariationMove},currmove:function(){return this.inVariation>-1?this.game.variations[this.atMove][this.inVariation][this.atVariationMove]:this.atMove>-1?this.game.moves[this.atMove]:null},timersStarted:function(){return this.$store.getters.timersStarted},defaultTime:function(){return this.$store.getters.defaultTime},animationClass:function(){return"animation"+this.game.timeControlIncrement},clientTimeOffset:function(){return this.$store.getters.clientTimeOffset},active:function(){return this.game.isLiveGame?this.game.gameOver||this.player!==this.game.turn?"":"active":(this.update,this.fourPlayer.gameOver()||this.player!==this.fourPlayer.turn()?"":"active")},playerInfo:function(){if(this.game.gameNr&&!this.contentEditable)return this.game.players[this.player];var e=this.game.pgnAttributes[this.colorName]?this.game.pgnAttributes[this.colorName]:this.colorName,t=this.game.pgnAttributes[this.colorName+"Elo"]?this.game.pgnAttributes[this.colorName+"Elo"]:"1200";return{playerId:0,username:e,avatarUrl:"",rating:"teams"===this.game.gameType?"":t,teamRating:"teams"===this.game.gameType?t:""}},avatarUrl:function(){return this.playerInfo.avatarUrl?this.playerInfo.avatarUrl:"https://images.chesscomfiles.com/uploads/images/noavatar_l.gif"},boxTitle:function(){return this.contentEditable?"Click to edit names, ratings or change points":""},gameType:function(){return this.game.gameType},playerId:function(){return this.game.gameNr?this.playerInfo.playerId:""},username:function(){return this.playerInfo.username},rating:function(){return"teams"===this.game.gameType?this.playerInfo.teamRating:this.playerInfo.rating},points:function(){return this.update&&this.currmove?this.fenUtils.getPoints(this.currmove.fen,this.player):this.game&&-1===this.atMove?this.fenUtils.getPoints(this.game.startFen,this.player):0},capturedPieces:function(){if(this.atMove<0)return[];if(this.inVariation>-1){for(var e=this.atVariationMove,t=this.game.variations[this.atMove][this.inVariation][e];t&&t.player!==this.player;)e--,t=this.game.variations[this.atMove][this.inVariation][e];if(t&&void 0!==t.capturedPieces)return t.capturedPieces}for(var a=this.atMove,s=this.game.moves[a];s&&s.player!==this.player;)a--,s=this.game.moves[a];return s&&void 0!==s.capturedPieces?s.capturedPieces:[]},catpuredPieceSize:function(){return Math.round(this.squareSize/2.4)+"px"},userProfileUrl:function(){return this.username&&this.username!==this.colorName?"https://www.chess.com/member/"+this.username:""},colorNames:function(){return this.$store.getters.settings.altColorScheme?this.b.altColorNames:this.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},colorName:function(){return this.colorNames[this.player]},scale:function(){return this.squareSize/40}},watch:{capturedPieces:function(){this.$parent.capturedPieces[this.player]=this.capturedPieces,this.$parent.updateMaterialDiff()}},methods:{playerclock:function(e){if(this.game.isLiveGame)return this.$store.getters.playerclock(e);if(!this.game.gameNr)return 60*this.defaultTime.timeControl*1e3;var t=60*this.game.timeControlInitial*1e3;if(!this.game.hasClockInfo||this.atMove<0)return t;for(var a=this.atMove,s=this.game.moves[a];s&&s.player!==this.player;)a--,s=this.game.moves[a];return s&&void 0!==s.clock?!this.game.gameOver&&0!==s.clock&&s.clock<100?100:s.clock:t},forceUpdate:function(){this.rotation=this.b.rotation,this.update=0,this.update++,this.$forceUpdate()},changePoints:function(){if(this.contentEditable){var e=prompt("Change points?",this.points);if(!1!==e&&parseInt(e)>=0)if(this.currmove){var t=this.currmove.fen.split("-");t[5]=JSON.parse(t[5]),t[5][this.player]=parseInt(e),t[5]=i()(t[5]),this.currmove.fen=t.join("-"),this.board.setPosition(this.currmove.fen),this.forceUpdate()}else{if(-1!==this.atMove)return;var a=this.game.startFen.split("-");a[5]=JSON.parse(a[5]),a[5][this.player]=parseInt(e),a[5]=i()(a[5]);var s=a.join("-");this.$store.commit("startFromPosition",s)}}},formatClock:function(e){if(!(e=parseFloat(e))||e<=0)return"0:00.0";var t=Math.round(e/100)/10,a=Math.floor(t/60),s=Math.floor(a/60);s>0&&(a-=60*s);var i=Math.round(t%60*10)/10;return(a>0||i>=10)&&(i=Math.round(i).toString()),i<10&&(i="0"+i),0===s&&0===a&&i.match(/^0[0-9]$/)&&(i+=".0"),"60"===i&&(i="00",a++),e>0&&"00.0"===i&&(i="00.1"),s>0?(a<10&&(a="0"+a),s+":"+a):a+":"+i},onAvatarClick:function(e){if(!this.game.gameNr)return e.preventDefault(),!1},capturedPieceStyle:function(e){var t={width:this.catpuredPieceSize,height:this.catpuredPieceSize};return e.dead||!e.isRealKing||"singles"!==this.game.gameType||this.game.customData.ruleVariants.antichess||(t["box-shadow"]="2px -3px 6px "+this.b.shadowColors[e.player],t["border-radius"]="50%"),t}},updated:function(){var e=this;if(clearTimeout(this.timer),this.game.isLiveGame&&this.timersStarted&&this.game.turn===this.player){var t=Date.now()-this.clientTimeOffset-this.game.lastmoveTimestamp,a=1e3*this.game.timeControlIncrement,s=this.playerclock(this.player),i=this.game.timeControlIsDelay&&this.game.timeControlIncrement>0;!i||t>a?this.timer=s>1e4?setTimeout(function(){e.$forceUpdate()},1e3):setTimeout(function(){e.$forceUpdate()},100):i&&(this.showDelaySpinner=!0,this.timer=setTimeout(function(){e.showDelaySpinner=!1,e.$forceUpdate()},a-t))}}}},Bbhh:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"customGame-container",style:e.cgcStyle},[a("div",{staticClass:"toggle-caret-icon"},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"primary",name:e.$parent.collapseGame[e.data.creatorId]?"caret-left":"caret-down"},on:{click:function(t){e.$parent.collapseGame[e.data.creatorId]=!e.$parent.collapseGame[e.data.creatorId],e.$forceUpdate()}}})],1),e._v(" "),a("div",[a("div",{staticClass:"tcIcon-wrapper",attrs:{tooltip:e.data.timeControlType}},[a("i",{class:e.tcIcon,staticStyle:{"font-size":"3.5rem",transform:"translateY(5px)"}})]),e._v(" "),e.data.manualStart?a("div",{staticStyle:{display:"inline"}},[e.data.ruleVariants.anonymous?e._e():a("a",{staticClass:"inviter-avatar",attrs:{href:"https://chess.com/member/"+e.data.inviterUsername,target:"_blank"}},[a("img",{attrs:{width:"24",height:"24",src:e.data.inviterAvatarUrl,alt:e.data.inviterUsername}})]),e._v(" "),e.data.ruleVariants.anonymous?a("span",[e._v("Anonymous")]):a("span",{staticClass:"user-name",on:{click:function(t){e.$bus.emit("showUserPopup",e.data.creatorId,e.data.inviterUsername,t)}}},[e._v(e._s(e.data.inviterUsername))])]):a("div",{staticClass:"data-username",staticStyle:{cursor:"default"},attrs:{tooltip:e.gameTitle}},[e._v("\n        "+e._s(e.data.title)+"\n      ")]),e._v(" "),"teams"===e.data.gameType?a("div",{staticClass:"teamsIndicator"},[a("div",{staticStyle:{display:"inline-block"}},[e._v("¬")]),e._v(" "),a("div",{staticClass:"vmirror"},[e._v("¬")])]):e._e(),e._v(" "),e.data.gameStarted?a("div",{staticStyle:{display:"inline"}},[e._v("\n         \n        "),/^\d+$/.test(e.data.gameStarted)?a("span",[a("a",{staticClass:"bluelink",on:{click:function(t){e.$store.commit("joinGame",e.data.gameStarted)}}},[e._v("Spectate")])]):a("span",[e._v("Game starting..")])]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.$parent.collapseGame[e.data.creatorId]&&!e.data.gameStarted,expression:"!$parent.collapseGame[data.creatorId] && !data.gameStarted"}]},[a("strong",[e._v("\n          "+e._s(e.data.timeControl)+"\n           • \n          "+e._s("singles"===e.data.gameType?"Free-for-All":"Teams")+"\n           • \n          "),e.data.rated?a("span",{staticStyle:{"background-color":"rgba(0,0,0,0.2)",padding:"1px 2px","border-radius":"3px"}},[e.data.scaleRatingChanges&&1!=e.data.scaleRatingChanges?a("span",{attrs:{tooltip:"Rating changes will be scaled"}},[e._v("\n              "+e._s(100*e.data.scaleRatingChanges)+"%\n            ")]):e._e(),e._v("\n            Rated\n            "),a("span",{attrs:{tooltip:"Winner takes all"}},[e._v("\n              "+e._s("wta"===e.data.rated?"WTA":"")+"\n              "+e._s("wta3.0"===e.data.rated?"WTA3.0":"")+"\n            ")])]):a("span",[e._v("Casual")]),e._v(" "),500!==e.data.minRating||3500!==e.data.maxRating?a("span",[e._v("\n             • "),500!==e.data.minRating?a("span",[e._v(e._s(e.data.minRating)),3500===e.data.maxRating?a("span",[e._v("+")]):a("span",[e._v("-"+e._s(e.data.maxRating))])]):3500!==e.data.maxRating?a("span",[e._v("<"+e._s(e.data.maxRating))]):e._e()]):e._e()]),e._v(" "),a("br"),e._v(" "),a("custom-data",{attrs:{data:e.data}})],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"4px"}},[e.data.gameStarted&&!e.data.ruleVariants.anonymous?a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"80%","margin-left":"15px"}},[a("br"),e._v(" "),e._l(e.data.finalPlayers,function(t,s){return t&&t.playerId?a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"avatar-20"},[a("a",{attrs:{href:"https://www.chess.com/member/"+t.username,target:"_blank"}},[a("img",{staticClass:"playerimg",attrs:{src:t.avatarSmallUrl,width:"20",height:"20"}})])]),e._v(" "),a("div",{staticClass:"user-name",style:{color:e.$store.getters.board.b.primaryColors[s]},on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v("\n            "+e._s(t.username)+"\n          ")])]):e._e()})],2):e._e(),e._v(" "),e.data.gameStarted?e._e():a("div",{staticStyle:{display:"flex",width:"100%",margin:""}},[e.isCreator?a("div",{staticClass:"response-button"},[a("span",[e._v("This is your "+e._s(e.data.isPublic?"public":"private")+" game.")])]):e._e(),e._v(" "),e.canJoin?a("div",{staticClass:"response-button",on:{click:function(t){e.joinCustomGame()}}},[a("a",{staticClass:"bluelink bold"},[e._v("Join")])]):e._e(),e._v(" "),e.canLeave?a("div",{staticClass:"response-button",on:{click:function(t){e.$store.commit("leaveCustomGame",e.data.creatorId)}}},[a("a",{staticClass:"bluelink bold"},[e._v("Leave")])]):e._e(),e._v(" "),e.canInvite?a("div",{staticClass:"response-button",on:{click:function(t){e.showInvite?e.showInvite=!1:e.$bus.emit("showCgInvite",e.data.creatorId)}}},[a("a",{staticClass:"bluelink bold"},[e._v(e._s(e.showInvite?"Done":"Invite teammate"))])]):e._e(),e._v(" "),e.data.rated||e.data.ruleVariants.anonymous?a("div",{staticStyle:{"margin-left":"auto",display:"flex","font-weight":"500","margin-right":"6px"}},[e.numPlayers>0?a("span",[e._v(e._s(e.numPlayers)+" joined")]):e._e()]):a("div",{staticStyle:{"margin-left":"auto",display:"flex","flex-direction":"column"}},e._l(e.data.players,function(t){return a("span",{staticClass:"user-name",on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v("\n            "+e._s(t.username)+"  \n          ")])}))])]),e._v(" "),e.showInvite?a("div",{staticClass:"flex-top"},[a("strong",{staticStyle:{"margin-top":"5px"}},[e._v("Invite ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"username",staticStyle:{width:"120px"},attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{keyup:e.keyUpUsername,focus:function(t){e.usernameFocused=!0},blur:e.blurUsername,input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),""!==this.username?a("icon-font",{staticClass:"input-clear-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},on:{click:e.clearUsername}}):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.usernameChoices.length,expression:"usernameChoices.length"}],staticClass:"autocomplete-wrapper"},e._l(e.usernameChoices,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectUsername(t)}}},[e._v(e._s(t.username))])})),e._v("\n\n         \n      "),e.username2id?a("form-button",{attrs:{size:"",theme:"primary"},nativeOn:{click:function(t){e.invitePlayer()}}},[a("span",[e._v("Invite "+e._s(e.username))])]):e._e()],1):e._e()])])},i=[]},BnBt:function(e,t,a){"use strict";var s=a("D5L7"),i=a("nu5u"),n=a("XyMi");var r=function(e){a("sca/"),this.$style=a("Ox3i")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-085cc78d",null);t.a=o.exports},C1nX:function(e,t){},CHy5:function(e,t){},CSEC:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-container",[a("modal-content",[a("section-container",{style:e.scStyle()},[a("section-content",[e.$store.getters.showSettingsModal?a("div",{staticClass:"fourplayer-settings-container"},[a("div",{staticClass:"close-modal-container"},[a("icon-font",{class:e.$style.closeIcon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.closeSettingsModal(t)}}})],1),e._v(" "),a("div",{staticClass:"modal-head"},[a("h1",[e._v("Settings\n               "),a("icon-font",{class:e.$style.icon,staticStyle:{"margin-top":"-7px",display:"inline !important"},attrs:{family:"chess",theme:"primary",name:"circle-question"},nativeOn:{click:function(t){e.showHelp()}}})],1)]),e._v(" "),a("h3",[e._v("Matchmaker Rating Range")]),e._v(" "),a("div",{staticClass:"matchmaker-range-setting"},[a("h4",[a("div",{staticClass:"sliderLabel"},[e._v("Free-for-All")]),e._v(" "),a("vue-slider",e._b({ref:"ratingSlider",on:{callback:e.saveRangeSetting},model:{value:e.ratingSliderDetails.value,callback:function(t){e.$set(e.ratingSliderDetails,"value",t)},expression:"ratingSliderDetails.value"}},"vue-slider",e.ratingSliderDetails,!1))],1),e._v(" "),a("h4",[a("div",{staticClass:"sliderLabel"},[e._v("Teams")]),e._v(" "),a("vue-slider",e._b({ref:"teamRatingSlider",on:{callback:e.saveTeamRangeSetting},model:{value:e.teamRatingSliderDetails.value,callback:function(t){e.$set(e.teamRatingSliderDetails,"value",t)},expression:"teamRatingSliderDetails.value"}},"vue-slider",e.teamRatingSliderDetails,!1))],1)]),e._v(" "),a("table",{staticStyle:{width:"100%"}},[a("tr",[a("td",{attrs:{valign:"top"}},[a("div",{staticClass:"arrow-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showArrowsWhileObserving,expression:"showArrowsWhileObserving"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showArrowsWhileObserving)?e._i(e.showArrowsWhileObserving,null)>-1:e.showArrowsWhileObserving},on:{change:function(t){var a=e.showArrowsWhileObserving,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showArrowsWhileObserving=a.concat([null])):n>-1&&(e.showArrowsWhileObserving=a.slice(0,n).concat(a.slice(n+1)))}else e.showArrowsWhileObserving=i}}}),e._v(" Show arrows while observing")])])]),e._v(" "),a("div",{staticClass:"arrow-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showTeammateArrows,expression:"showTeammateArrows"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showTeammateArrows)?e._i(e.showTeammateArrows,null)>-1:e.showTeammateArrows},on:{change:function(t){var a=e.showTeammateArrows,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showTeammateArrows=a.concat([null])):n>-1&&(e.showTeammateArrows=a.slice(0,n).concat(a.slice(n+1)))}else e.showTeammateArrows=i}}}),e._v(" Show teammate's arrows")])])]),e._v(" "),a("div",{staticClass:"arrow-setting",attrs:{tooltip:"Shortcut: W"}},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.transparentArrows,expression:"transparentArrows"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.transparentArrows)?e._i(e.transparentArrows,null)>-1:e.transparentArrows},on:{change:function(t){var a=e.transparentArrows,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.transparentArrows=a.concat([null])):n>-1&&(e.transparentArrows=a.slice(0,n).concat(a.slice(n+1)))}else e.transparentArrows=i}}}),e._v(" Transparent arrows")])])]),e._v(" "),a("div",{staticClass:"indicator-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showLegalMoveIndicators,expression:"showLegalMoveIndicators"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showLegalMoveIndicators)?e._i(e.showLegalMoveIndicators,null)>-1:e.showLegalMoveIndicators},on:{change:function(t){var a=e.showLegalMoveIndicators,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showLegalMoveIndicators=a.concat([null])):n>-1&&(e.showLegalMoveIndicators=a.slice(0,n).concat(a.slice(n+1)))}else e.showLegalMoveIndicators=i}}}),e._v(" Show legal move indicators")])])]),e._v(" "),a("div",{staticClass:"coordinates-setting",attrs:{tooltip:"Shortcut: L"}},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showCoordinates,expression:"showCoordinates"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showCoordinates)?e._i(e.showCoordinates,null)>-1:e.showCoordinates},on:{change:function(t){var a=e.showCoordinates,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showCoordinates=a.concat([null])):n>-1&&(e.showCoordinates=a.slice(0,n).concat(a.slice(n+1)))}else e.showCoordinates=i}}}),e._v(" Show coordinates")])])]),e._v(" "),a("div",{staticClass:"coloredMoves-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.coloredMoves,expression:"coloredMoves"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.coloredMoves)?e._i(e.coloredMoves,null)>-1:e.coloredMoves},on:{change:function(t){var a=e.coloredMoves,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.coloredMoves=a.concat([null])):n>-1&&(e.coloredMoves=a.slice(0,n).concat(a.slice(n+1)))}else e.coloredMoves=i}}}),e._v(" Colored move list")])])]),e._v(" "),a("div",{staticClass:"coloredSan-setting",attrs:{tooltip:"Shortcut: M"}},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.coloredSan,expression:"coloredSan"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.coloredSan)?e._i(e.coloredSan,null)>-1:e.coloredSan},on:{change:function(t){var a=e.coloredSan,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.coloredSan=a.concat([null])):n>-1&&(e.coloredSan=a.slice(0,n).concat(a.slice(n+1)))}else e.coloredSan=i}}}),e._v(" Colored moves")])])]),e._v(" "),a("div",{staticClass:"altColorScheme-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.altColorScheme,expression:"altColorScheme"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.altColorScheme)?e._i(e.altColorScheme,null)>-1:e.altColorScheme},on:{change:function(t){var a=e.altColorScheme,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.altColorScheme=a.concat([null])):n>-1&&(e.altColorScheme=a.slice(0,n).concat(a.slice(n+1)))}else e.altColorScheme=i}}}),e._v(" Neon colors (Colorblind)")])])]),e._v(" "),a("div",{staticClass:"blackAndWhite-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.blackAndWhite,expression:"blackAndWhite"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.blackAndWhite)?e._i(e.blackAndWhite,null)>-1:e.blackAndWhite},on:{change:function(t){var a=e.blackAndWhite,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.blackAndWhite=a.concat([null])):n>-1&&(e.blackAndWhite=a.slice(0,n).concat(a.slice(n+1)))}else e.blackAndWhite=i}}}),e._v(" B&W pieces (Colorblind)")])])]),e._v(" "),a("div",{staticClass:"streaming-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.streaming,expression:"streaming"}],attrs:{type:"checkbox",tooltip:"Enable this setting while live-streaming. "},domProps:{checked:Array.isArray(e.streaming)?e._i(e.streaming,null)>-1:e.streaming},on:{change:function(t){var a=e.streaming,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.streaming=a.concat([null])):n>-1&&(e.streaming=a.slice(0,n).concat(a.slice(n+1)))}else e.streaming=i}}}),e._v(" Optimize for live-streaming")])])]),e._v(" "),a("div",{staticClass:"premove-setting"},[a("label",[a("h3",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.premove,expression:"premove"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.premove)?e._i(e.premove,null)>-1:e.premove},on:{change:function(t){var a=e.premove,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.premove=a.concat([null])):n>-1&&(e.premove=a.slice(0,n).concat(a.slice(n+1)))}else e.premove=i}}}),e._v(" Enable premove")])])])]),e._v(" "),a("td",{attrs:{valign:"top"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"transparency-setting"},[a("h3",[e._v("\n                Panel transparency\n                "),a("vue-slider",e._b({ref:"transparencySlider",on:{callback:e.saveTransparecySetting},model:{value:e.transparencySliderDetails.value,callback:function(t){e.$set(e.transparencySliderDetails,"value",t)},expression:"transparencySliderDetails.value"}},"vue-slider",e.transparencySliderDetails,!1))],1)]),e._v(" "),a("div",{staticClass:"speed-setting"},[a("h3",[e._v("\n                Move animation\n                "),a("vue-slider",e._b({ref:"speedSlider",on:{callback:e.saveSpeedSetting},model:{value:e.speedSliderDetails.value,callback:function(t){e.$set(e.speedSliderDetails,"value",t)},expression:"speedSliderDetails.value"}},"vue-slider",e.speedSliderDetails,!1))],1),e._v(" "),a("div",{staticStyle:{float:"left",cursor:"pointer"},on:{click:function(t){e.saveSpeedSetting(0)}}},[e._v("Fast")]),e._v(" "),a("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:function(t){e.saveSpeedSetting(1e3)}}},[e._v("Slow")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"sound-setting"},[a("h3",[e._v("\n                Sound volume\n                "),a("vue-slider",e._b({ref:"soundSlider",on:{callback:e.saveSoundSetting},model:{value:e.soundSliderDetails.value,callback:function(t){e.$set(e.soundSliderDetails,"value",t)},expression:"soundSliderDetails.value"}},"vue-slider",e.soundSliderDetails,!1))],1),e._v(" "),a("div",{staticStyle:{float:"left",cursor:"pointer"},on:{click:function(t){e.saveSoundSetting(0)}}},[e._v("Off")]),e._v(" "),a("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:function(t){e.saveSoundSetting(100)}}},[e._v("Max")])])])])])]):e._e(),e._v(" "),a("div",{staticClass:"modal-foot"},[a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.closeSettingsModal(t)}}},[a("span",[e._v("Done")])])],1)])],1)],1)],1)},i=[]},Cp3r:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"type-filter"},[a("select",{domProps:{value:e.value},on:{change:e.onchange}},e._l(e.options,function(t){return a("option",{key:t.label,domProps:{value:t.value}},[e._v(e._s(t.label))])})),e._v(" "),a("icon-font",{staticClass:"select-arrow",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"caret-down"}})],1)},i=[]},D4XJ:function(e,t){e.exports={component:"component_3rsXe-qo"}},D5L7:function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s),n=a("BO1k"),r=a.n(n),o=a("fZjL"),l=a.n(o),c=a("3/ZL"),u=a("qP1x");t.a={components:{FormInput:c.a,IconFont:u.a},data:function(){return{muted:{},usernames:{},showMuteBox:!1,showObserversBox:!1,mouseoutTimer:null,forceRefresh:1,mouseOverMsg:!1,showOpponentChat:!1,prevNumMsgs:0,chatHeight:"100px",observerTop:"100px"}},computed:{colorNames:function(){return this.$store.getters.settings.altColorScheme?this.board.b.altColorNames:this.board.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},seat:function(){return this.$store.getters.seat},board:function(){return this.$store.getters.board},game:function(){return this.$store.getters.game},isPremium:function(){return window.context.user.isPremium},userIsAdmin:function(){return this.$store.getters.userIsAdmin},gameNr:function(){return this.game.gameNr},messages:function(){return this.game.chat?this.game.chat:[]},observers:function(){return this.$store.getters.observers},numObservers:function(){return l()(this.observers).length},playersMuted:function(){if(this.forceRefresh)for(var e in this.muted)if(this.muted[e])return!0},showMsgsToAdmin:function(){return!this.game.isLiveGame&&this.userIsAdmin&&"teams"===this.game.gameType&&new Date(this.game.date).getTime()+60*(this.game.duration+10)*1e3<Date.now()}},watch:{gameNr:function(e){if(e){var t=localStorage.getItem("muted_"+this.gameNr);t?this.muted=JSON.parse(t):this.initMuted(),this.showMuteBox=!1,this.showObserversBox=!1,this.forceUpdate()}},messages:function(e){var t=this,a=this.messages.length;if(setTimeout(function(){if(t.messages[a-1]&&t.board.b.getChatScrollAmount()<100){var e=t.$el.querySelector(".chat-stream-f");e.scrollTop=e.scrollHeight}},30),this.prevNumMsgs!==a){if(this.prevNumMsgs+1===a){var s=this.messages[a-1],i=s.playerId?s.playerId:0;0===i&&(s.username="Info"),this.muted[i]||(this.muted[i]=!1,this.usernames[i]=s.username)}else{var n=!0,o=!1,l=void 0;try{for(var c,u=r()(this.messages);!(n=(c=u.next()).done);n=!0){var h=c.value;h.playerId||(h.playerId=0,h.username="Info"),this.usernames[h.playerId]=h.username,this.muted[h.playerId]||(this.muted[h.playerId]=!1)}}catch(e){o=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}}this.prevNumMsgs=a,this.forceUpdate()}}},updated:function(){this.setChatHeight()},mounted:function(){var e=this;this.board.b.forceChatUpdate=this.forceUpdate,this.$bus.$on("toggleMute",this.toggleMute),window.addEventListener("resize",this.setChatHeight),this.$options.sockets.chat_message_deleted=function(t){for(var a=0;a<e.messages.length;a++){var s=e.messages[a];if(s.playerId===t.playerId&&s.date===t.date)return void e.game.chat.splice(a,1)}}},methods:{setChatHeight:function(){var e=this.board.b.calcTabHeight(!0),t=e-19;this.chatHeight=t+"px";var a=106+e+(this.game.isLiveGame?-50:0);this.observerTop="calc(100vh - "+a+"px)"},getUserUrl:function(e){return"https://chess.com/member/"+e.username},hideMute:function(e){var t=this;clearTimeout(this.mouseoutTimer),this.mouseoutTimer=setTimeout(function(){t.showMuteBox=!1},400)},hideObservers:function(e){var t=this;clearTimeout(this.mouseoutTimer),this.mouseoutTimer=setTimeout(function(){t.showObserversBox=!1},400)},messageTitle:function(e){var t="";return e.fullMoveNr&&(t+="("+e.fullMoveNr+"..) "),e.date&&(t+=this.ts2datetime(e.date,!0)),t},msgHover:function(e,t){this.mouseOverMsg=!!t&&e},mute:function(e){e&&e.uid&&(this.usernames[e.uid]=e.username,this.toggleMute(e.uid))},initMuted:function(){this.muted={0:!1},this.usernames={0:"Info"};var e=!0,t=!1,a=void 0;try{for(var s,i=r()(this.messages);!(e=(s=i.next()).done);e=!0){var n=s.value;n.playerId&&(this.muted[n.playerId]=!1,this.usernames[n.playerId]=n.username)}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}},sendMessage:function(e){if(e=e.trim(),this.gameNr){if(!this.userIsAdmin&&e&&e.length>300)return this.$store.commit("showNotification","Your message is too long. 300 characters max."),void setTimeout(function(){document.getElementById("chat-message-input").value=e},100);if(e&&e.length>0){if(Date.now()<new Date(this.$store.getters.userChatban).getTime())return this.messageVal="",this.$store.commit("showNotification","Sorry, you're not allowed to chat.<br/>Until: "+this.ts2datetime(this.$store.getters.userPlayban)+"<br/>Reason: "+this.$store.getters.userBanReason),void this.$bus.emit("showBanInfo");var t=this.game.moves.length;this.$socket.emit("game",{action:"chat-message",gameNr:this.gameNr,message:this.filter(e),seat:this.seat,fullMoveNr:this.game.isLiveGame&&t?this.game.moves[t-1].fullMoveNr:void 0,uid:window.context.user.id})}this.messageVal="";var a=this.$el.querySelector(".chat-stream-f");a.scrollTop=a.scrollHeight}},showMute:function(e){clearTimeout(this.mouseoutTimer),this.showMuteBox=!0},showObservers:function(e){this.showMuteBox||(clearTimeout(this.mouseoutTimer),this.showObserversBox=!0)},toggleMuteBox:function(){this.showMuteBox=!this.showMuteBox,this.showMuteBox&&(this.showObserversBox=!1)},msgDeletable:function(e){return!!(this.userIsAdmin&&e.playerId&&e.date)&&(!this.game.rated||!this.$store.getters.isPlaying)},deleteMsg:function(e,t){this.$socket.emit("game",{action:"delete-message",gameNr:this.gameNr,playerId:e.playerId,date:e.date,uid:window.context.user.id})},toggleMute:function(e,t){this.muted[e]=void 0!==t?t:!this.muted[e],void 0===t?this.updateMute():this.forceUpdate()},solo:function(e){if(this.muted[e])for(var t in this.muted)this.muted[t]=t!==e;else for(var a in this.muted)this.muted[a]=a===e;this.updateMute()},updateMute:function(){this.playersMuted?localStorage.setItem("muted_"+this.gameNr,i()(this.muted)):localStorage.removeItem("muted_"+this.gameNr),this.$bus.emit("updateMute"),this.forceUpdate()},getSeat:function(e){if(e)for(var t=[0,1,2,3],a=0;a<t.length;a++){var s=t[a];if(parseInt(e)===parseInt(this.game.players[s].playerId))return s}},muteColor:function(e){var t=this.getSeat(e);return void 0!==t?this.colors[t]:""},muteTheme:function(e){var t=this.getSeat(e);return void 0!==t?this.colors[t]:"neutral"},forceUpdate:function(){this.forceRefresh=0,this.forceRefresh++},ts2datetime:function(e,t){var a=new Date(e),s=a.toLocaleString("en-us",{month:"short"})+" "+a.getDate()+", "+a.getFullYear();return s+=" "+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()),t&&(s+=":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())),s},joinGame:function(e){this.$store.getters.isPlaying||this.$store.commit("joinGame",e)},filter:function(e){return e.replace(/\b(sh!t|f[. ]?u[. ]?c[. ]?k|phuq|f u|\S*b00b\S*|f.?u.?c.?k|fu|\S*bastard\S*|\S*biatch\S*|\S*bitch\S*|\S*blowjob\S*|\S*blumpkin\S*|\S*c0ck\S*|\S*Connard\S*|coon|\S*coño\S*|\S*cunt\S*|\S*dildo\S*|foking?|fuking?|\S*fcker\S*|\S*fuck\S*|\S*gangbang\S*|\S*golliwog\S*|\S*jackass\S*|\S*jackoff\S*|\S*n1gg\S*|\S*nigg\S*|\S*pedofile\S*|\S*pedophile\S*|\S*poontang\S*|\S*pussy\S*|\S*queef\S*|\S*rimjob\S*|anal|anus|arrse|arse|arse-kisser\S*|arse-nugget\S*|arse-wipe\S*|arsehat\S*|arsehold|arsehole\S*|arsemaster\S*|arsewipe\S*|ass|ass-kisser\S*|ass-nugget\S*|ass-wipe\S*|asshat|asshole\S*|assmaster\S*|asswipe\S*|azz|bellend|boiolas|bollocks|boner|boob|boobs|branlette|buceta|bukkake|bullshit|butthole|buttmunch|buttplug|cameltoe|carpetmuncher|cawk|chesticle|chinc|chink|choad|chode|cl1t|clit|clitface|cock|cockface\S*|cockm\S*|cockring\S*|cocks\S*|cokmuncher\S*|coksucka\S*|coksucker\S*|coochie|coochy|culo|cumguzzler\S*|cumjockey\S*|cummer|cumming|cums|cumshot\S*|cumslut\S*|cumtart\S*|cunilingus|cunillingus|cunnilingus|d1ck\S*|dick|dickb\S*|dicked|dickh\S*|dickm\S*|dicksneeze|sнit|dipshit|donkeyribber|dumbarse\S*|dumbass|dumbshit|fack|fag|fagbag\S*|fagg\S*|fagot\S*|fagtard\S*|fagz\S*|fannyflap\S*|fcuc\S*|fcuk\S*|felch|felching|fellate|fellatio|feltch|fuc|fuk|fukin|fukk\S*|fuq|fvck\S*|fvk|fvkin|fvkking|gago|gayass\S*|gaybob\S*|gaydo\S*|gaylord\S*|gaysex\S*|gaytard\S*|gaywad\S*|gook|handjob|hard-on|hardcoresex|hardon|homo|homodumbshit|hotsex|jackarse\S*|jagoff|jism|jizm|jizz|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|koon|kum|kumm\S*|kums|kunilingus|kunt|lesbo|m0f0|m0fo|madarchod|maricón|masterbat\S*|mierda+|minge|mo-fo|mofo|muff|n1gger|n1gg3r|nig|niga|niglet|omfg|orgies|orgy|p0rn\S*|paedo|pakq|penis|phuck\S*|piss|poonan\S*|poosies|pootang|porn\S*|potang|punann\S*|putain|puto|puzzy|pédé|queerbait|queerhole|rape|raped|rapes|rimming|salaud|salsal|schlong|scroat|scrote|sh1t\S*|shit\S*|skeet|sodom|spastic\S*|spick|spunk|tits|twat|twatlip\S*|twats|twatwaffle\S*|twatz|va-j-j\S*|vag|vagina|vajayjay\S*|violé|vjayjay\S*|wank\S*|whore|ибали|нахуй|ебаную|уебище|bastardo|bollera|cabron|cabrona|cabronazo|cabrón|capulla|capullo|chichi|chocho|cojon|cojones|cojón|comepollas|cono|coño|culo|follar|follen|furcia|gilipollas|hijaputa|hijoputa|hijo de puta+|imbecil\S*|hostia|joder|jodete|joputa|Joto|jódete|mamada|mamon|mamona|mamón|marica|maricon|maricona|mariconazo|Maricón|maricón|mierda+|ojete|ostia|pajillero|Pendejo|pendon|pendón|Perra|picha|polla|pollon|pollón|potorro|putos?|puton|putón|tortillera|zorron|zorrón|Хуй|Пизда|Ебать|Блядь|ебануть|ебануться|ебаться|ебиздить|ёбнуть|ёбнуться|ебстись|въебать|выебать|выёбываться|доебать|доебаться|доёбывать|заебать|заебаться|наебать|наебаться|наебнуть|наебнуться|объебать|объебаться|остоебенить|остоебеть|отъебать|отъебаться|переебать|переебаться|поебать|поебаться|подъебать|подъебаться|подъебнуть|разъебать|разъебаться|съебать|съебаться|уебать|долбоёб|ёбарь|ебатура|ебальник|заёб|мудоёб|поебон|ебливый|приёбливый|поёбанный|сука|мудак|манда|arschfotze|arschgeige|arschgesicht|arschloch|fotze|bulle|furz|depp|möpse|drecksau|bastard|fick|muschi|sackgesicht|kackbratze|hurensohn|trottel|dummbatz|schlampe|dummkopf|fettbacke|fotze|hirnlos|kack|luder|stricher|miststück|muterfiker|mutterficker|onanieren|pisser|scheissen|scheißhaus|schise|schlampe|schwanz|schwanzlutscher|schweinepriester|schwuchtel|schwul|schwuler|scheisse|scheiße|scheise|trottel|fick|ficken|jude|nsdap|dreck|wichser|wixer|wixen|bums|arschloch|arsch|schwanz|fotze|hure|schlampe|titten|fotz|hitler|heil|opfer|kurac|курац|picka|picku|pičk\S*|пичк\S*|jebanje|јебање|јебати|\S*jebati|jebeš|јебеш|\S*pizda\S*|пизда|пиздо|djubre|ђубре|đubre|smradu|смраду|sranje|срање|drka\S*|дрка\S*|govno|говно|retardiran|ретардиран|prostitutk\S*|проститутка|šupak|шупак|droljo|drolja|дрољ\S*|seronja|seronjo|сероњ\S*|abortus|achterlijk|bosneger|debiel|etterbak|flikker|godver|godverju|hoertje|homofiel|huppelkut|kakker|kanker|kankeren|kankerjoch|kankerlyer|klerelijer|klojo|klootzak|lijer|lulhannes|makak|makakken|mongool|mongolen|neger|negerin|neuk|neuken|nikker|nsber|ouwehoeren|paardelul|pleuris|poep|poepen|pokke|pokkelijer|pokkelyer|pokken|pokkenlyer|roetmop|rotzak|sloerie|spleetoog|stoephoer|stront|sukkel|tering|teringlyer|tiet|tieten|tietjes|tyfus|tyfuslijer|tyfuslyer|verdomme|vetzak|zakkewassr|zandnege|madarchod|badir|badirchand|bakland|bhandava|chinaal|chutia|chutiya|choo-tia|chutan|ghasti|gashti|gasti|ghassad|haraami|hijda|hijra|kutta|kuttiya|khota|najayaz|uatt|gago|pakq|salsal)\b/gi,"****")}}}},DwL6:function(e,t,a){"use strict";t.a={name:"ModalContent"}},EIbF:function(e,t){e.exports={icon:"icon_1L2UuODE_1"}},EaT3:function(e,t,a){"use strict";t.a={props:{from:"",to:"",color:"",seat:void 0,squareSize:0},data:function(){return{opacity:1,colorPosition:{red:0,blue:1,yellow:2,green:3,"red-alt":0,"blue-alt":1,"yellow-alt":2,"green-alt":3}}},computed:{board:function(){return this.$store.getters.board},transparentArrows:function(){return this.$store.getters.settings.transparentArrows},colorcode:function(){return this.board.b.colors[this.colorPosition[this.color]]}},watch:{transparentArrows:function(e){this.opacity=e?.67:1,this.from===this.to?this.$refs.circle.style.opacity=this.opacity:this.$refs.arrow.style.opacity=this.opacity}},mounted:function(){if(this.from&&this.to){this.opacity=this.transparentArrows?.67:1;var e=this.board.b.getSquareOffset(this.from),t=this.board.b.getSquareOffset(this.to),a=e[0],s=e[1],i=t[0],n=t[1],r=this.color?this.colorcode:"rgba(46, 40, 38, 1)";if(this.from!==this.to){var o=Math.floor(Math.sqrt(Math.pow(i-a,2)+Math.pow(n-s,2))),l=(s-n)/(i-a),c=-1*Math.atan(l)*(180/Math.PI)+270;a>i&&(c+=180);var u="rotate("+c+"deg)";this.$refs.arrow.style.left=a+"px",this.$refs.arrow.style.top=s+"px",this.$refs.arrow.style.height=o+"px",this.$refs.arrow.style.transform=u,this.$refs.arrow.style.opacity=this.opacity,this.$refs.arrow.style["-ms-transform"]=u,this.$refs.arrow.style["-webkit-transform"]=u;var h=this.squareSize/7+"px",d=-this.squareSize/14+"px",m="calc(100% - "+this.squareSize/1.44+"px)";this.$refs.arrowStem.style.width=h,this.$refs.arrowStem.style.height=m,this.$refs.arrowStem.style.transform="translateY("+this.squareSize/4+"px)",this.$refs.arrowStem.style["margin-left"]=d,this.$refs.arrowStem.style["background-color"]=r;var p=Math.round(this.squareSize/4.4),v=Math.round(this.squareSize/3.4),f=Math.round(-this.squareSize/4.4);this.$refs.arrowHead.style.transform="translateY(-"+this.squareSize/6+"px)",this.$refs.arrowHead.style["margin-left"]=f+"px",this.$refs.arrowHead.style["border-top"]=v+"px solid "+r,this.$refs.arrowHead.style["border-left"]=p+"px solid transparent",this.$refs.arrowHead.style["border-right"]=p+"px solid transparent"}else{this.$refs.circle.style.left=a-this.squareSize/2+"px",this.$refs.circle.style.top=s-this.squareSize/2+"px",this.$refs.circle.style.width=this.squareSize+"px",this.$refs.circle.style.height=this.squareSize+"px",this.$refs.circle.style.opacity=this.opacity;var g=this.squareSize/10+"px";this.$refs.circle.style.border=g+" solid "+r}}}}},Ec8i:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"section-title",class:[t.$style.component,(e={},e[t.$style.link]=t.link,e)]},[s("div",{class:t.$style.left},[s("icon-font",{class:t.$style.icon,attrs:{family:"chess",theme:"primary",name:t.icon}}),t._v(" "),s("span",{class:t.$style.name},[t._v(t._s(t.name))])],1),t._v(" "),s("span",{class:t.$style.rightname},[t._v(t._s(t.rightname))]),t._v(" "),t.link?s("div",{class:t.$style.right},[s("icon-font",{class:t.$style.chevron,attrs:{family:"chess",name:"chevron-right",theme:"primary"}})],1):t._e()])},i=[]},EkJH:function(e,t){},"Esv/":function(e,t,a){"use strict";var s=a("yFHP"),i=a("wLAW"),n=a("XyMi");var r=function(e){a("WL/1"),this.$style=a("emQV")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-cb0b1ba2",null);t.a=o.exports},FLbv:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;this._self._c;return this._m(0)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"banned"},[t("h3",[this._v("This account has been banned from playing 4 player chess.")]),this._v(" "),t("h3",[this._v("If you believe this ban was made in error, please submit a bug report from the Help menu in the bottom left.")])])}]},G19B:function(e,t,a){"use strict";var s=a("fQSn"),i=a("7eiA"),n=a("XyMi");var r=function(e){a("bw8k"),this.$style=a("6a66")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-79f2538b",null);t.a=o.exports},GJgP:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"section-content",class:this.$style.component},[this._t("default")],2)},i=[]},GP0e:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.container},[e.enableGenButton?a("button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{float:"right",width:"20px"},on:{click:e.randooo}}):e._e(),e._v(" "),e.lookingForGame||this.$store.getters.showGameOverModal?e._e():a("div",{staticClass:"play-button",style:{opacity:e.mainScreen?1:.8}},[a("form-button",{staticClass:"new-game-btn",attrs:{size:"large",theme:e.mainScreen?"primary":"dark-alternate"},nativeOn:{click:function(t){return e.showPlayModal(t)}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"secondary",name:"plus"}}),e._v(" "),e.mainScreen?a("span",[e._v("New Game")]):e._e()],1)],1),e._v(" "),e.lookingForGame?a("div",{staticClass:"cancel-button",style:{opacity:!e.mainScreen||e.$store.getters.showSettingsModal?.8:1}},[a("form-button",{staticClass:"cancel-game-btn",attrs:{size:"large",theme:"dark-alternate"},nativeOn:{click:function(t){return e.cancelLookingForGame(t)}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"}}),e._v("\n      Cancel\n    ")],1)],1):e._e()])},i=[]},GVU4:function(e,t){window.svgStart='<svg id="grey" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 180">',window.svgEnd="</svg>",window.pawnSvg='<defs><style>.cls-1{fill:none;}.cls-2{fill:___COLORCODE___;}.cls-3,.cls-4{opacity:0.2;}.cls-4{fill:#fff;}.cls-5{fill:#1a1a1a;}</style></defs><title>p</title><rect class="cls-1" width="180" height="180"/><path class="cls-2" d="M89.94,41.92a23,23,0,0,0-14.24,41L63.79,90.75l-.9.59v1.08a12.17,12.17,0,0,0,2,6.93l.39.72.57,1.05H77.13c-.49,5.61-2,19.66-20,31-8,5-12.66,14.66-12.66,26.36v2h91v-2c0-11.7-4.62-21.31-12.67-26.36-17.94-11.28-19.5-25.36-20-31H114l.57-1.05.39-.72a12.17,12.17,0,0,0,2-6.93V91.34l-.9-.59-11.91-7.86a23,23,0,0,0-14.24-41Z"/><path class="cls-3" d="M115.16,127.11c-10.76-7.52-11.49-22.19-12.18-25.54l10.85,0,3.87-9s-11.41-9.29-17-9.46l2.75,0s8.21-6.84,8.92-12.88C115.25,46.21,96.3,43,96.3,43c8.58,4.29,15.07,18.92,7.34,29.82C98.12,80.61,87.34,83,87.34,83h13.3c.16.14,9.38,10-.1,16.16H65.12l.45,2.5,11.45,0S90.26,115,101.23,125.37c10.53,9.93,26.51,11.31,26.51,11.31S120.63,130.94,115.16,127.11Z"/><path class="cls-4" d="M75,92.42C75.6,88,79.14,83,79.24,83L62.47,92.42Z"/><path class="cls-4" d="M92.05,44c-8,.72-20.82,10.3-22.32,30,0,0-8.08-11.62,3.06-24.45C81.56,39.5,92.05,44,92.05,44Z"/><path class="cls-4" d="M46.45,158.45C50.8,144.15,57,142.3,68.3,134c7.54-5.48,8.55-22,8.55-22,.18-.86-3.84,6.67-8.12,10.4-1.41,1.22-11,7.84-15.07,12.17C46.55,142.07,45.61,161.19,46.45,158.45Z"/><path class="cls-5" d="M89.94,43.92a21,21,0,0,1,11.79,38.29l-1.09.75L115,92.42c0,3.06-.72,4-2.15,6.7h-12.3l.1,1c.49,4.57.8,20.93,21.06,33.66,7.45,4.68,11.73,13.68,11.73,24.67h-87c0-11,4.27-20,11.73-24.67,20.3-12.76,20.58-29.1,21.06-33.66l.1-1H67c-1.42-2.65-2.15-3.64-2.15-6.7L79.24,83l-1.09-.74a21,21,0,0,1,11.79-38.3m0-4A25,25,0,0,0,72.42,82.66l-9.73,6.42-1.8,1.19v2.15a14.13,14.13,0,0,0,2.24,7.89l.39.71,1.13,2.1H74.88c-2.49,17-14.27,24.41-18.83,27.27-8.65,5.43-13.6,15.66-13.6,28.06v4h95v-4c0-12.4-5-22.63-13.6-28.06-15.11-9.49-18-21-18.86-27.27h10.26l1.13-2.1.39-.71A14.13,14.13,0,0,0,119,92.42V90.27l-1.8-1.19-9.73-6.42A25,25,0,0,0,89.94,39.92Z"/>',window.knightSvg='<defs><style>.cls-1{fill:none;}.cls-2{fill:___COLORCODE___;}.cls-3,.cls-5{fill:#fff;}.cls-3,.cls-4{opacity:0.2;}.cls-6{fill:#1a1a1a;}</style></defs><title>n</title><rect class="cls-1" width="180" height="180"/><path class="cls-2" d="M73.07,20.25h-.83c-2.72,0-5.43,2.48-6.16,5.64l-1.45,6.88c-1.32,3.14-3.54,5.36-7.13,8.32a19.11,19.11,0,0,0-6.06,8.69l-.17.42c-.9,2.29-1.56,4.3-2.16,6.07A43.59,43.59,0,0,1,43,69.12L31.37,85.5c-3.62,4.51-3.22,10.76.92,14.27s14.4,6.3,17.9,6.3a3.37,3.37,0,0,0,2.42-.78,24.78,24.78,0,0,0,3.7-4.85c2.31-3.6,4-6.2,9.93-6.23,8.73,0,16.28-7.95,19.91-11.76l0,0,0,0,2.18-2.52c1.46,2.33,3.14,6.13,2,10.11a16.46,16.46,0,0,1-2.3,4.79,40.35,40.35,0,0,1-8,8l-.19.16c-7.52,6.08-20,16.15-22.08,30.28-13.33,3.64-13.3,12.93-13.27,23.62v3.61H146.1v-3.6c0-10.69.06-20-13.28-23.63.41-1.59,1-3.64,1.64-5.9,2.63-9.24,6.24-21.9,6.24-30.2,0-19.56-6.19-36-17.89-47.47A59,59,0,0,0,86.05,33.21L73.66,20.84l-.59-.59Z"/><path class="cls-3" d="M95.71,138.41c43.07,0,47.54,4.75,47.54,4.75h.59c-1.93-10.18-24.49-11.3-24.49-11.3H72.24s-23.36.81-24.66,11.3h.59S52.64,138.41,95.71,138.41Z"/><g class="cls-4"><path class="cls-5" d="M69.64,40.21c8.06-5,2.6-18,2.6-18a5,5,0,0,0-5,4l-1.46,6.92c-1.41,3.38-3.71,5.7-7.46,8.8a18,18,0,0,0-5.76,8.26l-.16.42c-.89,2.26-1.52,4.17-2.14,6a44.74,44.74,0,0,1-6.22,13.1L32.42,86.14c-.15.15-.3.31-.44.47a6,6,0,0,0-1,7.74S50,70.9,52.49,67.61C57,61.63,54.16,49.84,69.64,40.21Z"/></g><path class="cls-6" d="M70.78,49.77c-5.23,2.14-6.64,11.09-6.64,11.09,5.08-4.42,7.53.65,12.59-3.36C81,54.16,75.9,47.67,70.78,49.77Z"/><path class="cls-4" d="M94.87,66.07c-1.82,3.49-6.33,10.57-6.33,10.57s-.47,1.43-1.05,3.46c0,0,2.08-.23,2.47,6.39.1,1.72.93,7.76,2,5.18C95,84.23,97.14,75.23,97.1,72.18S96.68,62.58,94.87,66.07Z"/><path class="cls-4" d="M85.17,35.15S126,40.22,126,79.26c0,26.14-17.38,33.44-22,51,0,0,19.33.15,27.88,4.19,0,0,9.18-24.84,9.18-39.56C141.05,79.83,129.61,34,85.17,35.15Z"/><path class="cls-4" d="M70.12,92.2c-9.11-4.47-11.41-9.79-14.91.72-3.4,10.18-8.55,11.93-5.09,13s7.74-10.45,10.77-10.64S73.53,93.87,70.12,92.2Z"/><path class="cls-6" d="M72.24,22.25l12.93,12.9c25.26,1.71,53.53,20.1,53.53,62,0,11.12-7,31.49-8.29,37.57,14.39,3.05,13.69,11.63,13.69,23.76H46.54c0-12-.68-20.47,13.08-23.63C61,120.66,74,110.31,81.34,104.33a41.62,41.62,0,0,0,8.41-8.44,18.34,18.34,0,0,0,2.57-5.37c1.82-6.37-2.3-12.09-3.78-13.88l-3.83,4.43C80.85,85.12,74,92.18,66.23,92.21c-10.05.05-10.29,7.09-15,11.65a1.69,1.69,0,0,1-1,.21c-3.27,0-12.92-2.68-16.61-5.82-3.22-2.74-3.64-7.82-.62-11.54l11.7-16.46c5.23-7.6,5.46-11.65,8.48-19.32a17.36,17.36,0,0,1,5.64-8.3c3.81-3.15,6.28-5.61,7.77-9.27l1.48-7c.5-2.16,2.39-4.09,4.21-4.09m1.66-4H72.24c-3.68,0-7.16,3.09-8.11,7.19v.08l-1.39,6.64c-1.18,2.68-3.14,4.62-6.49,7.39a20.82,20.82,0,0,0-6.66,9.51l-.16.41c-.92,2.34-1.6,4.37-2.19,6.17A41.6,41.6,0,0,1,41.38,68L29.77,84.3C25.52,89.65,26,97.09,31,101.3c4.6,3.91,15.36,6.77,19.2,6.77A5.36,5.36,0,0,0,54,106.73a27.63,27.63,0,0,0,4-5.21c2.18-3.41,3.38-5.28,8.25-5.31,9.58,0,17.53-8.37,21.35-12.38l.07-.07.06-.07L88,83.4a9.35,9.35,0,0,1,.49,6,14.14,14.14,0,0,1-2,4.21,38.38,38.38,0,0,1-7.63,7.59l-.19.16c-7.53,6.1-19.83,16.06-22.58,30.27-5.78,1.84-9.58,5-11.57,9.54s-2,9.68-1.94,15.66v5.6H148.1v-5.6c0-6.07,0-11.32-2-15.88-2-4.32-5.44-7.28-10.8-9.1.33-1.2.71-2.56,1.13-4,2.66-9.36,6.31-22.17,6.31-30.75C142.7,55,115,33.84,87,31.28L75.07,19.42,73.9,18.25Z"/><path class="cls-6" d="M95.71,132.41a252.5,252.5,0,0,1,31.36,1.65,43.67,43.67,0,0,1,5.17,1l.66-4a46.29,46.29,0,0,0-5.32-1,254.17,254.17,0,0,0-31.87-1.69h0a254,254,0,0,0-31.86,1.69,47,47,0,0,0-5.58,1l.82,3.91a42.8,42.8,0,0,1,5.26-1A252.6,252.6,0,0,1,95.71,132.41Z"/>',window.bishopSvg='<defs><style>.cls-1{fill:none;}.cls-2{fill:___COLORCODE___;}.cls-3,.cls-4{opacity:0.2;}.cls-4{fill:#fff;}.cls-5{fill:#1a1a1a;}</style></defs><title>b</title><rect class="cls-1" width="180" height="180"/><path class="cls-2" d="M87.82,16.94a12.94,12.94,0,0,0-9.5,21.73A107,107,0,0,0,63.84,52.91C53,65.83,47.3,79.41,47.3,92.18c0,20.8,9.43,33.35,16.42,39.19-2.32.21-4.52.44-6.63.71-19.24,2.45-19.21,12.78-19.18,24.74v3.63H139.48v-3.63c0-12,.06-22.29-19.17-24.74-2.11-.27-4.31-.5-6.63-.71,7-5.84,16.42-18.39,16.42-39.19,0-20.46-13.49-35.94-22.13-44.54l-1.82-1.82L104.84,48c-1.5,2.53-8.82,14.46-9.13,44.61H82c.48-45,18-62,18.18-62.16l.65-.65-.07-.91a13,13,0,0,0-12.9-12Z"/><path class="cls-3" d="M115.68,57.6c22.72,55.13-27.07,71.83-27.07,71.83l25.07,1.94c-2.44,1.85,16-5.24,16-41.36A43.76,43.76,0,0,0,115.68,57.6Z"/><path class="cls-4" d="M81.45,38.77c-2.67-1.22-28.61,20.58-32.9,42.92-4,20.81,3.2,26.56,2.77,26.39,0-.13,2.78-45.8,32.83-68.11C84.15,40,83,39.47,81.45,38.77Z"/><path class="cls-4" d="M89.65,18.84c-4.34.39-11.78,6.67-12.4,15.35,0,0-6-5.57.06-12.49C82.05,16.24,89.65,18.84,89.65,18.84Z"/><path class="cls-4" d="M88.7,138.41c43.07,0,47.54,4.75,47.54,4.75h.59c-1.93-10.18-24.5-11.3-24.5-11.3H65.23s-23.36.81-24.66,11.3h.59S45.63,138.41,88.7,138.41Z"/><path class="cls-3" d="M86.73,57c1.84-5.06,14.08-29,14.08-29l-5.54-9.19-2.87.06c9.19,11.26-18,37-18,56.43,0,5.69,1.39,17.22,5.53,19.31C80,94.65,82.91,67.54,86.73,57Z"/><path class="cls-5" d="M87.82,18.94A10.94,10.94,0,0,1,98.73,29.07S80,46.81,80,94.65H97.7c0-29.93,7-42.36,8.86-45.59,9.46,9.42,21.54,24,21.54,43.12,0,26.23-15.31,38.41-20.33,40.76,4.33.27,8.43.63,12.29,1.12,18.25,2.33,17.42,11.29,17.42,24.39H39.92c0-13.1-.83-22.06,17.42-24.39,3.85-.49,8-.85,12.29-1.12-5-2.35-20.33-14.53-20.33-40.76,0-30.08,32.15-53.41,32.15-53.41a10.94,10.94,0,0,1,6.37-19.83m0-4A14.93,14.93,0,0,0,75.54,38.37,109.36,109.36,0,0,0,62.31,51.63c-11.13,13.28-17,27.3-17,40.55,0,18.39,7.2,30.63,13.88,37.63l-2.35.29c-21,2.67-20.95,14.35-20.92,26.73v5.62H141.48v-5.62c0-12.38.07-24.06-20.92-26.73-.77-.1-1.55-.2-2.34-.28,6.68-7,13.88-19.25,13.88-37.64,0-15.71-7.43-30.74-22.72-46l-3.65-3.63L103.12,47c-5.76,9.76-9,24.78-9.38,43.63H84c.5-21.46,5-36,8.75-44.55,4.32-9.79,8.7-14.09,8.74-14.13l1.35-1.3-.12-1.88a15,15,0,0,0-14.9-13.85Z"/><path class="cls-5" d="M88.7,132.41c9,0,17.15.28,24.57.93l1.91-3.84c-7.68-.73-16.4-1.09-26.48-1.09h0c-10.19,0-19,.36-26.73,1.11l1.18,3.91C70.83,132.72,79.34,132.41,88.7,132.41Z"/>',window.rookSvg=' <defs><style>.cls-1{fill:___COLORCODE___;}.cls-2,.cls-3{fill:#fff;}.cls-2,.cls-4{opacity:0.2;}.cls-3{opacity:0.3;}.cls-5{fill:#1a1a1a;}.cls-6{fill:none;}</style></defs><title>r</title><path class="cls-1" d="M90,30.87a92.56,92.56,0,0,0-10.56.85l-1.45.2-.25,1.44L74.87,50.28H70L64.84,35.53l-.47-1.34H63a31.07,31.07,0,0,0-14.88,3.72l-1.15.62.1,1.31L48.68,60v.1c1,7.21,4.68,11.7,11.93,14.38-1,8.58-5.74,48.89-6.95,58.44-14.51,3.42-14.49,12.94-14.46,23.92v3.62H140.78v-3.62c0-11,.06-20.5-14.46-23.92-1.2-9.55-5.94-49.86-6.95-58.44,7.26-2.68,11-7.17,11.94-14.38V60L133,39.84l.11-1.31-1.15-.62A31.08,31.08,0,0,0,117,34.19h-1.41l-.47,1.34L110,50.28h-4.85l-2.87-16.92L102,31.92l-1.45-.2A92.56,92.56,0,0,0,90,30.87Z"/><path class="cls-2" d="M90,138.41c43.07,0,47.54,4.75,47.54,4.75h.59c-1.93-10.18-24.49-11.3-24.49-11.3H66.53s-23.36.81-24.66,11.3h.59S46.93,138.41,90,138.41Z"/><path class="cls-3" d="M60,34.43c-10.75,7.36-6.7,34.9-6.7,34.9-6.85-2.21-6.7-31.73-6.7-31.73S63.08,32.34,60,34.43Z"/><path class="cls-3" d="M93.18,32.26c-12,2.19-16.62,19.64-16.62,19.64.8-13,3.52-20.54,3.52-20.54S96.59,31.63,93.18,32.26Z"/><path class="cls-3" d="M125.15,35.88c-7.77,4.11-13.75,16-13.75,16-.44-4.24,5.47-19,5.47-19S128.05,34.35,125.15,35.88Z"/><path class="cls-4" d="M123.87,72.17c10.62.24,8.73-32.78,8.73-32.78l-6.36-4c-1.76,10.55-4,26.9-9.16,31.43-4.71,4.15-7.59,5.12-8.31,5.3-1.37-.17-2.83-.33-4.43-.47-14.5-1.32-35.6,2.82-35.6,2.82s21.37-1.3,32.3,12.42,12,43.37,12,43.37c7.16,1.33,12.49,2.8,12.49,2.8l-6.73-57.46S122.46,72.14,123.87,72.17Z"/><path class="cls-5" d="M140.65,140.76c-2.2-4.67-6.21-7.71-12.51-9.45-1.35-10.88-5.36-45-6.6-55.54,7.06-3,10.73-7.87,11.75-15.41v-.21L135,40l.21-2.61-2.3-1.24a33.05,33.05,0,0,0-15.84-4h-3.19l-.71,3.12-2.93,13H105l-1.74-15-.35-3-3-.49A72.25,72.25,0,0,0,90,28.87a72.06,72.06,0,0,0-9.94.88l-3,.49-.35,3L75,48.28h-5.2l-2.93-13-.71-3.12H63a33,33,0,0,0-15.83,4l-2.3,1.24L45,40l1.66,20.15v.21c1,7.54,4.68,12.39,11.75,15.41-1.24,10.54-5.26,44.66-6.6,55.54-6.31,1.74-10.32,4.78-12.51,9.45s-2.15,9.91-2.14,16.07v5.62H142.78v-5.62C142.8,150.68,142.81,145.36,140.65,140.76Zm-90-80.94L49,39.67A28.93,28.93,0,0,1,63,36.19L66.6,52.28h12L80.71,33.7A67.28,67.28,0,0,1,90,32.87a67.28,67.28,0,0,1,9.29.83l2.15,18.58h12L117,36.19A29,29,0,0,1,131,39.67l-1.66,20.15c-.77,5.74-3.29,10-10.52,12.73A234.34,234.34,0,0,0,90,70a234.67,234.67,0,0,0-28.8,2.54C54,69.84,51.45,65.56,50.67,59.82Zm11.74,16.6A231,231,0,0,1,90,74a230.47,230.47,0,0,1,27.59,2.41c1.21,10.31,4.93,41.88,6.41,54-.69-.12-1.4-.23-2.14-.32A254,254,0,0,0,90,128.41a254,254,0,0,0-31.86,1.69c-.75.09-1.45.2-2.14.32C57.48,118.3,61.2,86.73,62.41,76.42Zm76.37,82H41.22c0-11.85-.67-20.31,12.69-23.53l.34-.09,1-.21c1-.22,2.16-.4,3.37-.56A252.6,252.6,0,0,1,90,132.41a252.6,252.6,0,0,1,31.36,1.65c1.18.15,2.28.34,3.31.54l1.1.24.23,0C139.45,138.1,138.78,146.58,138.78,158.45Z"/><rect class="cls-6" width="180" height="180"/>',window.kingSvg='<defs><style>.cls-1{fill:none;}.cls-2{fill:___COLORCODE___;}.cls-3,.cls-4{fill:#fff;}.cls-3{opacity:0.3;}.cls-4,.cls-5{opacity:0.2;}.cls-6{fill:#1a1a1a;}</style></defs><title>k</title><rect class="cls-1" width="180" height="180"/><path class="cls-2" d="M149.17,61.56a31.76,31.76,0,0,0-23-9.27c-11.63,0-19.33,3.41-23.56,6.06L99.67,45.52h11.68v-18h-12v-12h-18v12h-12v18H81L78.1,58.35c-4.22-2.65-11.93-6.06-23.55-6.06a31.75,31.75,0,0,0-23,9.27c-5.87,6-9.1,14.48-9.1,23.86,0,13.61,8.68,22.27,17.08,30.65,5.17,5.15,10.49,10.46,14,17-14,3.54-13.92,13-13.9,23.79v3.6H141.13v-3.6c0-10.82.05-20.25-13.89-23.79,3.45-6.53,8.78-11.84,13.94-17,8.4-8.38,17.09-17,17.09-30.65C158.27,76,155,67.57,149.17,61.56ZM128.51,89c-.92,6.43-10.42,12.08-16.78,20.2-3.2-.21-5.17-.38-7.87-.49V83.74s8-5.71,14.43-5.71C118.29,78,130,78.44,128.51,89ZM62.49,78c6.44,0,14.43,5.71,14.43,5.71v24.92c-2.71.11-4.67.28-7.87.49C62.68,101,53.19,95.38,52.27,89,50.77,78.44,62.49,78,62.49,78Z"/><polygon class="cls-3" points="111.35 31.52 95.39 31.52 98.39 28.29 111.35 28.29 111.35 31.52"/><polygon class="cls-3" points="95.35 19.52 85.35 19.52 85.35 31.52 73.35 31.52 73.35 41.52 69.35 45.52 69.35 27.52 81.35 27.52 81.35 15.53 99.35 15.53 95.35 19.52"/><path class="cls-4" d="M90.35,138.41c43.07,0,47.54,4.75,47.54,4.75h.59c-1.94-10.18-24.5-11.3-24.5-11.3H66.88s-23.36.81-24.66,11.3h.59S47.28,138.41,90.35,138.41Z"/><path class="cls-4" d="M64.07,54.82S42.88,47.58,29.8,63.54c-18.12,22.1,2.35,43.09,2.35,43.09C18.85,82.28,33.32,53.46,64.07,54.82Z"/><path class="cls-5" d="M144.56,101.34l-29.69,29.78,12.37,1.94a96.69,96.69,0,0,1,15.24-18.69c9.87-9.5,15.77-15.91,15.77-31.56,0-11.49-5.79-16.61-10.95-20.77C147.3,62,159.81,86.09,144.56,101.34Z"/><path class="cls-6" d="M62.41,79.79a19.36,19.36,0,0,1,11.94,4.63v22.44l-4.95.28C66.81,104.05,64.29,101.4,62,99c-4.8-5-8.27-8.69-8.27-12,0-5.33,4.47-7.23,8.65-7.23m0-4c-7,0-12.65,4.06-12.65,11.23s8.81,13,17.84,24.22c0,0,8.3-.47,10.75-.57V82.61a23.74,23.74,0,0,0-15.94-6.82Z"/><path class="cls-6" d="M90.35,132.41a252.6,252.6,0,0,1,31.36,1.65,43.48,43.48,0,0,1,5.16,1l.67-4a46.89,46.89,0,0,0-5.33-1,254,254,0,0,0-31.86-1.69h0a254.29,254.29,0,0,0-31.87,1.69,47.37,47.37,0,0,0-5.58,1l.83,3.91a42.45,42.45,0,0,1,5.26-1A252.6,252.6,0,0,1,90.35,132.41Z"/><path class="cls-6" d="M97.35,17.52v12h12v14h-12l3.75,16.63a56,56,0,0,1,25.05-5.86c17.4,0,30.12,12.73,30.12,31.13,0,21.75-23.46,29.87-31.94,49.05,15.53,2.84,14.8,11.54,14.8,24H41.57c0-12.44-.74-21.14,14.8-24-8.49-19.18-31.94-27.3-31.94-49,0-18.4,12.72-31.13,30.12-31.13a58.23,58.23,0,0,1,25,5.58l3.75-16.35h-12v-14h12v-12h14m4-4h-22v12h-12v22h11L76.77,54.3a64.5,64.5,0,0,0-22.22-4c-19.77,0-34.12,14.78-34.12,35.13,0,14.44,9,23.4,17.67,32.06,4.47,4.46,9.06,9,12.36,14.37-5.23,1.78-8.67,4.62-10.67,8.74-2.26,4.63-2.24,10-2.23,16.26v5.6H143.13v-5.6c0-10.57.06-20.62-12.89-25,3.29-5.33,7.89-9.91,12.36-14.37,8.68-8.66,17.67-17.62,17.67-32.06,0-20.35-14.35-35.13-34.12-35.13a62.21,62.21,0,0,0-22.23,4.2l-1.57-7h11v-22h-12v-12Z"/><path class="cls-6" d="M118.28,79.79c4.19,0,8.65,1.9,8.65,7.23,0,3.32-3.46,7-8.26,12-2.27,2.37-4.79,5-7.38,8.11l-4.94-.28V84.42a19.31,19.31,0,0,1,11.93-4.63m0-4a23.72,23.72,0,0,0-15.93,6.82v28.06c2.45.1,10.74.57,10.74.57,9-11.2,17.84-16.92,17.84-24.22s-5.62-11.23-12.65-11.23Z"/>',window.queenSvg='<defs><style>.cls-1{fill:none;}.cls-2{fill:___COLORCODE___;}.cls-3,.cls-4{opacity:0.2;}.cls-4{fill:#fff;}.cls-5{fill:#1a1a1a;}</style></defs><title>q</title><rect class="cls-1" width="180" height="180"/><path class="cls-2" d="M111.12,20.62A14.63,14.63,0,0,0,96.51,35.23a13.92,13.92,0,0,0,5.41,10.93L90.54,79,79.15,46.16a13.92,13.92,0,0,0,5.41-10.93A14.63,14.63,0,0,0,70,20.62,14.46,14.46,0,0,0,55.34,35.23a13.67,13.67,0,0,0,9.22,13.16L62.73,87.11,47,70.32a13.77,13.77,0,0,0,2.25-6.95A14.22,14.22,0,0,0,35.45,49.43,13.9,13.9,0,0,0,21.51,63.37c0,6.6,5.45,12.86,11.57,13.69l23.06,55.46c-16.44,3.06-16.42,12.95-16.39,24.31v3.62H141.32v-3.61c0-11.37.06-21.26-16.39-24.32L148,77.06c6.13-.83,11.58-7.09,11.58-13.69a14,14,0,0,0-13.95-13.94,14.22,14.22,0,0,0-13.78,13.94,13.64,13.64,0,0,0,2.26,6.95L118.35,87.11l-1.83-38.73a13.88,13.88,0,0,0,9.21-13.15,14.45,14.45,0,0,0-14.61-14.61Z"/><path class="cls-3" d="M40.24,52.34c5.31,6.79-3.85,12.82,1.26,18.34L64.72,92.17l-17.4-23s2.2-5.64.81-9.8C45,50,40.24,52.34,40.24,52.34Z"/><path class="cls-4" d="M38.42,51.33c-4.81.45-12.22,5.85-13.92,16.84-.13.79-5.49-5,1.6-13.2C31.69,48.47,38.42,51.33,38.42,51.33Z"/><path class="cls-4" d="M148.84,51.33c-4.8.45-12.22,5.85-13.92,16.84-.12.79-5.48-5,1.61-13.2C142.11,48.47,148.84,51.33,148.84,51.33Z"/><path class="cls-4" d="M72.54,22.75c-5.14.53-13.22,6.79-14,19.44,0,0-5.29-7.36,1.72-15.68C65.78,20,72.54,22.75,72.54,22.75Z"/><path class="cls-4" d="M113.44,22.75c-5.14.53-13.22,6.79-14,19.44,0,0-5.28-7.36,1.72-15.68C106.69,20,113.44,22.75,113.44,22.75Z"/><path class="cls-4" d="M91.12,138.41c43.07,0,47.54,4.75,47.54,4.75h.59c-1.93-10.18-24.5-11.3-24.5-11.3H67.65s-23.36.81-24.66,11.3h.59S48.05,138.41,91.12,138.41Z"/><path class="cls-3" d="M116.2,112.83c-15.74,17-31.38,16.5-31.38,16.5l39.74,3.1,23.31-55.11s5.42-.62,9.46-7.34c6-9.94-5.53-17.09-5.53-17.09,3.61,4.19,3.08,11.15,0,14s-7.86,3.31-9.69,7.48C142.15,74.36,131.22,96.58,116.2,112.83Z"/><path class="cls-3" d="M116.83,23.36c7.64,10.53-6.88,14-6,23.56l5.75,45,0-43s10.08-6.11,9.18-13.42C124.37,24,116.83,23.36,116.83,23.36Z"/><path class="cls-3" d="M72.69,45.45,90.54,85.1,79.16,46.49s4.35-6.34,4.35-11.81c0-10.06-8.45-12-8.45-12C83.19,33.57,69.51,35.91,72.69,45.45Z"/><path class="cls-5" d="M145.63,47.43c-8.41,0-15.79,7.45-15.79,15.94A14.77,14.77,0,0,0,131.62,70l-11.5,12.26-1.54-32.58a16,16,0,0,0,9.15-14.48,16.43,16.43,0,0,0-16.61-16.61A16.63,16.63,0,0,0,94.51,35.23,16,16,0,0,0,99.58,46.8l-9,26.09L81.49,46.8a16,16,0,0,0,5.07-11.57A16.63,16.63,0,0,0,70,18.62,16.44,16.44,0,0,0,53.34,35.23,15.75,15.75,0,0,0,62.5,49.74L61,82.29,49.45,70a14.71,14.71,0,0,0,1.78-6.66c0-8.49-7.37-15.94-15.78-15.94A16,16,0,0,0,19.51,63.37,16.34,16.34,0,0,0,31.65,78.84l21.72,52.23c-15.68,3.87-15.65,14.54-15.62,25.77v5.61H143.32v-5.61c0-11.24.06-21.9-15.62-25.77l21.72-52.23a16.34,16.34,0,0,0,12.15-15.47A16,16,0,0,0,145.63,47.43Zm-6.31,111H41.76c0-13-.82-22,17.2-24.35l.58-.09a257.11,257.11,0,0,1,31.58-1.6,243.81,243.81,0,0,1,31,1.69C140.13,136.46,139.32,145.4,139.32,158.45Zm7.3-83.29-22.89,55-.75-.1a254,254,0,0,0-31.86-1.69A259,259,0,0,0,59,130c-.57.07-1.12.15-1.66.24L34.46,75.16c-5.48,0-10.95-5.65-10.95-11.79A11.89,11.89,0,0,1,35.45,51.43,12.2,12.2,0,0,1,47.23,63.37c0,3.72-2.82,7.14-2.82,7.14L64.5,91.92l2.14-45.07a11.61,11.61,0,0,1-9.3-11.62A12.41,12.41,0,0,1,70,22.62a12.6,12.6,0,0,1,12.6,12.61,11.85,11.85,0,0,1-5.8,10.12L90.54,85.1l13.78-39.75a11.86,11.86,0,0,1-5.81-10.12,12.61,12.61,0,0,1,12.61-12.61,12.4,12.4,0,0,1,12.61,12.61,11.72,11.72,0,0,1-9.29,11.62l2.14,45.07,20.08-21.41s-2.82-3.4-2.82-7.14a12.2,12.2,0,0,1,11.79-11.94,11.89,11.89,0,0,1,11.94,11.94C157.57,69.51,152.1,75.16,146.62,75.16Z"/>',window.onePtSvg='<path class="cls-5" d="M98.09,113.42H93.9V93.8a1.17,1.17,0,0,0-1.18-1.17H88.34a1.12,1.12,0,0,0-.81.33L82.18,98.3a1.18,1.18,0,0,0,0,1.65l3.1,3.1a1.17,1.17,0,0,0,1.49.12l.4-.41v10.66H83a1.18,1.18,0,0,0-1.18,1.17V119A1.18,1.18,0,0,0,83,120.15H98.09A1.18,1.18,0,0,0,99.26,119v-4.39A1.18,1.18,0,0,0,98.09,113.42Z"/>',window.wallSvg='<style type="text/css">.st0{fill:none;}.st1{fill:#777574;}.st2{fill:#878481;}.st3{opacity:0.2;}.st4{fill:#FFFFFF;}.st5{opacity:0.2;enable-background:new    ;}</style><title>k</title><rect class="st0" width="180" height="180"/><rect class="st1" width="180" height="180"/><g><g><path class="st2" d="M16.4,1.8C22.6,1.3,28.9,1.5,35,2.1c2.7,0.3,5.8,0.9,7.3,3.2c1,1.5,1.2,3.4,1.2,5.3c0.2,7.6-1.4,16.2-7.6,20.5c-3.4,2.4-7.6,3.1-11.7,3.8c-2.8,0.5-5.9,0.9-8.5-0.5c-2.4-1.3-3.7-4-4.7-6.6C8,19.2,2.8,2.7,16.4,1.8z"/><path class="st2" d="M77.7,1c3.7-0.1,8,0.2,9.9,3.4c1,1.6,1,3.6,0.9,5.5c-0.2,7-1.4,14.3-5.3,20.2s-10.9,10.1-17.9,9c-3.7-0.6-7-2.5-10.3-4.4c-2.5-1.5-5-3-6.6-5.4c-2.8-4.1-2.5-9.8-2.4-14.5c0.2-3.2,0-7.8,2.2-10.3c2.9-3.3,8.4-3,12.4-3.1C66.3,1.3,72,1.2,77.7,1z"/><path class="st2" d="M98.5,3.3c3.4-1.8,7.3-1.8,11.1-1.8c5.4,0,11.2,0.2,15.5,3.5c3.1,2.4,4.8,6.1,6.5,9.7c3.8,8.4,7.6,17,9.3,26.1c0.4,1.9,0.6,3.9-0.1,5.6c-1.2,2.9-4.6,4-7.6,4.8c-5.5,1.5-11.1,3.1-16.8,3.3c-5.7,0.2-11.7-1.1-16.2-4.6c-4.6-3.7-7.1-9.3-8.3-15.1c-1.2-6.2-0.9-12.5,0.7-18.6C93.8,11.4,93.4,5.9,98.5,3.3z"/><path class="st2" d="M139.3,1.4c9.4,0,18.9,0.1,28.3,0.2c2.4,0,4.9,0.1,6.7,1.7c3,2.6,2.1,7.3,2.1,11.2c0,5.7,2.3,12-1,16.7c-2,2.8-5.6,4.1-8.9,5.2c-4,1.3-8.1,2.6-12.1,3.9c-1.6,0.5-3.3,1.1-5,0.6c-2.3-0.6-3.7-2.8-4.8-4.8c-3.6-6.4-6.6-13.2-8.9-20.2C133.8,10.2,130.1,1.4,139.3,1.4z"/><path class="st2" d="M171.7,36.8c-4.8,2.4-9.5,4.7-14.3,7.1c-3,1.5-6.3,3.5-6.6,6.8c-0.1,1.9,0.9,3.8,1.9,5.4c4.7,8,9.4,15.9,14.8,23.5c1.1,1.5,2.2,3,3.8,3.9s3.8,1,5.2-0.2s1.3-3.3,1.5-5.2c1.1-10.1,0.6-36.9,0.2-39.5C177.5,34.5,174.4,35.5,171.7,36.8z"/><path class="st2" d="M163.8,88.9c-3,1-25.7,14.3-26.2,25.1c-0.2,3.2,1.1,6.2,3.4,8.2c8.1,7,20.3,7,30.6,3.9c2.4-0.7,4.9-1.7,6.1-3.9c1-1.7,0.9-3.7,0.9-5.7c-0.2-7.5-0.2-15-0.6-22.4c-0.2-3.5-1.4-3.8-4.7-4.8C170,88.3,167.1,88,163.8,88.9z"/><path class="st2" d="M156.5,132.2c-2.2,0.3-4.5,0.7-6,2.2c-1.8,1.8-2,4.7-1.9,7.3c0,5.7,0.1,11.4,0.3,17c0.1,4.3,0.5,8.9,3,12.4c2.7,3.7,7.5,5.3,12.1,6c2.7,0.4,5.5,0.5,8.3,0.7c2.9,0.3,5.5-1.9,5.6-4.9c0.4-9.8,1.2-28.8,1.2-31.1c0-3,0.2-6.3-0.3-9.3c-0.4-2.8-0.9-3-3.8-2.8C168.8,130.3,162.6,131.4,156.5,132.2z"/><path class="st2" d="M20,47.2c0.1-2.2,0.3-4.6,1.6-6.3c1-1.3,2.6-2.1,4.1-2.7c9-3.6,19.4-3.2,28.1,1c3,1.4,6,3.6,6.8,6.9c0.6,2.5-0.3,5.1-1.1,7.5c-1,3-2.1,6-3.1,8.9c-1.5,4.4-3.1,8.8-6,12.5c-3.8,4.8-9.8,7.9-15.9,8.2c-5.4,0.2-15.8-2.1-15.8-8.6C18.7,65.5,19.5,56.3,20,47.2z"/><path class="st2" d="M61.8,53.3c1.3-3,2.8-5.9,5.1-8.2c4.9-4.8,12.9-5.6,19.3-3.1c6.4,2.5,11.3,7.9,14.8,13.8c2.2,3.8,3.9,7.9,4.4,12.3s-0.4,9-3.1,12.5c-2.1,2.8-5.1,4.8-8.2,6.3c-3.9,2-8.2,3.6-12.5,3.7c-9,0.4-19.2-5.3-25.5-11.5c-3.2-3.2-1-7.3,0.2-11.2C57.8,63,59.6,58.1,61.8,53.3z"/><path class="st2" d="M107.9,73.9c0.1-3.7,0.8-7.6,3.2-10.4c2.4-2.8,6-4,9.5-5.2c6.2-2.1,12.5-4.2,18.7-6.2c1.6-0.5,3.4-1.1,5.1-0.5c1.3,0.5,2.2,1.6,3.1,2.7c5.6,7.2,10.6,15,14.8,23.1c1.3,2.5,2.5,5.5,1.1,7.9c-0.7,1.3-2,2.1-3.3,2.9c-8.1,4.9-16.1,9.9-24.2,14.8c-1.8,1.1-3.8,2.2-5.9,1.9c-2.8-0.4-4.5-3.1-6-5.5c-3.1-4.7-6.9-8.8-11.4-12.1c-1.6-1.2-3.2-1.9-4-3.8C107.5,80.9,107.8,76.7,107.9,73.9z"/><path class="st2" d="M80.6,105.6c0.6-3,1.2-6.1,2.9-8.6c2.8-4.1,7.9-5.8,12.6-7.3c3.6-1.1,7.5-2.2,11-0.7c2.1,0.9,3.7,2.7,5.2,4.4c4,4.5,7.9,9,11.8,13.5c1.8,2.1,3.7,4.6,3.1,7.3c-0.6,2.7-3.4,4.2-5.9,5.5c-5.8,3.1-11.1,7.3-15.5,12.3c-2.2,2.5-4.3,5.3-7,7.2c-4.1,2.8-9.6,3.5-14.2,1.6c-5-2-9.4-6.9-8.6-12.3C77.4,120.8,79.1,113.2,80.6,105.6z"/><path class="st2" d="M104.2,137.3c2-1.8,14.6-15.2,20.7-17.1c6.5-2,13.5,2.4,16.8,8.4c3.3,5.9,3.6,13,4,19.7c0.2,3.6,0.3,7.3,0.5,10.9c0.1,1.9,0.2,3.9-0.6,5.6c-0.9,2.3-3.1,3.8-5.4,4.7c-4.9,1.8-10.6,0.7-15.2-1.8c-4.6-2.5-8.4-6.2-12.1-10c-3.4-3.5-7-7-10.2-10.7C99.7,143.5,100.8,140.3,104.2,137.3z"/><path class="st2" d="M33.1,96.8c-0.3-2.1-0.5-4.3,0.3-6.3c1.2-2.9,4.3-4.3,7.2-5.5c3.7-1.5,7.5-3.1,11.5-2.8c3.1,0.2,6.1,1.6,8.8,3.2c4.3,2.4,8.4,5.2,11.6,9c3.2,3.7,5.4,8.4,5.5,13.4c0.1,5.1-2,10-4.1,14.6c-1,2.2-2.1,4.5-4.2,5.8c-2.6,1.6-5.8,1-8.8,0.4c-5.2-1.1-10.3-2.1-15.5-3.2c-2.7-0.6-5.8-1-7.8-3.1c-2.4-2.5-2.3-6.7-2.7-9.9C34.4,107.3,33.1,101.9,33.1,96.8z"/><path class="st2" d="M10.1,82.3c6.4-2.8,14.7,0.1,18,6.2c1.7,3.1,2.1,6.7,2.5,10.2c0.8,6.7,1.5,13.3,2.3,20c0.3,2.2,0.5,4.6-0.2,6.7c-1,2.9-3.7,4.9-6.3,6.7c-2.7,1.9-5.6,3.9-9,4.2c-3.3,0.2-6.4-1.4-9.4-2.9c-2.3-1.2-4.7-2.5-5.8-4.9c-0.8-1.7-0.8-3.7-0.7-5.7c0.3-8,0.9-16.1,0.6-24.1C1.7,92.1,3.4,85.3,10.1,82.3z"/><path class="st2" d="M72.2,172.2c0-0.8,0.2-1.5,0.4-2.3l4.2-11.2c1.4-3.7,2.9-7.5,5.5-10.4c2.7-2.9,6.9-4.8,10.6-3.6c2.2,0.7,3.9,2.3,5.6,3.8l20,18.6c1.2,1.2,1.8,2.9,1.2,4.5c-1.8,5-6.9,5-9,5.4c-7.7,1.3-15.5,1.7-23.3,1.4C82.8,178.3,72.4,179.2,72.2,172.2z"/><path class="st2" d="M49.6,177.7c-4.8,0.2-9.9-0.6-14-3.1c-5-3-8.4-8.3-10.3-13.9c-1.9-5.6-2.4-11.5-2.9-17.3c-0.2-1.9-0.3-4.1,1-5.5c1.5-1.7,7.9-6.7,9.5-8c1.7-1.4,4.3-1.2,6.5-0.9c9.2,1.2,18.4,2.5,27.6,3.7c1.6,0.2,3.2,0.4,4.5,1.2c1.4,0.8,2.4,2.1,3.4,3.4c2.1,2.7,4.3,5.7,4.3,9.1c0,2.9-1.5,5.5-3,8c-3.6,6-7.2,12-10.8,18.1c-1.8,3.1-2.9,3.2-6.4,3.9C56,177,52.8,177.6,49.6,177.7z"/><path class="st2" d="M13.6,138c5.7,4.1,7.1,11.8,8,18.8c0.4,3.2,0.9,6.4,1.3,9.5c0.2,1.3,0.3,2.7-0.3,3.9c-0.6,1.2-2,1.9-3.2,2.5c-3,1.4-6.1,2.9-9.1,4.3c-2.3,1.1-5.3,2.1-7.1,0.4c-1.2-1.2-1.4-3.1-1.4-4.8c-0.1-9.8-0.6-19.6-0.4-29.3C1.5,135.7,7.1,133.3,13.6,138z"/><path class="st2" d="M7.1,34.7c2.5-0.2,5.1,0.9,6.6,2.9c1.7,2.3,1.9,5.2,2.1,8c0.7,9.5,1.3,19.2-1.6,28.3c-0.8,2.7-2.1,5.4-4.3,7c-2.3,1.7-4.8,1.9-6.7-0.1c-1.5-1.6-1.7-3.9-1.8-6.1c-0.3-8.1-0.4-16-0.1-24.2C1.5,44.8-1,35.5,7.1,34.7z"/><path class="st2" d="M145.5,173.7c0.8,0.4,1.7,0.9,2.2,1.6c0.5,0.8,0.5,1.9-0.1,2.5c-0.5,0.4-1.1,0.5-1.7,0.6c-4.7,0.5-9.5,0.7-14.3,0.6c-2.1-0.1-11.3,0.5-9-3.4c1.5-2.6,8.4-3.6,11-3.9C137.6,171.3,141.8,171.9,145.5,173.7z"/><path class="st2" d="M25,173.1c3.1,0,6.2,0.8,8.8,2.4c1.2,0.7,0.7,2.5-0.6,2.5c-5,0.2-10.3,0.5-15.1-0.1C10.3,177.1,22.2,173.1,25,173.1z"/><path class="st2" d="M7.4,22.7c0.6,2.2,2.1,4.5,1.7,6.7s-2,4.4-4.2,4.8c-1,0.1-2.4-0.1-2.7-1.1c-0.8-2.6-0.3-12.3-0.3-17.5c0-2.7-1.3-11,2.1-10C7.5,6.6,4.7,15,7.4,22.7z"/></g><g class="st3"><path class="st4" d="M15.2,31.8c-3.2-8.6-8.4-25.1,5.2-26C26.6,5.4,32.8,5.5,39,6.2c1.4,0.2,2.8,0.4,4.1,0.8c-0.2-0.6-0.4-1.2-0.8-1.7C40.8,3,37.8,2.5,35,2.1c-6.2-0.7-12.4-0.8-18.6-0.4C2.8,2.7,8,19.2,11.2,27.8c1,2.6,2.3,5.3,4.7,6.6c0.2,0.1,0.4,0.2,0.6,0.3C16,33.7,15.6,32.8,15.2,31.8z"/><path class="st4" d="M50.1,18.7c0.1-3.1-0.1-7.7,2.1-10.2c2.9-3.3,8.4-3,12.4-3.1C70.3,5.3,76,5.2,81.7,5.1c2.1,0,4.5,0,6.5,0.7c-0.1-0.5-0.3-1-0.6-1.4C85.7,1.3,81.4,1,77.7,1C72,1.2,66.3,1.3,60.6,1.4c-4,0.1-9.5-0.2-12.4,3.1c-2.2,2.5-2,7.1-2.1,10.2c-0.1,4.7-0.3,10.5,2.4,14.5c1,1.4,2.3,2.6,3.8,3.6C49.8,28.8,50,23.3,50.1,18.7z"/><path class="st4" d="M95.9,38.8c-1.2-6.2-0.9-12.5,0.7-18.6c1.3-4.8,0.9-10.3,6-12.9c3.4-1.8,7.3-1.8,11.1-1.8c5,0,10.4,0.2,14.5,2.8c-0.9-1.3-1.9-2.4-3.1-3.4c-4.3-3.3-10.1-3.5-15.5-3.5c-3.8,0-7.8,0-11.1,1.8c-5.1,2.7-4.7,8.1-6,12.9c-1.6,6.1-1.9,12.4-0.7,18.6c1.1,5.7,3.7,11.4,8.3,15.1c0.2,0.2,0.4,0.3,0.6,0.4C98.3,47,96.7,42.9,95.9,38.8z"/><path class="st4" d="M148.7,40.1c-3.6-6.4-6.6-13.2-8.9-20.2c-1.9-5.7-5.6-14.5,3.6-14.5c9.4,0,18.9,0.1,28.3,0.2c1.5,0,3.1,0.1,4.5,0.5c-0.3-1.1-0.9-2.1-1.8-2.9c-1.8-1.5-4.4-1.6-6.7-1.7c-9.4-0.1-18.9-0.1-28.3-0.2c-9.2,0-5.5,8.8-3.6,14.5c2.3,7,5.3,13.7,8.9,20.2c1.1,1.9,2.4,3.9,4.4,4.7C148.9,40.5,148.8,40.3,148.7,40.1z"/><path class="st4" d="M171.7,83.7c-5.4-7.5-10.1-15.5-14.8-23.5c-1-1.7-2-3.5-1.9-5.4c0.3-3.3,3.6-5.3,6.6-6.8c4.8-2.4,9.5-4.7,14.3-7.1c0.8-0.4,1.7-0.8,2.6-1c0-0.6-0.1-1-0.1-1.2c-0.7-4.1-3.8-3.1-6.5-1.8c-4.8,2.4-9.5,4.7-14.3,7.1c-3,1.5-6.3,3.5-6.6,6.8c-0.1,1.9,0.9,3.8,1.9,5.4c4.7,8,9.4,15.9,14.8,23.5c1.1,1.5,2.2,3,3.8,3.9C171.5,83.6,171.6,83.6,171.7,83.7L171.7,83.7z"/><path class="st4" d="M141.6,118c0.5-10.8,23.3-24.1,26.2-25.1c3.3-0.8,6.3-0.6,9.5,0.4c0.2,0.1,0.4,0.1,0.6,0.2c-0.3-2.9-1.6-3.3-4.7-4.2c-3.3-1-6.2-1.3-9.5-0.4c-3,1-25.7,14.3-26.2,25.1c-0.2,3.2,1.1,6.2,3.4,8.2c0.6,0.5,1.3,1,1.9,1.5C142,122,141.5,120.1,141.6,118z"/><path class="st4" d="M152.9,162.8c-0.2-5.7-0.2-11.4-0.3-17c0-2.6,0.1-5.5,1.9-7.3c1.5-1.5,3.9-1.9,6-2.2c6.1-0.8,12.2-1.9,18.3-2.5c0-0.4-0.1-0.9-0.2-1.3c-0.4-2.8-0.9-3-3.8-2.8c-6.1,0.6-12.3,1.6-18.4,2.5c-2.2,0.3-4.5,0.7-6,2.2c-1.8,1.8-2,4.7-1.9,7.3c0,5.7,0.1,11.4,0.3,17c0.1,4.3,0.5,8.9,3,12.4c0.9,1.3,2.1,2.3,3.5,3.1C153.3,170.9,153,166.7,152.9,162.8z"/><path class="st4" d="M22.7,78.6c0-9.1,0.9-18.3,1.3-27.4c0.1-2.2,0.3-4.6,1.6-6.3c1-1.3,2.6-2.1,4.1-2.7c9-3.6,19.4-3.2,28.1,1c0.7,0.3,1.4,0.7,2.1,1.1c-1.3-2.3-3.7-4-6.1-5.2c-8.7-4.2-19.1-4.5-28.1-1c-1.5,0.6-3.1,1.4-4.1,2.7c-1.4,1.7-1.5,4.1-1.6,6.3c-0.4,9.1-1.3,18.3-1.3,27.4c0,2.8,1.9,4.8,4.5,6.2C22.8,80.1,22.7,79.4,22.7,78.6z"/><path class="st4" d="M60.3,72c1.5-5,3.4-9.9,5.5-14.7c1.3-3,2.8-5.9,5.1-8.2c4.9-4.8,12.9-5.6,19.3-3.1c2.4,1,4.7,2.4,6.7,4c-2.9-3.5-6.5-6.4-10.7-8.1c-6.4-2.5-14.4-1.8-19.3,3.1c-2.3,2.3-3.8,5.3-5.1,8.2c-2.1,4.8-4,9.7-5.5,14.7c-1.2,3.9-3.4,8-0.2,11.2c0.9,0.9,2,1.8,3.1,2.7C57.5,78.9,59.3,75.4,60.3,72z"/><path class="st4" d="M112,78c0.1-3.7,0.8-7.6,3.2-10.4c2.4-2.8,6-4,9.5-5.2c6.2-2.1,12.5-4.2,18.7-6.2c1.6-0.5,3.4-1.1,5.1-0.5l0,0c-0.3-0.4-0.7-0.9-1-1.3c-0.8-1.1-1.8-2.2-3.1-2.7c-1.6-0.6-3.4-0.1-5.1,0.5c-6.2,2.1-12.5,4.2-18.7,6.2c-3.5,1.1-7.1,2.4-9.5,5.2c-2.4,2.8-3.1,6.7-3.2,10.4c-0.1,2.8-0.5,7,0.7,9.6c0.8,1.8,2.4,2.6,4,3.8C111.6,84.7,111.9,80.7,112,78z"/><path class="st4" d="M128,103.5c-2.4-3.6-5.2-6.8-8.4-9.7c1.6,1.8,3,3.7,4.4,5.6c1.3,2,2.7,4.2,4.8,5.1C128.5,104.2,128.3,103.8,128,103.5z"/><path class="st4" d="M80.3,132.5c1.2-7.7,2.9-15.3,4.4-22.9c0.6-3,1.2-6.1,2.9-8.6c2.8-4.1,7.9-5.8,12.6-7.3c3.6-1.1,7.5-2.2,11-0.7c0.7,0.3,1.3,0.7,1.9,1.1c-0.2-0.3-0.5-0.5-0.7-0.8c-1.5-1.7-3.1-3.5-5.2-4.4c-3.4-1.5-7.4-0.4-11,0.7c-4.7,1.5-9.8,3.2-12.6,7.3c-1.7,2.5-2.3,5.6-2.9,8.6c-1.4,7.6-3.1,15.2-4.4,22.9c-0.7,4.3,2,8.4,5.7,10.8C80.6,137.3,79.9,134.9,80.3,132.5z"/><path class="st4" d="M106.7,151c-3-3.5-1.9-6.7,1.5-9.7c2-1.8,14.6-15.2,20.7-17.1c4-1.2,8.1,0,11.5,2.4c-3.6-4.9-9.8-8.2-15.6-6.5c-6,1.9-18.7,15.3-20.7,17.1c-3.4,3.1-4.5,6.2-1.5,9.7c3.2,3.7,6.7,7.2,10.2,10.7c1.1,1.2,2.3,2.3,3.5,3.5C113.1,157.9,109.8,154.6,106.7,151z"/><path class="st4" d="M39.1,116.4c-0.6-5-1.9-10.5-1.9-15.5c-0.3-2.1-0.5-4.3,0.3-6.3c1.2-2.9,4.3-4.3,7.2-5.5c3.7-1.5,7.5-3.1,11.5-2.8c3.1,0.2,6.1,1.6,8.8,3.2c2.7,1.5,5.4,3.2,7.8,5.2c-0.1-0.1-0.2-0.2-0.2-0.3c-3.2-3.7-7.3-6.6-11.6-9c-2.7-1.5-5.7-2.9-8.8-3.2c-4-0.3-7.8,1.3-11.5,2.8c-2.9,1.2-6,2.6-7.2,5.5c-0.8,1.9-0.6,4.2-0.3,6.3c0,5.1,1.3,10.5,1.9,15.5c0.4,3.2,0.3,7.4,2.7,9.9c0.7,0.8,1.6,1.3,2.6,1.8C39.4,121.6,39.4,118.8,39.1,116.4z"/><path class="st4" d="M5.5,126.9c0.3-8,0.9-16.1,0.6-24.1c-0.3-6.7,1.4-13.5,8.1-16.4c4.3-1.9,9.5-1.2,13.4,1.3c-3.6-5.6-11.4-8.1-17.5-5.4c-6.7,3-8.4,9.8-8.1,16.4c0.3,8-0.3,16.1-0.6,24.1c-0.1,1.9-0.1,3.9,0.7,5.7c0.8,1.7,2.3,2.9,4,3.8C5.4,130.7,5.4,128.7,5.5,126.9z"/><path class="st4" d="M76.2,176.2c0-0.8,0.2-1.5,0.4-2.3l4.2-11.2c1.4-3.7,2.9-7.5,5.5-10.4c2.7-2.9,6.9-4.8,10.6-3.6c2.2,0.7,3.9,2.3,5.6,3.8l16.8,15.6c-0.2-0.4-0.5-0.7-0.8-1l-20-18.6c-1.7-1.5-3.4-3.1-5.6-3.8c-3.8-1.2-7.9,0.7-10.6,3.6c-2.7,2.9-4.1,6.7-5.5,10.4l-4.2,11.2c-0.3,0.7-0.5,1.5-0.4,2.3c0.1,2.8,1.8,4.4,4.2,5.2C76.3,177,76.2,176.6,76.2,176.2z"/><path class="st4" d="M29.3,164.8c-1.9-5.6-2.4-11.5-2.9-17.3c-0.2-1.9-0.3-4.1,1-5.5c1.5-1.7,7.9-6.7,9.5-8c1.7-1.4,4.3-1.2,6.5-0.9c9.2,1.2,18.4,2.5,27.6,3.7c1.5,0.2,3,0.4,4.3,1.1c-0.1-0.2-0.3-0.4-0.4-0.5c-1-1.3-2-2.6-3.4-3.4c-1.4-0.8-3-1-4.5-1.2c-9.2-1.2-18.4-2.5-27.6-3.7c-2.2-0.3-4.8-0.5-6.5,0.9c-1.6,1.3-8,6.4-9.5,8c-1.3,1.4-1.2,3.6-1,5.5c0.5,5.8,1.1,11.8,2.9,17.3c1.7,4.9,4.5,9.6,8.7,12.8C31.9,170.9,30.4,167.9,29.3,164.8z"/><path class="st4" d="M5.8,176.6c-0.1-9.8-0.6-19.6-0.4-29.3c0.2-7.4,5.5-9.8,11.7-5.6c-1-1.4-2.1-2.7-3.6-3.7c-6.4-4.6-12-2.3-12.2,5.3c-0.2,9.8,0.3,19.6,0.4,29.3c0,1.7,0.1,3.6,1.4,4.8c0.8,0.7,1.7,1,2.8,0.9C5.8,177.7,5.8,177.2,5.8,176.6z"/><path class="st4" d="M5.4,78.8c-0.3-8.1-0.4-16-0.1-24.2c0.2-5.8-2.3-15.1,5.8-15.9c1.2-0.1,2.4,0.1,3.5,0.5c-0.3-0.6-0.6-1.1-0.9-1.7c-1.5-2-4.1-3.2-6.6-2.9c-8.1,0.9-5.6,10.2-5.8,16c-0.3,8.1-0.2,16,0.1,24.1c0.1,2.2,0.3,4.5,1.8,6.1c0.8,0.9,1.7,1.3,2.7,1.4C5.6,81.1,5.5,79.9,5.4,78.8z"/><path class="st4" d="M137.6,175.7c3.5-0.3,7.1,0.1,10.4,1.3c0.2-0.6,0-1.2-0.3-1.8c-0.5-0.8-1.3-1.2-2.2-1.6c-3.7-1.8-7.9-2.4-12-2c-2.6,0.2-9.5,1.3-11,3.9c-1.4,2.4,1.6,3.1,4.7,3.3C129.4,176.8,135.3,175.9,137.6,175.7z"/><path class="st4" d="M24,178.3c2-0.7,4-1.2,5-1.2c1.6,0,3.2,0.2,4.8,0.7c0.8-0.5,0.9-1.7-0.1-2.3c-2.6-1.6-5.7-2.5-8.8-2.4c-2.8,0-14.7,4-7,4.9C20,178.2,22,178.3,24,178.3z"/><path class="st4" d="M5.9,19.6c0-1.8-0.6-6.2,0.1-8.5C5.9,8.2,5.6,6,4,5.6c-3.4-1-2.1,7.3-2.1,10c0,5.3-0.5,14.9,0.3,17.5c0.3,1,1.7,1.3,2.7,1.1c0.3,0,0.7-0.2,1-0.3C5.6,29.9,5.9,23.5,5.9,19.6z"/></g><g><path class="st5" d="M43.6,10.6c0-1.8-0.2-3.8-1.2-5.3c-0.8-1.1-1.9-1.8-3.3-2.3c0.3,1.1,0.4,2.4,0.4,3.6c0.2,7.6-1.4,16.2-7.6,20.5c-3.4,2.4-7.6,3.1-11.7,3.8c-2.6,0.4-5.4,0.8-7.8-0.2c0.8,1.5,1.9,2.9,3.4,3.7c2.5,1.4,5.6,1,8.5,0.5c4.1-0.7,8.3-1.4,11.7-3.8C42.2,26.7,43.8,18.2,43.6,10.6z"/><path class="st5" d="M87.6,4.4c-0.8-1.3-2-2.1-3.5-2.6c0.4,1.3,0.4,2.7,0.3,4.1c-0.2,7-1.4,14.3-5.3,20.2s-10.9,10.1-17.9,9c-3.7-0.6-7-2.5-10.3-4.4c-1-0.6-1.9-1.2-2.9-1.8c0.1,0.2,0.2,0.3,0.3,0.5c1.6,2.4,4.2,3.9,6.6,5.4c3.2,1.9,6.5,3.9,10.3,4.4c7,1.1,14-3.1,17.9-9s5.1-13.1,5.3-20.2C88.6,8,88.6,6,87.6,4.4z"/><path class="st5" d="M140.9,40.8c-1.7-9.1-5.5-17.7-9.3-26.1c-1.6-3.6-3.4-7.3-6.5-9.7c-0.3-0.2-0.6-0.5-1-0.7c1.3,1.9,2.4,4.2,3.4,6.3c3.8,8.4,7.6,17,9.3,26.1c0.4,1.9,0.6,3.9-0.1,5.6c-1.2,2.9-4.6,4-7.6,4.8c-5.5,1.5-11.1,3.1-16.8,3.3c-5.5,0.2-11.2-1-15.6-4.2c1,1.3,2.1,2.6,3.4,3.6c4.5,3.6,10.5,4.8,16.2,4.6s11.3-1.8,16.8-3.3c3-0.8,6.4-2,7.6-4.8C141.5,44.6,141.2,42.6,140.9,40.8z"/><path class="st5" d="M176.5,14.5c0-3.9,0.9-8.7-2.1-11.2c-0.7-0.6-1.4-0.9-2.3-1.2c0.7,2.5,0.3,5.6,0.3,8.4c0,5.7,2.3,12-1,16.7c-2,2.8-5.6,4.1-8.9,5.2c-4,1.3-8.1,2.6-12.1,3.9c-1.6,0.5-3.3,1.1-5,0.6c-0.2,0-0.3-0.1-0.4-0.2c1.1,1.8,2.4,3.7,4.5,4.2c1.6,0.4,3.4-0.1,5-0.6c4-1.3,8.1-2.6,12.1-3.9c3.3-1.1,6.9-2.3,8.9-5.2C178.8,26.5,176.5,20.2,176.5,14.5z"/><path class="st5" d="M178.2,38.6c-0.5-2.8-2.1-3.3-3.9-2.8c0.4,6,0.7,29.1-0.3,38.3c-0.2,1.8-0.1,3.9-1.5,5.2c-1.3,1.2-3.4,1.1-4.9,0.3c1.1,1.5,2.2,3,3.8,3.9s3.8,1,5.2-0.2s1.3-3.3,1.5-5.2C179.2,68.1,178.7,41.2,178.2,38.6z"/><path class="st5" d="M178.6,116.5c-0.2-7.5-0.2-15-0.6-22.4c-0.1-3.2-1.2-3.7-4.1-4.6c0,0.2,0,0.4,0,0.6c0.3,7.5,0.4,15,0.6,22.4c0,1.9,0.1,4-0.9,5.7c-1.2,2.2-3.7,3.2-6.1,3.9c-9.5,2.9-20.6,3.1-28.7-2.4c0.5,1,1.3,1.8,2.1,2.6c8.1,7,20.3,7,30.6,3.9c2.4-0.7,4.9-1.7,6.1-3.9C178.7,120.5,178.6,118.5,178.6,116.5z"/><path class="st5" d="M178.7,132.5c-0.4-2.8-0.9-3-3.8-2.8h-0.1c0.2,2.6,0.1,5.4,0.1,8c0,2.3-0.8,21.3-1.2,31.1c-0.1,3-2.7,5.2-5.6,4.9c-2.8-0.2-5.5-0.3-8.3-0.7c-3-0.4-6-1.3-8.6-2.8c0.2,0.3,0.4,0.6,0.6,0.9c2.7,3.7,7.5,5.3,12.1,6c2.7,0.4,5.5,0.5,8.3,0.7c2.9,0.3,5.5-1.9,5.6-4.9c0.4-9.8,1.2-28.8,1.2-31.1C178.9,138.8,179.1,135.5,178.7,132.5z"/><path class="st5" d="M60.6,46c-0.6-2.5-2.5-4.4-4.7-5.7c0.3,0.5,0.5,1.1,0.7,1.7c0.6,2.5-0.3,5.1-1.1,7.5c-1,3-2.1,6-3.1,8.9c-1.5,4.4-3.1,8.8-6,12.5c-3.8,4.8-9.8,7.9-15.9,8.2c-3.1,0.1-7.9-0.6-11.4-2.5c2,4.9,10.7,6.7,15.4,6.5c6.1-0.3,12.1-3.3,15.9-8.2c2.9-3.7,4.4-8.1,6-12.5c1-3,2.1-6,3.1-8.9C60.4,51.1,61.2,48.5,60.6,46z"/><path class="st5" d="M105.3,68.1c-0.5-4.4-2.2-8.5-4.4-12.3c-2.1-3.7-4.9-7.1-8.1-9.8c1.5,1.8,2.9,3.8,4.1,5.8c2.2,3.8,3.9,7.9,4.4,12.3s-0.4,9-3.1,12.5c-2.1,2.8-5.1,4.8-8.2,6.3c-3.9,2-8.2,3.6-12.5,3.7C69.8,87,61.3,82.9,55,77.9c0.2,0.5,0.6,0.9,1,1.3c6.3,6.2,16.5,11.9,25.5,11.5C85.9,90.5,90.1,89,94,87c3.1-1.6,6.1-3.6,8.2-6.3C104.9,77.1,105.8,72.5,105.3,68.1z"/><path class="st5" d="M162.2,77.4c-4.2-8.1-9.1-15.9-14.8-23.1c-0.8-1.1-1.8-2.2-3-2.7c5.2,6.9,9.8,14.1,13.7,21.8c1.3,2.5,2.5,5.5,1.1,7.9c-0.7,1.3-2,2.1-3.3,2.9c-8.1,4.9-16.1,9.9-24.2,14.8c-1.8,1.1-3.8,2.2-5.9,1.9c-0.4-0.1-0.9-0.2-1.2-0.4c1.4,2,2.9,4.1,5.3,4.4c2.1,0.3,4.1-0.8,5.9-1.9c8.1-4.9,16.1-9.9,24.2-14.8c1.3-0.8,2.6-1.6,3.3-2.9C164.7,82.9,163.5,79.9,162.2,77.4z"/><path class="st5" d="M108.6,83.3C108.5,83.3,108.5,83.3,108.6,83.3c0,0.1,0,0.2,0.1,0.2c0.8,1.9,2.4,2.6,4,3.8c1,0.8,2,1.6,3,2.4C113.4,87.4,111.1,85.2,108.6,83.3z"/><path class="st5" d="M124.2,106.9c-3.9-4.5-7.9-9-11.8-13.5c-1-1.2-2.1-2.3-3.4-3.3c3.8,4.2,7.5,8.5,11.2,12.7c1.8,2.1,3.7,4.6,3.1,7.3c-0.6,2.7-3.4,4.2-5.9,5.5c-5.8,3.1-11.1,7.3-15.5,12.3c-2.2,2.5-4.3,5.3-7,7.2c-4.1,2.8-9.6,3.5-14.2,1.6c-1-0.4-2-0.9-2.9-1.5c1.6,2.5,4.2,4.5,6.9,5.6c4.6,1.8,10.1,1.2,14.2-1.6c2.8-1.9,4.8-4.7,7-7.2c4.4-5,9.6-9.2,15.5-12.3c2.4-1.3,5.3-2.8,5.9-5.5C127.9,111.5,126,108.9,124.2,106.9z"/><path class="st5" d="M146.1,159.2c-0.2-3.6-0.3-7.3-0.5-10.9c-0.3-6.8-0.7-13.8-4-19.7c-1.3-2.3-3.1-4.4-5.3-6c0.5,0.6,0.9,1.3,1.2,1.9c3.3,5.9,3.6,13,4,19.7c0.2,3.6,0.3,7.3,0.5,10.9c0.1,1.9,0.2,3.9-0.6,5.6c-0.9,2.3-3.1,3.8-5.4,4.7c-4.9,1.8-10.6,0.7-15.2-1.8c-3.2-1.7-6-4-8.6-6.6c0.2,0.2,0.4,0.4,0.6,0.6c3.7,3.8,7.5,7.5,12.1,10s10.3,3.6,15.2,1.8c2.3-0.8,4.4-2.4,5.4-4.7C146.3,163.1,146.2,161.1,146.1,159.2z"/><path class="st5" d="M72.6,94.4c-1.2-1.4-2.4-2.6-3.8-3.7c3.1,3.7,5.2,8.3,5.3,13.1c0.1,5.1-2,10-4.1,14.6c-1,2.2-2.1,4.5-4.2,5.8c-2.6,1.6-5.8,1-8.8,0.4c-5.2-1.1-10.3-2.1-15.5-3.2c-1.7-0.4-3.5-0.7-5.2-1.4c0.3,0.8,0.8,1.6,1.4,2.3c2,2.1,5.2,2.5,7.8,3.1c5.1,1.1,10.3,2.1,15.5,3.2c2.9,0.6,6.2,1.2,8.8-0.4c2.1-1.3,3.2-3.6,4.2-5.8c2.1-4.7,4.2-9.5,4.1-14.6C78,102.8,75.7,98.1,72.6,94.4z"/><path class="st5" d="M32.8,118.7c-0.8-6.7-1.5-13.3-2.3-20c-0.4-3.5-0.8-7.1-2.5-10.2c-1.1-2-2.7-3.6-4.6-4.9c0.2,0.3,0.3,0.5,0.5,0.8c1.7,3.1,2.1,6.7,2.5,10.2c0.8,6.7,1.5,13.3,2.3,20c0.3,2.2,0.5,4.6-0.2,6.7c-1,2.9-3.7,4.9-6.3,6.7c-2.7,1.9-5.6,3.9-9,4.2c-3.3,0.2-6.4-1.4-9.4-2.9c-0.6-0.3-1.3-0.7-1.9-1c0,0.1,0.1,0.1,0.1,0.2c1.1,2.3,3.6,3.7,5.8,4.9c2.9,1.5,6.1,3.1,9.4,2.9c3.3-0.2,6.3-2.2,9-4.2c2.5-1.8,5.2-3.8,6.3-6.7C33.3,123.2,33.1,120.9,32.8,118.7z"/><path class="st5" d="M118.5,167.2l-3.2-3c0.6,1.1,0.8,2.3,0.3,3.5c-1.8,5-6.9,5-9,5.4c-7.7,1.3-15.5,1.7-23.3,1.4c-2.8-0.1-7.6,0.1-11-1.1c1.3,5.7,10.7,4.9,15.1,5.1c7.8,0.3,15.6-0.1,23.3-1.4c2-0.3,7.1-0.4,9-5.4C120.3,170.2,119.8,168.4,118.5,167.2z"/><path class="st5" d="M74.9,137.2c-1-1.3-2-2.6-3.4-3.4c-0.1,0-0.1-0.1-0.2-0.1c2,2.6,3.9,5.4,3.9,8.6c0,2.9-1.5,5.5-3,8c-3.6,6-7.2,12-10.8,18.1c-1.8,3.1-2.9,3.2-6.4,3.9c-3.1,0.7-6.3,1.2-9.5,1.4c-4.8,0.2-9.9-0.6-14-3.1c-0.6-0.3-1.1-0.7-1.6-1.1c1.6,2,3.5,3.8,5.7,5.1c4.2,2.5,9.2,3.3,14,3.1c3.2-0.1,6.4-0.7,9.5-1.4c3.5-0.7,4.5-0.9,6.4-3.9c3.6-6,7.2-12,10.8-18.1c1.5-2.5,3-5.1,3-8C79.2,142.9,77,139.9,74.9,137.2z"/><path class="st5" d="M22.9,166.3c-0.4-3.2-0.9-6.4-1.3-9.5c-0.9-7-2.3-14.7-8-18.8c-0.2-0.1-0.3-0.2-0.5-0.3c2.8,4.2,3.8,9.9,4.5,15.1c0.4,3.2,0.9,6.4,1.3,9.5c0.2,1.3,0.3,2.7-0.3,3.9c-0.6,1.2-2,1.9-3.2,2.5c-3,1.4-6.1,2.9-9.1,4.3c-1.3,0.6-2.9,1.2-4.4,1.3c0.1,1.2,0.4,2.3,1.3,3.1c1.9,1.7,4.8,0.7,7.1-0.4c3-1.4,6.1-2.9,9.1-4.3c1.2-0.6,2.6-1.3,3.2-2.5C23.2,169,23.1,167.6,22.9,166.3z"/><path class="st5" d="M15.8,45.7c-0.2-2.8-0.4-5.8-2.1-8c-0.8-1.1-1.9-1.9-3.1-2.4c0.8,2,1,4.2,1.2,6.4c0.7,9.5,1.3,19.2-1.6,28.3c-0.8,2.7-2.1,5.4-4.3,7c-1.3,1-2.7,1.4-4,1.3c0.3,1,0.7,1.9,1.4,2.6c1.9,2,4.4,1.8,6.7,0.1c2.3-1.7,3.5-4.4,4.3-7C17.1,64.9,16.5,55.1,15.8,45.7z"/><path class="st5" d="M147.7,175.3c-0.5-0.8-1.3-1.2-2.2-1.6c-0.5-0.2-1.1-0.5-1.6-0.7c-0.1,0.3-0.2,0.5-0.4,0.7c-0.5,0.4-1.1,0.5-1.7,0.6c-4.7,0.5-9.5,0.7-14.3,0.6c-0.8,0-2.6,0-4.3-0.1c-0.2,0.2-0.5,0.5-0.6,0.7c-2.3,3.9,6.9,3.3,9,3.4c4.8,0.2,9.5,0,14.3-0.6c0.6-0.1,1.3-0.2,1.7-0.6C148.2,177.2,148.2,176,147.7,175.3z"/><path class="st5" d="M33.8,175.5c-1.3-0.8-2.6-1.3-4-1.7c-0.2,0.1-0.4,0.2-0.7,0.2c-3,0.1-6.1,0.3-9.2,0.3c-3.7,1.2-7,3.1-1.9,3.7c4.9,0.6,10.1,0.3,15.1,0.1C34.5,178,35,176.2,33.8,175.5z"/><path class="st5" d="M7.4,22.7C4.7,15,7.5,6.6,4,5.6C2.9,5.3,2.3,5.9,2,7.1c0.1,3.3,0,7.5,1.4,11.6c0.6,2.2,2.1,4.5,1.7,6.7c-0.3,1.9-1.5,3.8-3.3,4.5c0.1,1.4,0.2,2.5,0.4,3.2c0.3,1,1.7,1.3,2.7,1.1c2.3-0.3,3.9-2.5,4.2-4.8C9.5,27.2,7.9,24.9,7.4,22.7z"/></g></g>'},GXhW:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-wrapper"},[t("div",{staticClass:"modal-container",class:this.$style.component},[this._t("default")],2)])},i=[]},GfGX:function(e,t,a){"use strict";var s=a("Su9W"),i=a("JP+h"),n=a("tNyc"),r=a("3/ZL"),o=a("a1iv"),l=a("Gg0z"),c=a("kApn"),u=a("qP1x");t.a={components:{ModalContainer:s.a,ModalContent:i.a,FormButton:n.a,FormInput:r.a,FormLabel:o.a,SectionContainer:l.a,SectionContent:c.a,IconFont:u.a},data:function(){return{selected:"singles",showAvailableFriends:!1,inviteUsername:""}},computed:{game:function(){return this.$store.getters.game},defaultTime:function(){return this.$store.getters.defaultTime},availableFriends:function(){return this.$store.getters.availableFriends},lookingForGame:function(){return this.$store.getters.lookingForGame},profileAvatar:function(){return this.$store.getters.user.avatarUrl},profileUsername:function(){return this.$store.getters.user.username},staging:function(){return!1},optedBeta:function(){return window.context.user.optedBeta},isPremium:function(){return window.context.user.isPremium||this.staging&&this.optedBeta},userIsAdmin:function(){return this.$store.getters.userIsAdmin},minMatchmakerRange:function(){return this.$store.getters.settings.minMatchmakerRange},maxMatchmakerRange:function(){return this.$store.getters.settings.maxMatchmakerRange},minMatchmakerRangeTeams:function(){return this.$store.getters.settings.minMatchmakerRangeTeams},maxMatchmakerRangeTeams:function(){return this.$store.getters.settings.maxMatchmakerRangeTeams}},mounted:function(){var e=localStorage.getItem("selectedGameType");e||(e="singles"),this.selected=e;var t=localStorage.getItem("inviteUsername");t&&(this.inviteUsername=t),this.$store.commit("setTimeControl","teams"===this.selected?2:1),window.addEventListener("keydown",this.keyDown)},watch:{inviteUsername:function(){}},methods:{changeType:function(e){this.selected=e.target.value,"analysis-board"!==this.selected&&this.$store.commit("setTimeControl","teams"===this.selected?2:1),"analysis-board"!==this.selected&&localStorage.setItem("selectedGameType",this.selected)},hidePlayModal:function(){this.$store.commit("hidePlayModal")},invitePlayer:function(){""!==this.inviteUsername&&this.$socket.emit("invite-player",{username:this.inviteUsername,uid:window.context.user.id})},selectFriend:function(e){this.inviteUsername=e.username,this.showAvailableFriends=!1},keyDown:function(e){if("true"!==e.target.contentEditable&&!e.target.tagName.match(/input|textarea/i)&&!(e.ctrlKey||e.altKey||e.metaKey||this.isPlaying))switch(e.which){case 27:this.$store.commit("hidePlayModal")}},playFourPlayer:function(){var e=this,t=void 0;t=this.defaultTime,"singles"===this.selected?(t.gameType="singles",t.uid=window.context.user.id,this.$socket.emit("pair-me",t),this.$store.commit("hidePlayModal")):"teams"===this.selected?""!==this.inviteUsername?(this.$socket.emit("invite-player",{username:this.inviteUsername,uid:window.context.user.id}),localStorage.setItem("inviteUsername",this.inviteUsername)):(t.gameType="teams",t.uid=window.context.user.id,this.$socket.emit("pair-me",t),localStorage.setItem("inviteUsername",""),this.$store.commit("hidePlayModal")):"invitational"===this.selected?(this.$store.commit("hidePlayModal"),this.$store.commit("showInvitationalModal")):"analysis-board"===this.selected&&(this.game.gameNr&&this.$store.commit("exitGame",this.game.gameNr),this.$store.commit("hidePlayModal"),setTimeout(function(){e.$store.commit("analysisModeOn")},220)),"analysis-board"!==this.selected&&localStorage.setItem("selectedGameType",this.selected)},showRules:function(){"teams"===this.selected?this.$store.commit("showRulesTeams"):"singles"===this.selected?this.$store.commit("showRulesSingles"):this.$store.commit("setActiveTab","rules")},acknowledgeRules:function(){this.$socket.emit("acknowledge-rules",{uid:window.context.user.id})}}}},Gg0z:function(e,t,a){"use strict";var s=a("HoYi"),i=a("pvfJ"),n=a("XyMi");var r=function(e){this.$style=a("1B+S")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},GjYY:function(e,t){},GtFK:function(e,t){e.exports={"icon-small":"icon-small_3VS3UoFo_1"}},HE7R:function(e,t,a){"use strict";t.a={name:"IconFont",props:{family:{type:String,required:!0},name:{type:String,required:!0},theme:{type:String}}}},HJWK:function(e,t,a){"use strict";var s=a("XGJk"),i=a("gGcX"),n=a("XyMi");var r=function(e){a("qKi9"),this.$style=a("cLz0")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-0b2651ca",null);t.a=o.exports},HMfM:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("mvHQ"),r=a.n(n),o=a("Xxa5"),l=a.n(o),c=a("exGp"),u=a.n(c),h=a("//Fk"),d=a.n(h),m=a("qP1x"),p={atMove:-1,inVariation:-1,atVariationMove:-1},v=function(e){return new d.a(function(t){return setTimeout(t,e)})};t.a={components:{IconFont:m.a},props:{},data:function(){return{usersNewLiveMove:null,canClaim:!1}},computed:{colorNames:function(){return this.$store.getters.settings.altColorScheme?this.board.b.altColorNames:this.board.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},fourPlayer:function(){return this.$store.getters.fourPlayer},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},turn:function(){return this.game.turn},allowPlay:function(){return this.$store.getters.allowPlay},thread:function(){return this.inVariation>-1?this.game.variations[this.atMove][this.inVariation]:this.game.moves},atMove:function(){return this.$store.getters.atMove},inVariation:function(){return this.$store.getters.inVariation},atVariationMove:function(){return this.$store.getters.atVariationMove},atEndOfGame:function(){return this.inVariation<0&&this.atMove===this.game.moves.length-1},atEndOfThread:function(){return this.atThreadMove===this.thread.length-1},currMove:function(){return this.atMove>-1?this.game.moves[this.atMove]:{fullMoveNr:"",sanShort:"",player:""}},atThreadMove:function(){return this.inVariation>-1?this.atVariationMove:this.atMove},currThreadMove:function(){return this.atThreadMove>-1?this.thread[this.atThreadMove]:{fullMoveNr:"",sanShort:"",player:""}},list:function(){return this.game.movesList},vlist:function(){return this.game.variationsList},board:function(){return this.$store.getters.board},isPlaying:function(){return this.$store.getters.isPlaying},maxm:function(){return this.atMove+1+"/"+this.game.moves.length},totrunc:function(){return this.thread.length-this.atThreadMove},seat:function(){return this.$store.getters.seat},animationSpeed:function(){return this.$store.getters.settings.animationSpeed},isPremium:function(){return window.context.user.isPremium},mainScreen:function(){return this.$store.getters.mainScreen},coloredMoves:function(){return this.$store.getters.settings.coloredMoves},coloredSan:function(){return this.$store.getters.settings.coloredSan},userIsAdmin:function(){return this.$store.getters.userIsAdmin},compactView:function(){return this.game.isLiveGame},isFFA:function(){return"singles"===this.game.gameType},forwEstyle:function(){return{opacity:this.atEndOfGame?.68:1,"background-color":this.isPlaying&&this.game.turn===this.seat&&!this.atEndOfGame?"rgba(255, 255, 255, 0.2)":""}}},watch:{mainScreen:function(e){e||this.$forceUpdate()},atMove:function(){this.$store.commit("setAllowPlay"),this.canClaim=this.fourPlayer.canClaim(),this.$forceUpdate()},atVariationMove:function(){this.canClaim=this.fourPlayer.canClaim(),this.$forceUpdate()},allowPlay:function(e){this.isPlaying&&this.turn===this.seat&&this.board.b.premove&&this.onUserMove(this.board.b.premove.sq1,this.board.b.premove.sq2)}},mounted:function(){window.addEventListener("keydown",this.keyDown),this.board.b.onUserMove=this.onUserMove,this.board.b.forceMovesUpdate=this.refresh,this.fourPlayer.removeListeners(),this.fourPlayer.addMoveListener(this,"moveListener")},updated:function(){this.update()},methods:{refresh:function(){this.$forceUpdate()},showDebug:function(){return 9510244===window.context.user.id},update:function(){var e=this;return u()(l.a.mark(function t(){var a,s,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.mainScreen){t.next=2;break}return t.abrupt("return");case 2:a=100;case 3:if(!(--a>0&&e.board.b.animating)){t.next=8;break}return t.next=6,v(30);case 6:t.next=3;break;case 8:if(e.board.b.hlChecks(),s=Math.max(e.atThreadMove-3+e.fourPlayer.numOut(),0),e.board.b.hlLastMoves(e.thread.slice(s,e.atThreadMove+1)),setTimeout(function(){e.board.b.scrollToMove(e.atMove,e.inVariation,e.atVariationMove)},30),e.isFFA&&e.board.b.hlResignedKings(),e.board.b.hlMoveablePieces(),e.board.b.forcePlayerBoxUpdate(),e.board.b.forceBoardUpdate(),e.isLiveGame&&e.game.turn!==e.fourPlayer.turn()&&(console.log("fourPlayer out of sync!",e.game.turn,e.fourPlayer.turn()),console.log(e.fourPlayer.fen()),e.$store.commit("gotoMove",{atMove:e.atMove}),e.game.turn!==e.fourPlayer.turn()&&console.log("still out of sync after goto")),!e.game.hasNewMoves){t.next=27;break}for(e.game.hasNewMoves=!1,i=e.game.moves.length-1;i>=0&&e.game.moves[i].isMatingMove;)i--;if(!(e.atMove>=i-1)){t.next=26;break}return t.next=24,e.playNewMoves();case 24:t.next=27;break;case 26:e.isPlaying&&e.game.turn===e.seat&&e.forwE(null,!0);case 27:case"end":return t.stop()}},t,e)}))()},playNewMoves:function(){var e=this;return u()(l.a.mark(function t(){var a,s,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.currMove&&e.currMove.fen?e.currMove.fen:e.game.startFen,s=JSON.parse(a.split("-")[5]),i=0;case 3:if(!(e.atMove<e.game.moves.length-1)){t.next=11;break}return t.next=6,e.forw();case 6:if(e.isFFA&&e.currMove.fen&&e.animatePoints(s,JSON.parse(e.currMove.fen.split("-")[5])),!(i++>4)){t.next=9;break}return t.abrupt("break",11);case 9:t.next=3;break;case 11:case"end":return t.stop()}},t,e)}))()},onUserMove:function(e,t,a,s,n){var o=this;return u()(l.a.mark(function c(){var u,h,d,m,p,f,g,y,_,b,w,R,N,B;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!o.game.isLiveGame){l.next=19;break}if(u=o.fourPlayer.play({from:e,to:t,promoteTo:a}),o.board.b.premove&&(o.board.b.cancelPremove(),o.board.b.premove=null),null!==u){l.next=5;break}return l.abrupt("return");case 5:if(!o.isPlaying||u.player!==o.seat||o.seat!==o.game.turn){l.next=16;break}if(!n){l.next=11;break}return l.next=9,o.board.play(u,!0);case 9:l.next=12;break;case 11:o.board.play(u);case 12:o.usersNewLiveMove=u,o.$socket.emit("game",{gameNr:o.game.gameNr,action:"new-move",move:{from:u.from,to:u.to,promoteTo:a},uid:window.context.user.id}),l.next=18;break;case 16:console.log("illegal move in live play?",u),o.$store.commit("gotoMove",{atMove:o.atMove});case 18:return l.abrupt("return");case 19:if(null!==(h=s?o.fourPlayer.resign():o.fourPlayer.play({from:e,to:t,promoteTo:a}))){l.next=22;break}return l.abrupt("return");case 22:return l.next=24,o.board.play(h,s);case 24:if(d=[0,0,0,0],o.isFFA&&(m=o.currThreadMove&&o.currThreadMove.fen?o.currThreadMove.fen:o.game.startFen,d=JSON.parse(m.split("-")[5])),p=o.game.moves[o.atMove+1],p&&o.inVariation<0&&p.fen===h.fen?h=p:o.$store.commit("addMove",h),o.$store.commit("playMoveSound",h),(f=JSON.parse(r()(h))).isOnUserMove=!0,o.$store.commit("gotoMove",f),o.isFFA&&o.animatePoints(d,JSON.parse(h.fen.split("-")[5])),!o.matingMoves.length){l.next=64;break}g=!0,y=!1,_=void 0,l.prev=39,b=i()(o.matingMoves);case 41:if(g=(w=b.next()).done){l.next=50;break}return R=w.value,o.$store.commit("addMove",R),l.next=46,o.forw();case 46:o.isFFA&&o.animatePoints(d,JSON.parse(R.fen.split("-")[5]));case 47:g=!0,l.next=41;break;case 50:l.next=56;break;case 52:l.prev=52,l.t0=l.catch(39),y=!0,_=l.t0;case 56:l.prev=56,l.prev=57,!g&&b.return&&b.return();case 59:if(l.prev=59,!y){l.next=62;break}throw _;case 62:return l.finish(59);case 63:return l.finish(56);case 64:if(N=o.fourPlayer.turn(),!o.fourPlayer.isZombie(N)){l.next=72;break}return o.fourPlayer.isInStalemate(N)&&console.log("howy cwap"),l.next=69,v(200);case 69:(B=o.fourPlayer.getRandomMove()).isZombieMove=!0,o.onUserMove(B.from,B.to);case 72:case"end":return l.stop()}},c,o,[[39,52,56,64],[57,,59,63]])}))()},animatePoints:function(e,t){for(var a=[0,1,2,3],s=0;s<a.length;s++){var i=a[s],n=t[i]-e[i];n&&this.board.b.animatePoints(i,n)}},moveListener:function(e){var t=this;return u()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.isMatingMove){a.next=3;break}return t.matingMoves=[],a.abrupt("return");case 3:t.matingMoves.push(e);case 4:case"end":return a.stop()}},a,t)}))()},back:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.atThreadMove<0)){t.next=2;break}return t.abrupt("return");case 2:if(!e.animating){t.next=4;break}return t.abrupt("return");case 4:if(e.animating=!0,!e.currThreadMove){t.next=9;break}return t.next=8,e.board.undo(e.currThreadMove,!0);case 8:e.$store.commit("playMoveSound",e.currThreadMove);case 9:a=void 0,a=e.atThreadMove>0?e.thread[e.atThreadMove-1]:e.atMove>0?e.game.moves[e.atMove-1]:p,e.$store.commit("gotoMove",a),e.animating=!1;case 13:case"end":return t.stop()}},t,e)}))()},forw:function(){var e=this;return u()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.animating){t.next=3;break}return console.log("forw busy"),t.abrupt("return");case 3:if(e.animating=!0,!(a=e.thread[e.atThreadMove+1])){t.next=16;break}if(!e.usersNewLiveMove||e.usersNewLiveMove.player!==a.player||e.usersNewLiveMove.san!==a.san){t.next=10;break}e.usersNewLiveMove=null,t.next=12;break;case 10:return t.next=12,e.board.play(a,!0);case 12:e.$store.commit("playMoveSound",a),e.$store.commit("gotoMove",a),t.next=17;break;case 16:e.atEndOfThread||console.log("forw: move not found!");case 17:e.animating=!1;case 18:case"end":return t.stop()}},t,e)}))()},backR:function(){if(!(this.atThreadMove<0))if(0!==this.atVariationMove){for(var e=this.atThreadMove-1;e--&&!(e<0||this.thread[e].player===this.currThreadMove.player);e>=this.atThreadMove-4);e<-1&&(e=-1),this.inVariation<0?this.$store.commit("gotoMove",{atMove:e,inVariation:-1,atVariationMove:-1}):this.$store.commit("gotoMove",{atMove:this.atMove,inVariation:this.inVariation,atVariationMove:e<0?0:e})}else this.$store.commit("gotoMove",{atMove:this.atMove})},forwR:function(){var e=this.thread.length;if(!(this.atThreadMove>=e-1)){for(var t=this.atThreadMove+1;t<e-1&&t<this.atThreadMove+4&&this.thread[t].player!==this.currThreadMove.player;t++);var a=this.inVariation>-1;this.$store.commit("gotoMove",{atMove:a?this.atMove:t,inVariation:this.inVariation,atVariationMove:a?t:-1})}},backS:function(){this.$store.commit("gotoMove",p)},forwE:function(e,t){this.$store.commit("gotoMove",{atMove:this.game.moves.length-1}),t&&this.$store.commit("playMoveSound",this.currMove)},reset:function(){this.$store.commit("startFromPosition",this.game.startFen)},resign:function(){this.onUserMove("","","",!0)},rotate:function(e){this.board.b.rotate(e)},takeback:function(){this.atEndOfThread&&this.truncmvs()},truncmvs:function(){if(!this.game.isLiveGame)if(this.inVariation>-1){if(!this.thread.length)return;var e=this.atVariationMove;for(e<0&&(e=0);e>-1&&this.thread[e]&&this.thread[e].isMatingMove;)e--;e>0?(this.$store.commit("truncateVariation",e),this.$store.commit("gotoMove",{atMove:this.atMove,inVariation:this.inVariation,atVariationMove:e-1})):this.removeVariation(this.atMove,this.inVariation)}else if(this.game.moves.length){var t=this.atMove;for(t<0&&(t=0);t>-1&&this.game.moves[t]&&this.game.moves[t].isMatingMove;)t--;this.$store.commit("truncateMoves",t),this.$store.commit("gotoMove",{atMove:t-1}),this.$forceUpdate(),this.board.b.forcePlayerBoxUpdate()}},jumpto:function(e){var t=this;return u()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.inVariation<0&&e.inVariation<0||t.inVariation>-1&&e.inVariation>-1)){a.next=9;break}if(t.atMove-e.atMove!=1){a.next=6;break}return a.next=4,t.back();case 4:a.next=9;break;case 6:if(t.atMove-e.atMove!=-1){a.next=9;break}return a.next=9,t.forw();case 9:t.$store.commit("gotoMove",e);case 10:case"end":return a.stop()}},a,t)}))()},removeVariation:function(e,t){this.$store.commit("removeVariation",{atMove:e,inVariation:t}),this.$store.commit("gotoMove",{atMove:e})},keyDown:function(e){var t=this;return u()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.game.moves.length){a.next=2;break}return a.abrupt("return");case 2:if("true"!==e.target.contentEditable&&!e.target.tagName.match(/input|textarea/i)){a.next=4;break}return a.abrupt("return");case 4:if(!(e.ctrlKey||e.altKey||e.metaKey)){a.next=6;break}return a.abrupt("return");case 6:a.t0=e.which,a.next=37===a.t0?9:38===a.t0?12:39===a.t0?14:40===a.t0?17:190===a.t0?19:188===a.t0?21:8===a.t0?23:46===a.t0?23:26;break;case 9:return a.next=11,t.back();case 11:return a.abrupt("break",26);case 12:return t.backR(),a.abrupt("break",26);case 14:return a.next=16,t.forw();case 16:return a.abrupt("break",26);case 17:return t.forwR(),a.abrupt("break",26);case 19:return t.forwE(),a.abrupt("break",26);case 21:return t.backS(),a.abrupt("break",26);case 23:return t.game.isLiveGame||t.takeback(),e.preventDefault(),a.abrupt("break",26);case 26:case"end":return a.stop()}},a,t)}))()},moveTitle:function(e){var t=e.san+" • ";return e.date&&(t+=this.ts2time(e.date)),t+=e.annotation?"\n"+e.annotation:""},colorClass:function(e,t){return t||-1!==this.atMove?this.coloredMoves?this.colors[e]:"":"neutral"},isLastMoveInRow:function(e,t){for(var a=[3,2,1,0],s=0;s<a.length;s++){var i=a[s];if(void 0!==e[i])return i===t}},annoForList:function(e){if(e.length<21)return e;var t=e.split(/\b/),a="",s=!0,n=!1,r=void 0;try{for(var o,l=i()(t);!(s=(o=l.next()).done);s=!0){if((a+=o.value).length>20)break}}catch(e){n=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}return a+".."},ts2time:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},sanShort:function(e){return this.coloredSan&&e.sanHtml?e.sanHtml:e.sanShort.replace(/x[NBRKQD]/,"x")}}}},HREK:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rules-wrapper"},[t("rules")],1)},i=[]},Hh2A:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("tNyc"),r=a("qP1x"),o=a("z1to");t.a={components:{FormButton:n.a,IconFont:r.a,CustomData:o.a},props:{data:{}},data:function(){return{showInvite:!1,username:"",username2id:"",usernameFocused:!1}},computed:{lookingForGame:function(){return this.$store.getters.lookingForGame},mainScreen:function(){return this.$store.getters.mainScreen},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},numPlayers:function(){return this.data.players.length},isCreator:function(){return this.data.creatorId===window.context.user.id},createdGame:function(){return this.$store.getters.createdGame},isComplete:function(){return this.data.players.length>3},manualStart:function(){return!this.data.rated&&this.data.creatorId>0},canJoin:function(){return!this.isCreator&&!this.data.gameStarted&&!this.data.userJoined&&this.$store.getters.joinedGames.length<5&&(!this.isComplete||this.data.manualStart)},canLeave:function(){return!this.data.gameStarted&&this.data.userJoined},canInvite:function(){return this.canJoin&&"teams"===this.data.gameType&&this.numPlayers<3},usernameChoices:function(){return this.username?this.$store.getters.usernameChoices:this.usernameFocused?this.availableFriends:[]},availableFriends:function(){var e=[],t=!0,a=!1,s=void 0;try{for(var n,r=i()(this.$store.getters.availableFriends);!(t=(n=r.next()).done);t=!0){var o=n.value,l=!1,c=!0,u=!1,h=void 0;try{for(var d,m=i()(this.data.players);!(c=(d=m.next()).done);c=!0){if(d.value.playerId===o.uid){l=!0;break}}}catch(e){u=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(u)throw h}}l||e.push(o)}}catch(e){a=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw s}}return e},tcIcon:function(){return"bullet"===this.data.timeControlType?"icon-bullet":"blitz"===this.data.timeControlType?"icon-lightning":"rapid"===this.data.timeControlType?"icon-circle-timer":""},cgcStyle:function(){var e="";return/\d+/.test(this.data.gameStarted)?e="#ccc":this.data.gameStarted?e="#ddd":this.data.userJoined?e="#b5eec1":this.data.userCreated?e="#dde":this.data.creatorId>0&&(e="#fff"),{"background-color":e}},gameTitle:function(){var e=this.data.description?this.data.description+" ":"";return this.$store.getters.userIsAdmin&&(e+="("+this.data.creatorId+")"),e}},watch:{canInvite:function(e){e||(this.showInvite=!1)}},mounted:function(){this.$bus.$on("showCgInvite",this.showCgInvite)},methods:{joinCustomGame:function(){this.$store.commit("joinCustomGame",this.data.creatorId),this.$parent.collapseGame[this.data.creatorId]=!0,this.$forceUpdate()},showCgInvite:function(e){this.showInvite=this.data.creatorId===e},invitePlayer:function(){this.username2id&&(this.$socket.emit("invite-player",{playerId:this.username2id,username:this.username,uid:window.context.user.id,isTeamInvite:!0,customGame:this.data.creatorId}),this.username="",this.username2id="")},keyUpUsername:function(){var e=this;clearTimeout(this.keyUpUsernameTimer),this.username2id="",this.keyUpUsernameTimer=setTimeout(function(){e.username.length>2?e.$socket.emit("autocomplete-username",{username:e.username,gameType:e.gameType}):""===e.username&&(e.$store.commit("clearUsernameChoices"),e.username2id="")},400)},selectUsername:function(e){var t=this;this.username=e.username,this.username2id=e.uid,this.$store.commit("clearUsernameChoices"),this.$nextTick(function(){return t.$refs.username.select()})},clearUsername:function(){this.username="",this.username2id="",this.$store.commit("clearUsernameChoices")},blurUsername:function(){var e=this;setTimeout(function(){e.usernameFocused=!1,e.$forceUpdate()},200)}}}},HoYi:function(e,t,a){"use strict";t.a={name:"SectionContainer"}},HvXk:function(e,t,a){"use strict";var s=a("1wf3"),i=a("/Y32"),n=a("XyMi");var r=function(e){a("0YO0")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-f042c72a",null);t.a=o.exports},I57T:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"short-top-sidebar"},[t("iframe-ad",{attrs:{provider:this.provider,"slot-id":this.slotId,"go-premium-link":this.goPremiumLink}})],1)},i=[]},IEUA:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel-wrapper"},[a("div",{staticClass:"header"},[a("div",{staticClass:"num-games"},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"chess-board"}}),e._v("\n      "+e._s(e.numGames)+"\n    ")],1),e._v(" "),a("div",{staticClass:"num-players"},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"users"}}),e._v("\n      "+e._s(e.numOnline)+"\n    ")],1),e._v(" "),a("search-field"),e._v(" "),a("select-dark",{staticClass:"game-type-select",attrs:{options:e.gameTypeOptions},model:{value:e.selectedGameType,callback:function(t){e.selectedGameType=t},expression:"selectedGameType"}})],1),e._v(" "),a("div",{staticClass:"panel-watch"},e._l(e.filteredGames,function(t){return a("div",{key:t.gameNr,style:{opacity:e.visited[t.gameNr]?.84:1},on:{click:function(a){e.clickedGame(t.gameNr)},mouseover:function(a){e.preview(t,a)},mouseenter:function(a){e.preview(t,a)},mouseleave:e.cancelPreview}},[a("panel-watch-item",{attrs:{game:t}})],1)}))])},i=[]},IPwc:function(e,t,a){"use strict";var s=a("4ySx"),i=a("i7z1"),n=a("XyMi");var r=function(e){a("g9DJ")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},IbS7:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"moves-container"},[a("div",{staticStyle:{float:"right",display:"none"}},[e._v(e._s(e.atMove)+" "+e._s(e.inVariation)+" "+e._s(e.atVariationMove))]),e._v(" "),a("div",{staticClass:"movesList"},[e.game.moves?a("div",{staticClass:"table"},[a("div",{attrs:{id:"moveInList-1_-1_-1"}}),e._v(" "),e._l(e.list,function(t,s){return s?a("div",[a("div",{staticClass:"tableRow"},[a("div",{staticClass:"fullmoveNr",class:{hlMove:1===s&&-1===e.atMove}},[e._v(e._s(s)+". ")]),e._v(" "),e._l([0,1,2,3],function(s){return a("div",{staticClass:"tableCell move"},[t&&void 0!==t[s]?a("div",{staticClass:"pointer",class:{hlMove:e.atMove===t[s].atMove&&e.inVariation<0},attrs:{id:"moveInList"+t[s].atMove+"_-1_-1",title:e.moveTitle(t[s])},on:{click:function(a){e.jumpto(t[s])}}},[a("span",{class:e.colorClass(t[s].player,!0)},[a("span",{domProps:{innerHTML:e._s(e.sanShort(t[s]))}})]),e._v(" "),t[s].annotation?a("span",{staticClass:"annoInList",on:{click:function(t){e.$parent.selectTab("ann")}}},[a("i",[e._v(e._s(e.annoForList(t[s].annotation)))])]):e._e()]):e._e()])})],2),e._v(" "),e._l([0,1,2,3],function(s){return a("div",[t&&void 0!==t[s]&&void 0!==e.vlist[t[s].atMove]?a("div",e._l(e.vlist[t[s].atMove],function(i,n){return a("div",[e._l(i,function(r,o){return o&&r?a("div",{staticClass:"tableRow variationRow"},[void 0===i[o-1]?a("div",{staticClass:"fullmoveNr"},[e._v("("+e._s(o)+".. ")]):a("div",{staticClass:"fullmoveNr"},[e._v(" "+e._s(o)+"..")]),e._v(" "),e._l([0,1,2,3,4],function(l){return a("div",{staticClass:"tableCell variationCell move"},[l<4&&void 0!==r[l]?a("div",{staticClass:"pointer",class:{hlMove:e.atMove===r[l].atMove&&e.inVariation===r[l].inVariation&&e.atVariationMove===r[l].atVariationMove},attrs:{id:"moveInList"+r[l].atMove+"_"+r[l].inVariation+"_"+r[l].atVariationMove,title:e.moveTitle(r[l])},on:{click:function(t){e.jumpto(r[l])}}},[a("span",{class:e.colorClass(r[l].player,!0)},[a("span",{domProps:{innerHTML:e._s(e.sanShort(r[l]))}})]),e._v(" "),r[l].annotation?a("span",{staticClass:"annoInList",on:{click:function(t){e.$parent.selectTab("ann")}}},[a("i",[e._v(e._s(e.annoForList(r[l].annotation)))])]):e._e()]):e._e(),e._v(" "),l>0&&void 0===i[o+1]&&l>0&&e.isLastMoveInRow(r,l-1)?a("div",{staticClass:"variationCell",staticStyle:{display:"table-cell"}},[a("div",{staticStyle:{float:"left"}},[e._v(" ) ")]),e._v(" "),a("icon-font",{class:e.$style["icon-small"],staticStyle:{float:"left",cursor:"pointer"},attrs:{family:"chess",theme:"neutral",name:"x",title:"Delete variation"},on:{click:function(a){e.removeVariation(t[s].atMove,n)}}})],1):e._e()])})],2):e._e()}),e._v(" "),e.fourPlayer.gameOverInfo()&&!e.atEndOfGame&&e.atEndOfThread&&e.atMove===t[s].atMove&&e.inVariation===n?a("div",{staticClass:"gameOverInfo variationRow"},[a("i",{domProps:{innerHTML:e._s(e.fourPlayer.gameOverInfo().replace("Draw","&#189;-&#189;"))}})]):e._e()],2)})):e._e()])})],2):e._e()}),e._v(" "),e.atEndOfGame&&e.fourPlayer.gameOverInfo()?a("div",{staticClass:"gameOverInfo"},[a("i",{domProps:{innerHTML:e._s(e.fourPlayer.gameOverInfo().replace(/Draw\.?/i,"&#189;-&#189;"))}})]):e._e()],2):e._e()]),e._v(" "),a("div",{staticClass:"controls",style:{"min-height":e.compactView?"30px":"60px"}},[e.compactView?e._e():a("div",{staticClass:"controls-row"},[a("div",{staticClass:"currNr"},[e.currThreadMove.sanShort?a("span",{class:e.colorClass(e.currThreadMove.player)},[e._v(e._s(e.currThreadMove.fullMoveNr+".")+e._s(e.colors[e.currThreadMove.player].charAt(0)))]):e._e()]),e._v(" "),a("div",{staticClass:"currsan"},[e.currThreadMove.sanShort?a("span",{class:e.colorClass(e.currThreadMove.player),domProps:{innerHTML:e._s(e.sanShort(e.currThreadMove))}}):e._e()]),e._v(" "),a("div",{staticClass:"gameInfo"}),e._v(" "),a("div",{staticClass:"maxm"},[e._v(e._s(e.maxm)+" ")]),e._v(" "),e.game.isLiveGame?e._e():a("div",{staticClass:"btn-icon reset",attrs:{title:"Reset"},on:{click:e.reset}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"circle-x"}})],1)]),e._v(" "),a("div",{staticClass:"controls-row",style:{"margin-top":e.$store.getters.isFirefox?"-4px":"-6px"}},[a("div",{staticClass:"takeback-wrapper"},[a("div",[!e.game.isLiveGame&&e.currThreadMove&&e.atEndOfThread?a("div",{staticClass:"btn-icon takeback",class:e.colorClass(e.currThreadMove.player),attrs:{tooltip:"Takeback (Shortcut: Delete/Backspace)"},on:{click:e.takeback}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:e.colorClass(e.currThreadMove.player),name:"x"}})],1):e.game.isLiveGame?e._e():a("div",{staticClass:"btn-icon truncate",attrs:{tooltip:"Takeback "+e.totrunc+" moves"},on:{click:e.truncmvs}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"x"}}),e._v(" "),a("span",[e._v(e._s(e.totrunc))])],1)])]),e._v(" "),a("div",{staticClass:"navbuttons-wrapper"},[a("div",{staticClass:"btn-icon",on:{click:e.backS}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"chevron-previous"}})],1),e._v(" "),a("div",{staticClass:"btn-icon",on:{click:e.backR}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"double-chevron-left"}})],1),e._v(" "),a("div",{staticClass:"btn-icon",on:{click:e.back}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"chevron-left"}})],1),e._v(" "),a("div",{staticClass:"btn-icon",on:{click:e.forw}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"chevron-right"}})],1),e._v(" "),a("div",{staticClass:"btn-icon",on:{click:e.forwR}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"double-chevron-right"}})],1),e._v(" "),a("div",{staticClass:"btn-icon",style:e.forwEstyle,on:{click:e.forwE}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:"chevron-next"}})],1)]),e._v(" "),a("div",{staticClass:"resign-wrapper"},[this.game.isLiveGame||this.fourPlayer.gameOver()?e._e():a("div",{staticClass:"btn-icon resign",class:e.colorClass(e.fourPlayer.turn()),attrs:{tooltip:2===e.canClaim?"Auto claim":1===e.canClaim?"Claim win":"Resign"},on:{click:e.resign}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:e.colorClass(e.fourPlayer.turn()),name:2===e.canClaim?"square-checkmark":1===e.canClaim?"cup":"flag"}})],1)])])]),e._v(" "),e.showDebug()?a("textarea",{staticClass:"dbg"},[e._v("seat:      "+e._s(e.seat)+"\nturn:      "+e._s(e.fourPlayer.turn())+"\natMove:    "+e._s(e.atMove)+"\ninVariation:    "+e._s(e.inVariation)+"\natVariationMove:    "+e._s(e.atVariationMove)+"\natEndOfGame: "+e._s(e.atEndOfGame)+"\ngameOver:  "+e._s(e.fourPlayer.gameOver())+"\ngameOverInfo:  "+e._s(e.fourPlayer.gameOverInfo())+"\ncanClaim: "+e._s(e.canClaim)+"\nRuleVariants: "+e._s(e.fourPlayer.getRuleVariants())+"\nLives: "+e._s(e.fourPlayer.lives())+"\ncurrMove: "+e._s(e.currMove)+"\natThreadMove: "+e._s(e.atThreadMove)+"\ncurrThreadMove: "+e._s(e.currThreadMove)+"\natVariationMove: "+e._s(e.atVariationMove)+"\ngame "+e._s(e.game)+"\nPosData:   "+e._s(JSON.stringify(e.fourPlayer.positionData(),0,2))+"\n<hr>\n    ")]):e._e()])},i=[]},IcnI:function(e,t,a){"use strict";var s=a("7+uW"),i=a("NYxO"),n=a("DmT9"),r=a.n(n),o=a("hMcO"),l=a.n(o),c=a("yI0o"),u=a("NAsm"),h=a("4b1U"),d=a("bREw"),m=a("6qrf");s.default.use(i.a),s.default.prototype.l=console.log.bind(console);var p=new i.a.Store({modules:{game:c.a,archive:u.a,watch:h.a,user:d.a,sidebar:m.a}}),v=void 0;v="https://4player.chess.com";var f=r()(v,{transports:["websocket","polling"]});s.default.use(l.a,f,p),t.a=p},Itpt:function(e,t,a){var s,i,n;
/*! jQuery UI - v1.12.1 - 2018-08-14
* http://jqueryui.com
* Includes: widget.js, data.js, disable-selection.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
/*! jQuery UI - v1.12.1 - 2018-08-14
* http://jqueryui.com
* Includes: widget.js, data.js, disable-selection.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(r){i=[a("7t+N")],void 0===(n="function"==typeof(s=r)?s.apply(t,i):s)||(e.exports=n)}(function(e){e.ui=e.ui||{},e.ui.version="1.12.1";var t=0,a=Array.prototype.slice;e.cleanData=function(t){return function(a){var s,i,n;for(n=0;null!=(i=a[n]);n++)try{(s=e._data(i,"events"))&&s.remove&&e(i).triggerHandler("remove")}catch(e){}t(a)}}(e.cleanData),e.widget=function(t,a,s){var i,n,r,o={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return s||(s=a,a=e.Widget),e.isArray(s)&&(s=e.extend.apply(null,[{}].concat(s))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},i=e[l][t],n=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new n(e,t)},e.extend(n,i,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),(r=new a).options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?void(o[t]=function(){function e(){return a.prototype[t].apply(this,arguments)}function i(e){return a.prototype[t].apply(this,e)}return function(){var t,a=this._super,n=this._superApply;return this._super=e,this._superApply=i,t=s.apply(this,arguments),this._super=a,this._superApply=n,t}}()):void(o[t]=s)}),n.prototype=e.widget.extend(r,{widgetEventPrefix:i&&r.widgetEventPrefix||t},o,{constructor:n,namespace:l,widgetName:t,widgetFullName:c}),i?(e.each(i._childConstructors,function(t,a){var s=a.prototype;e.widget(s.namespace+"."+s.widgetName,n,a._proto)}),delete i._childConstructors):a._childConstructors.push(n),e.widget.bridge(t,n),n},e.widget.extend=function(t){for(var s,i,n=a.call(arguments,1),r=0,o=n.length;o>r;r++)for(s in n[r])i=n[r][s],n[r].hasOwnProperty(s)&&void 0!==i&&(t[s]=e.isPlainObject(i)?e.isPlainObject(t[s])?e.widget.extend({},t[s],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,s){var i=s.prototype.widgetFullName||t;e.fn[t]=function(n){var r="string"==typeof n,o=a.call(arguments,1),l=this;return r?this.length||"instance"!==n?this.each(function(){var a,s=e.data(this,i);return"instance"===n?(l=s,!1):s?e.isFunction(s[n])&&"_"!==n.charAt(0)?(a=s[n].apply(s,o))!==s&&void 0!==a?(l=a&&a.jquery?l.pushStack(a.get()):a,!1):void 0:e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}):l=void 0:(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,i);t?(t.option(n||{}),t._init&&t._init()):e.data(this,i,new s(n,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(a,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),a),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,a){t._removeClass(a,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,a){var s,i,n,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(s=t.split(".")).shift(),s.length){for(i=r[t]=e.widget.extend({},this.options[t]),n=0;s.length-1>n;n++)i[s[n]]=i[s[n]]||{},i=i[s[n]];if(t=s.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=a}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=a}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var a,s,i;for(a in t)i=this.classesElementLookup[a],t[a]!==this.options.classes[a]&&i&&i.length&&(s=e(i.get()),this._removeClass(i,a),s.addClass(this._classes({element:s,keys:a,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function a(a,n){var r,o;for(o=0;a.length>o;o++)r=i.classesElementLookup[a[o]]||e(),r=t.add?e(e.unique(r.get().concat(t.element.get()))):e(r.not(t.element).get()),i.classesElementLookup[a[o]]=r,s.push(a[o]),n&&t.classes[a[o]]&&s.push(t.classes[a[o]])}var s=[],i=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&a(t.keys.match(/\S+/g)||[],!0),t.extra&&a(t.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(t){var a=this;e.each(a.classesElementLookup,function(s,i){-1!==e.inArray(t.target,i)&&(a.classesElementLookup[s]=e(i.not(t.target).get()))})},_removeClass:function(e,t,a){return this._toggleClass(e,t,a,!1)},_addClass:function(e,t,a){return this._toggleClass(e,t,a,!0)},_toggleClass:function(e,t,a,s){s="boolean"==typeof s?s:a;var i="string"==typeof e||null===e,n={extra:i?t:a,keys:i?e:t,element:i?this.element:e,add:s};return n.element.toggleClass(this._classes(n),s),this},_on:function(t,a,s){var i,n=this;"boolean"!=typeof t&&(s=a,a=t,t=!1),s?(a=i=e(a),this.bindings=this.bindings.add(a)):(s=a,a=this.element,i=this.widget()),e.each(s,function(s,r){function o(){return t||!0!==n.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?n[r]:r).apply(n,arguments):void 0}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+n.eventNamespace,u=l[2];u?i.on(c,u,o):a.on(c,o)})},_off:function(t,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(a).off(a),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var a=this;return setTimeout(function(){return("string"==typeof e?a[e]:e).apply(a,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,a,s){var i,n,r=this.options[t];if(s=s||{},(a=e.Event(a)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),a.target=this.element[0],n=a.originalEvent)for(i in n)i in a||(a[i]=n[i]);return this.element.trigger(a,s),!(e.isFunction(r)&&!1===r.apply(this.element[0],[a].concat(s))||a.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,a){e.Widget.prototype["_"+t]=function(s,i,n){"string"==typeof i&&(i={effect:i});var r,o=i?!0===i||"number"==typeof i?a:i.effect||a:t;"number"==typeof(i=i||{})&&(i={duration:i}),r=!e.isEmptyObject(i),i.complete=n,i.delay&&s.delay(i.delay),r&&e.effects&&e.effects.effect[o]?s[t](i):o!==t&&s[o]?s[o](i.duration,i.easing,n):s.queue(function(a){e(this)[t](),n&&n.call(s[0]),a()})}}),e.widget,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(a){return!!e.data(a,t)}}):function(t,a,s){return!!e.data(t,s[3])}}),e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),e.fn.scrollParent=function(t){var a=this.css("position"),s="absolute"===a,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var t=e(this);return(!s||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==a&&n.length?n:e(this[0].ownerDocument||document)},e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;e(document).on("mouseup",function(){s=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(a){return!0===e.data(a.target,t.widgetName+".preventClickEvent")?(e.removeData(a.target,t.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var a=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,a,s){var i,n=e.ui[t].prototype;for(i in s)n.plugins[i]=n.plugins[i]||[],n.plugins[i].push([a,s[i]])},call:function(e,t,a,s){var i,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;n.length>i;i++)e.options[n[i][0]]&&n[i][1].apply(e.element,a)}},e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(a){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")},e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var a=this.options;return!(this.helper||a.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===a.iframeFix?"iframe":a.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var a=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(a).length||e.ui.safeBlur(a)},_mouseStart:function(t){var a=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,a){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!a){var s=this._uiHash();if(!1===this._trigger("drag",t,s))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var a=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==a._trigger("stop",t)&&a._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var a=this.options,s=e.isFunction(a.helper),i=s?e(a.helper.apply(this.element[0],[t])):"clone"===a.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===a.appendTo?this.element[0].parentNode:a.appendTo),s&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),a=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==a&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,a,s,i=this.options,n=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,e(n).width()-this.helperProportions.width-this.margins.left,(e(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),void((s=(a=e(i.containment))[0])&&(t=/(scroll|auto)/.test(a.css("overflow")),this.containment=[(parseInt(a.css("borderLeftWidth"),10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=a))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var a="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*a,left:t.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*a}},_generatePosition:function(e,t){var a,s,i,n,r=this.options,o=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),a=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):a=this.containment,e.pageX-this.offset.click.left<a[0]&&(l=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(c=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(l=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(c=a[3]+this.offset.click.top)),r.grid&&(i=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=a?i-this.offset.click.top>=a[1]||i-this.offset.click.top>a[3]?i:i-this.offset.click.top>=a[1]?i-r.grid[1]:i+r.grid[1]:i,n=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=a?n-this.offset.click.left>=a[0]||n-this.offset.click.left>a[2]?n:n-this.offset.click.left>=a[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,a,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[a,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,a,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,a,s){var i=e.extend({},a,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var a=e(this).sortable("instance");a&&!a.options.disabled&&(s.sortables.push(a),a.refreshPositions(),a._trigger("activate",t,i))})},stop:function(t,a,s){var i=e.extend({},a,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,a,s){e.each(s.sortables,function(){var i=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(i=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&e.contains(n.element[0],this.element[0])&&(i=!1),i})),i?(n.isOver||(n.isOver=1,s._parent=a.helper.parent(),n.currentItem=a.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return a.helper[0]},t.target=n.currentItem[0],n._mouseCapture(t,!0),n._mouseStart(t,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",t),s.dropped=n.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(t),a.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",t,n._uiHash(n)),n._mouseStop(t,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),a.helper.appendTo(s._parent),s._refreshOffsets(t),a.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,a,s){var i=e("body"),n=s.options;i.css("cursor")&&(n._cursor=i.css("cursor")),i.css("cursor",n.cursor)},stop:function(t,a,s){var i=s.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,a,s){var i=e(a.helper),n=s.options;i.css("opacity")&&(n._opacity=i.css("opacity")),i.css("opacity",n.opacity)},stop:function(t,a,s){var i=s.options;i._opacity&&e(a.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,a){a.scrollParentNotHidden||(a.scrollParentNotHidden=a.helper.scrollParent(!1)),a.scrollParentNotHidden[0]!==a.document[0]&&"HTML"!==a.scrollParentNotHidden[0].tagName&&(a.overflowOffset=a.scrollParentNotHidden.offset())},drag:function(t,a,s){var i=s.options,n=!1,r=s.scrollParentNotHidden[0],o=s.document[0];r!==o&&"HTML"!==r.tagName?(i.axis&&"x"===i.axis||(s.overflowOffset.top+r.offsetHeight-t.pageY<i.scrollSensitivity?r.scrollTop=n=r.scrollTop+i.scrollSpeed:t.pageY-s.overflowOffset.top<i.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(s.overflowOffset.left+r.offsetWidth-t.pageX<i.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+i.scrollSpeed:t.pageX-s.overflowOffset.left<i.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(o).scrollTop()<i.scrollSensitivity?n=e(o).scrollTop(e(o).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(o).scrollTop())<i.scrollSensitivity&&(n=e(o).scrollTop(e(o).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(o).scrollLeft()<i.scrollSensitivity?n=e(o).scrollLeft(e(o).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(o).scrollLeft())<i.scrollSensitivity&&(n=e(o).scrollLeft(e(o).scrollLeft()+i.scrollSpeed)))),!1!==n&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,a,s){var i=s.options;s.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),a=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:a.top,left:a.left})})},drag:function(t,a,s){var i,n,r,o,l,c,u,h,d,m,p=s.options,v=p.snapTolerance,f=a.offset.left,g=f+s.helperProportions.width,y=a.offset.top,_=y+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)c=(l=s.snapElements[d].left-s.margins.left)+s.snapElements[d].width,h=(u=s.snapElements[d].top-s.margins.top)+s.snapElements[d].height,l-v>g||f>c+v||u-v>_||y>h+v||!e.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(i=v>=Math.abs(u-_),n=v>=Math.abs(h-y),r=v>=Math.abs(l-g),o=v>=Math.abs(c-f),i&&(a.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),n&&(a.position.top=s._convertPositionTo("relative",{top:h,left:0}).top),r&&(a.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),o&&(a.position.left=s._convertPositionTo("relative",{top:0,left:c}).left)),m=i||n||r||o,"outer"!==p.snapMode&&(i=v>=Math.abs(u-y),n=v>=Math.abs(h-_),r=v>=Math.abs(l-f),o=v>=Math.abs(c-g),i&&(a.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),n&&(a.position.top=s._convertPositionTo("relative",{top:h-s.helperProportions.height,left:0}).top),r&&(a.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),o&&(a.position.left=s._convertPositionTo("relative",{top:0,left:c-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(i||n||r||o||m)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=i||n||r||o||m)}}),e.ui.plugin.add("draggable","stack",{start:function(t,a,s){var i,n=s.options,r=e.makeArray(e(n.stack)).sort(function(t,a){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(a).css("zIndex"),10)||0)});r.length&&(i=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,a,s){var i=e(a.helper),n=s.options;i.css("zIndex")&&(n._zIndex=i.css("zIndex")),i.css("zIndex",n.zIndex)},stop:function(t,a,s){var i=s.options;i._zIndex&&e(a.helper).css("zIndex",i._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,a=this.options,s=a.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(a.scope),a.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,a){if("accept"===t)this.accept=e.isFunction(a)?a:function(e){return e.is(a)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(a)}this._super(t,a)},_activate:function(t){var a=e.ui.ddmanager.current;this._addActiveClass(),a&&this._trigger("activate",t,this.ui(a))},_deactivate:function(t){var a=e.ui.ddmanager.current;this._removeActiveClass(),a&&this._trigger("deactivate",t,this.ui(a))},_over:function(t){var a=e.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(a)))},_out:function(t){var a=e.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(a)))},_drop:function(t,a){var s=a||e.ui.ddmanager.current,n=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var a=e(this).droppable("instance");return a.options.greedy&&!a.options.disabled&&a.options.scope===s.options.scope&&a.accept.call(a.element[0],s.currentItem||s.element)&&i(s,e.extend(a,{offset:a.element.offset()}),a.options.tolerance,t)?(n=!0,!1):void 0}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(s)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var i=e.ui.intersect=function(){function e(e,t,a){return e>=t&&t+a>e}return function(t,a,s,i){if(!a.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,o=n+t.helperProportions.width,l=r+t.helperProportions.height,c=a.offset.left,u=a.offset.top,h=c+a.proportions().width,d=u+a.proportions().height;switch(s){case"fit":return n>=c&&h>=o&&r>=u&&d>=l;case"intersect":return n+t.helperProportions.width/2>c&&h>o-t.helperProportions.width/2&&r+t.helperProportions.height/2>u&&d>l-t.helperProportions.height/2;case"pointer":return e(i.pageY,u,a.proportions().height)&&e(i.pageX,c,a.proportions().width);case"touch":return(r>=u&&d>=r||l>=u&&d>=l||u>r&&l>d)&&(n>=c&&h>=n||o>=c&&h>=o||c>n&&o>h);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,a){var s,i,n=e.ui.ddmanager.droppables[t.options.scope]||[],r=a?a.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;n.length>s;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(i=0;o.length>i;i++)if(o[i]===n[s].element[0]){n[s].proportions().height=0;continue e}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],a),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(t,a){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&i(t,this,this.options.tolerance,a)&&(s=this._drop.call(this,a)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,a)))}),s},dragStart:function(t,a){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,a)})},drag:function(t,a){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,a),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,r,o=i(t,this,this.options.tolerance,a),l=!o&&this.isover?"isout":o&&!this.isover?"isover":null;l&&(this.options.greedy&&(n=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n})).length&&((s=e(r[0]).droppable("instance")).greedyChild="isover"===l)),s&&"isover"===l&&(s.isover=!1,s.isout=!0,s._out.call(s,a)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,a),s&&"isout"===l&&(s.isout=!1,s.isover=!0,s._over.call(s,a)))}})},dragStop:function(t,a){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,a)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,a){if("hidden"===e(t).css("overflow"))return!1;var s=a&&"left"===a?"scrollLeft":"scrollTop",i=!1;return t[s]>0||(t[s]=1,i=t[s]>0,t[s]=0,i)},_create:function(){var t,a=this.options,s=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),a.autoHide&&e(this.element).on("mouseenter",function(){a.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){a.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,a=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(a(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,a,s,i,n,r=this.options,o=this;if(this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},a=0;s.length>a;a++)i="ui-resizable-"+(t=e.trim(s[a])),n=e("<div>"),this._addClass(n,"ui-resizable-handle "+i),n.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(n);this._renderAxis=function(t){var a,s,i,n;for(a in t=t||this.element,this.handles)this.handles[a].constructor===String?this.handles[a]=this.element.children(this.handles[a]).first().show():(this.handles[a].jquery||this.handles[a].nodeType)&&(this.handles[a]=e(this.handles[a]),this._on(this.handles[a],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[a],this.element),n=/sw|ne|nw|se|n|s/.test(a)?s.outerHeight():s.outerWidth(),i=["padding",/ne|nw|n/.test(a)?"Top":/se|sw|s/.test(a)?"Bottom":/^e$/.test(a)?"Right":"Left"].join(""),t.css(i,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[a])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var a,s,i=!1;for(a in this.handles)((s=e(this.handles[a])[0])===t.target||e.contains(s,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var a,s,i,n=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),a=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(a+=e(n.containment).scrollLeft()||0,s+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:a,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var a,s,i=this.originalMousePosition,n=this.axis,r=t.pageX-i.left||0,o=t.pageY-i.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(a=l.apply(this,[t,r,o]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(a=this._updateRatio(a,t)),a=this._respectSize(a,t),this._updateCache(a),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var a,s,i,n,r,o,l,c=this.options,u=this;return this._helper&&(i=(s=(a=this._proportionallyResizeElements).length&&/textarea/i.test(a[0].nodeName))&&this._hasScroll(a[0],"left")?0:u.sizeDiff.height,n=s?0:u.sizeDiff.width,r={width:u.helper.width()-n,height:u.helper.height()-i},o=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:o})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,a,s,i,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,a=n.maxHeight*this.aspectRatio,i=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),s>n.minHeight&&(n.minHeight=s),n.maxWidth>a&&(n.maxWidth=a),n.maxHeight>i&&(n.maxHeight=i)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,a=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(a.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(a.height-e.height),e.left=t.left+(a.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,a=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,n=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,o=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(a),u=/nw|ne|n/.test(a);return n&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),n&&c&&(e.left=o-t.minWidth),s&&c&&(e.left=o-t.maxWidth),r&&u&&(e.top=l-t.minHeight),i&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,a=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)a[t]=parseFloat(s[t])||0,a[t]+=parseFloat(i[t])||0;return{height:a[0]+a[2],width:a[1]+a[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,a=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:a.height()-this.outerDimensions.height||0,width:a.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,a=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var a=this.originalSize;return{left:this.originalPosition.left+t,width:a.width-t}},n:function(e,t,a){var s=this.originalSize;return{top:this.originalPosition.top+a,height:s.height-a}},s:function(e,t,a){return{height:this.originalSize.height+a}},se:function(t,a,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,a,s]))},sw:function(t,a,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,a,s]))},ne:function(t,a,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,a,s]))},nw:function(t,a,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,a,s]))}},_propagate:function(t,a){e.ui.plugin.call(this,t,[a,this.ui()]),"resize"!==t&&this._trigger(t,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var a=e(this).resizable("instance"),s=a.options,i=a._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&a._hasScroll(i[0],"left")?0:a.sizeDiff.height,o=n?0:a.sizeDiff.width,l={width:a.size.width-o,height:a.size.height-r},c=parseFloat(a.element.css("left"))+(a.position.left-a.originalPosition.left)||null,u=parseFloat(a.element.css("top"))+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(a.element.css("width")),height:parseFloat(a.element.css("height")),top:parseFloat(a.element.css("top")),left:parseFloat(a.element.css("left"))};i&&i.length&&e(i[0]).css({width:s.width,height:s.height}),a._updateCache(s),a._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,a,s,i,n,r,o,l=e(this).resizable("instance"),c=l.options,u=l.element,h=c.containment,d=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;d&&(l.containerElement=e(d),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(d),a=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){a[e]=l._num(t.css("padding"+s))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-a[3],width:t.innerWidth()-a[1]},s=l.containerOffset,i=l.containerSize.height,n=l.containerSize.width,r=l._hasScroll(d,"left")?d.scrollWidth:n,o=l._hasScroll(d)?d.scrollHeight:i,l.parentData={element:d,left:s.left,top:s.top,width:r,height:o}))},resize:function(t){var a,s,i,n,r=e(this).resizable("instance"),o=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,h={top:0,left:0},d=r.containerElement,m=!0;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-h.left),u&&(r.size.height=r.size.width/r.aspectRatio,m=!1),r.position.left=o.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,m=!1),r.position.top=r._helper?l.top:0),i=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),i&&n?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),a=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-h.left:r.offset.left-l.left)),s=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-h.top:r.offset.top-l.top)),a+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-a,u&&(r.size.height=r.size.width/r.aspectRatio,m=!1)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,u&&(r.size.width=r.size.height*r.aspectRatio,m=!1)),m||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),a=t.options,s=t.containerOffset,i=t.containerPosition,n=t.containerElement,r=e(t.helper),o=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!a.animate&&/relative/.test(n.css("position"))&&e(this).css({left:o.left-i.left-s.left,width:l,height:c}),t._helper&&!a.animate&&/static/.test(n.css("position"))&&e(this).css({left:o.left-i.left-s.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,a){var s=e(this).resizable("instance"),i=s.options,n=s.originalSize,r=s.originalPosition,o={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0};e(i.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),i={},n=t.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(n,function(e,t){var a=(s[t]||0)+(o[t]||0);a&&a>=0&&(i[t]=a||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),a=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,a=e(this).resizable("instance"),s=a.options,i=a.size,n=a.originalSize,r=a.originalPosition,o=a.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,c=l[0]||1,u=l[1]||1,h=Math.round((i.width-n.width)/c)*c,d=Math.round((i.height-n.height)/u)*u,m=n.width+h,p=n.height+d,v=s.maxWidth&&m>s.maxWidth,f=s.maxHeight&&p>s.maxHeight,g=s.minWidth&&s.minWidth>m,y=s.minHeight&&s.minHeight>p;s.grid=l,g&&(m+=c),y&&(p+=u),v&&(m-=c),f&&(p-=u),/^(se|s|e)$/.test(o)?(a.size.width=m,a.size.height=p):/^(ne)$/.test(o)?(a.size.width=m,a.size.height=p,a.position.top=r.top-d):/^(sw)$/.test(o)?(a.size.width=m,a.size.height=p,a.position.left=r.left-h):((0>=p-u||0>=m-c)&&(t=a._getPaddingPlusBorderDimensions(this)),p-u>0?(a.size.height=p,a.position.top=r.top-d):(p=u-t.height,a.size.height=p,a.position.top=r.top+n.height-p),m-c>0?(a.size.width=m,a.position.left=r.left-h):(m=c-t.width,a.size.width=m,a.position.left=r.left+n.width-m))}}),e.ui.resizable})},"J+MK":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board-panel",style:{height:e.isPremium?"100vh":"calc(100vh - 265px)","background-color":"rgba(0, 0, 0, "+(100-e.$store.getters.settings.panelTransparency)/100+")",opacity:e.rendered?"1":"0.001"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"checkbox",id:"highlightLegal"},domProps:{checked:e.highlightLegal}}),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.editPosition,expression:"editPosition"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.editPosition)?e._i(e.editPosition,null)>-1:e.editPosition},on:{change:function(t){var a=e.editPosition,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.editPosition=a.concat([null])):n>-1&&(e.editPosition=a.slice(0,n).concat(a.slice(n+1)))}else e.editPosition=i}}}),e._v(" "),a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"panel-header"},[e.game.gameNr&&!e.game.isLiveGame?a("div",{staticClass:"btn-icon help",on:{click:function(t){e.$store.commit(e.analysisMode?"analysisModeOff":"analysisModeOn")}}},[a("icon-font",{class:e.$style["icon-small"],staticStyle:{"margin-left":"-18px"},attrs:{name:"square-pencil",title:"Analysis mode (shortcut A): Click on game type, points, names or ratings to change them.",family:"chess",theme:e.analysisMode?"secondary":"neutral"}})],1):e._e(),e._v(" "),e.analysisMode?a("select-dark",{staticClass:"game-type-select",attrs:{options:e.gameTypeOptions},model:{value:e.gameType,callback:function(t){e.gameType=t},expression:"gameType"}}):e._e(),e._v(" "),e.analysisMode?e._e():a("div",{staticClass:"gameType"},[e._v(e._s("teams"===e.game.gameType?"Teams":"Free-for-All"))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying&&!e.editPosition,expression:"!isPlaying && !editPosition"}],staticClass:"rotate-wrapper"},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:e.autorotate,expression:"autorotate"}],attrs:{id:"autorotate",type:"checkbox"},domProps:{checked:Array.isArray(e.autorotate)?e._i(e.autorotate,null)>-1:e.autorotate},on:{change:function(t){var a=e.autorotate,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.autorotate=a.concat([null])):n>-1&&(e.autorotate=a.slice(0,n).concat(a.slice(n+1)))}else e.autorotate=i}}}),e._v(" "),a("div",{staticClass:"btn-icon rotate",class:e.colors[e.board.b.currplview],attrs:{title:"Rotate board (Shortcut: R)"},on:{click:function(t){e.rotate("next")}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:e.colorTheme(e.board.b.currplview),name:"circle-compass"}})],1),e._v(" "),a("div",{staticClass:"btn-icon autorotate",attrs:{title:"Auto-rotate (Rotate each move. Shortcut: T)"},on:{click:e.toggleAutoRotate}},[a("icon-font",{class:e.$style.icon,staticStyle:{"margin-left":"auto"},attrs:{family:"chess",theme:e.autorotate?"active":"inactive",name:"undo"}}),e._v(" "),e.autorotate?a("icon-font",{class:e.$style["icon-tiny"],staticStyle:{"margin-top":"4px !important","margin-left":"-18px"},attrs:{family:"chess",theme:"active",name:"checkmark"}}):e._e()],1)]),e._v(" "),e.showDebug()?a("a",{staticStyle:{"font-size":".5em"},on:{click:e.dbg}},[e._v("debug")]):e._e(),e._v(" "),e.game.gameNr&&!e.editPosition?a("div",{staticClass:"btn-icon share"},[e.showShare?a("textarea",{ref:"sharebox",staticClass:"sharebox",domProps:{value:e.gameLink},on:{mouseleave:function(t){e.showShare=!1}}}):e._e(),e._v(" "),e.showShare?e._e():a("icon-font",{class:e.$style.icon,staticStyle:{"margin-left":"auto"},attrs:{family:"chess",theme:"neutral",name:"link"},on:{click:function(t){e.showShare=!0,e.$nextTick(function(){return e.$refs.sharebox.select()})}}})],1):e._e(),e._v(" "),a("div",{staticClass:"btn-icon help",on:{click:e.toggleHelp}},[a("icon-font",{class:e.$style.icon,staticStyle:{"margin-left":"auto"},attrs:{family:"chess",name:"circle-question",theme:e.showHelp?"secondary":"neutral"}})],1),e._v(" "),a("div",{staticClass:"btn-icon help",on:{click:function(t){e.$store.commit(e.game.gameNr?"exitGame":"analysisModeOff",e.game.gameNr)}}},[a("icon-font",{class:e.$style.icon,attrs:{name:"x",title:e.game.gameNr?"Exit (Shortcut: Esc)":"Show/hide analysis board (Shortcut: A)",family:"chess",theme:"neutral"}})],1)],1),e._v(" "),e.showHelp?a("div",{staticClass:"help-wrapper",on:{click:e.toggleHelp}},[a("help")],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editPosition&&!e.showHelp,expression:"!editPosition && !showHelp"}],staticClass:"moves-controls",style:{height:e.dividerHeight}},[a("moves")],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showHelp,expression:"!showHelp"}],staticClass:"tab-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"chat"===e.activeTab,expression:"activeTab === 'chat'"}],staticClass:"content-chat"},[a("chat")],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"pgn"===e.activeTab,expression:"activeTab === 'pgn'"}],staticClass:"content-pgn"},[a("pgn4")],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"fen"===e.activeTab,expression:"activeTab === 'fen'"}],staticClass:"content-fen"},[a("fen4")],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ann"===e.activeTab,expression:"activeTab === 'ann'"}],staticClass:"content-annotation"},[a("div",{staticClass:"btn-icon annotation-help",attrs:{title:"Annotations are saved automatically with the current move. You can annotate various moves and save the pgn. "}},[a("icon-font",{class:e.$style.icon,staticStyle:{"margin-left":"auto"},attrs:{family:"chess",theme:"neutral",name:"circle-question"}})],1),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.annotation,expression:"annotation"}],ref:"annotation",staticClass:"annotation",style:{height:e.annHeight},domProps:{value:e.annotation},on:{blur:e.saveAnnotation,input:function(t){t.target.composing||(e.annotation=t.target.value)}}})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.game.isLiveGame&&!e.showHelp,expression:"(!game.isLiveGame) && !showHelp"}],staticClass:"tabs"},e._l(e.tabs,function(t){return a("div",{staticClass:"tab",class:{activeTab:t.id===e.activeTab},on:{click:function(a){e.selectTab(t.id)}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",name:t.icon}}),e._v(" "),a("span",{staticClass:"tab-title"},[e._v(e._s(t.title))])],1)}))])])},i=[]},JAFW:function(e,t){e.exports={"icon-small":"icon-small_2urWRJBC_1",icon:"icon_t4CS_Yic_1"}},"JP+h":function(e,t,a){"use strict";var s=a("DwL6"),i=a("rxPB"),n=a("XyMi");var r=function(e){this.$style=a("D4XJ")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},KIze:function(e,t){},KNQF:function(e,t,a){"use strict";var s=a("p1rt"),i=a("Q+QH"),n=a("XyMi");var r=function(e){a("cyhe")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-1fec3858",null);t.a=o.exports},KZUd:function(e,t,a){"use strict";var s=a("AvxD"),i=a("kApn"),n=a("tNyc"),r=a("qP1x");t.a={components:{SectionTitle:s.a,SectionContent:i.a,FormButton:n.a,IconFont:r.a},computed:{lookingForGame:function(){return this.$store.getters.lookingForGame},mainScreen:function(){return this.$store.getters.mainScreen},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},enableGenButton:function(){return!1}},methods:{isPlaybanned:function(){return!!this.$store.getters.userPlayban&&Date.now()<new Date(this.$store.getters.userPlayban).getTime()},randooo:function(){this.$socket.emit("randooo")},showPlayModal:function(){this.isPlaybanned()?(this.$store.commit("showNotification","Sorry, you're not allowed to play.<br/>Until: "+this.ts2datetime(this.$store.getters.userPlayban)+"<br/>Reason: "+this.$store.getters.userBanReason),this.$bus.emit("showBanInfo")):this.$store.commit("showPlayModal")},cancelLookingForGame:function(){this.$socket.emit("cancel-pair",{uid:window.context.user.id})},ts2date:function(e){if(!e)return"-";var t="function"==typeof e.getMonth?e:new Date(e);return t.getFullYear()<1971?"-":t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+", "+t.getFullYear()},ts2datetime:function(e){return this.ts2date(e)+" "+this.ts2time(e)},ts2time:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}}}},KcTO:function(e,t,a){"use strict";var s=a("//Fk"),i=a.n(s),n=a("fZjL"),r=a.n(n),o=a("Zrlr"),l=a.n(o),c=a("wxAW"),u=a.n(c),h=function(){function e(){l()(this,e),this.insert=this.loadScript(function(e,t){var a=document.createElement("script");return a.type="text/javascript",a.src=e,t&&r()(t).forEach(function(e){a.setAttribute(e,t[e])}),document.body.appendChild(a),a})}return u()(e,[{key:"loadScript",value:function(e){var t={};return function(a,s){if(void 0===t[a]){var n=new i.a(function(t,i){var n=e(a,s);n.onload=function(e){t(e)},n.onreadystatechange=n.onload,n.onerror=function(e){i(e)}});t[a]=n}return t[a]}}}]),e}();t.a=new h},Ki9n:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{},[e.boardTop?a("div",{staticClass:"ruleVariantsBg"},[e.data.rated?e._e():a("div",{attrs:{tooltip:"This game is not rated."}},[e._v("Casual")]),e._v(" "),"wta"===e.data.rated?a("div",{attrs:{tooltip:"Rated winner-takes-all"}},[e._v("WTA")]):e._e(),e._v(" "),"wta3.0"===e.data.rated?a("div",{attrs:{tooltip:"Rated winner-takes-all"}},[e._v("WTA3.0")]):e._e(),e._v(" "),e.rVs.antichess?a("div",{attrs:{tooltip:"Antichess: Capturing is compulsory. First to lose all pieces wins."}},[e._v("Anti"),a("font",{attrs:{size:"-3"}},[e._v("chess"),a("a",{staticStyle:{color:"#fff"},attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-antichess-1"}},[e._v("ⓘ")])])],1):e._e(),e._v(" "),"teams"===e.data.gameType&&1==e.rVs.teammate?a("div",[e._v("R&B"),a("font",{attrs:{size:"-3"}},[e._v(" v ")]),e._v("Y&G")],1):e._e(),e._v(" "),"teams"===e.data.gameType&&3==e.rVs.teammate?a("div",[e._v("R&G"),a("font",{attrs:{size:"-3"}},[e._v(" v ")]),e._v("B&Y")],1):e._e(),e._v(" "),e.rVs.blindfold?a("div",{attrs:{tooltip:"Shortcut: Shift-Alt-B (except while playing in a blindfold game). Shift-click on squares to find pieces!"}},[e._v("Blindfold")]):e._e(),e._v(" "),e.rVs.ghostBoard?a("div",{attrs:{tooltip:"Shortcut: Shift-Alt-G (except while playing in a ghostboard game)."}},[e._v("Ghost"),a("font",{attrs:{size:"-3"}},[e._v("board")])],1):e._e(),e._v(" "),e.rVs.anonymous?a("div",{attrs:{tooltip:"Player names and ratings hidden."}},[e._v("A"),a("font",{attrs:{size:"-3"}},[e._v("nonymous")])],1):e._e(),e._v(" "),e.rVs.chess960?a("div",[e._v("960")]):e._e(),e._v(" "),e.rVs.koth?a("div",{attrs:{tooltip:"If your king reaches the center you win!"}},[a("font",{attrs:{size:"-3"}},[e._v("King of the ")]),e._v("Hill")],1):e._e(),e._v(" "),e.rVs.nCheck?a("div",{attrs:{tooltip:"Each player has "+e.rVs.nCheck+" lives, the final check is checkmate."}},[e._v(" "+e._s(e.rVs.nCheck)),a("font",{attrs:{size:"-3"}},[e._v("-Check")])],1):e._e(),e._v(" "),e.rVs.captureTheKing?a("div",{attrs:{tooltip:"To checkmate, kings must be captured."}},[e._v("Capt."),a("font",{attrs:{size:"-3"}},[e._v(" the King")])],1):e._e(),e._v(" "),e.rVs.deadWall?a("div",{attrs:{tooltip:"Dead pieces become bricks that can't be captured."}},[a("font",{attrs:{size:"-3"}},[e._v("Dead")]),e._v("Wall")],1):e._e(),e._v(" "),e.rVs.oppX?a("div",{attrs:{tooltip:"Double points for opposite pieces/mate while 4 remain"}},[e._v("OppX"+e._s(e.rVs.oppX))]):e._e(),e._v(" "),"singles"===e.data.gameType&&e.rVs.dkw?a("div",{attrs:{tooltip:"Dead King Walking: Resigned kings will move at random until check- or stalemated!"}},[e._v("DKW")]):e._e(),e._v(" "),e.rVs.enPassant?a("div",{attrs:{tooltip:"Capturing en passant is possbile."}},[e._v("EnP")]):e._e(),e._v(" "),e.rVs.promotionRank||e.rVs.promoteTo?a("div",{attrs:{tooltip:"Pawn promotion"}},[e.rVs.promotionRank?a("span",[e._v(e._s(e.prRnk(e.rVs.promotionRank)))]):e._e(),e.rVs.promoteTo&&1!=e.rVs.promotionRank?a("span",[e._v("="),a("img",{staticStyle:{transform:"translate(-3px, -2px)",width:"18px",height:"18px"},attrs:{src:e.$store.getters.board.b.pieceSrc({piece:e.rVs.promoteTo,color:"#fff"})}})]):e._e()]):e._e(),e._v(" "),e.data.showObserverChat?a("div",{attrs:{tooltip:"Spectators can chat with the players."}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"secondary",name:"chat"}})],1):e._e()]):e.compact?a("span",{staticClass:"compact-spans"},[e.data.rated?e._e():a("span",[e._v(" • Casual")]),e._v(" "),"wta"===e.data.rated?a("span",[e._v(" • WTA")]):e._e(),e._v(" "),"wta3.0"===e.data.rated?a("span",[e._v(" • WTA3.0")]):e._e(),e._v(" "),e.rVs.antichess?a("span",[e._v(" • Antichess")]):e._e(),e._v(" "),e.rVs.blindfold?a("span",[e._v(" • Blindfold ")]):e._e(),e._v(" "),e.rVs.ghostBoard?a("span",[e._v(" • Ghost board ")]):e._e(),e._v(" "),e.rVs.anonymous?a("span",[e._v(" • Anonymous")]):e._e(),e._v(" "),"teams"===e.data.gameType&&1==e.rVs.teammate?a("span",[e._v(" • R&B v Y&G")]):e._e(),e._v(" "),"teams"===e.data.gameType&&3==e.rVs.teammate?a("span",[e._v(" • R&G v B&Y")]):e._e(),e._v(" "),e.rVs.chess960?a("span",[e._v(" • 960")]):e._e(),e._v(" "),e.data.startFen?a("span",[e._v(" • Cust. SP")]):e._e(),e._v(" "),e.rVs.koth?a("span",[e._v(" • KotH")]):e._e(),e._v(" "),e.rVs.nCheck?a("span",[e._v(" • "+e._s(e.rVs.nCheck)+"-Check")]):e._e(),e._v(" "),e.rVs.captureTheKing?a("span",[e._v(" • Capt.K")]):e._e(),e._v(" "),e.rVs.deadWall?a("span",[e._v(" • DeadWall")]):e._e(),e._v(" "),e.rVs.oppX?a("span",[e._v(" • OppX"+e._s(e.rVs.oppX))]):e._e(),e._v(" "),"singles"===e.data.gameType&&e.rVs.dkw?a("span",[e._v(" • DKW")]):e._e(),e._v(" "),e.rVs.enPassant?a("span",[e._v(" • EnP")]):e._e(),e._v(" "),e.rVs.promotionRank||e.rVs.promoteTo?a("span",[e._v(" • "+e._s(e.prRnk(e.rVs.promotionRank))),e.rVs.promoteTo&&1!=e.rVs.promotionRank?a("span",[e._v("="),a("img",{staticStyle:{transform:"translate(-4px, -2px)",width:"18px",height:"18px"},attrs:{src:e.$store.getters.board.b.pieceSrc({piece:e.rVs.promoteTo,color:"rgba(255,255,255,0.7)"})}})]):e._e()]):e._e()]):e._e(),e._v(" "),e.compact||e.boardTop?e._e():a("div",{},[e.rVs.blindfold?a("span",[e._v("\n      This is a "),e._m(0),e._v(" game!\n      "),a("br")]):e._e(),e._v(" "),e.rVs.ghostBoard?a("span",[e._v("\n      This is a "),e._m(1),e._v(" game!\n      "),a("br")]):e._e(),e._v(" "),e.rVs.anonymous?a("span",{attrs:{tooltip:"Player names and ratings hidden."}},[e._v("\n      This is an "),a("b",[e._v("anonymous")]),e._v(" game.\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-anonymous"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.antichess?a("span",{staticClass:"underdotted",attrs:{tooltip:"Antichess: Capturing is compulsory. First to lose all pieces wins."}},[e._v("\n      Antichess\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-antichess-1"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.chess960?a("span",{staticClass:"underdotted"},[a("a",{staticClass:"bluelink underdotted preview",attrs:{tooltip:"The game will start from this position!"},on:{mousedown:function(t){e.preview(e.$store.getters.fenUtils.generate960Fen(e.rVs.chess960))},mouseleave:function(t){e.preview(!1)}}},[e._v("Chess960 Position "+e._s(e.rVs.chess960))]),e._v(" "),a("br")]):e._e(),e._v(" "),e.data.startFen?a("span",[a("a",{staticClass:"bluelink underdotted preview",attrs:{tooltip:"The game will start from this position!"},on:{mousedown:function(t){e.preview(e.data.startFen)},mouseleave:function(t){e.preview(!1)}}},[e._v("Custom Starting Position")]),e._v(" "),a("br")]):e._e(),e._v(" "),"teams"===e.data.gameType&&e.rVs.teammate&&2!=e.rVs.teammate?a("span",{staticClass:"underdotted"},[1==e.rVs.teammate?a("span",[e._v("Red & Blue vs. Yellow & Green")]):e._e(),e._v(" "),3==e.rVs.teammate?a("span",[e._v("Red & Green vs. Blue & Yellow")]):e._e(),e._v(" "),a("br")]):e._e(),e._v(" "),e.data.bookPgn?a("span",[a("strong",[e._v("Book:")]),e._v("\n      "+e._s(e.data.bookPgn)+"\n      "),a("br")]):e._e(),e._v(" "),e.rVs.koth?a("span",{staticClass:"underdotted",attrs:{tooltip:"If your king reaches the center of the board, you win!"}},[e._v("\n      King of the Hill\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-king-of-the-hill"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.nCheck?a("span",{staticClass:"underdotted",attrs:{tooltip:e.rVs.nCheck+"-check: each player has "+e.rVs.nCheck+" lives, the final check is checkmate."}},[e._v("\n      "+e._s(e.rVs.nCheck)+"-Check\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-n-check"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.captureTheKing?a("span",{staticClass:"underdotted",attrs:{tooltip:"To checkmate, kings must be captured."}},[e._v("\n      Capture the king\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-capture-the-king"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.deadWall?a("span",{staticClass:"underdotted",attrs:{tooltip:"Dead pieces become bricks that can't be captured."}},[e._v("\n      DeadWall\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-deadwall"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.oppX?a("span",{staticClass:"underdotted",attrs:{tooltip:"Double points for opposite pieces/mate while 4 remain"}},[e._v("\n      OppositeX"+e._s(e.rVs.oppX)+"\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-opposite-X"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),"singles"===e.data.gameType&&e.rVs.dkw?a("span",{staticClass:"underdotted",attrs:{tooltip:"Resigned kings will move at random until check- or stalemated!"}},[e._v("\n      Dead King Walking\n      "),a("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-dead-king-walking"}},[e._v("ⓘ")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.enPassant?a("span",{staticClass:"underdotted",attrs:{tooltip:"Capturing en passant is possbile."}},[e._v("\n      En Passant\n      "),a("br")]):e._e(),e._v(" "),e.rVs.promotionRank>0?a("span",{staticClass:"underdotted"},[1==e.rVs.promotionRank?a("span",[e._v("No pawn promotion")]):a("span",[e._v("\n        Pawns promote on the\n        "),a("b",[e._v(e._s(e.rVs.promotionRank)+e._s(2==e.rVs.promotionRank?"nd":3==e.rVs.promotionRank?"rd":"th"))]),e._v("\n        rank")]),e._v(" "),a("br")]):e._e(),e._v(" "),e.rVs.promoteTo&&1!=e.rVs.promotionRank?a("span",{staticClass:"underdotted"},[e._v("\n      Pawns will promote to a\n      "),a("img",{staticStyle:{transform:"translateY(-2px)",width:"25px",height:"25px"},attrs:{src:e.$store.getters.board.b.pieceSrc({piece:e.rVs.promoteTo,color:"#fbfbfb"})}}),e._v(" "),a("br")]):e._e(),e._v(" "),e.data.showObserverChat?a("span",{staticClass:"underdotted",attrs:{tooltip:"The players will be able to see spectotor chat."}},[e._v("\n      Spectator chat shown\n      "),a("br")]):e._e()])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("b",[t("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-blindfold"}},[this._v("blindfold")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("b",[t("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-ghost-board"}},[this._v("ghost board")])])}]},L5yA:function(e,t,a){"use strict";t.a={name:"Maintenance"}},L97e:function(e,t,a){"use strict";var s=a("Zrlr"),i=a.n(s),n=a("wxAW"),r=a.n(n),o=a("KcTO"),l=function(){function e(){i()(this,e),this.TmsAdUrl="//rocinante.themediashop.co/library/chess.js"}return r()(e,[{key:"init",value:function(e){var t=this,a=function a(){window.removeEventListener("load",a),o.a.insert(t.TmsAdUrl,{"data-tmsclient":"Chess","data-layout":e,"data-debug":"false","data-refresh":"90","data-lazy":"false"})};!0===window.loadEventFired?a():window.addEventListener("load",a,!1)}}]),e}();t.a=new l},LSlQ:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s);t.a={components:{},props:{},data:function(){return{pgn4:"",meta:"",boxHeight:"300px",showRaw:!1}},computed:{game:function(){return this.$store.getters.game},board:function(){return this.$store.getters.board},variations:function(){return this.game.variations},fourPlayer:function(){return this.$store.getters.fourPlayer},userIsAdmin:function(){return this.$store.getters.userIsAdmin},gameType:function(){return this.game.gameType},startFen:function(){return this.game.startFen},analysisMode:function(){return this.$store.getters.analysisMode},atMove:function(){return this.$store.getters.atMove},inVariation:function(){return this.$store.getters.inVariation},atVariationMove:function(){return this.$store.getters.atVariationMove},tabVisible:function(){return"pgn"===this.$parent.activeTab},rVs:function(){return this.game.customData.ruleVariants}},watch:{gameType:function(){this.update()},analysisMode:function(){this.update()},atMove:function(){this.updateCurrentMove()},inVariation:function(){this.updateCurrentMove()},atVariationMove:function(){this.updateCurrentMove()},tabVisible:function(e){e&&this.setBoxHeight()}},updated:function(){this.setBoxHeight()},mounted:function(){window.addEventListener("resize",this.setBoxHeight),this.board.b.forcePgnUpdate=this.update},methods:{setBoxHeight:function(){this.boxHeight=this.board.b.calcTabHeight()-33+"px"},selpgn:function(){var e=this;this.$nextTick(function(){return e.$refs.pgn4.select()})},clrpgn:function(){var e=this;this.pgn4="",this.$nextTick(function(){return e.$refs.pgn4.focus()})},update:function(e){var t=this;this.makeMeta(),this.pgn4=this.meta+this.makePgn(),this.setBoxHeight();var a=this.$el.querySelector(".pgnbox");setTimeout(function(){a.scrollTop=a.scrollHeight,e&&t.loadpgn()},30)},loadpgn:function(e){"string"!=typeof e&&(e=this.pgn4),this.$store.commit("analysisModeOn"),this.$store.commit("loadPgn4",e),this.update()},makePgn:function(){var e="";for(var t in this.game.moves)if(e+=this.makeMovePgn(this.game.moves[t]),this.game.variations[t]){var a=!0,s=!1,n=void 0;try{for(var r,o=i()(this.game.variations[t]);!(a=(r=o.next()).done);a=!0){var l=r.value;for(var c in l)e+=this.makeMovePgn(l[c],"0"===c);e+=" ) "}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}}return e},makeMovePgn:function(e,t){var a="";return t&&e.fullMoveIncremented?a+="\n("+e.fullMoveNr+".. ":e.fullMoveIncremented?a+="\n"+e.fullMoveNr+". ":a+=t?" ( .. ":" .. ",a+=e.san,e.annotation&&(a+=" { "+e.annotation.replace(/\{/g,"[").replace(/\}/g,"]")+" }"),a},makeMeta:function(){var e={};for(var t in this.game.pgnAttributes)e[t]=this.game.pgnAttributes[t];this.game.startFen!==this.fourPlayer.getDefaultFenWithFlexdata()&&(e.StartFen4=this.$store.getters.fenUtils.prettyFen(this.game.startFen).replace(/\s+/g,"")),e.Variant="singles"===this.game.gameType?"FFA":"Teams";var a="";this.rVs.dkw&&(a+="DeadKingWalking "),this.rVs.enPassant&&(a+="EnPassant "),this.rVs.koth&&(a+="KotH "),this.rVs.deadWall&&(a+="DeadWall "),this.rVs.blindfold&&(a+="Blindfold "),this.rVs.ghostBoard&&(a+="GhostBoard "),this.rVs.captureTheKing&&(a+="CaptureTheKing "),this.rVs.chess960&&(a+="Chess960="+this.rVs.chess960+" "),this.rVs.nCheck&&(a+=this.rVs.nCheck+"-check "),this.rVs.antichess&&(a+="Antichess "),this.rVs.oppX&&(a+="oppX="+this.rVs.oppX+" "),this.rVs.promotionRank&&(a+="Prom="+this.rVs.promotionRank+" "),this.rVs.promoteTo&&(a+="PromoteTo="+this.rVs.promoteTo+" "),"teams"===this.game.gameType&&/^[13]$/.test(this.rVs.teammate)&&(a+="Teammate="+this.rVs.teammate+" "),a&&(e.RuleVariants=a.trim());var s=this.analysisMode?this.board.b.getUserEditablePgnAttributes():[];for(var i in s)i&&(e[i]=s[i]);for(var n in e.CurrentMove=this.currentMoveVal(),this.meta="",e)this.meta+="["+n+' "'+e[n].trim()+'"]\n'},saveas:function(){var e=this.game.pgnAttributes.Variant?this.game.pgnAttributes.Variant:"4pc";e+=this.game.gameNr?this.game.gameNr:"";var t=prompt("File name?",e+".pgn4.txt"),a=this.pgn4;if(!t)return!1;var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},currentMoveVal:function(){var e=1+this.atMove+"";return this.inVariation>-1&&(e+="-"+(this.inVariation+1)+"-"+(this.atVariationMove+1)),e},updateCurrentMove:function(){this.pgn4=this.pgn4.replace(/\[CurrentMove "([^"]+)"\]/,'[CurrentMove "'+this.currentMoveVal()+'"]')},upload:function(){this.showUpload=!0,document.getElementById("pgn_file").click()},openpgn:function(){this.board.b.downloadTextFile(this.processFile,"pgn_upload","pgn_file")},processFile:function(e){var t=e.target.result;t&&t.length&&(this.pgn4=t,this.loadpgn())}}}},"LgB/":function(e,t){e.exports={icon:"icon_IIoAPgBe_1"}},Lmkx:function(e,t,a){"use strict";var s=a("qP1x");t.a={name:"SelectDark",components:{IconFont:s.a},props:{change:{type:Function},options:{type:Array},value:null},methods:{onchange:function(e){var t=e.target.value;/^\d+$/.test(t)?t=parseInt(t):"true"===t?t=!0:"false"===t&&(t=!1),this.$emit("input",t),"function"==typeof this.change&&this.change(e.target.value)}}}},M93x:function(e,t,a){"use strict";var s=a("xJD8"),i=a("9WRq"),n=a("XyMi");var r=function(e){a("cgcf")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},MRz0:function(e,t){},Mdvq:function(e,t,a){"use strict";var s=a("EaT3"),i=a("SyDX"),n=a("XyMi");var r=function(e){a("SXHo")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-c39d4902",null);t.a=o.exports},MpNs:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-container",[a("modal-content",[a("section-container",{style:e.scStyle()},[e.$store.getters.createdGame?e._e():a("div",{staticClass:"play-container"},[a("div",{staticStyle:{width:"700px",height:"570px"}},[a("br"),e._v("\n          Publishing..."),a("br"),e._v(" "),a("icon-font",{class:e.$style.minimizeIcon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.cancel(t)}}}),e._v(" "),a("span",{staticStyle:{"font-size":"11px"}},[e._v("If this remains, reload the window and try again")])],1)]),e._v(" "),a("section-content",{directives:[{name:"show",rawName:"v-show",value:!e.minimized&&e.$store.getters.createdGame,expression:"!minimized && $store.getters.createdGame"}]},[a("div",{staticClass:"close-modal-container"},[a("icon-font",{class:e.$style.closeIcon,attrs:{family:"chess",theme:"primary",name:"nav-collapsed"},nativeOn:{click:function(t){e.$store.commit("minimizeInvitationalModal",!0)}}}),e._v(" "),e.freeze?e._e():a("icon-font",{class:e.$style.minimizeIcon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.cancel(t)}}})],1),e._v(" "),a("div",{staticClass:"play-container"},[a("div",{staticClass:"left-side-container",style:{"pointer-events":e.freeze?"none":"",opacity:e.freeze?.7:1,"background-color":e.freeze?"rgba(0,0,0,0.1)":""}},[a("div",{staticClass:"modal-head"},[a("center",[a("h1",[e._v("\n                  Create Custom Game\n                  ")])]),e._v(" "),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showHint,expression:"!showHint"}],staticStyle:{margin:"8px 0",display:"flex"}},[a("form-label",{attrs:{label:""}}),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.gameType,expression:"gameType"}],staticClass:"type-selector",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.gameType=t.target.multiple?a:a[0]},function(t){e.emitUpdate(),e.onChangeStartFen()}]}},[a("option",{attrs:{value:"singles"}},[e._v("Free-for-All")]),e._v(" "),a("option",{attrs:{value:"teams"}},[e._v("Teams")])]),e._v("\n                     \n                  "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.timeControlInitial,expression:"timeControlInitial"}],staticClass:"minutes-selector",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.timeControlInitial=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:.1}},[e._v("6 s")]),e._v(" "),a("option",{domProps:{value:.25}},[e._v("15 s")]),e._v(" "),a("option",{domProps:{value:.5}},[e._v("30 s")]),e._v(" "),a("option",{domProps:{value:1}},[e._v("1 Min")]),e._v(" "),a("option",{domProps:{value:2}},[e._v("2 Min")]),e._v(" "),a("option",{domProps:{value:3}},[e._v("3 Min")]),e._v(" "),a("option",{domProps:{value:5}},[e._v("5 Min")]),e._v(" "),a("option",{domProps:{value:10}},[e._v("10 Min")]),e._v(" "),a("option",{domProps:{value:15}},[e._v("15 Min")]),e._v(" "),a("option",{domProps:{value:20}},[e._v("20 Min")]),e._v(" "),a("option",{domProps:{value:30}},[e._v("30 Min")])]),e._v(" "),a("span",{staticStyle:{"vertical-align":"middle"}},[e._v("+")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.increment,expression:"increment"}],staticClass:"increment-selector",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.increment=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:0}},[e._v("0 s")]),e._v(" "),a("option",{domProps:{value:1}},[e._v("1 s")]),e._v(" "),a("option",{domProps:{value:2}},[e._v("2 s")]),e._v(" "),a("option",{domProps:{value:3}},[e._v("3 s")]),e._v(" "),a("option",{domProps:{value:4}},[e._v("4 s")]),e._v(" "),a("option",{domProps:{value:5}},[e._v("5 s")]),e._v(" "),a("option",{domProps:{value:10}},[e._v("10 s")]),e._v(" "),a("option",{domProps:{value:15}},[e._v("15 s")]),e._v(" "),a("option",{domProps:{value:25}},[e._v("25 s")])]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.isDelay,expression:"isDelay"}],staticClass:"delay-selector",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.isDelay=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:!0}},[e._v("Delay")]),e._v(" "),a("option",{domProps:{value:!1}},[e._v("Increment")])])],1),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.startingPosition,expression:"startingPosition"}],staticClass:"startingPosition-selector",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.startingPosition=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},[a("option",{attrs:{value:""}},[e._v("Standard")]),e._v(" "),a("option",{attrs:{value:"960"}},[e._v("960")]),e._v(" "),e.freeze?e._e():a("option",{attrs:{value:"Custom"}},[e._v("Custom")])]),e._v("\n\n                      \n                "),e.rated?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.showObserverChat,expression:"showObserverChat"}],attrs:{id:"soc",type:"checkbox"},domProps:{checked:Array.isArray(e.showObserverChat)?e._i(e.showObserverChat,null)>-1:e.showObserverChat},on:{change:[function(t){var a=e.showObserverChat,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showObserverChat=a.concat([null])):n>-1&&(e.showObserverChat=a.slice(0,n).concat(a.slice(n+1)))}else e.showObserverChat=i},function(t){e.emitUpdate()}]}}),e._v(" "),e.rated?e._e():a("label",{attrs:{for:"soc",tooltip:"Allow spectators to communicate with the players"}},[e._v("Show spectator chat")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showHint,expression:"!showHint"}],staticClass:"templates"},[a("span",{staticStyle:{float:"left"}},[e._v("Presets:  ")]),e._v(" "),e._l(e.templates(),function(t){return a("div",{staticStyle:{float:"left"},attrs:{title:t.description}},[a("a",{staticClass:"bluelink",on:{click:function(a){e.adoptCustomData(t),e.emitUpdate()}}},[e._v(e._s(t.title))]),e._v("  \n                  ")])})],2),e._v(" "),e.rated||"960"!==e.startingPosition?e._e():a("div",[e._v("\n                  Pos. "+e._s(e.ruleVariants.chess960)+"\n                  "),a("a",{staticClass:"bluelink",on:{mousedown:function(t){e.new960()}}},[e._v("New 960")]),e._v(" "),a("a",{staticClass:"bluelink",on:{mousedown:function(t){e.previewPosition(!0)},mouseleave:function(t){e.previewPosition(!1)}}},[e._v("Preview position")])]),e._v(" "),e.userIsAdmin&&"960"===e.startingPosition?a("div",[e._v("\n                  Set 960 pos. nr (1-960)\n                  "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.chess960,expression:"ruleVariants.chess960"}],domProps:{value:e.ruleVariants.chess960},on:{change:function(t){e.emitUpdate()},input:function(t){t.target.composing||e.$set(e.ruleVariants,"chess960",t.target.value)}}})]):e._e(),e._v(" "),e.showHint?a("div",{staticClass:"showHint",on:{mouseover:function(t){e.showHint=!0},mouseleave:function(t){e.showHint=!1}}},[a("a",{staticClass:"bluelink",attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/4pc-variant-custom-starting-position"}},[e._v("ⓘ About Custom Starting Positions")]),e._v(" "),a("br"),e._v("\n                  You can create a custom starting position for your game using the 'Edit position' tab.\n                  When you are ready you need to copy the FEN4 from the Edit position tab to the box below.\n                  "),a("br"),e._v("\n                  It is strongly recommended you "),a("strong",[e._v("test your starting position")]),e._v(" by clicking 'Start from here' and playing a few moves.\n                  "),a("br"),e._v("\n                  If a player has multiple kings, only one of them will be the real, vulnerable king.\n                  The other kings will behave like ordinary pieces! (and are worth 3 points in FFA).\n                  Only the true king can become King of the Hill.\n                  "),a("br"),e._v(" "),a("br"),e._v(" "),a("br")]):e._e(),e._v(" "),e.showHint?e._e():a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:"Custom"===e.startingPosition,expression:"startingPosition === 'Custom'"}]},[a("icon-font",{class:e.$style.smallIcon,attrs:{family:"chess",theme:"primary",name:"circle-question",tooltip:"About Custom Starting Positions"},on:{click:function(t){e.showHint=!0}}}),e._v(" "),a("span",[a("a",{staticClass:"bluelink small",on:{click:function(t){e.showEditPosition()}}},[e._v("Open in edit position")]),e._v(" "),a("icon-font",{class:e.$style.smallIcon,attrs:{family:"chess",theme:"primary",name:"nav-collapsed"}}),e._v(" "),e.showHint?a("div",{staticClass:"showHint",on:{mouseover:function(t){e.showHint=!0},mouseleave:function(t){e.showHint=!1}}},[e._v("\n                        You can set a custom starting position for your game.\n                        Collapse this window to be able to see the board and arrange the pieces.\n                        After setting up a position in the 'Edit position' tab,\n                        you need to copy the new fen to the box above.\n                        "),a("br"),e._v(" "),a("br"),e._v("\n                        It is strongly recommended you test your starting position by clicking 'Start from here' and playing a few moves.\n                        "),a("font",{attrs:{size:"-1"}},[e._v("\n                          Note the current position is kept when switching to the 'Edit position' tab.\n                          To recover your starting position,\n                          go back to the start of the game before going back to 'Edit position'.\n                        ")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v("\n                        If a player has multiple kings, only one of them will be the real, vulnerable king.\n                        The other kings will behave like ordinary pieces! (and are worth 3 points in FFA).\n                        A player with more than one king cannot castle.\n                        Only the true king can become King of the Hill.\n                        "),a("br"),e._v(" "),a("br"),e._v(" "),a("br")],1):e._e(),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.prettyFen,expression:"prettyFen"},{name:"show",rawName:"v-show",value:"Custom"===e.startingPosition,expression:"startingPosition === 'Custom'"}],ref:"prettyFen",staticClass:"fenbox",attrs:{placeholder:"Custom starting position (FEN4) "},domProps:{value:e.prettyFen},on:{keyup:e.onChangeStartFen,input:function(t){t.target.composing||(e.prettyFen=t.target.value)}}}),e._v(" "),e.startFenOk?e._e():a("span",{staticStyle:{color:"darkred"}},[e._v("FEN4 invalid!"),a("br")]),e._v(" "),a("a",{staticClass:"bluelink",on:{click:function(t){e.prettyFen="",e.onChangeStartFen(),e.$nextTick(function(){return e.$refs.prettyFen.select()})}}},[e._v("Clear")]),e._v("\n                         \n                      "),a("a",{staticClass:"bluelink",attrs:{tooltip:"Click here to copy the FEN4 from the edit position box (bottom right) to the box above."},on:{click:function(t){e.prettyFen=e.board.b.getFenFromFenBox(),e.onChangeStartFen()}}},[e._v("Copy from EP")]),e._v("\n                         \n                    ")],1),e._v(" "),e.prettyFen&&e.startFenOk&&"960"!==e.startingPosition&&!e.showHint?a("a",{staticClass:"bluelink",attrs:{tooltip:"The game will start from this position!"},on:{mousedown:function(t){e.previewPosition(!0)},mouseleave:function(t){e.previewPosition(!1)}}},[e._v("\n                      Preview position\n                    ")]):e._e()],1),e._v(" "),a("br")])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showHint,expression:"!showHint"}],staticStyle:{"font-size":"13px"}},[a("h4",[e._v("Rule variants")]),e._v(" "),a("table",{attrs:{border:"0",width:"80%"}},[a("tr",[a("td",{attrs:{valign:"top"}},[a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.koth,expression:"ruleVariants.koth"}],attrs:{id:"koth",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.koth)?e._i(e.ruleVariants.koth,null)>-1:e.ruleVariants.koth},on:{change:[function(t){var a=e.ruleVariants.koth,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"koth",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"koth",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"koth",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"koth",tooltip:"King of the Hill: If your king reaches the center of the board, you win!"}},[e._v("\n                    King of the Hill\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.deadWall,expression:"ruleVariants.deadWall"}],attrs:{id:"deadWall",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.deadWall)?e._i(e.ruleVariants.deadWall,null)>-1:e.ruleVariants.deadWall},on:{change:[function(t){var a=e.ruleVariants.deadWall,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"deadWall",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"deadWall",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"deadWall",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"deadWall",tooltip:"Dead pieces become bricks that can't be captured."}},[e._v("\n                    DeadWall\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.antichess,expression:"ruleVariants.antichess"}],attrs:{id:"antichess",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.antichess)?e._i(e.ruleVariants.antichess,null)>-1:e.ruleVariants.antichess},on:{change:[function(t){var a=e.ruleVariants.antichess,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"antichess",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"antichess",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"antichess",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"antichess",tooltip:"Antichess"}},[e._v("\n                    Antichess\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle",style:{opacity:e.antichess?.7:1}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.captureTheKing,expression:"ruleVariants.captureTheKing"}],attrs:{id:"captureTheKing",disabled:e.antichess,type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.captureTheKing)?e._i(e.ruleVariants.captureTheKing,null)>-1:e.ruleVariants.captureTheKing},on:{change:[function(t){var a=e.ruleVariants.captureTheKing,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"captureTheKing",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"captureTheKing",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"captureTheKing",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"captureTheKing",tooltip:"Kings must not respond to checks, must be captured."}},[e._v("\n                    Capture the king\n                  ")])])]),e._v(" "),a("td",{attrs:{valign:"top"}},["singles"===e.gameType?a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.dkw,expression:"ruleVariants.dkw"}],attrs:{id:"dkw",disabled:e.antichess,type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.dkw)?e._i(e.ruleVariants.dkw,null)>-1:e.ruleVariants.dkw},on:{change:[function(t){var a=e.ruleVariants.dkw,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"dkw",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"dkw",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"dkw",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"dkw",tooltip:"Resigned kings will move at random until check- or stalemated."}},[e._v("\n                    Dead King Walking\n                  ")])]):e._e(),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.enPassant,expression:"ruleVariants.enPassant"}],attrs:{id:"enp",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.enPassant)?e._i(e.ruleVariants.enPassant,null)>-1:e.ruleVariants.enPassant},on:{change:[function(t){var a=e.ruleVariants.enPassant,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"enPassant",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"enPassant",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"enPassant",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"enp",tooltip:"Enable capturing en passant"}},[e._v("\n                    En Passant\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.blindfold,expression:"ruleVariants.blindfold"}],attrs:{id:"blindfold",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.blindfold)?e._i(e.ruleVariants.blindfold,null)>-1:e.ruleVariants.blindfold},on:{change:[function(t){var a=e.ruleVariants.blindfold,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"blindfold",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"blindfold",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"blindfold",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"blindfold",tooltip:"Shift-alt-B to try"}},[e._v("\n                    Blindfold\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.ghostBoard,expression:"ruleVariants.ghostBoard"}],attrs:{id:"ghostBoard",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.ghostBoard)?e._i(e.ruleVariants.ghostBoard,null)>-1:e.ruleVariants.ghostBoard},on:{change:[function(t){var a=e.ruleVariants.ghostBoard,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"ghostBoard",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"ghostBoard",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"ghostBoard",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"ghostBoard",tooltip:"Shift-alt-G to try"}},[e._v("\n                    Ghost board\n                  ")])]),e._v(" "),a("div",{staticClass:"align-middle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.anonymous,expression:"ruleVariants.anonymous"}],attrs:{id:"anonymous",type:"checkbox"},domProps:{checked:Array.isArray(e.ruleVariants.anonymous)?e._i(e.ruleVariants.anonymous,null)>-1:e.ruleVariants.anonymous},on:{change:[function(t){var a=e.ruleVariants.anonymous,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"anonymous",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"anonymous",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"anonymous",i)},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{attrs:{for:"anonymous",tooltip:"Player names and ratings hidden"}},[e._v("\n                    Anonymous\n                  ")])])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"singles"===e.gameType,expression:"gameType === 'singles'"}],staticStyle:{"vertical-align":"middle"},style:{opacity:e.antichess?.7:1}},[e._v("\n                Opposite X: \n                "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.oppX,expression:"ruleVariants.oppX"}],attrs:{disabled:e.antichess,tooltip:"Mulitply points for opposite pieces/mate"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleVariants,"oppX",t.target.multiple?a:a[0])},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:0}},[e._v("-")]),e._v(" "),e._l([1.5,2,2.5,3,3.5],function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),a("div",{staticClass:"align-middle"},[a("div",{staticStyle:{"vertical-align":"middle"},style:{opacity:e.antichess?.7:1}},[e._v("\n\n                  N-check: \n                  "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.nCheck,expression:"ruleVariants.nCheck"}],attrs:{disabled:e.antichess,tooltip:"N-check: each player has N lives, the final check is checkmate."},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleVariants,"nCheck",t.target.multiple?a:a[0])},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:0}},[e._v("-")]),e._v(" "),e._l([1,2,3,4,5,6,7,8,9,12,15,20,30,40],function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t)+"-Check")])})],2)]),e._v(" "),a("div",{staticClass:"align-middle"},[e._v("\n                  Promotion on: \n                  "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.promotionRank,expression:"ruleVariants.promotionRank"}],attrs:{tooltip:"Pawn promotion rank"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleVariants,"promotionRank",t.target.multiple?a:a[0])},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:0}},[e._v("Standard")]),e._v(" "),a("option",{domProps:{value:1}},[e._v("Off")]),e._v(" "),a("option",{domProps:{value:2}},[e._v("2nd rank")]),e._v(" "),a("option",{domProps:{value:3}},[e._v("3rd rank")]),e._v(" "),e._l([4,5,6,7,8,9,10,11,12,13,14],function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t)+"th rank")])})],2),e._v("\n                   to: \n                  "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.promoteTo,expression:"ruleVariants.promoteTo"}],attrs:{tooltip:"Paws promote to"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleVariants,"promoteTo",t.target.multiple?a:a[0])},function(t){e.emitUpdate()}]}},[a("option",{attrs:{value:""}},[e._v("Any")]),e._v(" "),a("option",{attrs:{value:"D"}},[e._v("=1pt Q")]),e._v(" "),a("option",{attrs:{value:"Q"}},[e._v("=Q")]),e._v(" "),a("option",{attrs:{value:"R"}},[e._v("=R")]),e._v(" "),a("option",{attrs:{value:"B"}},[e._v("=B")]),e._v(" "),a("option",{attrs:{value:"N"}},[e._v("=N")]),e._v(" "),e.antichess&&e.koth?e._e():a("option",{attrs:{value:"K"}},[e._v("=K")])])])]),e._v(" "),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:"teams"===e.gameType,expression:"gameType === 'teams'"}],model:{value:e.ruleVariants.teammate,callback:function(t){e.$set(e.ruleVariants,"teammate",t)},expression:"ruleVariants.teammate"}},[e._v("Teams: ")]),e._v(" "),a("select",{directives:[{name:"show",rawName:"v-show",value:"teams"===e.gameType,expression:"gameType === 'teams'"},{name:"model",rawName:"v-model",value:e.ruleVariants.teammate,expression:"ruleVariants.teammate"}],attrs:{tooltip:"Teammates"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleVariants,"teammate",t.target.multiple?a:a[0])},function(t){e.emitUpdate()}]}},[a("option",{attrs:{value:"1"}},[e._v("Red & Blue vs. Yellow & Green")]),e._v(" "),a("option",{attrs:{value:"2"}},[e._v("Red & Yellow vs. Blue & Green")]),e._v(" "),a("option",{attrs:{value:"3"}},[e._v("Red & Green vs. Blue & Yellow")])])])]),e._v(" "),a("br"),e._v(" "),a("a",{staticClass:"bluelink",attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/4pc-variants-list"}},[e._v("About rule variants")])]),e._v(" "),a("div",{staticStyle:{"min-width":"270px",padding:"10px"}},[a("center",[a("div",{staticClass:"invite-container"},[a("div",{staticStyle:{display:"flex","justify-content":"center","margin-bottom":"5px"}},[a("div",{staticClass:"isPublicButton",class:{isPublic:e.isPublic}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.isPublic,expression:"isPublic"}],attrs:{disabled:e.freeze&&e.isPublic,id:"pub",type:"checkbox"},domProps:{checked:Array.isArray(e.isPublic)?e._i(e.isPublic,null)>-1:e.isPublic},on:{change:[function(t){var a=e.isPublic,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.isPublic=a.concat([null])):n>-1&&(e.isPublic=a.slice(0,n).concat(a.slice(n+1)))}else e.isPublic=i},function(t){e.emitUpdate()}]}}),e._v(" "),a("label",{staticStyle:{cursor:"pointer"},attrs:{for:"pub"}},[e._v("Public")])]),e._v(" "),a("div",{staticStyle:{display:"flex","margin-left":"auto","justify-content":"center"}},[a("div",{staticStyle:{display:"flex",margin:"1px 3px"}},[e._v("Range")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.minRating,expression:"minRating"}],staticStyle:{"font-size":"12px"},attrs:{disabled:e.freeze},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.minRating=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},e._l([500,1e3,1200,1400,1600,1800,2e3],function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})),e._v("\n                    -\n                    "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.maxRating,expression:"maxRating"}],staticStyle:{"font-size":"12px"},attrs:{disabled:e.freeze},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.maxRating=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},e._l([1200,1400,1600,1800,2e3,3500],function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])}))])]),e._v(" "),a("div",[a("div",{staticClass:"flex-center"},[a("strong",[e._v("Invite")]),e._v(" "),a("icon-font",{staticClass:"input-search-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"magnifying-glass"}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"username",staticStyle:{width:"120px"},attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{keyup:e.keyUpUsername,focus:function(t){e.usernameFocused=!0},blur:e.blurUsername,input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),""!==this.username?a("icon-font",{staticClass:"input-search-icon",class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},on:{click:e.clearUsername}}):e._e(),e._v(" "),a("div",{staticStyle:{position:"absolute"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.usernameChoices.length,expression:"usernameChoices.length"}],staticClass:"autocomplete-wrapper"},e._l(e.usernameChoices,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectUsername(t)}}},[e._v(e._s(t.username))])}))])],1),e._v(" "),e.username2id&&e.startFenOk?a("form-button",{attrs:{size:"",theme:"primary"},nativeOn:{click:function(t){e.invitePlayer()}}},[a("span",[e._v("Invite "+e._s(e.username))])]):e._e()],1)]),e._v(" "),e.manualStart||2===e.players.length?e._e():a("div",{staticClass:"players-container"},[a("br"),e._v(e._s(e.players.length-1)+" players joined.")]),e._v(" "),e.manualStart||2!==e.players.length?e._e():a("div",{staticClass:"players-container"},[a("br"),e._v("1 player joined.")]),e._v(" "),e.manualStart?a("div",{staticClass:"players-container"},[this.players.length>3?a("div",[a("a",{staticClass:"bluelink",staticStyle:{float:"right"},on:{click:function(t){e.randomSeating()}}},[e._v("Random seating")]),e._v(" "),e.final4complete||e.starting?e._e():a("span",{staticStyle:{float:"left"}},[e._v("Seat the players!")])]):e._e(),e._v(" "),a("br"),a("br"),e._v(" "),e._l(e.players,function(t,s){return t?a("div",{staticClass:"players-wrapper"},[a("div",{staticClass:"avatar-20"},[a("a",{attrs:{href:"https://www.chess.com/member/"+t.username,target:"_blank"}},[a("img",{staticClass:"playerimg",attrs:{src:t.avatarSmallUrl,width:"20",height:"20"}})])]),e._v(" "),a("div",{staticClass:"player-username",style:{color:t.seat>-1?e.board.b.primaryColors[t.seat]:""},on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v("\n                    "+e._s(t.username)+"\n                  ")]),e._v(" "),a("div",{staticClass:"player-seat"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.seat,expression:"player.seat"}],on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"seat",a.target.multiple?s:s[0])},function(t){e.onChangeSeat(s)}]}},[a("option",{domProps:{value:-1}}),e._v(" "),a("option",{directives:[{name:"show",rawName:"v-show",value:!e.dead[0],expression:"!dead[0]"}],domProps:{value:0}},[e._v("Red")]),e._v(" "),a("option",{directives:[{name:"show",rawName:"v-show",value:!e.dead[1],expression:"!dead[1]"}],domProps:{value:1}},[e._v("Blue")]),e._v(" "),a("option",{directives:[{name:"show",rawName:"v-show",value:!e.dead[2],expression:"!dead[2]"}],domProps:{value:2}},[e._v("Yellow")]),e._v(" "),a("option",{directives:[{name:"show",rawName:"v-show",value:!e.dead[3],expression:"!dead[3]"}],domProps:{value:3}},[e._v("Green")])])])]):e._e()})],2):e._e(),e._v(" "),e.manualStart&&e.players.length<4?a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.autoStart,expression:"autoStart"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.autoStart)?e._i(e.autoStart,null)>-1:e.autoStart},on:{change:function(t){var a=e.autoStart,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.autoStart=a.concat([null])):n>-1&&(e.autoStart=a.slice(0,n).concat(a.slice(n+1)))}else e.autoStart=i}}}),e._v(" Autostart\n              ")]):e._e(),e._v(" "),e.manualStart?a("div",{staticClass:"modal-foot"},[e.final4complete&&e.startFenOk?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.startGame(t)}}},[e._v("\n                  Start Game\n                ")]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"modal-foot"},[a("span",{staticStyle:{"font-size":"13px"}},[e._v("\n                  You can only make changes while no players have joined (unless private and casual).\n                  "),e.manualStart?e._e():a("span",[e._v("This game will start automatically when 4 players have joined.")])])]),e._v(" "),a("div",{staticClass:"modal-foot"},[a("b",[e._v(e._s("wta"===e.rated?"Rated WTA":"wta3.0"===e.rated?"WTA3.0":e.rated?"Rated":""))]),e._v(" "),a("select",{directives:[{name:"show",rawName:"v-show",value:!e.rated,expression:"!rated"},{name:"model",rawName:"v-model",value:e.rated,expression:"rated"}],attrs:{disabled:e.disableRated},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.rated=t.target.multiple?a:a[0]},function(t){e.emitUpdate()}]}},[a("option",{domProps:{value:!1}},[e._v("Casual")]),e._v(" "),e.staging||e.userIsAdmin?a("option",{domProps:{value:!0}},[e._v("Rated")]):e._e(),e._v(" "),(e.staging||e.userIsAdmin)&&"singles"===e.gameType?a("option",{attrs:{value:"wta"}},[e._v("Rated WTA")]):e._e(),e._v(" "),(e.staging||e.userIsAdmin)&&"singles"===e.gameType?a("option",{attrs:{value:"wta3.0"}},[e._v("Rated WTA3.0")]):e._e()]),e._v(" "),e.userIsAdmin?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inviterUsername,expression:"inviterUsername"}],attrs:{type:"text",placeholder:"Game title"},domProps:{value:e.inviterUsername},on:{change:function(t){e.emitUpdate()},input:function(t){t.target.composing||(e.inviterUsername=t.target.value)}}})]):e._e()]),e._v(" "),a("div",{staticClass:"modal-foot"},[a("form-button",{attrs:{size:"small",theme:"primary"},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("\n                  Cancel Game\n                ")])],1)])],1)])])],1)],1)],1)},i=[]},N3vy:function(e,t,a){"use strict";var s=a("qP1x");t.a={name:"Tab",components:{IconFont:s.a},props:{iconName:{type:String,required:!0},title:{type:String,required:!0}},computed:{active:function(){return this.$store.getters.activeTab===this.title}},methods:{onTabClick:function(){this.$store.commit("setActiveTab",this.title)}}}},N4k8:function(e,t){e.exports={container:"container_2fhHcv5V_1",icon:"icon_1zVpAe6T_1"}},N4ua:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-games-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.customGames.length,expression:"customGames.length"}],staticClass:"cg-header",on:{click:function(t){e.$store.commit("showCustomGames",!e.showCustomGames)}}},[a("div",{staticClass:"showhide",attrs:{title:"Shortcut: C"}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"caret-"+(e.showCustomGames?"down":"right")}})],1),e._v(" "),a("div",{staticClass:"numPlayers",attrs:{title:"Shortcut: C"}},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"primary",name:"users"}}),e._v(" "),a("span",{staticStyle:{position:"absolute",left:"14px"}},[e._v(e._s(e.numPlayers))])],1),e._v(" "),e.joinedGames.length?a("div",{staticClass:"flexx"},[e._v("\n       \n      "),a("a",{on:{click:function(t){t.stopPropagation(),e.$store.commit("leaveAllCustomGames")}}},[e._v("Leave all")]),e._v(" "),a("div",{staticClass:"numJoined"},[e._v("("+e._s(e.numJoined)+")")])]):e._e(),e._v(" "),!e.$store.getters.showInvitationalModal||e.$store.getters.minimizeInvitationalModal?a("div",{staticClass:"flexx",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.$store.getters.showInvitationalModal?e.$store.commit("minimizeInvitationalModal",!1):e.$store.commit("showInvitationalModal")}}},[this.createdGame?a("span",[e._v(" ("+e._s(this.createdGame.players.length-1)+" joined)")]):e._e(),e._v(" "),this.createdGame&&this.createdGame.players.length>3?a("span",[e._v("  Ready")]):e._e(),e._v(" "),a("icon-font",{class:e.$style["icon-large"],attrs:{family:"chess",theme:"neutral",title:"Create a game",name:this.$store.getters.minimizeInvitationalModal?"nav-expanded":"plus"}})],1):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCustomGames&&e.customGames.length,expression:"showCustomGames && customGames.length"}],staticClass:"custom-games-wrapper",style:{opacity:e.opacity,top:this.$store.getters.announcement?"60px":"40px"}},[a("icon-font",{class:e.$style["icon-collapse"],attrs:{family:"chess",theme:"primary",name:"nav-collapsed"},on:{click:function(t){e.$store.commit("showCustomGames",!1)}}}),e._v(" "),a("div",{staticClass:"filters"},[a("div",{staticClass:"firstrow"},[a("icon-font",{class:e.$style["icon-clear"],attrs:{title:"Clear all filters",family:"chess",theme:"primary",name:"circle-x"},on:{click:function(t){e.clearFilters()}}}),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.rated,expression:"filters.rated"}],staticStyle:{width:"80px"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filters,"rated",t.target.multiple?a:a[0])},function(t){e.filterChanged()}]}},[a("option",{attrs:{value:""}},[e._v(" - ")]),e._v(" "),a("option",{attrs:{value:"rated"}},[e._v("Rated")]),e._v(" "),a("option",{attrs:{value:"wta"}},[e._v("Rated WTA")]),e._v(" "),a("option",{attrs:{value:"unrated"}},[e._v("Casual")])]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.gameType,expression:"filters.gameType"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filters,"gameType",t.target.multiple?a:a[0])},function(t){e.filterChanged()}]}},[a("option",{attrs:{value:""}},[e._v(" - ")]),e._v(" "),a("option",{attrs:{value:"singles"}},[e._v("FFA")]),e._v(" "),a("option",{attrs:{value:"teams"}},[e._v("Teams")])]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.rV,expression:"filters.rV"}],staticStyle:{width:"90px"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filters,"rV",t.target.multiple?a:a[0])},function(t){e.filterChanged()}]}},[a("option",{attrs:{value:""}},[e._v(" - ")]),e._v(" "),a("option",{attrs:{value:"startFen"}},[e._v("Custom Starting Position")]),e._v(" "),a("option",{attrs:{value:"koth"}},[e._v("King of the Hill")]),e._v(" "),a("option",{attrs:{value:"nCheck"}},[e._v("N-Check")]),e._v(" "),a("option",{attrs:{value:"chess960"}},[e._v("960")]),e._v(" "),a("option",{attrs:{value:"antichess"}},[e._v("Antichess")]),e._v(" "),a("option",{attrs:{value:"oppX"}},[e._v("Opposite X")]),e._v(" "),a("option",{attrs:{value:"teammate"}},[e._v("Alternative Teams")]),e._v(" "),a("option",{attrs:{value:"deadWall"}},[e._v("DeadWall")]),e._v(" "),a("option",{attrs:{value:"captureTheKing"}},[e._v("Capture the King")]),e._v(" "),a("option",{attrs:{value:"blindfold"}},[e._v("Blindfold")]),e._v(" "),a("option",{attrs:{value:"ghostBoard"}},[e._v("Ghostboard")]),e._v(" "),a("option",{attrs:{value:"anonymous"}},[e._v("Anonymous")]),e._v(" "),a("option",{attrs:{value:"dkw"}},[e._v("Dead King Walking")]),e._v(" "),a("option",{attrs:{value:"enPassant"}},[e._v("En Passant")]),e._v(" "),a("option",{attrs:{value:"promotionRank"}},[e._v("Custom promotion rank")]),e._v(" "),a("option",{attrs:{value:"promoteTo_D"}},[e._v("=1ptQ")]),e._v(" "),a("option",{attrs:{value:"promoteTo_K"}},[e._v("=K")]),e._v(" "),a("option",{attrs:{value:"promoteTo_N"}},[e._v("=N")]),e._v(" "),a("option",{attrs:{value:"promoteTo_B"}},[e._v("=B")]),e._v(" "),a("option",{attrs:{value:"promoteTo_R"}},[e._v("=R")]),e._v(" "),a("option",{attrs:{value:"promoteTo_Q"}},[e._v("=Q")]),e._v(" "),e._l(e.titles,function(t){return a("option",{domProps:{value:"title_"+t}},[e._v(e._s(t))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.tcType,expression:"filters.tcType"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filters,"tcType",t.target.multiple?a:a[0])},function(t){e.filterChanged()}]}},[a("option",{attrs:{value:""}},[e._v(" - ")]),e._v(" "),a("option",{attrs:{value:"rapid"}},[e._v("Rapid")]),e._v(" "),a("option",{attrs:{value:"blitz"}},[e._v("Blitz")]),e._v(" "),a("option",{attrs:{value:"bullet"}},[e._v("Bullet")])])],1),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"custom-games-inner"},e._l(e.customGames,function(t){return a("custom-game",{directives:[{name:"show",rawName:"v-show",value:e.filter(t),expression:"filter(data)"}],key:t.creatorId,attrs:{data:t}})}))],1)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info",staticStyle:{"font-size":"10px"}},[this._v("\n        Checkmates/Kings="),t("b",[this._v("40")]),this._v("pts (except =1ptQ games)\n        "),t("a",{staticClass:"bluelink",attrs:{target:"_forum",href:"https://www.chess.com/clubs/forum/view/4pc-variant-pawn-promotion"}},[this._v("About Promotion")]),this._v(" "),t("br"),this._v(" Stalemating yourself = +40 (or +20)!\n      ")])}]},"N9+A":function(e,t){e.exports={icon:"icon_23qUq8GV_1","icon-small":"icon-small_1V7UVj-e_1"}},NAsm:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n={isSearching:function(e,t){e.isSearching=t},setSearchformState:function(e,t){e.searchformState=t},SOCKET_SET_GAMEDB_SEARCH_RESULT:function(e,t){if(e.foundGames=t.games,e.isSearching=!1,t.games.length){e.gamesInList=[];var a=!0,s=!1,n=void 0;try{for(var r,o=i()(t.games);!(a=(r=o.next()).done);a=!0){var l=r.value;e.gamesInList.push(l.gameNr)}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}}},SOCKET_SET_PLAYER_SEARCH_RESULT:function(e,t){e.foundPlayers=t.players,e.isSearching=!1}};t.a={state:{foundGames:[],foundPlayers:[],isSearching:!1,gamesInList:[],searchformState:"{}"},getters:{isSearching:function(e){return e.isSearching},foundGames:function(e){return e.foundGames},foundPlayers:function(e){return e.foundPlayers},gamesInList:function(e){return e.gamesInList},searchformState:function(e){return e.searchformState}},mutations:n}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("xJOd"),i=(a.n(s),a("7+uW")),n=a("/Hyb"),r=a.n(n),o=a("6fN7"),l=a.n(o),c=a("CLX7"),u=a.n(c),h=a("M93x"),d=a("IcnI"),m=a("fC7K");function p(){i.default.use(m.a),i.default.use(u.a),i.default.config.productionTip=!1,new i.default({el:"#app",template:"<App/>",components:{App:h.a},store:d.a})}i.default.use(m.a),i.default.use(u.a),i.default.config.productionTip=!1,r.a.config("https://58d3c08c0fc44a00bcc5273be13796d7@sentry.io/290734",{sampleRate:.1}).addPlugin(l.a,i.default).install(),r.a.context(function(){p()})},Nq9u:function(e,t,a){"use strict";var s=a("z1to"),i=a("qP1x");t.a={name:"PanelWatchItem",components:{CustomData:s.a,IconFont:i.a},props:{game:{type:Object,required:!0}},computed:{teamOrder:function(){if(!this.game||!this.game.customData||!this.game.customData.ruleVariants)return[0,2,1,3];var e=parseInt(this.game.customData.ruleVariants.teammate);return 1===e?[0,1,2,3]:3===e?[0,3,1,2]:[0,2,1,3]}},methods:{formatTimer:function(e){var t=Math.floor(e/1e3/60),a=Math.floor((e-1e3*t*60)/1e3);return a<10&&(a="0"+a),t+":"+a}}}},OJI4:function(e,t){e.exports={chess:"chess_1W2x33bC",chess960:"chess960_3qgyj4C4",threecheck:"threecheck_8Gtq5kN-",kingofthehill:"kingofthehill_1PcaksM5",losers:"losers_2p_5KwEC",crazyhouse:"crazyhouse_2gi7TzVn",bughouse:"bughouse_3JnRGwTp",lightning:"lightning_2iYmO6iI","solo-chess":"solo-chess_15vpSLlG",rapid:"rapid_2OSSBAbz",liveChess960:"liveChess960_3BM1zwZ6",tournament:"tournament_1xaQO0_i","live-tournament":"live-tournament_3UnJhKuZ",teammatch:"teammatch_3erWMkL5","live-teammatch":"live-teammatch_2qVhD7A8","nav-horizontal":"nav-horizontal_2PWqcW1y","nav-vertical":"nav-vertical_36YP4E6F","nav-expanded":"nav-expanded_22Dc-HRE","nav-collapsed":"nav-collapsed_18Py8fik",bug:"bug_19aDcNys",hourglass:"hourglass_2fJrQBFt",camera:"camera_3U0mhD7I","camera-plus":"camera-plus_2vV2KnqN",globe:"globe_AzM7SZKP",order:"order_OR9T0t24",flag:"flag_4EtTlKFP",calendar:"calendar_1phMtDRk","calendar-alt":"calendar-alt_2soQH_zK",daily:"daily_2B9qq4vC",chat:"chat_1O_jbYOi","chat-alt":"chat-alt_11vV2PIf","chat-x":"chat-x_u3zIlv9N","chess-book":"chess-book_3ysPijSb",filter:"filter_CYWtA26b",lock:"lock_2pR9_i8v",inbox:"inbox_3uQXSu5I",lightbulb:"lightbulb_2g0WmfbR",nametag:"nametag_3diuoTbz",mail:"mail_2YD8XJxp","mail-alt":"mail-alt_1G-pZLAI","mail-plus":"mail-plus_21Vg3xs4","mail-exclaimation":"mail-exclaimation_1DvhdsTr",book:"book_2P2uldd8","book-alt":"book-alt_3Z0wLhJ_","book-open":"book-open_1SvV6nlB",files:"files_2DSOVj_7",popup:"popup_2ddVUAOp",bell:"bell_2myCzAAH",menu:"menu_UQaFTmil",home:"home_3LvpGGTR","home-alt":"home-alt_3XDyDYEv",blitz:"blitz_2rl285RP",bullet:"bullet_2mz7E77E","chess-board-puzzle":"chess-board-puzzle_1CRtSEfr","chess-board-puzzle-reversed":"chess-board-puzzle-reversed_LZ7K5B53","fire-puzzle":"fire-puzzle_2apQYpaQ",computer:"computer_2mZ9whj-","computer-search":"computer-search_2Huy2iiy",tag:"tag_xlCvAEWp",toolbox:"toolbox_1KhHe3ba",cake:"cake_3rJdO1Cb",asterisk:"asterisk_1QHeokfi",trash:"trash_1kWm3Opo",download:"download_3T17n52Y","display-grid":"display-grid_80qPRsDH","display-slider":"display-slider_nBMn7I7m","display-list":"display-list_1iCH0zaG",pushpin:"pushpin_2wQD4CC4",key:"key_2CePJqjU",page:"page_1BxDR_7n","page-alt":"page-alt_16f2yzua","page-pencil":"page-pencil_h_F2Mrfm",news:"news_3uP_96-2",equal:"equal_G-ZPMgDu",stats:"stats_16F-LdcW","stats-arrow-up":"stats-arrow-up_1q30XUsA","stats-x":"stats-x_1NGObuYz",graphs:"graphs_lDDuOZSn",binoculars:"binoculars_1fxFiYGI","magnifying-glass":"magnifying-glass_35-XmPhq",present:"present_IvjWPvg9",exit:"exit_2ggSZK5D",handshake:"handshake_34qIgvxG",cup:"cup_3G0df_Pm",scales:"scales_3oA-kKek","paper-pencil":"paper-pencil_1j9byxZq","todo-list":"todo-list_2SpD3uWv","trophy-plus":"trophy-plus_cJ4FKaxd","trophy-minus":"trophy-minus_3NQInMKR","trophy-podium":"trophy-podium_3ITi6rQh",privacy:"privacy_2-fDrBNf",survey:"survey_3jwamRnj","crossed-swords":"crossed-swords_2o6zj4nf","checkmark-box":"checkmark-box_3CAuFZKl","checkmark-box-plus":"checkmark-box-plus_213_4l3w","tracked-content":"tracked-content_2DhDFzqE","queen-wreath":"queen-wreath_2M4q9SYE",crosshair:"crosshair_2hYvUXWO",shield:"shield_1-alcZ1_",chip:"chip_1HlKvte2","chip-crossed":"chip-crossed_Jjz0riSZ",smiley:"smiley_2di5B3DQ",eye:"eye_2RaMk7B7",select:"select_VMJcHTjf",undo:"undo_1LyRiu1v",link:"link_3gpVKta3",x:"x_1WXYTOqT",reply:"reply_2s2p-6AC",checkmark:"checkmark_3ctEtgx8",redo:"redo_2dy0NySP",plus:"plus_342jD1oM",list:"list_3JLgd2_P",embed:"embed_1J9uaFnv","image-plus":"image-plus_AcSP5Y58",follow:"follow_3eOhInXV",unfollow:"unfollow_qReDrEfB",quote:"quote_3XcIzvAp","web-view":"web-view_17b77ZDd",circle:"circle_2VqXNI0c","circle-dashboard":"circle-dashboard__Zjwuqrb","circle-x":"circle-x_3n88Cxnn","circle-3-dots":"circle-3-dots_r042g2TW","circle-timer":"circle-timer_E--3paqq","circle-gearwheel":"circle-gearwheel_1jnM6NE2","circle-clock":"circle-clock_2VWMvS_I","circle-clock-alt":"circle-clock-alt_h8FYSX1A","circle-question":"circle-question_37ryRx1k","circle-info":"circle-info_1WlpH7gW","circle-arrow":"circle-arrow_28cEl01X","circle-block":"circle-block_31chIACG","circle-stop":"circle-stop_2gys6P0w","circle-danger":"circle-danger_psFc74sn","circle-checkmark":"circle-checkmark_1jleusUL","circle-compass":"circle-compass_13QQEHK9","square-reply":"square-reply_2oEf7SjU","square-pencil":"square-pencil_2eRETyKu","square-brush":"square-brush_28fMIcNs","square-in":"square-in_3FuSHB0x","square-out":"square-out_2QY-nJsV","square-bottom-in":"square-bottom-in_3W87f6ny","square-x":"square-x_1T5FtH71","square-checkmark":"square-checkmark_3W3UQviy","square-four":"square-four_20lHLG2b","caret-up":"caret-up_2BA0CzKa","caret-down":"caret-down_3ZDgIzC8","caret-left":"caret-left_1PwwxyBy","caret-right":"caret-right_3-EeOtE6","chevron-up":"chevron-up_3jIGgzhq","chevron-bottom":"chevron-bottom_1ZVYuMne","chevron-left":"chevron-left_wGwizP6G","chevron-right":"chevron-right_2T3__RcD","double-chevron-left":"double-chevron-left_1rajvpkq","double-chevron-right":"double-chevron-right_3dIsnrzr","chevron-previous":"chevron-previous_1xqMtZ1y","chevron-next":"chevron-next_McDc03GU","chevron-down":"chevron-down_14Ouh6kW","arrow-return":"arrow-return_3FohXfxI","arrow-up":"arrow-up_1nMssXCL","arrow-down":"arrow-down_1widmEVH","arrow-left":"arrow-left_teXPl0eJ","arrow-right":"arrow-right_263eocoM","round-arrow-return":"round-arrow-return_2CuXinLO","bold-arrow-right":"bold-arrow-right_3fIs0a5n","arrow-cross":"arrow-cross_3UI_c2kB",user:"user_1cMM5niB",users:"users_NcS6wvww","users-alt":"users-alt_1DfnZ_z_","user-info":"user-info_3IZ4rEej","user-question":"user-question_23gIahdx","user-search":"user-search_3Abdc3OR","user-search-alt":"user-search-alt_2ZeADPfJ","user-feed":"user-feed_2CfvgfhR","user-block":"user-block_1cFehjm3","user-plus":"user-plus_3kuEFufx","users-plus":"users-plus_29FuFXu2","user-x":"user-x_38QS5lpY","user-chain":"user-chain_2z0pX8T4","user-broken-chain":"user-broken-chain_2dNMfPQ5","user-shield":"user-shield_Vi2rm3xI","user-shield-plus":"user-shield-plus_1woHMLEw","chess-board":"chess-board_M1MzTFUi",standard:"standard_2lKl5wYP","chess-board-alt":"chess-board-alt_dSoy1Kvn","chess-board-search":"chess-board-search_3KU84dA5","chess-board-search-alt":"chess-board-search-alt_1CRRSTEX",question:"question_1YZamStO","chess-board-plus":"chess-board-plus_3chDeINh","chess-board-arrow":"chess-board-arrow_2fS_hjE1","chess-board-circle":"chess-board-circle_1eKfwxUM","chess-board-gear":"chess-board-gear_19lBfF84","chess-crown":"chess-crown_15VviRg4","chess-pawn":"chess-pawn_281UECXP","chess-pawn-left-half-rook":"chess-pawn-left-half-rook_1vzH3d9K","chess-pawn-right-half-rook":"chess-pawn-right-half-rook_c0eXTF4n","chess-pawn-rook":"chess-pawn-rook_l4CBrZUY","chess-pawn-square":"chess-pawn-square_HoWUhvVo","chess-pawns":"chess-pawns_3Ywxyocp","chess-move":"chess-move_1qhra6IC","chess-move-alt":"chess-move-alt_1rMqj2wX","chess-board-folder":"chess-board-folder_1dcX4frc","chess-board-paper":"chess-board-paper_33PqXnGE","chess-board-arrow-down":"chess-board-arrow-down_3t7eZc4y","chess-board-arrow-right":"chess-board-arrow-right_3KWxZ6eL","chess-board-arrow-left":"chess-board-arrow-left_3owNXAvt","chess-salad":"chess-salad_hsFZ0jVF",checkbox:"checkbox_32L8-6Sv","checkbox-plus":"checkbox-plus_28et9Ibn",printer:"printer_3Q6-Gid8",play:"play_3zVruo2D",pause:"pause_b5WErYKG","sound-off":"sound-off_1xn6B24M","sound-on":"sound-on_2VWNuw5y",repeat:"repeat_sfH7UfXs",shuffle:"shuffle_3t4wnl93",resize:"resize_2Ny2PVFE",favorites:"favorites_27puq7ZY",facebook:"facebook_39WrGE9U","facebook-alt":"facebook-alt_36hNfiBj",twitter:"twitter_3uuW758h",linkedin:"linkedin_2HxgHM0T",tumblr:"tumblr_A2jGrxDc",stumbleupon:"stumbleupon_jbvyjZVb",reddit:"reddit_1D8Fteu5","google-plus":"google-plus_171H1rf-",instagram:"instagram_3qvc8xi7",youtube:"youtube_38CScJfm",share:"share_3HJ0Ut6s",twitch:"twitch_2-gCA8TC",android:"android_1m6UjVGr",apple:"apple_1Oz7PVdZ","win-phone":"win-phone_3LxNJrfg","thumbs-down":"thumbs-down_1Aalio3M","thumbs-up":"thumbs-up_CBUdwFTF",card:"card_1UCaj3gD",paypal:"paypal_2bX1VP81","membership-diamond":"membership-diamond_2oLQQe5p","membership-platinum":"membership-platinum_1OlrLfxL","membership-staff":"membership-staff_1sXm0PTD","membership-mod":"membership-mod_3Y2Wxe-2","membership-gold":"membership-gold_1Kz-cjGv","circle-hollow":"circle-hollow_19BQ0928","binoculars-crossed":"binoculars-crossed_127tPFDF","border-resize":"border-resize_1tituuul",maximize:"maximize_vbEemszb",minimize:"minimize_1eGzUSRd",live960:"live960_uef89Z0B",signal:"signal_2EP-LBxu",component:"component_2h1yGblV",primary:"primary_3HXTYZFk",secondary:"secondary_acOQUorD",neutral:"neutral_2O7nTsa4",active:"active_17SsRbNY",inactive:"inactive_-ah_OqCL",red:"red_Di596r5q",blue:"blue_3eBkL1CN",yellow:"yellow_2TRUOSK_",green:"green_ezhPtGcM","red-alt":"red-alt_k0q8QlTp","blue-alt":"blue-alt_VVWeLqDx","yellow-alt":"yellow-alt_j22FIxO-","green-alt":"green-alt_3w2p55ue",captured:"captured_2e-9U0Iv"}},OqyX:function(e,t,a){"use strict";var s=a("mBDK"),i=a("/tyO"),n=a("XyMi");var r=function(e){this.$style=a("oGpd")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},Ox3i:function(e,t){e.exports={icon:"icon_KhXX1oHA_1","icon-small":"icon-small_2S6j6cMK_1"}},OxRA:function(e,t,a){"use strict";t.a={data:function(){return{test:!0}},computed:{displayMessage:function(){return this.$store.getters.adminNotification}},methods:{clearDisplayMessage:function(){this.$store.commit("clearAdminNotification")}},updated:function(){""!==this.displayMessage&&(this.$notify({type:"warning",title:"Server Message",text:this.displayMessage,duration:8e3}),this.clearDisplayMessage())}}},"P8L+":function(e,t,a){"use strict";var s=a("2K4s"),i=a("eaX+"),n=a("XyMi");var r=function(e){a("+hEW")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-1b46dcd3",null);t.a=o.exports},PKgI:function(e,t){},Pc2Q:function(e,t){},PkA7:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"friends-wrapper"},[e._e(),e._v(" "),e.friends?a("ul",{staticClass:"friends-list"},e._l(e.friends,function(t){return a("li",{staticClass:"friend"},[a("div",{staticClass:"friend-avatar"},[a("span",{staticClass:"avatar avatar-30"},[a("a",{attrs:{href:"https://www.chess.com/member/"+t.username,target:"_blank"}},[a("span",{staticClass:"user-status status-30",class:t.is_online?"status-online":"status-offline"}),e._v(" "),a("img",{staticClass:"img-player",attrs:{src:t.avatar_url}})])])]),e._v(" "),a("div",{staticClass:"username-wrapper"},[a("div",{staticClass:"friend-username",attrs:{title:t.username},on:{click:function(a){e.$bus.emit("showUserPopup",t.user_id,t.username,a)}}},[e._v("\n          "+e._s(t.username)+"\n        ")]),e._v(" "),t.membership_level>=30?a("a",{staticClass:"memberIcon membership-level",class:"level-"+t.membership_level,attrs:{target:"_blank",href:"https://www.chess.com/membership?c=icon"}}):e._e()]),e._v(" "),a("div",{staticClass:"friend-status"},[t.inGame?a("span",{staticClass:"isPlaying pointer",attrs:{title:"Watch"},on:{click:function(a){e.$store.commit("joinGame",t.inGame)}}},[e._v("Playing")]):t.observingGame?a("span",{staticClass:"isObserving pointer",on:{click:function(a){e.$store.commit("joinGame",t.observingGame)}}},[e._v("Observing")]):t.connected?a("span",{staticClass:"isOnline"},[e._v("Online")]):e._e()]),e._v(" "),a("div",{staticClass:"livechess-status"},[t.is_in_livechess?a("a",{staticClass:"isOnline",attrs:{href:"https://www.chess.com/live",target:"_blank",title:"Online in Live Chess"}},[e._v("\n          L\n        ")]):e._e()])])})):e._e()])},i=[]},"Q+QH":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"clubchat-wrapper"},[this.iframeLoaded?this._e():t("div",{staticStyle:{padding:"10px"}},[this._v("Loading..")]),this._v(" "),t("iframe",{staticStyle:{width:"100%",height:"100%"},style:{visibility:this.iframeLoaded?"visible":"hidden"},attrs:{src:"https://www.chess.com/club/chat/4-player-chess",id:"chat-app-iframe",frameborder:"0",scrolling:"no"},on:{load:this.onIframeLoaded}})])},i=[]},"Q6D/":function(e,t,a){"use strict";var s;const i=["Red","Blue","Yellow","Green"],n=console.log.bind(console);var r=function(e){const t="undefined"!=typeof window;var a="singles",s="singles"===a,r="teams"===a,o=2;const l=[[],[1,0,3,2],[2,3,0,1],[3,2,1,0]];function c(e,t){return e===t||r&&l[o][e]===t}var u,h,d=[],m=0,p=[!1,!1,!1,!1,!0],v=[!1,!1,!1,!1],f=[!1,!1,!1,!1],g=[!1,!1,!1,!1],y=[!1,!1,!1,!1],_=[!0,!0,!0,!0],b=[!0,!0,!0,!0],w=[0,0,0,0],R=0,N=!1,B="",k=[[],[],[],[]],C=[[],[],[],[]],x=!0,S=!0,P=!1,K=[!1,!1,!1,!1],M=[!1,!1,!1,!1],T=[{K:[7,0],Kk:[9,0],Kq:[5,0],kR:[10,0],qR:[3,0],kRk:[8,0],qRq:[6,0]},{K:[0,7],Kk:[0,9],Kq:[0,5],kR:[0,10],qR:[0,3],kRk:[0,8],qRq:[0,6]},{K:[6,13],Kk:[4,13],Kq:[8,13],kR:[3,13],qR:[10,13],kRk:[5,13],qRq:[7,13]},{K:[13,6],Kk:[13,4],Kq:[13,8],kR:[13,3],qR:[13,10],kRk:[13,5],qRq:[13,7]}],$=40,Q={dkw:!1,enPassant:!1,teammate:2,koth:!1,nCheck:!1,deadWall:!1,oppX:0,chess960:"",antichess:!1,royalanti:!1,captureTheKing:!1,promotionRank:0,promoteTo:""},A=3,I=20,D=[],V=[[],[],[],[],[]],O=[[],[],[],[]],F=[!1,!1,!1,!1],G=function(e,t){return e>=0&&e<14&&t>=0&&t<14},z=function(e,t){return e<3&&t<3||e>10&&t>10||e>10&&t<3||e<3&&t>10},E=function(e,t){return!(6!==e&&7!==e||6!==t&&7!==t)},L=function(e,t){return e+","+t},U=function(e,t){return String.fromCharCode(e+97)+(t+1)},q=function(e){return[e.charCodeAt(0)-97,parseInt(e.substr(1))-1]},H=0,W={},j={},X={};function Y(e){return e.split("-").slice(0,2).join("-")}function Z(e){var t=j[e];return void 0===t&&(t=++H,W[t]=e,j[e]=t),t}const J="3,2R,2N,2B,2K,2Q,2B,2N,2R,3/3,2P,2P,2P,2P,2P,2P,2P,2P,3/14/1R,1P,10,3P,3R/1N,1P,10,3P,3N/1B,1P,10,3P,3B/1K,1P,10,3P,3Q/1Q,1P,10,3P,3K/1B,1P,10,3P,3B/1N,1P,10,3P,3N/1R,1P,10,3P,3R/14/3,0P,0P,0P,0P,0P,0P,0P,0P,3/3,0R,0N,0B,0Q,0K,0B,0N,0R,3-0-[false,false,false,false]-[true,true,true,true]-[true,true,true,true]-[0,0,0,0]-0";function ee(){V=[[],[],[],[]];for(var e,t,a,s=[],i=13;i>=0;i--){e=[],a=0;for(var n=0;n<14;n++)(t=D[n][i])?(a&&e.push(a),a=0,e.push((t.dead&&"X"!==t.piece?"d":"")+(t.player<4?t.player:"")+t.piece),t.dead||p[t.player]||V[t.player].push([n,i])):a++,13===n&&a&&e.push(a);s.push(e.join(","))}var r=s.join("/");r+="-"+m,r+="-"+JSON.stringify(p),r+="-"+JSON.stringify(_),r+="-"+JSON.stringify(b),r+="-"+JSON.stringify(w),r+="-"+R;const o=te();return Object.keys(o).length&&(r+="-"+JSON.stringify(o)),r}function te(){let e={};ie()&&(e.kingSquares=re()),Q.nCheck&&(e.lives=M),je().length&&(e.resigned=g,e.flagged=y),N&&(e.gameOver=B.replace(/-/g,"•").replace(/\(/g,"{").replace(/\)/g,"}")),Q.antichess&&(e.stalemated=f);let t=!1;for(let e of[0,1,2,3])if(C[e].length){t=!0;break}if(Q.enPassant&&t){e.enPassant=[];for(let t of[0,1,2,3]){var a=C[t].length?U(C[t][0],C[t][1]):"";e.enPassant[t]=a}}return e}function ae(e,t){if(!e)return console.log("warning: loadFen: fen is empty!"),void console.trace();try{const I=e.split("-");if(I.length<7||14!==I[0].split("/").length)return console.log("warning: loadFen: invalid fen: "+e),void console.trace();nt(),p=[!1,!1,!1,!1],v=[!1,!1,!1,!1],f=[!1,!1,!1,!1],g=[!1,!1,!1,!1],y=[!1,!1,!1,!1],_=[!1,!1,!1,!1],b=[!1,!1,!1,!1],C=[[],[],[],[]],V=[[],[],[],[],[]],O=[null,null,null,null],F=[!1,!1,!1,!1],k=[[],[],[],[]],K=[!1,!1,!1,!1],M=[!1,!1,!1,!1],N=!1,B="";var a,s=[[],[],[],[],[]];if(m=parseInt(I[1]),I.length>2){p=JSON.parse(I[2]),_=JSON.parse(I[3]),b=JSON.parse(I[4]),w=JSON.parse(I[5]),R=parseInt(I[6]);var i=I[7]?JSON.parse(I[7]):{};if(i.kingSquares&&(a=i.kingSquares),i.lives?M=i.lives:Q.nCheck&&(M=[Q.nCheck,Q.nCheck,Q.nCheck,Q.nCheck]),i.checkmated&&(v=i.checkmated),i.stalemated&&(f=i.stalemated),i.resigned&&(g=i.resigned),i.flagged&&(y=i.flagged),i.enPassant)for(let e of[0,1,2,3])C[e]=i.enPassant[e]?q(i.enPassant[e]):[];i.gameOver&&(N=!0,B=i.gameOver.replace(/•/g,"-").replace(/\{/g,"(").replace(/\}/g,")"))}if(t)return void(W[u=0]=e);const G=I[0].split("/");if(14!==G.length)return console.log("invalid fen: "+e),[];for(var r,o,l,c,d,x,S,P=13;P>=0;P--){S=0;for(var T=0,$=(r=G[13-P].split(",")).length;T<$;T++)if(/^\d+$/.test(r[T])){o=parseInt(r[T]);for(var A=0;A<o&&S<14;A++)z(S,P)?D[S][P]=null:D[S][P]=!1,S++}else{if(S>13)break;if(z(S,P)){D[S][P]=null,S++;continue}const e=(l=r[T].split("")).length;"X"===r[T]||"dX"===r[T]?(c=4,d="X",x=!0):"d"===l[0]?(c=3===e?parseInt(l[1]):4,d=l[e-1],x=!0):(c=parseInt(l[0]),d=l[1],x=!1),D[S][P]={piece:d,player:c,dead:x},x||(void 0===V[c]?(n(c+": Pieces[player] undef"),n(V[c])):V[c].push([S,P]),"K"===d&&s[c].push([S,P])),S++}}for(c of[0,1,2,3]){let e=s[c].length;1===e?(O[c]=s[c][0],D[O[c][0]][O[c][1]].isRealKing=!0):e>1&&(F[c]=!0,O[c]=s[c][Math.floor(e/2)])}a&&ie()&&function(e){if(4!==e.length)return;for(let a of[0,1,2,3]){let s=e[a];if(!/^[a-n]\d+$/.test(s))continue;const i=q(s);var t=D[i[0]][i[1]];t&&"K"===t.piece&&t.player===a&&(O[a]=i,t.isRealKing=!0)}}(a),(X={})[Y(e)]=1,u=Z(e),h=we()}catch(t){console.log("error in loadFen",e,t)}}function se(e,t,a){return!p[e]&&(O[e]&&O[e][0]===t&&O[e][1]===a)}function ie(){if("K"===Q.promoteTo)return!0;for(let e of[0,1,2,3])if(F[e])return!0;return!1}function ne(e){if(!O[e])return"";const t=U(O[e][0],O[e][1]);return/^[a-n]\d+$/.test(t)?t:""}function re(){var e=[];for(let t of[0,1,2,3])e.push(ne(t));return e}function oe(e,t,a,s,i,n){try{if(void 0!==t&&void 0!==a){for(var r=0,o=V[e].length;r<o;r++)if(V[e][r][0]===t&&V[e][r][1]===a){V[e][r]=[s,i];break}}else{if(4===e)return;n&&(s=n[0],i=n[1]);var l=[];for(r=0,o=V[e].length;r<o;r++)V[e][r][0]===s&&V[e][r][1]===i||l.push(V[e][r]);V[e]=l}}catch(n){console.log("error in updatePieces",n,e,t,a,s,i)}}function le(e,t){for(var a=0,s=e.length;a<s;a++)if(t[0]===e[a][0]&&t[1]===e[a][1])return!0}function ce(e,t){return[[e+1,t+2],[e+1,t-2],[e+2,t+1],[e+2,t-1],[e-1,t+2],[e-1,t-2],[e-2,t+1],[e-2,t-1]]}function ue(e,t){return[[e+1,t+1],[e+1,t-1],[e-1,t+1],[e-1,t-1]]}function he(e,t){var a=[t];const s=t[0],i=t[1];if("N"===D[s][i].piece)return a;const n=O[e][0],r=O[e][1],o=Math.min(n,s),l=Math.max(n,s),c=Math.min(r,i),u=Math.max(r,i),h=l-o,d=u-c;if(1===h||1===d)return a;if(0===d)for(var m=o+1;m<l;m++)a.push([m,r]);else if(0===h)for(var p=c+1;p<u;p++)a.push([n,p]);else{const e=n===o?1:-1,t=r===c?1:-1;for(var v=1;v<h;v++)a.push([n+v*e,r+v*t])}return a}var de,me,pe=[[],[],[],[]],ve=[{},{},{},{}],fe=[{},{},{},{}],ge=[!1,!1,!1,!1];function ye(){de=null,me=null}function _e(e,t,a,s,i){const n=D[e][t];return null===n||!1!==n&&(!!Ce(n)||(de?!(!n.dead&&!c(n.player,a))||(s.test(n.piece)&&(c(de.player,a)?ve[a][me]=i:fe[a][me]=[e,t]),!0):!!n.dead||(s.test(n.piece)&&!c(n.player,a)&&pe[a].push([e,t]),de=n,me=L(e,t),!1)))}function be(e,t,a){var s,i,n,r=/[QDR]/;for(ye(),s=t-1;s>-1&&!_e(s,a,e,r,"horizontal");s--);for(ye(),s=t+1;s<14&&!_e(s,a,e,r,"horizontal");s++);for(ye(),i=a-1;i>-1&&!_e(t,i,e,r,"vertical");i--);for(ye(),i=a+1;i<14&&!_e(t,i,e,r,"vertical");i++);if(r=/[QDB]/,i=a-1,ye(),i>=0)for(s=t-1;s>-1&&!(_e(s,i,e,r,"bltr")||--i<0);s--);if(i=a+1,ye(),i<14)for(s=t-1;s>-1&&!(_e(s,i,e,r,"brtl")||++i>13);s--);if(i=a-1,ye(),i>=0)for(s=t+1;s<14&&!(_e(s,i,e,r,"brtl")||--i<0);s++);if(i=a+1,ye(),i<14)for(s=t+1;s<14&&!(_e(s,i,e,r,"bltr")||++i>13);s++);const o=ce(t,a);for(var l=0;l<8;l++)s=o[l][0],i=o[l][1],G(s,i)&&(!(n=D[s][i])||n.dead||"N"!==n.piece||c(n.player,e)||pe[e].push([s,i]));const u=ue(t,a);for(l=0;l<4;l++)s=u[l][0],i=u[l][1],G(s,i)&&(!(n=D[s][i])||n.dead||"P"!==n.piece||c(n.player,e)||(l<2&&3===n.player||l%2==0&&2===n.player||l>1&&1===n.player||l%2==1&&0===n.player)&&pe[e].push([s,i]));for(l=-1;l<2;l++)for(var h=-1;h<2;h++)0===l&&0===h||G(s=t+l,i=a+h)&&(n=D[s][i])&&!n.dead&&("K"!==n.piece||p[n.player]||c(n.player,e)||pe[e].push([s,i]))}function we(){pe=[[],[],[],[]],ve=[{},{},{},{}],fe=[{},{},{},{}],ge=[!1,!1,!1,!1];for(var e=0;e<4;e++)!p[e]&&O[e]&&2===O[e].length&&be(e,O[e][0],O[e][1]),1===pe[e].length&&(ge[e]=he(e,pe[e][0]));return Q.captureTheKing&&(ge=[!1,!1,!1,!1],ve=[{},{},{},{}]),Q.antichess&&(ge=[!1,!1,!1,!1],ve=[{},{},{},{}],pe=[[],[],[],[]],fe=[{},{},{},{}]),{checkingPcs:JSON.parse(JSON.stringify(pe)),pinnedPcs:JSON.parse(JSON.stringify(ve)),discovCks:JSON.parse(JSON.stringify(fe)),getOutOfCk:JSON.parse(JSON.stringify(ge)),canCastleKS:_.slice(),canCastleQS:b.slice()}}function Re(e,t,a,s){if(!G(e,t))return-1;const i=D[e][t];return null===i?-1:!1!==i&&(Ce(i)?-1:!(!i.dead&&se(a,e,t)&&i.player===a)&&(i.dead||c(i.player,a)?-1:!!s.test(i.piece)||-1))}function Ne(e,t,a){if(Q.captureTheKing||Q.antichess)return!1;var s,i,n,r,o=/[QDR]/;for(i=t,s=e-1;s>-1&&-1!==(n=Re(s,i,a,o));s--)if(!0===n)return!0;for(s=e+1;s<14&&-1!==(n=Re(s,i,a,o));s++)if(!0===n)return!0;for(s=e,i=t-1;i>-1&&-1!==(n=Re(s,i,a,o));i--)if(!0===n)return!0;for(i=t+1;i<14&&-1!==(n=Re(s,i,a,o));i++)if(!0===n)return!0;for(o=/[QDB]/,i=t-1,s=e-1;s>-1&&-1!==(n=Re(s,i--,a,o));s--)if(!0===n)return!0;for(i=t+1,s=e-1;s>-1&&-1!==(n=Re(s,i++,a,o));s--)if(!0===n)return!0;for(i=t-1,s=e+1;s<14&&-1!==(n=Re(s,i--,a,o));s++)if(!0===n)return!0;for(i=t+1,s=e+1;s<14&&-1!==(n=Re(s,i++,a,o));s++)if(!0===n)return!0;const l=ce(e,t);for(var u=0;u<8;u++)if(s=l[u][0],i=l[u][1],G(s,i)&&D[s][i]&&!D[s][i].dead&&"N"===D[s][i].piece&&!c(D[s][i].player,a))return!0;const h=ue(e,t);for(u=0;u<4;u++)if(s=h[u][0],i=h[u][1],G(s,i)&&(r=D[s][i])&&"P"===r.piece&&!r.dead&&!c(r.player,a)&&(u<2&&3===r.player||u%2==0&&2===r.player||u>1&&1===r.player||u%2==1&&0===r.player))return!0;for(u=-1;u<2;u++)for(var d=-1;d<2;d++)if((0!==u||0!==d)&&G(s=e+u,i=t+d)&&(r=D[s][i])&&!r.dead&&"K"===r.piece&&!p[r.player]&&!c(r.player,a))return!0}function Be(e,t,a,s,i,n,r,o){var l=[];const u=se(a,e,t);for(var h,d,m,p=-1;p<2;p++)for(var v=-1;v<2;v++)if((0!==p||0!==v)&&G(h=e+p,d=t+v)){if(!u){if(0!==v&&p===v&&i&&"bltr"!==i)continue;if(0!==v&&p===-v&&i&&"brtl"!==i)continue;if(0!==v&&0===p&&i&&"vertical"!==i)continue;if(0===v&&0!==p&&i&&"horizontal"!==i)continue}null!==(m=D[h][d])&&(Ce(m)||(P?l.push([h,d]):!1!==m&&!m.dead&&c(m.player,a)||u&&Ne(h,d,a)||(u||!1===n||le(n,[h,d]))&&l.push([h,d])))}return u?(P?(r&&l.push(T[a][Q.chess960?"kR":"Kk"]),o&&l.push(T[a][Q.chess960?"qR":"Kq"])):s||!r&&!o||function(e,t,a,s,i,n){if(e!==T[a].K[0]||t!==T[a].K[1])return;let r=a%2==0,o=r?e:t;if(s){let s=T[a].kR,i=(T[a].kRk,D[s[0]][s[1]]);if(!i||"R"!==i.piece||i.dead)return;let l=!0,c=T[a].Kk[r?0:1],u=o;for(;Math.abs(u-c)>0;){u<c?u++:u--;let s=r?u:e,i=r?t:u;if(D[s][i]&&("R"!==D[s][i].piece||D[s][i].player!==a)||Ne(s,i,a)){l=!1;break}}let h=T[a].kR[r?0:1],d=T[a].kRk[r?0:1];for(u=h;Math.abs(u-d)>0;){u<d?u++:u--;let s=r?u:e,i=r?t:u;if(D[s][i]&&("K"!==D[s][i].piece||D[s][i].player!==a)){l=!1;break}}l&&n.push(T[a][Q.chess960?"kR":"Kk"])}if(i){let s=T[a].qR,i=(T[a].qRq,D[s[0]][s[1]]);if(!i||"R"!==i.piece||i.dead)return;let l=T[a].Kq[r?0:1],c=!0,u=o;for(;Math.abs(u-l)>0;){u<l?u++:u--;let s=r?u:e,i=r?t:u;if(D[s][i]&&("R"!==D[s][i].piece||D[s][i].player!==a)||Ne(s,i,a)){c=!1;break}}let h=T[a].qR[r?0:1],d=T[a].qRq[r?0:1];for(u=h;Math.abs(u-d)>0;){u<d?u++:u--;let s=r?u:e,i=r?t:u;if(D[s][i]&&("K"!==D[s][i].piece||D[s][i].player!==a)){c=!1;break}}c&&n.push(T[a][Q.chess960?"qR":"Kq"])}}(e,t,a,r,o,l),l):l}function ke(e,t,a,s,i,n){if(a&&!G(e,t))return!0;const r=D[e][t];return null===r||(P?!!Ce(r)||(n.push([e,t]),!1):!1===i||le(i,[e,t])?!1===r?(n.push([e,t]),!1):!!Ce(r)||(!r.dead&&c(r.player,s)||n.push([e,t]),!0):!1!==r)}function Ce(e){return!!e&&("X"===e.piece||(!(!Q.deadWall||!e.dead)||void 0))}function xe(e,t,a,s,i,r){if(!G(e,t))return!0;const o=D[e][t];if(null===o)return!1;if(P)return!!Ce(o)||(r.push([e,t]),!1);if(!1!==i&&!le(i,[e,t]))return!1!==o;if(!s)return!1!==o||(r.push([e,t]),!1);if(Ce(o))return!0;if(Q.enPassant)for(let s of[0,1,2,3])if(s!==a&&C[s].length&&e===C[s][0]&&t===C[s][1]){if(o&&n("piece on enpassant square??",e,t,o),c(a,s))continue;return r.push([e,t]),!0}return!1===o||!o.dead&&c(o.player,a)?void 0:(r.push([e,t]),!0)}function Se(e,t,a,s,i){var n,r,o=[];if(!s||"horizontal"===s)for(n=e-1;n>-1&&!ke(n,t,!1,a,i,o);n--);if(!s||"horizontal"===s)for(n=e+1;n<14&&!ke(n,t,!1,a,i,o);n++);if(!s||"vertical"===s)for(r=t+1;r<14&&!ke(e,r,!1,a,i,o);r++);if(!s||"vertical"===s)for(r=t-1;r>-1&&!ke(e,r,!1,a,i,o);r--);return o}function Pe(e,t,a,s,i){var n,r,o=[];if(r=t-1,!s||"bltr"===s)for(n=e-1;n>-1&&!(ke(n,r,!0,a,i,o)||--r<0);n--);if(r=t+1,!s||"brtl"===s)for(n=e-1;n>-1&&!(ke(n,r,!0,a,i,o)||++r>13);n--);if(r=t-1,!s||"brtl"===s)for(n=e+1;n<14&&!(ke(n,r,!0,a,i,o)||--r<0);n++);if(r=t+1,!s||"bltr"===s)for(n=e+1;n<14&&!(ke(n,r,!0,a,i,o)||++r>13);n++);return o}function Ke(e,t,a,s){let i=Me(e,t,a,s);if(s||(s=h),!D[e][t])return[];const n=s.checkingPcs[a].length;if(!Ye(a))return i;if(Q.antichess)return Te(i);if(Q.royalanti){if(n){let e=Te(i),t=[];for(let a of i)for(let s of e)a===s&&t.push(s);return t.length?t:i}return Te(i)}}function Me(e,t,a,s){s||(s=h);const i=D[e][t];if(!i)return[];const n=s.checkingPcs[a].length,r=!P&&s.pinnedPcs[a][L(e,t)],o=s.getOutOfCk[a];if(!se(a,e,t)&&n>1&&!P&&!Q.captureTheKing&&!Q.antichess)return[];if(r&&"N"===i.piece&&!P&&!Q.captureTheKing&&!Q.antichess)return[];var l=[];return"Q"===i.piece||"D"===i.piece?l=Se(e,t,a,r,o).concat(Pe(e,t,a,r,o)):"P"===i.piece?l=function(e,t,a,s,i){for(var n,r=[],o=function(e,t,a){return 0===a&&t<=1||1===a&&e<=1||2===a&&t>=12||3===a&&e>=12}(e,t,a)?[1,2]:[1],l=0,c=o.length;l<c;l++)if(n=o[l],0!==a||s&&"vertical"!==s){if(1!==a||s&&"horizontal"!==s){if(2!==a||s&&"vertical"!==s){if(3===a&&(!s||"horizontal"===s)&&xe(e-n,t,a,!1,i,r))break}else if(xe(e,t-n,a,!1,i,r))break}else if(xe(e+n,t,a,!1,i,r))break}else if(xe(e,t+n,a,!1,i,r))break;return 0===a?(s&&"bltr"!==s||xe(e+1,t+1,a,!0,i,r),s&&"brtl"!==s||xe(e-1,t+1,a,!0,i,r)):1===a?(s&&"bltr"!==s||xe(e+1,t+1,a,!0,i,r),s&&"brtl"!==s||xe(e+1,t-1,a,!0,i,r)):2===a?(s&&"brtl"!==s||xe(e+1,t-1,a,!0,i,r),s&&"bltr"!==s||xe(e-1,t-1,a,!0,i,r)):3===a&&(s&&"brtl"!==s||xe(e-1,t+1,a,!0,i,r),s&&"bltr"!==s||xe(e-1,t-1,a,!0,i,r)),r}(e,t,a,r,o):"B"===i.piece?l=Pe(e,t,a,r,o):"R"===i.piece?l=Se(e,t,a,r,o):"N"===i.piece?l=function(e,t,a,s){var i=[];const n=ce(e,t);for(var r=0;r<8;r++)ke(n[r][0],n[r][1],!0,a,s,i);return i}(e,t,a,o):"K"===i.piece&&(l=Be(e,t,a,n,r,o,s.canCastleKS[a],s.canCastleQS[a])),l}function Te(e){var t=[];for(let a of e){const e=D[a[0]][a[1]];if(e&&!e.dead&&t.push(a),Q.enPassant)for(let e of[0,1,2,3])tt(a)&&t.push(a)}return t}function $e(e,t){if(p[e])return!1;if(Q.antichess)return!1;if(!1!==M[e]&&M[e]<1)return!0;t||(t=h);const a=t.checkingPcs[e].length;if(!a)return!1;if((Q.royalanti?Ke(O[e][0],O[e][1],e,t):Me(O[e][0],O[e][1],e,t)).length)return!1;if(a>1)return!0;for(var s,i,n=!0,r=0,o=V[e].length;r<o;r++){if(s=V[e][r][0],i=V[e][r][1],G(s,i)||console.log("illegal piece index pi="+s+" pj="+i),!G(s,i)||void 0===D[s]||void 0===D[s][i]){void 0===D[s][i]||D[s][i]?console.log("illegal piece index pi="+s+" pj="+i):console.log("no piece on square pi="+s+" pj="+i);continue}if(!F[e]&&"K"===D[s][i].piece)continue;let a=0;if(a=Q.royalanti?Ke(s,i,e,t).length:Me(s,i,e,t).length){n=!1;break}}return n}function Qe(e,t){if(p[e])return!1;if(t||(t=h),t.checkingPcs[e].length)return!1;var a=!0;const s=V[e];for(var i=0,n=s.length;i<n;i++){let n=0;if(n=Q.antichess||Q.royalanti?Ke(s[i][0],s[i][1],e,t).length:Me(s[i][0],s[i][1],e,t).length){a=!1;break}}return a}function Ae(e){if(x)for(let t of d)t.object[t.method](e)}function Ie(e,a){!function(e,t){for(let t=0;t<14;t++)for(let a=0;a<14;a++){let s=D[t][a];!s||s.dead||p[s.player]||le(V[s.player],[t,a])||(console.log("error: Board piece not found in Pieces Index: i,j,player,piece: "+t+","+a+" "+s.player+s.piece),console.log("Pieces Index: "+V[s.player].join(" ")),console.log("movePlayed",e),console.log(we()))}for(let t of[0,1,2,3])for(let a=0,s=V[t].length;a<s;a++){let s=V[t][a][0],i=V[t][a][1];D[s]&&D[s][i]&&D[s][i].player===t||(console.log("error: Piece in Index not found in Board. ",t,V[t][a]),console.log("Board[][]: ",s,i,D[s]?D[s][i]:D[s]),console.log("movePlayed",e),console.log(we()))}}(e),h=a||we(),h,m=Ge();let o=ee();const l=Y(o);void 0===X[l]?X[l]=1:X[l]++;JSON.stringify(w);(N=function(e,a,o){let l=!1;const c=We(),u=Ee(),h=qe();if(r&&u>0)return B||(B="Game over."),!0;if(s&&h===c.length)return B||(B="Game over"),!0;let d;if(1===c.length||c.length-h==1){for(let e of c)Ue(e)||(d=e);if(void 0===d&&(d=c[0]),void 0===d)return console.log("error: lastManStanding is undefined"),B="no lastManStanding??",!0}const v=r?"Draw":"Game over.";void 0===d&&function(e){var t=4-Ee();if(t>2){if(Q.antichess)return!1}else if(2===t&&Q.antichess)return!1;if(t>2){for(var a=0;a<4;a++)if(!p[a]&&V[a].length>1)return!1;return!0}if(2!==t)return;if(He()>2)return;for(var i=[],a=0;a<4;a++)p[a]||i.push(a);const n=V[i[0]].length,r=V[i[1]].length;if(n>2||r>2)return!1;if(1===n&&1===r)return!0;if(s&&Ye(m))return;if(Q.royalanti)return!1;var o,l,c,u;2===n&&(c=D[V[i[0]][0][0]][V[i[0]][0][1]].piece,u=D[V[i[0]][1][0]][V[i[0]][1][1]].piece,o="K"===c?u:c);2===r&&(c=D[V[i[1]][0][0]][V[i[1]][0][1]].piece,u=D[V[i[1]][1][0]][V[i[1]][1][1]].piece,l="K"===c?u:c);return!(!/[BN]/.test(o)||l)||!(!/[BN]/.test(l)||o)||!(!/[BN]/.test(o)||!/[BN]/.test(l))}()?(s&&a&&Je(10),l=v+" (Insufficient material)"):R===50*c.length?(s&&a&&Je(10),l=v+" (50-move-rule)"):t||3!==X[e]||(s&&Je(10),l=v+" (3-fold repetition)",o&&(o.is3foldRepetition=!0));if(!l&&void 0!==d){const e=He();if(Q.antichess&&("R"!==o.san&&"T"!==o.san||(w[d]+=I)),e>1){let t=(e-1)*$;Q.antichess||Q.royalanti?(t=0,l="Game over."):(w[d]+=t,l="Game over. ("+i[d]+" +"+t+")")}else B?l=B:(l="Game over.",o&&"S"===o.san?l+=" (Stalemate)":o&&/#/.test(o.san)&&(l+=" (Checkmate)"));for(let e of je())Ze(e),p[e]=!0}if(!l&&m===Ge())return B="??",n("Turn === nextTurn() ?!"),!0;t&&!l&&(B="");l&&(B=l);return!1!==l}(l,!0,e))&&(o=ee()),u=Z(o),e.fen=W[u],N?Ae(e):(r&&$e(m)?e.mateFollows="#":Qe(m)&&(e.mateFollows="S"),Ae(e),e.mateFollows&&S&&De(e.mateFollows))}function De(e){if("S"===e&&(f[m]=!0),"#"===e&&(v[m]=!0),Q.antichess&&r&&"S"===e)return N=!0,p[m]=!0,Ze(m),B="Stalemate. "+(0===m||m===o?"1-0":"0-1"),R=0,Ie(t=Xe(e)),t;if(s&&"S"===e)if(Q.antichess||Q.royalanti){let e=I*(4-Le());e>0&&(w[m]+=e)}else if(V[m].length)if(Ue(m)){const e=We(),t=e.length-qe();for(let a of e)Ue(a)||(w[a]+=Math.round($/t))}else w[m]+=$;Ze(m),p[m]=!0;var t=Xe(e);return r&&(B="S"===e?"Draw. (Stalemate)":"#"===e?"Checkmate. "+(0===m||m===o?"0-1":"1-0"):""),R=0,Ie(t),t}function Ve(){y[m]=!0;var e=h.checkingPcs[m].length>0;Ze(m,s&&!Q.antichess),s&&Q.dkw&&!Q.antichess||(p[m]=!0),R=0,r&&(B=i[m]+" forfeits on time. "+(0===m||m===o?"0-1":"1-0"));var t=Xe("T");return e&&(t.wasInCheck=!0),Ie(t),t}function Oe(){if(N)return null;g[m]=!0;var e=h.checkingPcs[m].length>0;Ze(m,s&&!Q.antichess),s&&Q.dkw&&!Q.antichess||(p[m]=!0),R=0,r&&(B=i[m]+" resigned. "+(0===m||m===o?"1-0":"0-1"));var t=Xe("R");return e&&(t.wasInCheck=!0),Ie(t),t}function Fe(e,a){if(N)return null;if(!e||!e.from||!e.to)return null;if(e.from===e.to)return null;var i=q(e.from),u=q(e.to),d=i[0],g=i[1],y=u[0],x=u[1],S=D[d][g],P=D[y][x];if(!S)return n("illega move (!sqr1)",e),null;if(S.player!==m||S.dead)return n("wrong turn/piececolor "+m+"!=="+S.player),n(S),null;if(!le(Q.antichess||Q.royalanti?Ke(d,g,m):Me(d,g,m),[y,x]))return n("illega move (!containsDest)"+y+","+x,e),null;const G=S.player;var z,U,H,W,j=S.piece;if(!j)return n("error, moved piece not found! sqr1=",S),null;var X=_[G]||b[G];if(H=se(G,d,g),X&&(U=!!H&&function(e,t,a){if(T[e].K[0]!==t[0]||T[e].K[1]!==t[1])return!1;const s=T[e][Q.chess960?"kR":"Kk"];if(_[e]&&a[0]===s[0]&&a[1]===s[1]){const t=T[e].kR,a=T[e].kRk,s=D[t[0]][t[1]];if(!s||"R"!==s.piece||s.dead)return;return t[0]===a[0]&&t[1]===a[1]||(D[a[0]][a[1]]=s,D[t[0]][t[1]]=!1,oe(e,t[0],t[1],a[0],a[1])),"O-O"}const i=T[e][Q.chess960?"qR":"Kq"];if(b[e]&&a[0]===i[0]&&a[1]===i[1]){const t=T[e].qR,a=T[e].qRq,s=D[t[0]][t[1]];if(!s||"R"!==s.piece||s.dead)return;return t[0]===a[0]&&t[1]===a[1]||(D[a[0]][a[1]]=s,D[t[0]][t[1]]=!1,oe(e,t[0],t[1],a[0],a[1])),"O-O-O"}}(G,i,u),W="R"===j&&et(G,i),(H||1===W)&&(_[G]=!1),(H||2===W)&&(b[G]=!1)),U&&Q.chess960)if(y=(u=T[G]["O-O"===U?"Kk":"Kq"])[0],x=u[1],y===d&&x===g);else{S={piece:"K",player:G,dead:!1},D[y][x]=S;let e=T[G]["O-O"===U?"kRk":"qRq"];e[0]===d&&e[1]===g||(D[d][g]=!1)}else z=P,D[y][x]=S,D[d][g]=!1;let Y;if(Q.enPassant&&"P"===j)for(let e of[0,1,2,3]){if(e===G||C[e].length&&C[e][0]!==y||C[e][1]!==x)continue;if(1!==Math.abs(d-y)||1!==Math.abs(g-x))continue;let t=y,a=x;if(0===e?a++:1===e?t++:2===e?a--:3===e&&t--,e===(z=D[t][a]).player&&!c(G,z.player)){D[t][a]=!1,Y=[t,a];break}n("warning: piece captured en passant belongs to wrong player::",G,e,z,y,x),z=null}H&&(O[G]=[y,x]),z&&oe(z.player,void 0,void 0,y,x,Y),z&&!z.dead&&k[G].push(z),oe(G,d,g,y,x);var Z=!1;z&&"R"===z.piece&&(_[z.player]||b[z.player])&&!z.dead&&(1===(Z=et(z.player,u))?_[z.player]=!1:2===Z&&(b[z.player]=!1));var J=!1;if("P"===j){const t=Q.promotionRank?Q.promotionRank-1:s?7:10;(0===G&&x===t||1===G&&y===t||2===G&&x===13-t||3===G&&y===13-t)&&(!Q.promoteTo&&/^[QRBNK]$/.test(e.promoteTo)?(S.piece=e.promoteTo,J=S.piece):(S.piece=Q.promoteTo?Q.promoteTo:"Q",J=S.piece),"K"===J&&(F[G]=!0))}if(C[G]=[],Q.enPassant&&"P"===j&&(2===Math.abs(y-d)||2===Math.abs(x-g))){var ee=y,te=x;0===G?te--:1===G?ee--:2===G?te++:3===G&&ee++,function(e,t,a){let s=!1;if(e%2==0){var i=D[t-1][a],n=D[t+1][a];i&&"P"===i.piece&&!c(i.player,e)&&(s=!0),n&&"P"===n.piece&&!c(n.player,e)&&(s=!0)}else{var i=D[t][a-1],n=D[t][a+1];i&&"P"===i.piece&&!c(i.player,e)&&(s=!0),n&&"P"===n.piece&&!c(i.player,e)&&(s=!0)}return s}(G,y,x)&&(C[G]=[ee,te])}z&&!z.dead||"P"===j?R=0:R++;var ae,ie="",ne=[],re=[],ce="",ue=0;const he=we();var de,me=!1;Q.antichess||!z||"K"!==z.piece||p[z.player]||z.dead||se(z.player,y,x)&&(s||(Ze(z.player),p[z.player]=!0,B=z.player===o||z.player===l[o]?"0-1":"1-0"),me=z.player,re.push(z.player));for(var pe=0;pe<4;pe++)p[pe]||(de=h.discovCks[pe][L(d,g)],le(he.checkingPcs[pe],[y,x])?(ie+="+",ne.push(pe),!1!==M[pe]&&(M[pe]--,de&&le(he.checkingPcs[pe],de)&&M[pe]--)):de&&le(he.checkingPcs[pe],de)&&(ie+="+",ne.push(pe),!1!==M[pe]&&M[pe]--),s&&pe!==me&&$e(pe,he)&&(re.includes(pe)||re.push(pe)));let ve=!1;if(Q.koth&&se(G,y,x)&&!K[G]&&E(y,x))if(K[G]=!0,ve=!0,r){N=!0;const e=[[],[2,2,0,0],[1,2,3,0],[1,3,3,1]][o][G];p[e]=!0,B="King of the Hill! "+(0===G||G===o?"1-0":"0-1")}else if(s)if(Q.antichess);else{for(pe=0;pe<4;pe++)pe===G||p[pe]||re.includes(pe)||re.push(pe);B="King of the Hill!"}if(s){"+++"===ie?ue+=$:"++"===ie&&(ue+=5),z&&!z.dead&&(ue+=st(z,G));var fe=re.length;if(fe){ce="";for(var ge=0;ge<fe;ge++)me===(pe=re[ge])||Q.antichess||Q.royalanti||(ue+=at(pe,G));for(ge=0;ge<fe;ge++)Ze(pe=re[ge]),p[pe]=!0,ce+="#",v[pe]=!0}(Q.antichess||Q.royalanti)&&(ue=0,z&&!z.dead&&(ue+=A,0===V[z.player].length&&(ae=z.player,f[z.player]=!0,p[z.player]=!0,ue+=I*(4-Le()))),Q.koth&&ve&&(w[G]+=V[G].length*A,Ze(G),f[G]=!0,p[G]=!0,w[G]+=I*(4-Le()),ae=G)),ue&&(Q.antichess||Q.royalanti?w[z.player]+=ue:(Ue(m)&&(ue=0),w[G]+=ue))}z&&z.isRealKing&&(O[z.player]=null);var ye="";U?ye+=U:(ye+="P"!==j?j.replace("D","Q"):"",ye+=e.from,ye+=z?"x":"-",ye+=z&&"P"!==z.piece?z.piece.replace("D","Q"):"",ye+=e.to),ye+=J?"="+J.replace("D","Q"):"",ye+=ie,ye+=ce,void 0!==ae&&(ye+="S");var _e={player:G,piece:j,san:ye,sanShort:function(e,t){return e.match(/O-O/)?e:e.replace(/([NBRQDK]?)([a-n]\d+)(-|x)([NBRQDK]?)([a-n][0-9]+)(.*)$/i,function(e,a,s,i,n,r,o){return"x"==i&&""==a?(s=t%2==0?s.substr(0,1):s.substr(1))+i+n+r+o:a+i+n+r+o}).replace("-","")}(ye,G),from:e.from,to:e.to};if(a)for(let e in a)_e[e]=a[e];return t||(_e.capturedPieces=k[G]),ie&&(_e.check=ie),ne.length&&(_e.checking=ne),U&&(_e.castle=U),re.length&&(_e.eliminate=re),void 0!==ae&&(_e.outOfPieces=ae,_e.eliminate?_e.eliminate.includes(ae)||_e.eliminate.push(ae):_e.eliminate=[ae]),z&&(_e.capture=Object.assign({},z)),J&&(_e.promote=J),ve&&(_e.kingReachedCenter=!0),Ie(_e),_e}function Ge(){var e=m;do{e=ze(e)}while(p[e]&&e!==m);return e}function ze(e){return 3===e?0:e+1}function Ee(){for(var e=0,t=0;t<4;t++)p[t]&&e++;return e}function Le(){for(var e=0,t=0;t<4;t++)f[t]&&e++;return e}function Ue(e){return!p[e]&&(y[e]||g[e])}function qe(){for(var e=0,t=0;t<4;t++)Ue(t)&&e++;return e}function He(){let e=0;for(let t of re())t&&e++;return e}function We(){let e=[];for(let t=0;t<4;t++)p[t]||e.push(t);return e}function je(){let e=[];for(let t=0;t<4;t++)p[t]||!g[t]&&!y[t]||e.push(t);return e}function Xe(e){var t={player:m,piece:"",san:e,sanShort:e,from:"",to:"",isEndMove:!0,eliminate:[m],capturedPieces:[]};return t.capturedPieces=k[m],"#"!==e&&"S"!==e||(t.isMatingMove=!0),t}function Ye(e){for(let t of V[e])for(let a of Me(t[0],t[1],e)){const t=D[a[0]][a[1]];if(t&&!t.dead)return!0;if(Q.enPassant)for(let t of[0,1,2,3])if(t!==e&&tt(a))return!0}}function Ze(e,t){var a,s,i;V[e]||(V[e]=[]);for(var n=0,r=V[e].length;n<r;n++)s=V[e][n][0],i=V[e][n][1],(a=D[s][i])&&a.player===e&&(t&&se(e,s,i)||(a.dead=!0));V[e]=[],t||(O[e]=null),Q.dkw&&t&&O[e]&&(V[e]=[O[e].slice()]),R=0}function Je(e){if(!Q.antichess)for(var t=0;t<4;t++)p[t]||Ue(t)||(w[t]+=e)}function et(e,t){return T[e].kR[0]===t[0]&&T[e].kR[1]===t[1]?1:T[e].qR[0]===t[0]&&T[e].qR[1]===t[1]?2:void 0}function tt(e){for(let t of C)if(t.length&&t[0]===e[0]&&t[1]===e[1])return!0}function at(e,t){return Q.oppX&&0===Ee()&&e===l[o][t]?Math.ceil($*Q.oppX):$}function st(e,t){let a=0;return e.dead?a=0:e.isRealKing?a=$:"P"===e.piece?a=1:"D"===e.piece?a=1:"N"===e.piece?a=3:"K"===e.piece?a=3:"B"===e.piece?a=5:"R"===e.piece?a=5:"Q"===e.piece&&(a=9),Q.oppX&&0===Ee()&&e.player===l[2][t]?Math.round(a*Q.oppX):Math.round(a)}function it(){N=!1,B="",m=0,p=[!1,!1,!1,!1,!0],g=[!1,!1,!1,!1],y=[!1,!1,!1,!1],_=[!0,!0,!0,!0],b=[!0,!0,!0,!0],w=[0,0,0,0],R=0,N=!1,u=void 0,h=void 0,void 0,nt(),V=[[],[],[],[],[]],O=[null,null,null,null],H=0,W={},j={},X={},M=[!1,!1,!1,!1],Q={teammate:2,koth:!1,nCheck:!1,deadWall:!1,oppX:0,chess960:"",antichess:!1,royalanti:!1,captureTheKing:!1,promotionRank:0,promoteTo:""},T=[{K:[7,0],Kk:[9,0],Kq:[5,0],kR:[10,0],qR:[3,0],kRk:[8,0],qRq:[6,0]},{K:[0,7],Kk:[0,9],Kq:[0,5],kR:[0,10],qR:[0,3],kRk:[0,8],qRq:[0,6]},{K:[6,13],Kk:[4,13],Kq:[8,13],kR:[3,13],qR:[10,13],kRk:[5,13],qRq:[7,13]},{K:[13,6],Kk:[13,4],Kq:[13,8],kR:[13,3],qR:[13,10],kRk:[13,5],qRq:[13,7]}]}function nt(){D=[];for(var e=0;e<14;e++){D[e]=[];for(var t=0;t<14;t++)D[e][t]=!!z(e,t)&&null}}return{position:ae,DEFAULT_FEN:J,StartFenData:T,ColorNames:i,resign:Oe,timeout:Ve,play:Fe,playMatingMove:De,getRandomMove:function(){for(var e=0;e++<299;){var t=V[m][Math.floor(Math.random()*V[m].length)],a=Q.antichess||Q.royalanti?Ke(t[0],t[1],m):Me(t[0],t[1],m);if(0!==a.length){var s=a[Math.floor(Math.random()*a.length)];return{from:U(t[0],t[1]),to:U(s[0],s[1])}}}},isInStalemate:Qe,isInCheckmate:$e,reset:it,numOut:Ee,getRemaining:We,getFlexData:te,ij2sq:U,sq2ij:q,isCornerSquare:z,isBrick:Ce,isZombie:Ue,getZombies:je,isKothSquare:E,isMultiKingsGame:ie,getKingSquare:ne,getKingSquares:re,makeFen:ee,getPointValue:st,canClaim:function(){const e=We();if(2!==e.length)return!1;if(Q.antichess)return!1;const t=e[0]===m?e[1]:e[0];let a=[];for(let e of[0,1,2,3])a.push([e,w[e]]);if(a.sort((e,t)=>t[1]-e[1]),a[0][0]!==m)return!1;if(a[0][1]===a[1][1])return!1;let s=w.slice();if(s[t]+=(He()-1)*$,s[m]<=s[t])return!1;let i=[];for(let e of[0,1,2,3])i.push([e,s[e]]);i.sort((e,t)=>t[1]-e[1]);const n=a[0][0]!==i[0][0];let r=n;if(!r)for(let e of[1,2,3]){let t=w[a[e-1]]===w[a[e]],n=s[a[e-1]]===s[a[e]];if(a[e][0]!==i[e][0]||t!==n){r=!0;break}}return r?!n&&1:2},gameType:function(){return a},turn:function(){return m},fen:function(){return W[u]?W[u]:""},currPositionData:function(){return h},gameOver:function(){return N},pliesNoCapture:function(){return R},abortGame:function(){N=!0,B="Game aborted."},gameOverInfo:function(){return B},inCheck:function(e){return h.checkingPcs[void 0!==e?e:m].length>0},dead:function(e){return void 0===e?p.slice():p[e]},eliminated:function(e){if(void 0===e){if(N)return[!0,!0,!0,!0];let e=[];for(let t of[0,1,2,3])e[t]=p[t]||y[t]||g[t];return e}return!!N||(p[e]||y[e]||g[e])},flagged:function(e){return void 0===e?y.slice():y[e]},resigned:function(e){return void 0===e?g.slice():g[e]},checkmated:function(e){return void 0===e?v.slice():v[e]},stalemated:function(e){return void 0===e?f.slice():f[e]},points:function(e){return void 0===e?w.slice():w[e]},lives:function(e){return void 0===e?M.slice():M[e]},canCastleKS:function(e){return void 0===e?_.slice():_[e]},canCastleQS:function(e){return void 0===e?b.slice():b[e]},positionData:function(){return h},removeListeners:function(){d=[]},addMoveListener:function(e,t){e&&t?d.push({object:e,method:t}):n("addMoveListener: missing arguments")},getPieces:function(e){let t=[];for(let a of V[e])t.push(D[a[0]][a[1]]);return t},set3foldRepetition:function(e){t&&(e?(s&&!/50-move/i.test(B)&&Je(10),N=!0,B=r?"Draw. ":" Game over. ",B+="(3-fold repetition)"):B.match(/repetition/)&&(N=!1,B=""))},setPlayMatingMoves:function(e){S=e},setEmitMoves:function(e){x=e},setGameType:function(e){s="singles"===(a=e),r="teams"===a},getTeammate:function(){return o},getPartner:function(e){if(void 0!==e&&e>=0&&e<4)return l[o][e]},getRuleVariants:function(){return JSON.parse(JSON.stringify(Q))},promotionRank:function(){return Q.promotionRank?Q.promotionRank:s?8:11},promoteTo:function(){return Q.promoteTo},deadWall:function(){return Q.deadWall},chess960:function(){return Q.chess960},startFenData:function(){return JSON.parse(JSON.stringify(T))},setRuleVariants:function(t){if(!t||!Object.keys(t).length)return;Q.dkw=!!t.dkw,Q.enPassant=!!t.enPassant,Q.koth=!!t.koth,Q.deadWall=!!t.deadWall,Q.antichess=!!t.antichess,Q.royalanti=!!t.royalanti,Q.captureTheKing=!!t.captureTheKing,Q.koth=!!t.koth,function(t){let a;if(/^3,2/.test(t)&&(a=t),!a&&!/^\d+$/.test(t))return Q.chess960=!1,void(T=[{K:[7,0],Kk:[9,0],Kq:[5,0],kR:[10,0],qR:[3,0],kRk:[8,0],qRq:[6,0]},{K:[0,7],Kk:[0,9],Kq:[0,5],kR:[0,10],qR:[0,3],kRk:[0,8],qRq:[0,6]},{K:[6,13],Kk:[4,13],Kq:[8,13],kR:[3,13],qR:[10,13],kRk:[5,13],qRq:[7,13]},{K:[13,6],Kk:[13,4],Kq:[13,8],kR:[13,3],qR:[13,10],kRk:[13,5],qRq:[13,7]}]);a||(a=e.generate960Fen(t));for(let e of[0,1,2,3])T[e].K=void 0,T[e].kR=void 0,T[e].qR=void 0;try{const e=a.split("-")[0].split("/");for(var s,i,n,r,o,l,c=13;c>=0;c--){l=0;for(var u=0,h=(s=e[13-c].split(",")).length;u<h;u++)if(/^\d+$/.test(s[u])){i=parseInt(s[u]);for(var d=0;d<i&&l<14;d++)l++}else{if(l>13)break;(n=s[u].split("")).length,r=parseInt(n[0]),"K"===(o=n[1])&&(T[r].K=[l,c]),"R"===o&&(1===r||2===r?void 0===T[r].kR?T[r].kR=[l,c]:T[r].qR=[l,c]:void 0===T[r].qR?T[r].qR=[l,c]:T[r].kR=[l,c]),l++}}Q.chess960=t;for(let e of[0,1,2,3])O[e]=T[e].K}catch(e){return console.trace("error: setChess960",e,startFen,T),Q.chess960=!1,void(T=[{K:[7,0],Kk:[9,0],Kq:[5,0],kR:[10,0],qR:[3,0],kRk:[8,0],qRq:[6,0]},{K:[0,7],Kk:[0,9],Kq:[0,5],kR:[0,10],qR:[0,3],kRk:[0,8],qRq:[0,6]},{K:[6,13],Kk:[4,13],Kq:[8,13],kR:[3,13],qR:[10,13],kRk:[5,13],qRq:[7,13]},{K:[13,6],Kk:[13,4],Kq:[13,8],kR:[13,3],qR:[13,10],kRk:[13,5],qRq:[13,7]}])}}(t.chess960),o=/^[13]$/.test(t.teammate)?parseInt(t.teammate):2;const a=!!t.nCheck&&parseInt(t.nCheck);Q.nCheck=a,M=[a,a,a,a],Q.promotionRank=t.promotionRank&&t.promotionRank>0&&t.promotionRank<15?parseInt(t.promotionRank):0,Q.promoteTo=/^[QRBNKD]$/.test(t.promoteTo)?t.promoteTo:"",Q.oppX=t.oppX&&t.oppX>0?parseFloat(t.oppX):0,$="D"===Q.promoteTo?20:40},getDestinations:function(e,t,a){const s=q(e);if(!G(s[0],s[1]))return[];var i=D[s[0]][s[1]];if(!i||i.dead||p[i.player])return[];if(!t&&i.player!==m)return[];var n=[];a&&(P=!0);var r=Q.antichess||Q.royalanti?Ke(s[0],s[1],i.player):Me(s[0],s[1],i.player);P=!1;for(var o=0,l=r.length;o<l;o++)n.push(U(r[o][0],r[o][1]));return n},getDefaultFenWithFlexdata:function(){var t=Q.chess960?e.generate960Fen(Q.chess960):J;let a={};return ie()&&(a.kingSquares=re()),Q.nCheck&&(a.lives=[Q.nCheck,Q.nCheck,Q.nCheck,Q.nCheck]),Object.keys(a).length&&(t+="-"+JSON.stringify(a)),t},getCheckedKingSquares:function(){var e=[];if(!h||!h.checkingPcs)return[];for(var t=0;t<4;t++)h.checkingPcs[t]&&h.checkingPcs[t].length&&e.push(U(O[t][0],O[t][1]));return e},isEnpassantSquare:function(e){return tt(q(e))},getWinner:function(){if(r){let e=1,t=3;return 1===o&&(e=2,t=3),3===o&&(e=1,t=2),Q.antichess?B.match(/draw/i)?"Draw":p[0]||p[o]?f[0]||f[o]?"1-0":"0-1":p[e]||p[t]?f[e]||f[t]?"0-1":"1-0":"Draw":B.match(/draw/i)?"Draw":p[0]||p[o]?"0-1":p[e]||p[t]?"1-0":"Draw"}if(Q.antichess||Q.royalanti){let e=[];for(let t=0;t<4;t++)e.push([w[t],t]);return e.sort((e,t)=>{t[0],e[0]}),e[0]>e[0]?e[1]:void 0}return w[0]>w[1]&&w[0]>w[2]&&w[0]>w[3]?0:w[1]>w[0]&&w[1]>w[2]&&w[1]>w[3]?1:w[2]>w[0]&&w[2]>w[1]&&w[2]>w[3]?2:w[3]>w[0]&&w[3]>w[1]&&w[3]>w[2]?3:void 0},randomGame:function(e,t,a){it(),ae(e);var i=99999,n=[];n.push({chat:"Game started!",info:1});for(var r=[],o=0,l=0;i-- >0;){i=0;var c=t.random_element(V[m]);do{c=t.random_element(V[m])}while(i++<99&&-1!==r.indexOf(c));var u=D[c[0]][c[1]],h=s?a[m]:Math.round(27-a[m]);if(26*Math.random()<h&&l<h&&"P"!==u.piece&&!Ne(c[0],c[1],m))l++;else{l=0,r.push(c);var d=Q.antichess||Q.royalanti?Ke(c[0],c[1],m):Me(c[0],c[1],m);if(0!==d.length){r=[];var p=t.random_element(d),v=D[p[0]][p[1]];if(26*Math.random()<h&&o<2*h&&(!v&&!v.dead||"P"===v.piece&&t.coin_flip||Ne(p[0],p[1],m)&&t.coin_flip))o++;else if(26*Math.random()<h&&o<1.7*h&&Ne(p[0],p[1],m))o++;else if(o=0,Math.random()<2e-5*(27-h)){if(Oe(),N)break}else if(Math.random()<2e-5*(27-h)){if(Ve(),N)break}else{if(Fe({from:U(c[0],c[1]),to:U(p[0],p[1])}),N)break;if(Math.random()<.04){var f=t.sentence;Math.random()<.05?f=t.country+" "+t.short_description:Math.random()<.05?f=t.color_name+t.address2:Math.random()<.05?f=t.street+" "+t.full_name:Math.random()<.05?f=t.address+" "+t.company_name:Math.random()<.05?f=t.state+" "+t.currency_name:Math.random()<.05?f=t.title+" "+t.state:Math.random()<.05?f=t.text:Math.random()<.05?f=t.domain+t.last_name+" is a donk.":Math.random()<.05&&(f="call me "+t.phone),n.push({chat:f})}}}}}return n.push({chat:B,info:1}),n.push({chat:"gg"}),n.push({chat:"gg"}),n.push({chat:"gg"}),n.push({chat:"gg"}),{info:n}}}};t.FourPlayerChess=r,void 0===(s=function(){return r}.call(t,a,t,e))||(e.exports=s)},QLGP:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return this.label?t("label",{staticClass:"form-label",class:this.$style.component},[this._v(this._s(this.label))]):this._e()},i=[]},Qe5k:function(e,t,a){"use strict";var s=a("KZUd"),i=a("GP0e"),n=a("XyMi");var r=function(e){a("EkJH"),this.$style=a("N4k8")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-53f0542a",null);t.a=o.exports},R40h:function(e,t){},R6uX:function(e,t,a){"use strict";var s=a("5qGH"),i=a("qZYN"),n=a("45FZ"),r=a("qP1x");t.a={name:"PanelWatch",components:{PanelWatchItem:s.a,SearchField:i.a,SelectDark:n.a,IconFont:r.a},data:function(){return{visited:{},gameTypeOptions:[{label:"FFA & Teams",value:""},{label:"FFA",value:"singles"},{label:"Teams",value:"teams"},{label:"Casual",value:"casual"}]}},computed:{topGames:function(){return this.$store.getters.topGames},playerSearchText:function(){return this.$store.getters.playerSearchText},numOnline:function(){return this.$store.getters.playersOnline},numGames:function(){return this.$store.getters.numGames},isPlaying:function(){return this.$store.getters.isPlaying},mainScreen:function(){return this.$store.getters.mainScreen},activeTab:function(){return this.$store.getters.activeTab},active:function(){return this.mainScreen&&"watch"===this.activeTab},selectedGameType:{get:function(){return this.$store.getters.selectedWatchGameType},set:function(e){this.$store.commit("setSelectedWatchGameType",e)}},filteredGames:function(){var e=this.filterSearchText(this.filterGameType(this.topGames));return e.sort(function(e,t){for(var a=0,s=0,i=[0,1,2,3],n=0;n<i.length;n++){var r=i[n];a+=parseInt(e.players[r].rating),s+=parseInt(t.players[r].rating)}return a<s?1:a>s?-1:0}),e}},updated:function(){},watch:{active:function(e){e&&this.$socket.emit("get.stats")}},mounted:function(){var e=this;this.$socket.emit("get.stats"),this.timer=setInterval(function(){e.active&&e.$socket.emit("get.stats")},2e4)},methods:{clickedGame:function(e){this.visited[e]=1,this.$store.commit("joinGame",e)},filterSearchText:function(e){if(!this.playerSearchText)return e;var t=this.playerSearchText.toLowerCase();return e.filter(function(e){return e.players.some(function(e){return e.username.toLowerCase().includes(t)})})},filterGameType:function(e){var t=this;return this.selectedGameType?"custom"===this.selectedGameType?e.filter(function(e){return!e.customData.queue}):"casual"===this.selectedGameType?e.filter(function(e){return!e.rated}):e.filter(function(e){return e.type===t.selectedGameType}):e},preview:function(e,t){e.gameNr!==this.lastPreview&&(this.$bus.emit("showPreview",e.fen,e.gameType,e.turn,e.customData),this.lastPreview=e.gameNr)},cancelPreview:function(){this.lastPreview=null,this.$bus.emit("showPreview",null)}}}},RRlX:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-container",[a("modal-content",[a("section-container",{staticStyle:{"z-index":"9"}},[a("section-content",[a("div",{staticClass:"report-container"},[a("div",{staticClass:"close-modal-container"},[a("icon-font",{class:e.$style.closeIcon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.closeReportModal(t)}}})],1),e._v(" "),a("div",{staticClass:"modal-head"},[a("h1",[e._v("Report Abuse "),e.game.gameNr?a("font",{attrs:{size:"-1"}},[e._v("Game #"+e._s(e.game.gameNr))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"players-container"},[a("h4",[e._v("Players involved:")]),e._v(" "),a("div",[e.addPlayer?a("span",{staticClass:"player-span"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.players,expression:"players"}],attrs:{type:"checkbox",id:"rp0"},domProps:{value:e.addPlayer,checked:Array.isArray(e.players)?e._i(e.players,e.addPlayer)>-1:e.players},on:{change:function(t){var a=e.players,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e.addPlayer,r=e._i(a,n);s.checked?r<0&&(e.players=a.concat([n])):r>-1&&(e.players=a.slice(0,r).concat(a.slice(r+1)))}else e.players=i}}}),e._v(" "),a("label",{staticClass:"other",attrs:{for:"rp0"}},[e._v(e._s(e.addPlayer.username))])]):e._e(),e._v(" "),e._l([0,1,2,3],function(t){return e.game.gameNr&&e.seat!==t?a("span",{staticClass:"player-span"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.players,expression:"players"}],attrs:{type:"checkbox",id:"rp"+t},domProps:{value:{username:e.playerInfo(t,"username"),playerId:e.playerInfo(t,"playerId")},checked:Array.isArray(e.players)?e._i(e.players,{username:e.playerInfo(t,"username"),playerId:e.playerInfo(t,"playerId")})>-1:e.players},on:{change:function(a){var s=e.players,i=a.target,n=!!i.checked;if(Array.isArray(s)){var r={username:e.playerInfo(t,"username"),playerId:e.playerInfo(t,"playerId")},o=e._i(s,r);i.checked?o<0&&(e.players=s.concat([r])):o>-1&&(e.players=s.slice(0,o).concat(s.slice(o+1)))}else e.players=n}}}),e._v(" "),a("label",{class:e.colors[t],attrs:{for:"rp"+t}},[e._v(e._s(e.playerInfo(t,"username")))])]):e._e()})],2)]),e._v(" "),a("div",{staticClass:"reason-container"},[a("h4",[e._v("Reason")]),e._v(" "),e._l(e.reasons,function(t,s){return e.game.gameNr||!t.gameNrRequired||t.gameType&&e.game.gameType&&t.gameType!==e.game.gameType?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedReason,expression:"selectedReason"}],attrs:{id:"reason_"+s,type:"radio"},domProps:{value:t,checked:e._q(e.selectedReason,t)},on:{change:function(a){e.selectedReason=t}}}),e._v(" "),a("label",{attrs:{for:"reason_"+s}},[e._v(e._s(t.label))]),e._v(" "),a("br"),e._v(" "),e.selectedReason===t?a("div",{staticClass:"reason-description",domProps:{innerHTML:e._s(t.description)}}):e._e()]):e._e()}),e._v(" "),e.game.gameNr?e._e():a("div",{staticClass:"reason-description"},[e._v("For more reasons, report from within a game. ")])],2),e._v(" "),a("div",{staticClass:"message-container"},[a("h4",[e._v("Your message "),e.selectedReason.messageRequired?a("em",[e._v("*")]):e._e()]),e._v(" "),a("span",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"message",attrs:{placeholder:""},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})])]),e._v(" "),a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.sendReport(t)}}},[a("span",[e._v("Send")])])],1)])],1)],1)],1)},i=[]},RYyS:function(e,t,a){"use strict";var s=a("y639");t.a={name:"iframeAd",props:{provider:{type:String,default:"tmsads"},slotId:{type:String,required:!0},goPremiumLink:{type:String,required:!0},shouldUseIframeAd:{type:Boolean,default:!1}},data:function(){return{isMobile:!1,labels:{hideAds:"Remove Ads"}}},mounted:function(){s.a.registerAdSlot(this.slotId)}}},RkFL:function(e,t,a){"use strict";var s=a("Y4tO"),i=a("FLbv"),n=a("XyMi");var r=function(e){a("4qIL")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-3406cb0c",null);t.a=o.exports},Ro8u:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"help",style:{"max-height":e.isPremium?"calc(100vh - 40px)":"calc(100vh - 320px)"}},[a("div",{staticStyle:{"white-space":"pre"}},[e._v("\n      ⓘ   Shift-clicking any piece shows its legal moves.\n\n      Keyboard shortcuts:\n\n      ←  →  ↑  ↓\n      , (comma)        Start\n      . (dot)                End\n      Backspace/Delete     Takeback\n      Spacebar               Play random move\n\n      Esc        Exit Room/Game\n      C            Custom games\n      A            Analysis mode\n      S            Settings\n      H            Help\n\n      R            Rotate board\n      T            Auto-rotate "),a("font",{attrs:{size:"-2"}},[e._v("(by turn)")]),e._v("\n      F            Focus mode "),a("font",{attrs:{size:"-2"}},[e._v("(collapse board panel)")]),e._v("\n      L            Coordinates\n      K            Coordinate-Helper "),a("font",{attrs:{size:"-2"}},[e._v("(mouse-over-squares)")]),e._v("\n\n      W            Transparent arrows\n      M            Colored move annotation\n      Shift-Alt-B Blindfold\n      Shift-Alt-G Ghost board "),a("font",{attrs:{size:"-2"}},[e._v("(bug turned feature ;)")]),e._v("\n\n\n\n      Right-click-drag to draw arrows.\n      "),a("font",{attrs:{size:"-1"}},[e._v("\n      Choose arrow color by holding key 1, 2,\n      3 or 4 pressed on your keyboard.\n      ")]),e._v("\n      Click the board to clear all arrows.\n      "),a("font",{attrs:{size:"-1"}},[e._v("\n      Shift-click to clear only your own arrows.\n      ")]),e._v(" "),a("font",{attrs:{size:"-1"}},[e._v("\n      In games you played in, your arrows are\n      shared (and are of your color) when you\n      are not alone in the room.\n      ")]),e._v(" "),a("font",{attrs:{size:"-1"}},[e._v("\n      In analysis mode (shortcut A), you can\n      change the game type, and edit player names,\n      ratings or points by clicking on them.\n      Alternatively, edit the PGN4 and press ↑ Load.\n      ")]),e._v(" "),a("font",{attrs:{size:"-1"}},[e._v("\n        Typing #123 in the chat will create a\n        link to game #123.\n      ")])],1),e._v(" "),a("rules")],1)])},i=[]},SQvp:function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s),n=a("BO1k"),r=a.n(n),o='{\n  "creatorId": -12345,\n  "title": "SomeGameTitle",\n  "gameType": "singles",\n  "timeControlInitial": 1,\n  "increment": 15,\n  "isDelay": true,\n  "rated": false,\n  "scaleRatingChanges": 1,\n  "minRating": 1000,\n  "maxRating": 2000,\n  "showObserverChat": false,\n  "ruleVariants": {\n    "dkw": true,\n    "enPassant": true,\n    "teammate": 2,\n    "koth": false,\n    "deadWall": false,\n    "oppX": 0,\n    "chess960": false,\n    "antichess": false,\n    "captureTheKing": false,\n    "promotionRank": 0,\n    "promoteTo": "",\n    "blindfold": false,\n    "ghostBoard": false,\n    "anonymous": false\n  },\n  "description": "",\n  "startFen": "someFEN4"\n}';t.a={components:{},props:{},data:function(){return{games:[],addGame:o,error:"",opacity:1,rawList:"",showRawList:!0,cgPresetMax:o,cgPresetMin:'{\n  "creatorId": -12345,\n  "title": "SomeGameTitle",\n  "gameType": "singles",\n  "timeControlInitial": 1,\n  "increment": 15,\n  "isDelay": true,\n  "rated": false\n}'}},computed:{board:function(){return this.$store.getters.board},fourPlayer:function(){return this.$store.getters.fourPlayer}},watch:{games:function(){var e={},t=!0,a=!1,s=void 0;try{for(var i,n=r()(this.games);!(t=(i=n.next()).done);t=!0){var o=i.value;e[o.creatorId]&&alert("duplicate creator id in list: "+o.creatorId),e[o.creatorId]=1}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}}},mounted:function(){var e=this;this.$bus.$on("showPreview",function(t){e.opacity=t?.1:1}),this.getGames(),delete this.$options.sockets.generateGamesList,this.$options.sockets.generateGamesList=function(t){t&&(e.games=t),e.sort()}},methods:{getGames:function(){this.$socket.emit("get-games-to-generate",{uid:window.context.user.id})},del:function(e){this.games.splice(e,1)},add:function(){var e=this;this.error="",this.addGame=this.addGame.trim();var t=void 0;try{if(!(t=JSON.parse(this.addGame)))return;("number"!=typeof t.creatorId||t.creatorId>-1)&&(this.error+="invalid creatorId. <br>");var a=!0,s=!1,i=void 0;try{for(var n,o=r()(this.games);!(a=(n=o.next()).done);a=!0){if(n.value.creatorId===t.creatorId){this.error+="creatorId "+t.creatorId+" already exists. <br>";break}}}catch(e){s=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw i}}if(t.title||(this.error="missing title"),"singles"!==t.gameType&&"teams"!==t.gameType&&(this.error+="invalid  gameType.<br>"),"number"!=typeof t.timeControlInitial&&(this.error+="invalid timeControlInitial. <br>"),"number"!=typeof t.increment&&(this.error="invalid increment. <br>"),void 0!==t.isDelay&&"boolean"!=typeof t.isDelay&&(this.error+="invalid isDelay. <br>"),void 0===t.rated||"boolean"==typeof t.rated||/^wta/.test(t.rated)||(this.error+="invalid rated.<br>"),void 0!==t.startFen){if(""===t.startFen||t.startFen===this.fourPlayer.DEFAULT_FEN)delete t.startFen;else{var l=t.startFen.split("-");(l.length<7||14!==l[0].split("/").length)&&(this.error+="invalid startFen. <br>")}t.ruleVariants&&t.ruleVariants.chess960&&t.startFen&&(this.error+="960 games may not include a startFen. (auto-generated)<br>")}}catch(e){return void(this.error=e.toString())}var c=["creatorId","title","description","showObserverChat","gameType","timeControlInitial","increment","isDelay","startFen","bookPgn","rated","scaleRatingChanges","minRating","maxRating","ruleVariants"];for(var u in t)c.includes(u)||(this.error+=" invalid property "+u+".<br>");this.error||(this.games.push(t),this.sort(),this.error="<font color=darkgreen>Game Added!</font>",setTimeout(function(){e.error=""},3500))},save:function(){confirm("Are you sure?")&&this.$socket.emit("set-games-to-generate",{games:this.games,uid:window.context.user.id})},sort:function(){this.games.sort(function(e,t){return e.creatorId-t.creatorId})},copy:function(e){this.addGame=i()(this.games[e],null,2)},exportRawList:function(){this.rawList=i()(this.games,null,2)},importRawList:function(){this.error="";try{var e=JSON.parse(this.rawList);e&&e.length?(this.games=e,this.error="<font color=darkgreen>List imported.</font>"):this.error="list empty?"}catch(e){this.error=e.toString()}},shrinkFen:function(){this.error="",this.addGame=this.addGame.replace(/"startFen": "([^"]+)"/,this.replaceFen)},replaceFen:function(e,t){var a=this,s=t.replace(/\s+/g,"");return/^[RGBY]-/.test(s)?s=(s=this.$store.getters.fenUtils.unprettyFen(s,function(e){a.$store.commit("showNotification",e)})).replace(/"/g,'\\"'):/^\d+[,/]/.test(s)||(this.error="invalid fen"),void 0===s&&(this.error="invalid fen"),'"startFen": "'+s+'"'}}}},SXHo:function(e,t){},SXMi:function(e,t,a){"use strict";var s=a("z1to");t.a={name:"partner-request",components:{CustomData:s.a},data:function(){return{finalPlayers:[],opacity:1}},computed:{invitations:function(){return this.$store.getters.invitations},board:function(){return this.$store.getters.board},game:function(){return this.$store.getters.game}},mounted:function(){var e=this;this.$bus.$on("showPreview",function(t){e.opacity=t?.3:1})},methods:{getMemberProfileUrl:function(e){return"https://chess.com/member/"+e},acceptInvitation:function(e){var t=this,a=this.invitations[e];a.customData?(this.$store.getters.lookingForGame&&this.$socket.emit("cancel-pair"),setTimeout(function(){t.$socket.emit("join-custom-game",{creatorId:a.customData.creatorId,uid:window.context.user.id,inviterId:a.inviterId,isTeamInvite:a.isTeamInvite})},300)):setTimeout(function(){t.$socket.emit("accept-invite",{inviterId:a.inviterId,uid:window.context.user.id})},300),this.$store.commit("removeInvite",e),this.$store.commit("hidePlayModal")},declineInvitation:function(e){this.$socket.emit("decline-invite",{inviterId:this.invitations[e].inviterId,uid:window.context.user.id}),this.$store.commit("removeInvite",e)},getIndex:function(e){for(var t=this.invitations.length,a=0;a<t;a++)if(e===this.invitations[a].inviterId)return a}}}},"Sa/b":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return""!==this.displayMessage?t("div"):this._e()},i=[]},Su5O:function(e,t){},Su9W:function(e,t,a){"use strict";var s=a("m1M3"),i=a("GXhW"),n=a("XyMi");var r=function(e){a("eFjp"),this.$style=a("Wf8w")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-58cfcb28",null);t.a=o.exports},SyDX:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{position:"absolute"}},[this.from!==this.to?t("div",{ref:"arrow",staticClass:"arrow"},[t("div",{ref:"arrowStem",staticClass:"arrow-stem"}),this._v(" "),t("div",{ref:"arrowHead",staticClass:"arrow-head"})]):t("div",{ref:"circle",staticClass:"circle"})])},i=[]},"T+iH":function(e,t){},TEqg:function(e,t,a){"use strict";var s=a("dX0B"),i=a("PkA7"),n=a("XyMi");var r=function(e){a("so6P"),this.$style=a("LgB/")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-392c907e",null);t.a=o.exports},UIWm:function(e,t){e.exports={component:"component_3a5XXNnY",link:"link_3Wuidd4A",left:"left_2OBCFCdn",icon:"icon_DnHkLqDI",name:"name_310qX4kI",rightname:"rightname_11DGPMvc",chevron:"chevron_mnP_y1lS"}},Upkn:function(e,t,a){"use strict";var s=a("BnBt"),i=a("h+wZ"),n=a("1XG1"),r=a("P8L+"),o=a("qP1x"),l=a("1vU/"),c=a("45FZ"),u=a("ZImc");t.a={name:"BoardPanel",components:{Chat:s.a,Moves:i.a,Pgn4:n.a,Fen4:r.a,Tab:l.a,IconFont:o.a,SelectDark:c.a,Help:u.a},props:{},data:function(){return{editPosition:!1,autorotate:!1,showHelp:!1,showShare:!1,rendered:!1,gameType:"singles",gameTypeOptions:[{label:"Free-for-All",value:"singles"},{label:"Teams",value:"teams"}],activeTab:"pgn",annotation:"",annHeight:"100px"}},computed:{colorNames:function(){return this.$store.getters.settings.altColorScheme?this.board.b.altColorNames:this.board.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},board:function(){return this.$store.getters.board},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},gameGameType:function(){return this.game.gameType},atMove:function(){return this.$store.getters.atMove},inVariation:function(){return this.$store.getters.inVariation},atVariationMove:function(){return this.$store.getters.atVariationMove},atEndOfGame:function(){return this.inVariation<0&&this.atMove===this.game.moves.length-1},thread:function(){return this.inVariation>-1?this.game.variations[this.atMove][this.inVariation]:this.game.moves},atThreadMove:function(){return this.inVariation>-1?this.atVariationMove:this.atMove},currentMove:function(){return this.atThreadMove>-1?this.thread[this.atThreadMove]:null},fourPlayer:function(){return this.$store.getters.fourPlayer},isPlaying:function(){return this.$store.getters.isPlaying},mainScreen:function(){return this.$store.getters.mainScreen},highlightLegal:function(){return this.$store.getters.settings.showLegalMoveIndicators},isPremium:function(){return window.context.user.isPremium},analysisMode:function(){return this.$store.getters.analysisMode},seat:function(){return this.$store.getters.seat},gameLink:function(){return window.location.href.replace(/\?[pg]=.*$/,"")+"?g="+this.game.gameNr+(this.atEndOfGame?"":"-"+(this.atMove+1))},dividerHeight:function(){var e=localStorage.getItem("dividerHeight");return e||(this.isPremium?this.game.isLiveGame?"30%":"50%":this.game.isLiveGame?"99px":"40%")},tabs:function(){var e=[];return this.game.gameNr&&e.push({id:"chat",title:"Chat",icon:"chat"}),this.game.isLiveGame?e:(e.push({id:"pgn",title:"PGN4",icon:"chess-move-alt"}),e.push({id:"ann",title:"Annotate",icon:"page-pencil"}),e.push({id:"fen",title:"Edit position",icon:"chess-pawn-rook"}),e)}},watch:{isPlaying:function(e){e&&this.selectTab("chat")},atMove:function(e){this.autorotate&&this.rotate("turn"),this.currentMove&&(0===this.atMove&&!this.currentMove.annotation&&this.annotationZero&&(this.currentMove.annotation=this.annotationZero),this.annotation=this.currentMove.annotation)},atVariationMove:function(e){this.autorotate&&this.rotate("turn"),this.currentMove&&(this.annotation=this.currentMove.annotation)},gameType:function(e){this.$store.commit("setGameType",e)},gameGameType:function(e){this.gameType!==e&&(this.gameType=e)},gameNr:function(e){if(e){this.gameType=this.game.gameType,this.selectTab("chat");var t=this.$el.querySelector("#loadedGameChat");t&&setTimeout(function(){t.scrollTop=t.scrollHeight},150),void 0!==this.seat&&(this.autorotate=!1,this.board.b.rotate(this.seat))}else this.board.b.rotate(0)},analysisMode:function(e){e&&this.game.moves.length?this.$store.commit("gotoMove",{atMove:this.atMove}):this.gameNr||this.board.b.reset(this.game.startFen),e&&"chat"===this.activeTab&&this.selectTab("pgn")}},mounted:function(){var e=this;this.board.b.resizeablePanel(this.isPremium);var t=localStorage.getItem("gameType");t&&(this.gameType=t),this.$store.commit("setGameType",this.gameType),this.$bus.$on("resetAnalysisBoard",this.reset),this.$bus.$on("selectPanelTab",this.selectTab),this.$bus.$on("toggleHelp",this.toggleHelp),window.addEventListener("keydown",this.keyDown),setTimeout(function(){e.rendered=!0},220),window.addEventListener("resize",this.setAnnotationHeight)},beforeUpdate:function(){this.setAnnotationHeight()},methods:{setAnnotationHeight:function(){this.annHeight=this.board.b.calcTabHeight()+"px"},colorTheme:function(e){return void 0!==e?this.colors[e]:"neutral"},dbg:function(){this.board.b.debug()},showDebug:function(){return 9510244===window.context.user.id},keyDown:function(e){if("true"!==e.target.contentEditable&&!e.target.tagName.match(/input|textarea/i)&&!(e.ctrlKey||e.altKey||e.metaKey))switch(e.which){case 65:this.game.isLiveGame||this.$store.commit(this.analysisMode?"analysisModeOff":"analysisModeOn");break;case 72:this.toggleHelp();break;case 82:this.mainScreen||this.isPlaying||this.rotate("next");break;case 84:this.mainScreen||this.isPlaying||(this.autorotate=!this.autorotate,this.rotate("turn"))}},reset:function(){this.$store.commit("startFromPosition",this.fourPlayer.getDefaultFenWithFlexdata())},rotate:function(e){this.editPosition&&(e=0),this.board.b.rotate(e),this.$forceUpdate()},saveAnnotation:function(){if(void 0===this.annotation&&(this.annotation=""),this.annotation=this.annotation.replace(/\{/g,"[").replace(/\}/g,"]"),-1!==this.atMove){this.annotationZero="";var e=this.currentMove;e&&(e.annotation=this.annotation,this.board.b.forceMovesUpdate(),this.board.b.forcePgnUpdate())}else this.annotationZero=this.annotation},selectTab:function(e){var t=this;e!==this.activeTab&&("fen"===e||"fen"===this.activeTab?(this.editPosition="fen"===e,this.editPosition?(this.currplviewWas=this.board.b.currplview,this.rotate(0)):(this.currentMove?this.$store.commit("gotoMove",this.currentMove):this.$store.commit("gotoMove",{atMove:-1,inVariation:-1,atVariationMove:-1}),this.rotate(this.currplviewWas)),this.$bus.emit("editPosition",this.editPosition),this.board.setEditPosition(this.editPosition)):"ann"===e&&setTimeout(function(){return t.$refs.annotation.focus()},50),this.activeTab=e)},toggleAutoRotate:function(){this.autorotate=!this.autorotate,this.autorotate&&this.rotate("turn")},toggleHelp:function(e){this.showHelp=!this.showHelp,this.showHelp&&this.mainScreen&&this.$store.commit("analysisModeOn")}}}},Vn1B:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"playerbox-wrapper",class:e.position,style:{width:3*e.squareSize+"px",height:3*e.squareSize+"px"},attrs:{id:"playerBox"+e.player,title:e.boxTitle}},[a("div",{staticClass:"forcePlayerBoxUpdate",on:{click:e.forceUpdate}}),e._v(" "),a("div",{staticClass:"playerbox-container",class:{"left-box":e.isLeft,"right-box":e.isRight}},[a("div",{staticClass:"catpuredPcs noSelect",class:{"absolute-bottom-2":e.isBottom,"absolute-top-2":e.isTop,"align-right":e.isLeft,"align-left":e.isRight,"padding-right":e.isRight,"padding-left":e.isLeft,"flex-reverse":e.isBottom,"flex-normal":e.isTop,hmirror:e.isLeft}},e._l(e.capturedPieces,function(t){return a("img",{staticClass:"capturedPiece",class:{dead:t.dead},style:e.capturedPieceStyle(t),attrs:{"data-player":t.player,"data-piece":t.piece,src:e.b.pieceSrc(t)}})})),e._v(" "),a("div",{staticClass:"playerbox-inner",class:{"float-right":e.isLeft,"float-left":e.isRight}},[a("div",{staticClass:"content-abs",class:{"absolute-bottom":e.isTop,"absolute-top":e.isBottom,"absolute-left":e.isRight,"absolute-right":e.isLeft}},[e.isTop?a("div",{staticClass:"username-wrapper",class:{"align-right":e.isLeft,"align-left":e.isRight,"float-left":e.isRight,"float-right":e.isLeft}},[a("div",{staticClass:"username",class:{pointer:!e.contentEditable&&e.playerId},style:{"max-width":4*e.squareSize+"px",margin:Math.round(7*e.scale)+"px 0px","font-size":Math.round(13*e.scale)+"px !important"},attrs:{"data-player":e.player},on:{click:function(t){!e.contentEditable&&e.$bus.emit("showUserPopup",e.playerId,e.username,t)}}},[a("div",{staticClass:"truncate120 noSelect",style:{"max-width":140*e.scale+"px"},attrs:{title:e.username,contentEditable:e.contentEditable},on:{blur:function(t){e.contentEditable&&e.b.forcePgnUpdate()}}},[e._v("\n              "+e._s(e.username)+"\n            ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.username!==e.colorName,expression:"username !== colorName"}],staticClass:"rating noSelect",attrs:{contentEditable:e.contentEditable},on:{blur:function(t){e.contentEditable&&e.b.forcePgnUpdate()}}},[e._v("\n\n              "+e._s(e.rating&&"?"!==e.rating?"("+e.rating+")":"")+"\n            ")])])]):e._e(),e._v(" "),a("div",{staticClass:"clock-wrapper"},["singles"===e.gameType?a("div",{staticClass:"points-container",class:{"absolute-bottom":e.isTop,"absolute-top":e.isBottom,"absolute-right":e.isRight,"absolute-left":e.isLeft},style:{height:Math.round(30*e.scale)+"px"}},[a("div",{staticClass:"player-points noSelect",style:{"font-size":Math.round(26*e.scale)+"px"},on:{click:e.changePoints}},[e._v("\n              "+e._s(e.points)+"\n            ")])]):e._e(),e._v(" "),a("div",{staticClass:"player-clock-container",class:[e.colors[e.player],e.active,e.isLeft?"float-right":"float-left"],style:{height:Math.round(30*e.scale)+"px","font-size":Math.round(22*e.scale)+"px"}},[a("a",{staticClass:"player-avatar",class:{pointer:e.game.gameNr,"absolute-right":e.isLeft,"absolute-left":e.isRight},style:{height:Math.round(30*e.scale)+"px",width:Math.round(30*e.scale)+"px"},attrs:{href:e.userProfileUrl,target:"_blank"},on:{click:function(t){e.onAvatarClick(t)}}},[a("img",{attrs:{src:e.avatarUrl}})]),e._v(" "),e.showDelaySpinner&&e.player===e.game.turn?a("div",{class:[e.isRight?"delay-right":"delay-left"],style:{left:e.isRight?Math.round(36*e.scale)+"px":"",right:e.isLeft?Math.round(36*e.scale)+"px":""}},[a("div",{staticClass:"delay-wrapper",class:e.colors[e.player],style:{height:Math.round(20*e.scale)+"px",width:Math.round(20*e.scale)+"px"}},[a("div",{staticClass:"delay-spinner delay-pie",class:e.animationClass}),e._v(" "),a("div",{staticClass:"delay-filler delay-pie",class:e.animationClass}),e._v(" "),a("div",{staticClass:"delay-mask",class:e.animationClass})])]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.contentEditable,expression:"!contentEditable"}],staticClass:"clock",class:[e.isRight?"clock-right":"clock-left"],style:{"margin-top":e.isFirefox?"2px":"0px"}},[a("span",[e._v(e._s(e.formatClock(e.playerclock(e.player))))])])])]),e._v(" "),e.isBottom?a("div",{staticClass:"username-wrapper",class:{"align-right":e.isLeft,"align-left":e.isRight,"float-left":e.isRight,"float-right":e.isLeft}},[a("div",{staticClass:"username",class:{pointer:!e.contentEditable&&e.playerId},style:{"max-width":4*e.squareSize+"px",margin:Math.round(7*e.scale)+"px 0px","font-size":Math.round(13*e.scale)+"px !important"},attrs:{"data-player":e.player},on:{click:function(t){!e.contentEditable&&e.$bus.emit("showUserPopup",e.playerId,e.username,t)}}},[a("div",{staticClass:"truncate120",style:{"max-width":140*e.scale+"px"},attrs:{title:e.username,contentEditable:e.contentEditable},on:{blur:function(t){e.contentEditable&&e.b.forcePgnUpdate()}}},[e._v("\n              "+e._s(e.username)+"\n            ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.username!==e.colorName,expression:"username !== colorName"}],staticClass:"rating",attrs:{contentEditable:e.contentEditable},on:{blur:function(t){e.contentEditable&&e.b.forcePgnUpdate()}}},[e._v("\n              "+e._s(e.rating&&"?"!==e.rating?"("+e.rating+")":"")+"\n            ")])])]):e._e()])])])])},i=[]},"WL/1":function(e,t){},WSHl:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("leaderboard")},i=[]},WScB:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rules-master"},[a("h2",{staticClass:"four-rules-title"},[e._v("Four Player Chess Rules")]),e._v(" "),a("div",{staticClass:"rules-main-container"},[a("p",[e._v("There are 2 main variations of 4 Player Chess (4PC): Teams and Free-for-All.")]),e._v(" "),e.showTeams()?a("div",[a("h3",[e._v("Teams")]),e._v(" "),a("p",[e._v("Gameplay begins with the Red player. Clockwise move order: Red, Blue, Yellow, Green.")]),e._v(" "),a("p",[e._v("Your teammate is the player across from you.")]),e._v(" "),a("p",[e._v("You cannot capture your teammate's pieces.")]),e._v(" "),e._m(0),e._v(" "),a("p",[e._v("Checkmate only happens when a player's turn is reached allowing a player's teammate to intervene.")]),e._v(" "),a("p",[e._v("The first team to checkmate an enemy player wins!")]),e._v(" "),a("p",[e._v("Stalemate is a Draw.")]),e._v(" "),a("p",[e._v("The current time control is 1 minute with a 15 second delay.")]),e._v(" "),a("p",[e._v("If a player resigns or times out on his first move, he/she will lose rating and the game will be aborted.")]),e._v(" "),a("p",[e._v("Rightclick+drag to draw arrows. Your teammate can see your arrows and you can see theirs!")]),e._v(" "),a("p",[e._v("Click anywhere on the board to clear the arrows. Shift+click to clear only your own arrows.")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("Good luck!")]),e._v(" "),a("p",[e._v(" ")])]):e._e(),e._v(" "),e.showSingles()?a("div",[e._m(3),e._v(" "),a("p",[e._v("The goal is to finish with the most points of any player.")]),e._v(" "),a("p",[e._v("Points may be earned in the following ways:")]),e._v(" "),e._m(4),e._m(5),e._v(" "),e._m(6),e._v(" "),a("p",[e._v("Pieces become “dead” (grey) when a player is eliminated. Capturing dead pieces does not award any points.")]),e._v(" "),a("p",[e._v("Gameplay begins with the Red player. Clockwise move order: Red, Blue, Yellow, Green.")]),e._v(" "),a("p",[e._v("The game is finished when three players have been eliminated.")]),e._v(" "),a("p",[e._v('When a player resigns or times out, leaving two or more active players on the board,\n            their King remains "live" and is still worth +20 to whoever can capture it;\n            The last remaining player will be given +20 for each king of all resigned or timed out players that is still on the board.')]),e._v(" "),a("p",[e._v("In case of insufficient material, 3-fold repetition or the 50-move rule, the remaining players receive +10 points each.")]),e._v(" "),a("p",[e._v("The current time control is 1 minute with a 15 second delay.")]),e._v(" "),a("p",[e._v("Total points do not directly affect rating calculations, only final placement does.")]),e._v(" "),a("p",[e._v("If a player resigns or times out before having made at least 4 moves, he will lose rating and the game will be aborted.")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),a("p",[e._v("Good luck!")]),e._v(" "),a("p",[e._v(" ")])]):e._e()])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Pawns promote on your "),t("strong",[this._v("11th")]),this._v(" rank.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is recommended to review the "),t("a",{attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/strategy-tips-for-teams"}},[this._v("Strategy Tips For Teams")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is also recommended to join the "),t("a",{attrs:{target:"_blank",href:"https://www.chess.com/club/4-player-chess"}},[this._v("4 Player Chess Club")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[this._v("Free-for-All (FFA)\n            "),t("br"),t("a",{staticClass:"watchvideo",attrs:{target:"_blank",href:"https://www.youtube.com/watch?v=Giqbk-vSMlc"}},[this._v("Watch video")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("* Checkmating an opponent (+20 points)."),t("br")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("* Stalemating yourself (+20 points)."),t("br"),this._v("\n            * Capturing active (colored) pieces:"),t("br"),this._v("\n            Pawns: +1, \n            Knights: +3, \n            Bishops: +5, \n            Rooks: +5, \n            Queens: +9, \n            Kings: +20, \n            Promoted Queens: +1."),t("br"),this._v("\n           * Checking two players simultaneously: +5."),t("br"),this._v("\n           * Checking three players simultaneously: +20."),t("br")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Pawns promote to Queens on your "),t("strong",[this._v("8th")]),this._v(" rank.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("strong",[a("span",{staticClass:"red_text"},[e._v("IMPORTANT:")])]),e._v(" Players must think independently. You are not allowed to attempt to influence another player's decisions.\n              It is "),a("strong",[e._v("prohibited")]),e._v(" to suggest moves and/or coordinate attacks using chat\n              (or other means of communication) "),a("strong",[e._v("during")]),e._v(" FFA 4PC games! Also players may not discuss blunders which can be fixed, but may discuss\n              what already happened and cannot be undone. If you break this rule you will be "),a("strong",[e._v("chat-banned")]),e._v(" or\n              even "),a("strong",[e._v("play-banned")]),e._v('! Examples of prohibited phrases: "Check red", "Let\'s attack green together",\n              "I won\'t take your queen", "Mind your rook", "Protect your pawn", "Mate in 2", "Resign!", "Don\'t resign".\n              You can use these and similar phrases in chat '),a("strong",[e._v("after")]),e._v(" a game, but "),a("strong",[e._v("not during")]),e._v(" a game.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[t("span",{staticClass:"red_text"},[this._v("IMPORTANT:")])]),this._v(" It is "),t("strong",[this._v("prohibited")]),this._v(' to ask other players to give you points!\n              For example: "Give me 7 points and I will resign.", "Just 5 points, ple-e-ease!"\n              You can be '),t("strong",[this._v("chat-banned")]),this._v(" for doing this.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is recommended to review the "),t("a",{attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/beginner-tips-and-fundamentals"}},[this._v("Beginner Tips")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("It is also recommended to join "),t("a",{attrs:{target:"_blank",href:"https://www.chess.com/club/4-player-chess"}},[this._v("4 Player Chess Club")]),this._v(".")])}]},Wf8w:function(e,t){e.exports={component:"component_mZoTryt8_1"}},Wfyl:function(e,t){},WtiW:function(e,t){},XGJk:function(e,t,a){"use strict";var s=a("45FZ");t.a={name:"Leaderboard",components:{SelectDark:s.a},data:function(){return{gameTypeOptions:[{label:"FFA",value:"singles"},{label:"Teams",value:"teams"}]}},watch:{active:function(e){e&&this.$socket.emit("get.leaderboard",window.context.user.id)}},computed:{active:function(){return"leaderboard"===this.$store.getters.activeTab},leaderboard:function(){return this.$store.getters.getLeaderboard},selectedGameType:{get:function(){return this.$store.getters.selectedLeaderboardType},set:function(e){this.$store.commit("setSelectedLeaderboardType",e)}},selectedRatingType:function(){return{singles:"rating",teams:"teamRating",weekly:"score",daily:"score"}[this.selectedGameType]},selectedMyStanding:function(){return{singles:"myStandingSingles",teams:"myStandingTeams",daily:"myStandingDaily",weekly:"myStandingWeekly"}[this.selectedGameType]},myStanding:function(){if(!this.leaderboard)return null;var e=this.leaderboard[this.selectedMyStanding];return e&&e.rank&&"-"!==e.rank?e:null}},methods:{getMemberProfileUrl:function(e){return"https://www.chess.com/member/"+e},topRankStyles:function(e){switch(e){case 0:return"gold";case 1:return"silver";case 2:return"bronze";default:return""}}}}},XVob:function(e,t,a){"use strict";var s=a("qP1x");t.a={components:{IconFont:s.a},data:function(){return{}},methods:{showTeams:function(){var e=this.$store.getters.rulesType;return"teams"===e||""===e},showSingles:function(){var e=this.$store.getters.rulesType;return"singles"===e||""===e}}}},"XX9+":function(e,t,a){"use strict";var s=a("Su9W"),i=a("JP+h"),n=a("tNyc"),r=a("3/ZL"),o=a("a1iv"),l=a("Gg0z"),c=a("kApn"),u=a("qP1x"),h=a("GDE4"),d=a.n(h);t.a={components:{ModalContainer:s.a,ModalContent:i.a,FormButton:n.a,FormInput:r.a,FormLabel:o.a,SectionContainer:l.a,SectionContent:c.a,IconFont:u.a,VueSlider:d.a},computed:{userRating:function(){return this.$store.getters.userRating},userTeamRating:function(){return this.$store.getters.userTeamRating},settings:function(){return this.$store.getters.settings},gameNr:function(){return this.$store.getters.game.gameNr},ratingSliderDetails:function(){return{value:[this.settings.minMatchmakerRange,this.settings.maxMatchmakerRange],width:"100%",height:8,dotSize:16,min:500,max:3500,interval:50,disabled:!1,show:!0,tooltip:"always",formatter:"{value}"}},teamRatingSliderDetails:function(){return{value:[this.settings.minMatchmakerRangeTeams,this.settings.maxMatchmakerRangeTeams],width:"100%",height:8,dotSize:16,min:500,max:3500,interval:50,disabled:!1,show:!0,tooltip:"always",formatter:"{value}"}},speedSliderDetails:function(){return{value:this.settings.animationSpeed,width:"100%",height:6,dotSize:12,min:0,max:1e3,interval:5,disabled:!1,show:!0,tooltip:"hover",formatter:"{value}"}},soundSliderDetails:function(){return{value:this.settings.soundVolume,width:"100%",height:6,dotSize:12,min:0,max:100,interval:1,disabled:!1,show:!0,tooltip:"hover",formatter:"{value}"}},transparencySliderDetails:function(){return{value:this.settings.panelTransparency,width:"100%",height:6,dotSize:12,min:0,max:100,interval:1,disabled:!1,show:!0,tooltip:"hover",formatter:"{value}%"}},showTeammateArrows:{get:function(){return this.settings.showTeammateArrows},set:function(e){this.save("showTeammateArrows",e)}},showArrowsWhileObserving:{get:function(){return this.settings.showArrowsWhileObserving},set:function(e){this.save("showArrowsWhileObserving",e)}},transparentArrows:{get:function(){return this.settings.transparentArrows},set:function(e){this.save("transparentArrows",e)}},showLegalMoveIndicators:{get:function(){return this.settings.showLegalMoveIndicators},set:function(e){this.save("showLegalMoveIndicators",e)}},showCoordinates:{get:function(){return this.settings.showCoordinates},set:function(e){this.save("showCoordinates",e)}},coloredMoves:{get:function(){return this.settings.coloredMoves},set:function(e){this.save("coloredMoves",e)}},coloredSan:{get:function(){return this.settings.coloredSan},set:function(e){this.save("coloredSan",e)}},altColorScheme:{get:function(){return this.settings.altColorScheme},set:function(e){this.save("altColorScheme",e)}},blackAndWhite:{get:function(){return this.settings.blackAndWhite},set:function(e){this.save("blackAndWhite",e)}},streaming:{get:function(){return this.settings.streaming},set:function(e){this.save("streaming",e)}},premove:{get:function(){return this.settings.premove},set:function(e){this.save("premove",e)}}},watch:{},mounted:function(){var e=this;window.addEventListener("keydown",this.keyDown),window.addEventListener("resize",this.forceUpdate),this.$options.sockets.setting_changed=function(){setTimeout(function(){e.$forceUpdate()},100)}},methods:{forceUpdate:function(){this.$forceUpdate()},scStyle:function(){var e={"z-index":9},t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a="innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,s=t<620?"scale("+t/650+")":"";return s||(s=a<900?"scale("+a/950+")":""),s&&(e.transform=s),e},keyDown:function(e){if("true"!==e.target.contentEditable&&(/(checkbox|radio)/i.test(e.target.type)||!e.target.tagName.match(/input|textarea/i))&&!(e.ctrlKey||e.altKey||e.metaKey))switch(e.which){case 76:this.showCoordinates=!this.showCoordinates;break;case 77:this.coloredSan=!this.coloredSan;break;case 83:this.$store.commit("showSettingsModal",!this.$store.getters.showSettingsModal)}},save:function(e,t){this.$socket.emit("update-settings",{setting:e,value:t,uid:window.context.user.id})},closeSettingsModal:function(){this.$store.commit("showSettingsModal",!1)},saveRangeSetting:function(){var e=this;clearTimeout(this.saveRangeTimer);var t=this.$refs.ratingSlider.getValue();this.saveRangeTimer=setTimeout(function(){var a=50*Math.round(e.userRating/50)-50;t[0]>a&&(t[0]=a,e.ratingSliderDetails.value[0]=t[0],e.$forceUpdate());var s=50+50*Math.round(e.userRating/50);t[1]<s&&(t[1]=s,e.ratingSliderDetails.value[1]=t[1],e.$forceUpdate()),e.save("minMatchmakerRange",t[0]),e.save("maxMatchmakerRange",t[1])},500)},saveTeamRangeSetting:function(){var e=this;clearTimeout(this.saveTeamRangeTimer);var t=this.$refs.teamRatingSlider.getValue();this.saveTeamRangeTimer=setTimeout(function(){var a=50*Math.floor(e.userTeamRating/50)-50;t[0]>a&&(t[0]=a,e.teamRatingSliderDetails.value[0]=t[0],e.$forceUpdate());var s=50+50*Math.ceil(e.userTeamRating/50);t[1]<s&&(t[1]=s,e.teamRatingSliderDetails.value[1]=t[1],e.$forceUpdate()),e.save("minMatchmakerRangeTeams",t[0]),e.save("maxMatchmakerRangeTeams",t[1])},500)},saveSpeedSetting:function(e){var t=this;clearTimeout(this.saveSpeedTimer);var a=void 0===e?this.$refs.speedSlider.getValue():e;this.saveSpeedTimer=setTimeout(function(){t.save("animationSpeed",a)},e?1:500)},saveSoundSetting:function(e){var t=this;clearTimeout(this.saveSoundTimer);var a=void 0===e?this.$refs.soundSlider.getValue():e;this.saveSoundTimer=setTimeout(function(){t.$store.commit("setSoundVolume",a),t.save("soundVolume",a)},e?1:500)},saveTransparecySetting:function(){var e=this,t=this.$refs.transparencySlider.getValue();this.$store.commit("SOCKET_SETTING_CHANGED",{setting:"panelTransparency",value:t}),clearTimeout(this.savetransparencyTimer),this.savetransparencyTimer=setTimeout(function(){e.save("panelTransparency",t)},500)},showHelp:function(){this.$store.getters.game.gameNr||this.$store.commit("analysisModeOn"),this.$bus.emit("toggleHelp")}}}},XbiD:function(e,t,a){"use strict";var s=a("Bb9H"),i=a("Vn1B"),n=a("XyMi");var r=function(e){a("cARN"),this.$style=a("EIbF")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-5838089a",null);t.a=o.exports},XmSz:function(e,t,a){"use strict";var s=a("RYyS"),i=a("0U/L"),n=a("XyMi");var r=function(e){a("B0rA")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-0ff0318c",null);t.a=o.exports},XqNX:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab",class:{active:e.active},on:{click:e.onTabClick}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",name:e.iconName}}),e._v(" "),a("span",{staticClass:"tab-title"},[e._v(e._s(e.title))])],1)},i=[]},Y4tO:function(e,t,a){"use strict";t.a={name:"Banned"}},YZ2P:function(e,t){e.exports={icon:"icon_1adVdHFn_1","icon-small":"icon-small_1-UvjmA__1"}},ZImc:function(e,t,a){"use strict";var s=a("tc25"),i=a("Ro8u"),n=a("XyMi");var r=function(e){a("tL07")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-5e499d4f",null);t.a=o.exports},ZNqI:function(e,t){},a1iv:function(e,t,a){"use strict";var s=a("f+EB"),i=a("QLGP"),n=a("XyMi");var r=function(e){this.$style=a("/vmo")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},"aC/b":function(e,t){},afeW:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.viewReports&&e.userIsAdmin,expression:"viewReports && userIsAdmin"}],staticClass:"wrapper",attrs:{id:"view-abuse-reports"}},[a("button",{staticClass:"close",on:{click:e.close}},[e._v("Close")]),e._v(" "),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.minReported,expression:"minReported"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.minReported=t.target.multiple?a:a[0]},e.findReports]}},e._l(e.minReportedFilterOptions,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.statusFilter,expression:"statusFilter"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.statusFilter=t.target.multiple?a:a[0]},e.findReports]}},[a("option",{attrs:{disabled:"disabled"}},[e._v(" -- Show -- ")]),e._v(" "),e._l(e.statusFilterOptions,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})],2),e._v(" "),a("input",{ref:"filter",attrs:{type:"text",placeholder:"Find words.."},on:{keyup:e.keyUpFilter}}),e._v(" "),a("span",[e._v("("+e._s(e.reports.length)+")")]),e._v(" "),a("br"),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.reportersFilter,expression:"reportersFilter"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.reportersFilter=t.target.multiple?a:a[0]},e.filterReports]}},[a("option",{attrs:{value:""}},[e._v("Reporter")]),e._v(" "),e._l(e.reporters,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.reportedFilter,expression:"reportedFilter"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.reportedFilter=t.target.multiple?a:a[0]},e.filterReports]}},[a("option",{attrs:{value:""}},[e._v("Reported ")]),e._v(" "),e._l(e.reported,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})],2),e._v(" "),a("br"),e._v(" "),a("font",{attrs:{size:"-2"}},[e._v("\n         ⓘ You can prevent users from submitting (spamming) reports by report-banning them.\n    ")]),e._v(" "),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"userReports",attrs:{id:"userReports"}},e._l(e.reports,function(t){return a("div",{staticClass:"table"},[a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Reporter")]),e._v(" "),a("div",{staticClass:"tableCell"},[a("span",{staticClass:"username pointer",on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v(e._s(t.username)+" ")]),e._v("\n          on "+e._s(e.ts2datetime(t.date))+"\n        ")])]),e._v(" "),a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Players")]),e._v(" "),a("div",{staticClass:"tableCell"},e._l(t.players,function(t){return a("span",{staticClass:"username pointer",on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v(e._s(t.username)+" ")])}))]),e._v(" "),a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Reason")]),e._v(" "),a("div",{staticClass:"tableCell"},[a("span",{},[e._v(e._s(t.reason)+" ")])])]),e._v(" "),a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Message")]),e._v(" "),a("div",{staticClass:"tableCell"},[a("span",{},[e._v(e._s(t.message)+" ")])])]),e._v(" "),t.gameNr?a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Game")]),e._v(" "),a("div",{staticClass:"tableCell"},[a("a",{attrs:{tooltip:"View game"},on:{click:function(a){e.$store.commit("joinGame",t.gameNr)}}},[e._v("#"+e._s(t.gameNr))])])]):e._e(),e._v(" "),a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[e._v("Notes")]),e._v(" "),a("div",{staticClass:"tableCell",attrs:{title:t.notes}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notes,expression:"report.notes"}],domProps:{value:t.notes},on:{change:function(e){t.notesChanged=!0},blur:function(a){t.notesChanged&&e.updateReport(t,"notes",t.notes)},input:function(a){a.target.composing||e.$set(t,"notes",a.target.value)}}})])]),e._v(" "),t.lastModified?a("div",{staticClass:"tableRow"},[a("div",{staticClass:"tableCell"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"report.status"}],on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"status",a.target.multiple?s:s[0])},function(a){e.updateReport(t,"status",t.status)}]}},[a("option",{attrs:{disabled:"disabled"}},[e._v(" -- Change Status -- ")]),e._v(" "),e._l(e.reportStatusOptions,function(t){return a("option",{key:t.label,domProps:{value:t.value}},[e._v(e._s(t.label))])})],2)]),e._v(" "),t.lastModifiedBy?a("div",{staticClass:"tableCell"},[e._v(e._s(t.lastModifiedBy)+" on "+e._s(e.ts2datetime(t.lastModified)))]):e._e()]):e._e(),e._v(" "),a("br"),e._v(" "),a("br")])}))])},i=[]},auWG:function(e,t){},bB0f:function(e,t,a){"use strict";var s=a("R6uX"),i=a("IEUA"),n=a("XyMi");var r=function(e){a("C1nX"),this.$style=a("vgYD")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-11527b72",null);t.a=o.exports},bF2X:function(e,t){},bREw:function(e,t,a){"use strict";var s=a("fZjL"),i=a.n(s),n=a("BO1k"),r=a.n(n);console.log.bind(console);var o={adminNotification:"",chatbanned:!1,playbanned:!1,reportbanned:!1,connected:!1,currentMatches:[],showCustomGames:!1,customGames:[],createdGame:!1,joinedGames:!1,showInvitationalModal:!1,minimizeInvitationalModal:!1,isAdmin:!1,isBanned:!1,isSuperUser:!1,lookingForGame:!1,notification:"",invitations:[],reconnecting:!1,rating:1200,showPlayModal:!1,rulesAcknowledged:!0,showSettingsModal:!1,teamRating:1200,user:window.context?window.context.user:null,userBanReason:"",userReports:[],usernameChoices:[],popupData:{player:{},callback:{}},friendsRaw:[],friends:[],friendsUsernames:[],availableFriends:[],onlineFriends:[],collapse:!1,adsBlocked:"unknown",settings:{animationSpeed:200,altColorScheme:!1,blackAndWhite:!1,blindfold:!1,premove:!1,minMatchmakerRange:0,maxMatchmakerRange:3500,minMatchmakerRangeTeams:0,maxMatchmakerRangeTeams:3500,showTeammateArrows:!0,showArrowsWhileObserving:!0,showLegalMoveIndicators:!0,showCoordinates:!1,coloredMoves:!0,coloredSan:!1,transparentArrows:!1,panelTransparency:50,soundVolume:90},maintenance:!1,disable_play:!1,announcement:"",socket:null},l={adminNotification:function(e){return e.adminNotification},adsBlocked:function(e){return e.adsBlocked},connected:function(e){return e.connected},currentMatches:function(e){return e.currentMatches},showCustomGames:function(e){return e.showCustomGames},customGames:function(e){return e.customGames},createdGame:function(e){return e.createdGame},joinedGames:function(e){return e.joinedGames},invitations:function(e){return e.invitations},isBanned:function(e){return e.isBanned},lookingForGame:function(e){return e.lookingForGame},notification:function(e){return e.notification},reconnecting:function(e){return e.reconnecting},showInvitationalModal:function(e){return e.showInvitationalModal},minimizeInvitationalModal:function(e){return e.minimizeInvitationalModal},showPlayModal:function(e){return e.showPlayModal},rulesAcknowledged:function(e){return e.rulesAcknowledged},showSettingsModal:function(e){return e.showSettingsModal},user:function(e){return e.user},userId:function(e){return e.user.id},userIsAdmin:function(e){return e.isAdmin},userChatban:function(e){return e.chatbanned},userPlayban:function(e){return e.playbanned},userReportban:function(e){return e.reportbanned},userBanReason:function(e){return e.userBanReason},userIsSuperUser:function(e){return e.isSuperUser},userRating:function(e){return e.rating},userReports:function(e){return e.userReports},userTeamRating:function(e){return e.teamRating},usernameChoices:function(e){return e.usernameChoices},popupData:function(e){return e.popupData},friends:function(e){return e.friends},friendsUsernames:function(e){return e.friendsUsernames},availableFriends:function(e){return e.availableFriends},settings:function(e){return e.settings},collapse:function(e){return e.collapse},maintenance:function(e){return e.maintenance},disable_play:function(e){return e.disable_play},announcement:function(e){return e.announcement},isOpera:function(e){return!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0},isFirefox:function(e){return"undefined"!=typeof InstallTrigger},isSafari:function(e){return/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari).toString()},isIE:function(e){return!!document.documentMode},isEdge:function(e){return!document.documentMode&&!!window.StyleMedia},isChrome:function(e){return!!window.chrome&&!!window.chrome.webstore}},c={adsBlocked:function(e,t){e.adsBlocked=t},collapse:function(e,t){e.collapse=t},setSocket:function(e,t){e.socket=t},clearUsernameChoices:function(e){e.usernameChoices=[]},closePopup:function(e){e.popupData={player:{},callback:{}}},setPopupCallbackData:function(e,t){e.popupData.callback=t},setFriends:function(e,t){e.friendsRaw=t},clearAdminNotification:function(e){e.adminNotification=""},clearNotification:function(e){e.notification=""},removeInvite:function(e,t){e.invitations.splice(t,1)},setUserReports:function(e,t){e.userReports=t},showNotification:function(e,t){c.clearNotification(e),e.notification=t},showInvitationalModal:function(e){e.showInvitationalModal=!0},hideInvitationalModal:function(e){e.showInvitationalModal=!1},minimizeInvitationalModal:function(e,t){e.minimizeInvitationalModal=t},showPlayModal:function(e){e.showPlayModal=!0,e.showSettingsModal=!1},hidePlayModal:function(e){e.showPlayModal=!1},showSettingsModal:function(e,t){e.showSettingsModal=t},showCustomGames:function(e,t){e.showCustomGames=t},joinCustomGame:function(e,t){e.lookingForGame&&e.socket.emit("cancel-pair"),e.socket.emit("join-custom-game",{creatorId:t,uid:window.context.user.id})},leaveCustomGame:function(e,t){e.socket.emit("leave-custom-game",{creatorId:t,uid:window.context.user.id})},leaveAllCustomGames:function(e){e.socket.emit("leave-all-custom-games",{uid:window.context.user.id})},SOCKET_USER_CONNECTED:function(e){e.connected=!0,e.reconnecting=!1},SOCKET_DISCONNECT:function(e,t){e.connected=!1,e.reconnecting=!0},SOCKET_RECONNECT:function(e){e.connected=!0,e.reconnecting=!1,e.timersStarted=!0},SOCKET_NO_CONNECT:function(e){console.error("received NO_CONNECT from server")},SOCKET_BANNED:function(e){e.isBanned=!0},SOCKET_MAINTENANCE:function(e){e.maintenance=!0},SOCKET_DISABLE_PLAY:function(e,t){e.disable_play=t},SOCKET_ANNOUNCEMENT:function(e,t){e.announcement=t},SOCKET_IS_ADMIN:function(e,t){e.isAdmin=t},SOCKET_IS_SUPERUSER:function(e,t){e.isSuperUser=t},SOCKET_CHATBANNED:function(e,t){e.chatbanned=t},SOCKET_PLAYBANNED:function(e,t){e.playbanned=t},SOCKET_REPORTBANNED:function(e,t){e.reportbanned=t},SOCKET_BANREASON:function(e,t){e.userBanReason=t},SOCKET_NEW_RATING:function(e,t){e.rating=t},SOCKET_NEW_TEAMRATING:function(e,t){e.teamRating=t},SOCKET_SET_USER_REPORTS:function(e,t){e.userReports=t},SOCKET_ANOTHER_LOGIN:function(e){c.clearNotification(e),e.notification="Another login has been detected.";try{document.getElementsByClassName("four-container")[0].style.opacity=.5,document.getElementsByClassName("reconnecting-message")[0].innerHTML="Another login has been detected."}catch(e){}},SOCKET_SHOW_NOTIFICATION:function(e,t){c.clearNotification(e),e.notification=t},SOCKET_SHOW_ADMIN_NOTIFICATION:function(e,t){c.clearAdminNotification(e),e.adminNotification=t},SOCKET_INVITE_ACCEPTED:function(e,t){e.notification=t+" has accepted your invitation!",e.showPlayModal=!1},SOCKET_IN_QUEUE:function(e,t){e.lookingForGame=!0,e.currentMatches=t,e.joinedGames&&c.leaveAllCustomGames(e),e.createdGame&&(e.showInvitationalModal=!1)},SOCKET_REMOVE_CUSTOM_GAME:function(e,t){for(var a in e.createdGame&&e.createdGame.creatorId===t&&(e.createdGame=!1),e.joinedGames)if(e.joinedGames[a].creatorId===t){e.joinedGames.splice(a,1);break}for(var s in e.customGames)if(e.customGames[s].creatorId===t){e.customGames.splice(s,1);break}},SOCKET_CUSTOM_GAME:function(e,t){var a=!1;for(var s in e.customGames)if(e.customGames[s].creatorId===t.creatorId){a=!0,e.customGames[s]=t;break}a||e.customGames.push(t),u(e.customGames)},SOCKET_CUSTOM_GAMES:function(e,t){u(t)},SOCKET_INVITATION:function(e,t){var a=[],s=!0,i=!1,n=void 0;try{for(var o,l=r()(e.invitations);!(s=(o=l.next()).done);s=!0){var c=o.value;c.inviterId!==t.inviterId&&a.push(c)}}catch(e){i=!0,n=e}finally{try{!s&&l.return&&l.return()}finally{if(i)throw n}}a.push(t),e.invitations=a},SOCKET_STOP_PAIR:function(e){e.lookingForGame=!1,e.currentMatches=[]},SOCKET_GAME_STARTING:function(e,t){t.isCustomGame,t.isRematch,t.delay;e.showSettingsModal=!1,e.showCustomGames=!1,e.showInvitationalModal=!1,e.showPlayModal=!1,e.invitations=[],c.showNotification(e,"Your game is starting...")},SOCKET_GAME_CANCELLED:function(e,t){c.showNotification(e,"Game cancelled.")},SOCKET_GAME_OVER:function(e){},SOCKET_SET_USERNAME_CHOICES:function(e,t){e.usernameChoices=t.players},SOCKET_SET_PLAYERDETAILS_RESULT:function(e,t){e.popupData.player=t,i()(e.popupData.callback).length||(e.popupData.callback={dummy:1})},SOCKET_USER_SETTINGS:function(e,t){void 0===t.premove&&(t.premove=!1),e.settings=t},SOCKET_SETTING_CHANGED:function(e,t){e.settings[t.setting]=t.value},SOCKET_GAME_NOT_FOUND:function(e,t){c.clearNotification(e),e.notification="Game #"+t+" not found"},SOCKET_RULES_ACKNOWLEDGED:function(e,t){e.rulesAcknowledged=t},SOCKET_ONLINE_FRIENDS:function(e,t){var a=[],s=[],i=[],n=[],o=!0,l=!1,c=void 0;try{for(var u,h=r()(e.friendsRaw);!(o=(u=h.next()).done);o=!0){var d=u.value;n.push({username:d.username,uid:d.user_id}),t[d.user_id]?(d.connected=t[d.user_id].connected,d.inGame=t[d.user_id].inGame,d.observingGame=t[d.user_id].observingGame,a.push(d),d.connected&&!d.inGame&&i.push({username:d.username,uid:d.user_id})):s.push(d)}}catch(e){l=!0,c=e}finally{try{!o&&h.return&&h.return()}finally{if(l)throw c}}e.availableFriends=i,e.onlineFriends=a,e.friends=a.concat(s),e.friendsUsernames=[{username:window.context.user.username,uid:window.context.user.id}].concat(n)}};function u(e){o.createdGame=!1,o.joinedGames=[];var t=[],a=!0,s=!1,i=void 0;try{for(var n,l=r()(e);!(a=(n=l.next()).done);a=!0){var c=n.value;if(c.userJoined=!1,c.creatorId===window.context.user.id)c.userCreated=!0,o.createdGame=c,t.push(c.creatorId);else{var u=!0,h=!1,d=void 0;try{for(var m,p=r()(c.players);!(u=(m=p.next()).done);u=!0){m.value.playerId===window.context.user.id&&(c.userJoined=!0,o.joinedGames.push(c),t.push(c.creatorId))}}catch(e){h=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw d}}}}}catch(e){s=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw i}}o.customGames=[];var v=!0,f=!1,g=void 0;try{for(var y,_=r()(e);!(v=(y=_.next()).done);v=!0){var b=y.value;if(!t.includes(b.creatorId)&&b.isPublic){var w="singles"===b.gameType?"rating":"teamRating";o[w]<b.minRating||o[w]>b.maxRating||o.customGames.push(b)}}}catch(e){f=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(f)throw g}}o.customGames.sort(function(e,t){return t.players.length-e.players.length}),o.joinedGames.length&&o.joinedGames.sort(function(e,t){return t.players.length-e.players.length}),o.joinedGames.length&&(o.customGames=o.joinedGames.concat(o.customGames)),o.createdGame&&o.customGames.unshift(o.createdGame)}t.a={state:o,getters:l,mutations:c}},bnuI:function(e,t,a){(function(t){const a="/callback/security/user/roles";e.exports=function(e){return{getRoles:async function(){return"production"!==e&&"staging"!==e?new Promise((e,t)=>{e(["test","role"])}):new Promise((e,s)=>{t("#callbackdata").load(a,function(t){try{e(t?JSON.parse(t):null)}catch(t){console.log(t),e(null)}})})}}}}).call(t,a("7t+N"))},bw8k:function(e,t){},"c/6E":function(e,t){},cARN:function(e,t){},cEu1:function(e,t,a){"use strict";t.a={components:{},props:{minimize:!1},data:function(){return{numReady:0,soundLastPlayed:null}},computed:{lookingForGame:function(){return this.$store.getters.lookingForGame},currentMatches:function(){return this.$store.getters.currentMatches},gameStarting:function(){return this.$store.getters.gameStarting},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr}},methods:{colorRed:function(){return this.currentMatches.length>0?"red":""},colorBlue:function(){return this.currentMatches.length>1?"blue":""},colorYellow:function(){return this.currentMatches.length>2?"yellow":""},colorGreen:function(){return this.currentMatches.length>3?"green":""},getRedAvatar:function(){if(this.currentMatches.length>0)return this.currentMatches[0].avatarUrl},getBlueAvatar:function(){if(this.currentMatches.length>1)return this.currentMatches[1].avatarUrl},getGoldAvatar:function(){if(this.currentMatches.length>2)return this.currentMatches[2].avatarUrl},getGreenAvatar:function(){if(this.currentMatches.length>3)return this.currentMatches[3].avatarUrl}},updated:function(){this.currentMatches.length>this.numReady&&(null===this.soundLastPlayed||Date.now()-this.soundLastPlayed>500)&&(this.soundLastPlayed=Date.now()),this.numReady=this.currentMatches.length}}},cLz0:function(e,t){e.exports={icon:"icon_YvQCpz3i_1"}},cQd8:function(e,t,a){"use strict";var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),o=a("BO1k"),l=a.n(o),c=a("Su9W"),u=a("JP+h"),h=a("tNyc"),d=a("Gg0z"),m=a("kApn"),p=a("qP1x"),v=a("hfJ9");t.a={components:{ModalContainer:c.a,ModalContent:u.a,FormButton:h.a,SectionContainer:d.a,SectionContent:m.a,IconFont:p.a,ShortTopSidebarAd:v.a},data:function(){return{}},computed:{isPremium:function(){return window.context.user.isPremium},fourPlayer:function(){return this.$store.getters.fourPlayer},b:function(){return this.$store.getters.board.b},colorNames:function(){return this.$store.getters.settings.altColorScheme?this.b.altColorNames:this.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},seat:function(){return this.$store.getters.seat},game:function(){return this.$store.getters.game},gameOverData:function(){return this.game.gameOverData?this.game.gameOverData:{}},defaultTime:function(){return this.$store.getters.defaultTime},lookingForGame:function(){return this.$store.getters.lookingForGame},adsBlocked:function(){return this.$store.getters.adsBlocked},isInviter:function(){return this.game.customData&&this.game.customData.creatorId===window.context.user.id},observers:function(){return this.$store.getters.observers},rematchReady:function(){return this.$store.getters.rematchReady},invitations:function(){return this.$store.getters.invitations},joinedAlready:function(){var e=!0,t=!1,a=void 0;try{for(var s,i=l()(this.$store.getters.joinedGames);!(e=(s=i.next()).done);e=!0){if(s.value.creatorId===this.game.customData.creatorId)return!0}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}},showInviteButton:function(){return!this.lookingForGame&&"teams"===this.game.gameType&&void 0!==this.seat&&!this.hasInviteFromTeammate&&!this.joinedAlready&&(this.game.customData.queue||this.game.customData.creatorId<0)},hasInviteFromTeammate:function(){if(!this.invitations[0])return!1;var e=this.game.players[this.fourPlayer.getPartner(this.seat)].playerId,t=!0,a=!1,s=void 0;try{for(var i,n=l()(this.invitations);!(t=(i=n.next()).done);t=!0){if(i.value.inviterId===e)return!0}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}},showRematchButton:function(){if(void 0===this.seat)return!1;var e=0;for(var t in this.observers){var a=!0,s=!1,i=void 0;try{for(var n,r=l()(this.game.players);!(a=(n=r.next()).done);a=!0){n.value.playerId===this.observers[t].playerId&&e++}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}}return 4===e},getWinner:function(){var e=this.gameOverData.winner,t=this.gameOverData.info;if("singles"===this.game.gameType)return void 0!==e?this.colorNames[e]+" Won":t||"No One Won";if("teams"===this.game.gameType){var a=this.fourPlayer.getTeammate();return t&&t.match(/abort/i)?t:"1-0"===e?1===a?"Red and Blue Won":3===a?"Red and Green Won":"Red and Yellow Won":"0-1"===e?1===a?"Yellow and Green Won":3===a?"Blue and Yellow Won":"Blue and Green Won":t||e}},getStandings:function(){var e=this.gameOverData.standings;if(!e)return[];var t=this.gameOverData.points,a=[],s=!0,i=!1,n=void 0;try{for(var r,o=l()(e);!(s=(r=o.next()).done);s=!0){var c=r.value-1,u=this.game.players[c];if(!u)return void a.push({});var h=this.gameOverData.ratingDiffs[c];h=h>=0?"+"+h:h,a.push({username:u.username,playerId:u.playerId,points:t[c],avatar:u.avatarUrl,ratingDifference:h,finalRating:Math.round(this.gameOverData.newRatings[c]),finalRatingDecimal:this.gameOverData.newRatings[c].toFixed(1),color:this.colors[c],seat:c})}}catch(e){i=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw n}}return a}},mounted:function(){window.addEventListener("resize",this.forceUpdate)},methods:{forceUpdate:function(){this.$forceUpdate()},scStyle:function(){var e={"z-index":9},t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a="innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,s=t<620?"scale("+t/650+")":"";return s||(s=a<900?"scale("+a/950+")":""),s&&(e.transform=s),e},hideGameOverModal:function(){this.$store.commit("hideGameOverModal")},isSingles:function(){return"singles"===this.game.gameType},rematch:function(){if(this.rematchReady.includes(window.context.user.id))return!1;this.$socket.emit("game",{action:"rematch",gameNr:this.game.gameNr,uid:window.context.user.id})},playAgain:function(){this.$store.commit("hideGameOverModal");var e=this.defaultTime;e.gameType=this.game.gameType,e.uid=window.context.user.id,this.$socket.emit("pair-me",e)},invitePlayer:function(e){var t=this,a={playerId:e.playerId,username:e.username,uid:window.context.user.id};this.game.customData.creatorId&&(a.isTeamInvite=!0,a.customGame=this.game.customData.creatorId),e.playerId&&setTimeout(function(){t.hasInviteFromTeammate||t.$socket.emit("invite-player",a)},1e3*Math.random())},inviteAll:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("hideGameOverModal"),e.$bus.emit("reinviteAllPlayers");case 2:case"end":return t.stop()}},t,e)}))()}}}},cgcf:function(e,t){},cw4I:function(e,t,a){"use strict";var s=a("tNyc"),i=a("qP1x");t.a={components:{FormButton:s.a,IconFont:i.a},props:{data:{ruleVariants:{}},compact:!1,boardTop:!1},computed:{rVs:function(){return this.data.ruleVariants?this.data.ruleVariants:{}}},methods:{preview:function(e){e?this.$bus.emit("showPreview",e,this.data.gameType,e.split("-")[1],this.data):this.$bus.emit("showPreview",null)},pieceName:function(e){return"Q"===e?"Queen":"D"===e?"1pt Queen":"R"===e?"Rook":"B"===e?"Bishop":"N"===e?"Knight":"K"===e?"King":void 0},prRnk:function(e){return 0===(e=parseInt(e))?"":1===e?"No Promotion":2===e?"2nd":3===e?"3rd":e>3?e+"th":void 0}}}},cyhe:function(e,t){},dGNj:function(e,t,a){"use strict";t.a={name:"FormButton",props:{size:{type:String,required:!1},theme:{type:String,required:!1}}}},dSpD:function(e,t){},dX0B:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("Xxa5"),r=a.n(n),o=a("exGp"),l=a.n(o),c=a("qP1x"),u=a("k4w8"),h=a.n(u);t.a={name:"PanelArchive",components:{IconFont:c.a},props:{},data:function(){return{}},computed:{players:function(){return this.$store.getters.foundPlayers},isPlaying:function(){return this.$store.getters.isPlaying},active:function(){return this.$store.getters.mainScreen&&"friends"===this.$store.getters.activeTab},friends:function(){return this.$store.getters.friends}},watch:{active:function(e){e&&this.updateOnlineFriends()}},mounted:function(){var e=this;return l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.updateOnlineFriends(),e.$bus.$on("updateOnlineFriends",e.updateOnlineFriends),setInterval(function(){e.active&&e.updateOnlineFriends()},3e4);case 3:case"end":return t.stop()}},t,e)}))()},methods:{updateOnlineFriends:function(){var e=this;return l()(r.a.mark(function t(){var a,s,n,o,l,c,u,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new h.a("production"),t.next=3,a.getFriends(1);case 3:if(s=t.sent){t.next=7;break}return console.log("could not get friends from callback"),t.abrupt("return");case 7:if(20!==s.length){t.next=14;break}return t.t0=s,t.next=12,a.getFriends(2);case 12:t.t1=t.sent,s=t.t0.concat.call(t.t0,t.t1);case 14:if(40!==s.length){t.next=20;break}return t.t2=s,t.next=18,a.getFriends(3);case 18:t.t3=t.sent,s=t.t2.concat.call(t.t2,t.t3);case 20:if(60!==s.length){t.next=26;break}return t.t4=s,t.next=24,a.getFriends(4);case 24:t.t5=t.sent,s=t.t4.concat.call(t.t4,t.t5);case 26:if(80!==s.length){t.next=32;break}return t.t6=s,t.next=30,a.getFriends(5);case 30:t.t7=t.sent,s=t.t6.concat.call(t.t6,t.t7);case 32:for(e.$store.commit("setFriends",s),e.friendIds=[],n=!0,o=!1,l=void 0,t.prev=37,c=i()(s);!(n=(u=c.next()).done);n=!0)(d=u.value).user_id&&e.friendIds.push(d.user_id);t.next=45;break;case 41:t.prev=41,t.t8=t.catch(37),o=!0,l=t.t8;case 45:t.prev=45,t.prev=46,!n&&c.return&&c.return();case 48:if(t.prev=48,!o){t.next=51;break}throw l;case 51:return t.finish(48);case 52:return t.finish(45);case 53:e.$socket.emit("update.online.friends",e.friendIds);case 54:case"end":return t.stop()}},t,e,[[37,41,45,53],[46,,48,52]])}))()}}}},dZHl:function(e,t){},djFo:function(e,t,a){"use strict";var s=a("cQd8"),i=a("gLZI"),n=a("XyMi");var r=function(e){a("CHy5"),this.$style=a("+iZm")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-25aed430",null);t.a=o.exports},e56d:function(e,t){},eFjp:function(e,t){},"eaX+":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fen-container"},[a("div",{staticClass:"fen-header"}),e._v(" "),a("div",{staticClass:"sparePiece-content",class:{"flex-column":!e.isPremium},attrs:{id:"sparePieces",title:"Click on a spare piece to keep it selected. It will be dropped on each square you click."}},[e._l([0,1,2,3,4],function(t){return a("div",{staticClass:"sparePiece-column",class:{"flex-row":!e.isPremium}},e._l(e.pieces,function(e){return a("div",{attrs:{id:"spare_"+t+"_"+e}})}))}),e._v(" "),a("div",{attrs:{id:"spare_4_X"}})],2),e._v(" "),a("table",{staticClass:"fen-options",attrs:{border:"0"}},[a("tr",[a("td",{attrs:{valign:"bottom",align:"center"}},[a("label",{attrs:{for:"toPlay0"},on:{click:e.update}},[e._v("Red")])]),e._v(" "),a("td",{attrs:{valign:"bottom",align:"center"}},[a("label",{attrs:{for:"toPlay1"},on:{click:e.update}},[e._v("Blue")])]),e._v(" "),a("td",{attrs:{valign:"bottom",align:"center"}},[a("label",{attrs:{for:"toPlay2"},on:{click:e.update}},[e._v("Yellow")])]),e._v(" "),a("td",{attrs:{valign:"bottom",align:"center"}},[a("label",{attrs:{for:"toPlay3"},on:{click:e.update}},[e._v("Green")])]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toPlay,expression:"toPlay"}],attrs:{id:"toPlay0",type:"radio",name:"toPlay"},domProps:{value:0,checked:e._q(e.toPlay,0)},on:{click:e.update,change:function(t){e.toPlay=0}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toPlay,expression:"toPlay"}],attrs:{id:"toPlay1",type:"radio",name:"toPlay"},domProps:{value:1,checked:e._q(e.toPlay,1)},on:{click:e.update,change:function(t){e.toPlay=1}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toPlay,expression:"toPlay"}],attrs:{id:"toPlay2",type:"radio",name:"toPlay"},domProps:{value:2,checked:e._q(e.toPlay,2)},on:{click:e.update,change:function(t){e.toPlay=2}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toPlay,expression:"toPlay"}],attrs:{id:"toPlay3",type:"radio",name:"toPlay"},domProps:{value:3,checked:e._q(e.toPlay,3)},on:{click:e.update,change:function(t){e.toPlay=3}}})]),e._v(" "),a("td",[e._v("To play")])]),e._v(" "),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dead[0],expression:"dead[0]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.dead[0])?e._i(e.dead[0],null)>-1:e.dead[0]},on:{change:[function(t){var a=e.dead[0],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.dead,0,a.concat([null])):n>-1&&e.$set(e.dead,0,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.dead,0,i)},function(t){t.target.checked?e.board.b.rip(0):e.board.b.unrip(0),e.update()}]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dead[1],expression:"dead[1]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.dead[1])?e._i(e.dead[1],null)>-1:e.dead[1]},on:{change:[function(t){var a=e.dead[1],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.dead,1,a.concat([null])):n>-1&&e.$set(e.dead,1,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.dead,1,i)},function(t){t.target.checked?e.board.b.rip(1):e.board.b.unrip(1),e.update()}]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dead[2],expression:"dead[2]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.dead[2])?e._i(e.dead[2],null)>-1:e.dead[2]},on:{change:[function(t){var a=e.dead[2],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.dead,2,a.concat([null])):n>-1&&e.$set(e.dead,2,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.dead,2,i)},function(t){t.target.checked?e.board.b.rip(2):e.board.b.unrip(2),e.update()}]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dead[3],expression:"dead[3]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.dead[3])?e._i(e.dead[3],null)>-1:e.dead[3]},on:{change:[function(t){var a=e.dead[3],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.dead,3,a.concat([null])):n>-1&&e.$set(e.dead,3,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.dead,3,i)},function(t){t.target.checked?e.board.b.rip(3):e.board.b.unrip(3),e.update()}]}})]),e._v(" "),a("td",[e._v("Dead")])]),e._v(" "),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleKS[0],expression:"castleKS[0]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleKS[0])?e._i(e.castleKS[0],null)>-1:e.castleKS[0]},on:{change:[function(t){var a=e.castleKS[0],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleKS,0,a.concat([null])):n>-1&&e.$set(e.castleKS,0,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleKS,0,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleKS[1],expression:"castleKS[1]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleKS[1])?e._i(e.castleKS[1],null)>-1:e.castleKS[1]},on:{change:[function(t){var a=e.castleKS[1],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleKS,1,a.concat([null])):n>-1&&e.$set(e.castleKS,1,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleKS,1,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleKS[2],expression:"castleKS[2]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleKS[2])?e._i(e.castleKS[2],null)>-1:e.castleKS[2]},on:{change:[function(t){var a=e.castleKS[2],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleKS,2,a.concat([null])):n>-1&&e.$set(e.castleKS,2,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleKS,2,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleKS[3],expression:"castleKS[3]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleKS[3])?e._i(e.castleKS[3],null)>-1:e.castleKS[3]},on:{change:[function(t){var a=e.castleKS[3],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleKS,3,a.concat([null])):n>-1&&e.$set(e.castleKS,3,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleKS,3,i)},e.update]}})]),e._v(" "),a("td",[e._v("O-O")])]),e._v(" "),a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleQS[0],expression:"castleQS[0]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleQS[0])?e._i(e.castleQS[0],null)>-1:e.castleQS[0]},on:{change:[function(t){var a=e.castleQS[0],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleQS,0,a.concat([null])):n>-1&&e.$set(e.castleQS,0,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleQS,0,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleQS[1],expression:"castleQS[1]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleQS[1])?e._i(e.castleQS[1],null)>-1:e.castleQS[1]},on:{change:[function(t){var a=e.castleQS[1],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleQS,1,a.concat([null])):n>-1&&e.$set(e.castleQS,1,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleQS,1,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleQS[2],expression:"castleQS[2]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleQS[2])?e._i(e.castleQS[2],null)>-1:e.castleQS[2]},on:{change:[function(t){var a=e.castleQS[2],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleQS,2,a.concat([null])):n>-1&&e.$set(e.castleQS,2,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleQS,2,i)},e.update]}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.castleQS[3],expression:"castleQS[3]"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.castleQS[3])?e._i(e.castleQS[3],null)>-1:e.castleQS[3]},on:{change:[function(t){var a=e.castleQS[3],s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.castleQS,3,a.concat([null])):n>-1&&e.$set(e.castleQS,3,a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.castleQS,3,i)},e.update]}})]),e._v(" "),a("td",[e._v("O-O-O")])]),e._v(" "),a("tr",{directives:[{name:"show",rawName:"v-show",value:"singles"===e.gameType,expression:"gameType === 'singles'"}]},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.points[0],expression:"points[0]"}],attrs:{type:"text"},domProps:{value:e.points[0]},on:{change:e.update,input:function(t){t.target.composing||e.$set(e.points,0,t.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.points[1],expression:"points[1]"}],attrs:{type:"text"},domProps:{value:e.points[1]},on:{change:e.update,input:function(t){t.target.composing||e.$set(e.points,1,t.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.points[2],expression:"points[2]"}],attrs:{type:"text"},domProps:{value:e.points[2]},on:{change:e.update,input:function(t){t.target.composing||e.$set(e.points,2,t.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.points[3],expression:"points[3]"}],attrs:{type:"text"},domProps:{value:e.points[3]},on:{change:e.update,input:function(t){t.target.composing||e.$set(e.points,3,t.target.value)}}})]),e._v(" "),a("td",[e._v("Points")])])]),e._v(" "),a("div",{staticClass:"fen-buttons"},[a("div",{staticClass:"button",on:{click:e.resetfen}},[e._v("Reset")]),e._v(" "),a("div",{staticClass:"button",on:{click:e.emptyfen}},[e._v("Clear")]),e._v(" "),a("div",{staticClass:"button continueFromHere",on:{click:e.continueFromHere}},[e._v("Start from here")])]),e._v(" "),a("div",{staticClass:"fen-buttons",staticStyle:{fontSize:"11px",margin:"auto"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.chess960,expression:"ruleVariants.chess960"}],attrs:{type:"checkbox",id:"_chess960"},domProps:{checked:Array.isArray(e.ruleVariants.chess960)?e._i(e.ruleVariants.chess960,null)>-1:e.ruleVariants.chess960},on:{change:[function(t){var a=e.ruleVariants.chess960,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"chess960",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"chess960",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"chess960",i)},e.rVsChanged],click:function(t){e.new960()}}}),e._v(" "),a("label",{attrs:{for:"_chess960",title:""},on:{click:function(t){e.new960()}}},[e._v("960")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.captureTheKing,expression:"ruleVariants.captureTheKing"}],attrs:{type:"checkbox",id:"_captureTheKing"},domProps:{checked:Array.isArray(e.ruleVariants.captureTheKing)?e._i(e.ruleVariants.captureTheKing,null)>-1:e.ruleVariants.captureTheKing},on:{change:[function(t){var a=e.ruleVariants.captureTheKing,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"captureTheKing",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"captureTheKing",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"captureTheKing",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_captureTheKing",title:"Capture the King"}},[e._v("CapK")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.koth,expression:"ruleVariants.koth"}],attrs:{type:"checkbox",id:"_koth"},domProps:{checked:Array.isArray(e.ruleVariants.koth)?e._i(e.ruleVariants.koth,null)>-1:e.ruleVariants.koth},on:{change:[function(t){var a=e.ruleVariants.koth,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"koth",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"koth",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"koth",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_koth",title:"King of the Hill"}},[e._v("KotH")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.antichess,expression:"ruleVariants.antichess"}],attrs:{type:"checkbox",id:"_antichess"},domProps:{checked:Array.isArray(e.ruleVariants.antichess)?e._i(e.ruleVariants.antichess,null)>-1:e.ruleVariants.antichess},on:{change:[function(t){var a=e.ruleVariants.antichess,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"antichess",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"antichess",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"antichess",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_antichess",title:"AntiChess"}},[e._v("Anti")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.deadWall,expression:"ruleVariants.deadWall"}],attrs:{type:"checkbox",id:"_deadwall"},domProps:{checked:Array.isArray(e.ruleVariants.deadWall)?e._i(e.ruleVariants.deadWall,null)>-1:e.ruleVariants.deadWall},on:{change:[function(t){var a=e.ruleVariants.deadWall,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"deadWall",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"deadWall",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"deadWall",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_deadwall",title:"Dead pieces become bricks that can't be captured"}},[e._v("DW")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.blindfold,expression:"ruleVariants.blindfold"}],attrs:{type:"checkbox",id:"_blind"},domProps:{checked:Array.isArray(e.ruleVariants.blindfold)?e._i(e.ruleVariants.blindfold,null)>-1:e.ruleVariants.blindfold},on:{change:[function(t){var a=e.ruleVariants.blindfold,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"blindfold",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"blindfold",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"blindfold",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_blind",title:"Blindfold"}},[e._v("Bl")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.ghostBoard,expression:"ruleVariants.ghostBoard"}],attrs:{type:"checkbox",id:"_ghostBoard"},domProps:{checked:Array.isArray(e.ruleVariants.ghostBoard)?e._i(e.ruleVariants.ghostBoard,null)>-1:e.ruleVariants.ghostBoard},on:{change:[function(t){var a=e.ruleVariants.ghostBoard,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"ghostBoard",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"ghostBoard",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"ghostBoard",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_ghostBoard",title:"Ghost board"}},[e._v("Gh")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.dkw,expression:"ruleVariants.dkw"}],attrs:{type:"checkbox",id:"_dwk"},domProps:{checked:Array.isArray(e.ruleVariants.dkw)?e._i(e.ruleVariants.dkw,null)>-1:e.ruleVariants.dkw},on:{change:[function(t){var a=e.ruleVariants.dkw,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"dkw",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"dkw",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"dkw",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_dwk",title:"Dead King Walking"}},[e._v("DKW")]),e._v("\n     \n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleVariants.enPassant,expression:"ruleVariants.enPassant"}],attrs:{type:"checkbox",id:"_enp"},domProps:{checked:Array.isArray(e.ruleVariants.enPassant)?e._i(e.ruleVariants.enPassant,null)>-1:e.ruleVariants.enPassant},on:{change:[function(t){var a=e.ruleVariants.enPassant,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.ruleVariants,"enPassant",a.concat([null])):n>-1&&e.$set(e.ruleVariants,"enPassant",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.ruleVariants,"enPassant",i)},e.rVsChanged]}}),e._v(" "),a("label",{attrs:{for:"_enp",title:"En Passant"}},[e._v("EnP")])]),e._v(" "),a("div",{staticClass:"fen-buttons",staticStyle:{fontSize:"11px",margin:"auto"}},[a("select-dark",{attrs:{change:e.rVsChanged,options:e.nCheckOptions,title:"N-Check: each player has N lives, the final check is checkmate"},model:{value:e.ruleVariants.nCheck,callback:function(t){e.$set(e.ruleVariants,"nCheck",t)},expression:"ruleVariants.nCheck"}}),e._v("\n      \n    "),a("select-dark",{directives:[{name:"show",rawName:"v-show",value:"singles"===e.gameType,expression:"gameType === 'singles'"}],attrs:{change:e.rVsChanged,options:e.oppXOptions,title:"Double points for opposite pieces/mate"},model:{value:e.ruleVariants.oppX,callback:function(t){e.$set(e.ruleVariants,"oppX",t)},expression:"ruleVariants.oppX"}}),e._v(" "),a("select-dark",{directives:[{name:"show",rawName:"v-show",value:"teams"===e.gameType,expression:"gameType === 'teams'"}],attrs:{change:e.rVsChanged,options:e.teammateOptions,title:""},model:{value:e.ruleVariants.teammate,callback:function(t){e.$set(e.ruleVariants,"teammate",t)},expression:"ruleVariants.teammate"}}),e._v("\n      \n    "),a("select-dark",{attrs:{change:e.rVsChanged,options:e.promotionRankOptions,title:"Pawn promotion"},model:{value:e.ruleVariants.promotionRank,callback:function(t){e.$set(e.ruleVariants,"promotionRank",t)},expression:"ruleVariants.promotionRank"}}),e._v("\n      \n    "),a("select-dark",{attrs:{change:e.rVsChanged,options:e.promoteToOptions,title:"Pawns promote to"},model:{value:e.ruleVariants.promoteTo,callback:function(t){e.$set(e.ruleVariants,"promoteTo",t)},expression:"ruleVariants.promoteTo"}})],1),e._v(" "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.showFenbox,expression:"showFenbox"},{name:"model",rawName:"v-model",value:e.prettyFen,expression:"prettyFen"}],ref:"prettyFen",staticClass:"fenbox",style:{height:e.boxHeight+"px"},attrs:{id:"fen4",placeholder:"FEN4"},domProps:{value:e.prettyFen},on:{input:function(t){t.target.composing||(e.prettyFen=t.target.value)}}}),e._v(" "),a("div",{staticClass:"fen-buttons"},[e.showFenbox?a("div",{staticClass:"button",on:{click:e.loadfen}},[e._v("← Load")]):e._e(),e._v(" "),e.showFenbox?a("div",{staticClass:"button",on:{click:function(t){e.prettyFen="",e.$nextTick(function(){return e.$refs.prettyFen.select()})}}},[e._v("Clear")]):e._e(),e._v(" "),e.showFenbox?a("div",{staticClass:"button",on:{click:function(t){e.$nextTick(function(){return e.$refs.prettyFen.select()})}}},[e._v("Select")]):e._e()])])},i=[]},emQV:function(e,t){e.exports={icon:"icon_2xKV_1nS_1","icon-small":"icon-small_36Xgo0eK_1"}},"f+EB":function(e,t,a){"use strict";t.a={name:"FormLabel",props:{label:{type:String,default:null}}}},fOPE:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.$style.component},[a("form-label",{attrs:{label:e.label}}),e._v(" "),a("input",{class:[e.$style["form-input"],e.$style[e.size],e.$style[e.color]],attrs:{readonly:e.readonly,type:"text",placeholder:e.placeholder,id:e.id,title:e.title},domProps:{value:e.value},on:{input:function(t){e.value=t.target.value},keyup:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onEnter(t):null},function(t){e.$emit("input",t.target.value)}]}}),e._v(" "),a("form-help",{class:e.$style["form-help"],attrs:{helpText:e.helpText}})],1)},i=[]},fQSn:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("mvHQ"),r=a.n(n),o=a("d7EF"),l=a.n(o),c=a("Xxa5"),u=a.n(c),h=a("exGp"),d=a.n(h),m=a("//Fk"),p=a.n(m),v=a("yTeE"),f=a("45FZ"),g=a("qP1x"),y=function(e){return new p.a(function(t){return setTimeout(t,e)})},_=["playerId","advancedSearch","queryType","gameType","gameNr","result","daysBack","fromDays","toDays","username","username2id","user2name","user2name2id","user2","ipAddress","ipMulti","minRating","maxRating","rated","customData","banned"];t.a={name:"PanelArchive",components:{ArchiveResults:v.a,IconFont:g.a,SelectDark:f.a},props:{},data:function(){return{firstDisplay:!0,playerId:"",advancedSearch:!1,keyUpUsernameTimer:null,keyUpTimer:null,isSearchingTimer:null,queryType:"games",gameType:"",gameNr:"",result:"",includeAborted:!1,lastChoices:[],daysBack:"0-14",fromDays:"0",toDays:"14",username:"",username2id:"",user2name:"",user2name2id:"",user2:!1,ipAddress:"",ipMulti:[],minRating:"",maxRating:"",rated:"",customData:{ruleVariants:{}},banned:"",usernameFocused:!1,showFriends:!1,queryTypeOptions:[{label:"Games",value:"games"},{label:"Players",value:"players"}],bannedOptions:[{label:"- ban status -",value:""},{label:"Chat-banned",value:"chatbanned"},{label:"Play-banned",value:"playbanned"},{label:"Report-banned",value:"reportbanned"},{label:"Locked out",value:"banned"}],resultOptions:[{label:"Any result",value:""},{label:"1st",value:"1"},{label:"2nd",value:"2"},{label:"3rd",value:"3"},{label:"4th",value:"4"},{label:"Won (Teams)",value:"1-0"},{label:"Lost (Teams)",value:"0-1"},{label:"Draw (Teams)",value:"draw"},{label:"Aborted",value:"aborted"}],ratedOptions:[{label:"Rated?",value:""},{label:"Rated",value:"rated"},{label:"WTA",value:"wta"},{label:"Casual",value:"false"}]}},computed:{ruleVariants:function(){return this.customData.ruleVariants},gameTypeOptions:function(){return/^[1-4]$/.test(this.result)?[{label:"FFA",value:"singles"}]:/^(1-0|0-1|draw)$/.test(this.result)?[{label:"Teams",value:"teams"}]:[{label:"F & T",value:""},{label:"FFA",value:"singles"},{label:"Teams",value:"teams"}]},daysBackOptions:function(){return this.userIsAdmin&&this.advancedSearch?[{label:"< 30 min",value:"0-0.02083"},{label:"< 90 min",value:"0-0.0625"},{label:"< 6 h",value:"0-0.25"},{label:"1 Day",value:"0-1"},{label:"1 Week",value:"0-7"},{label:"2 Weeks",value:"0-14"},{label:"2W - 1M",value:"14-31"},{label:"1-3 M",value:"30-92"},{label:"3-6 M",value:"90-183"},{label:"6-9 M",value:"180-276"},{label:"9-12 M",value:"274-366"},{label:"> 12 M",value:"365-9999"},{label:"All ",value:"0-9999"}]:[{label:"1 Day",value:"0-1"},{label:"1 Week",value:"0-7"},{label:"2 Weeks",value:"0-14"},{label:"2W - 1M",value:"14-31"},{label:"1-3 M",value:"30-92"},{label:"3-6 M",value:"90-183"},{label:"6-9 M",value:"180-276"},{label:"9-12 M",value:"274-366"},{label:"> 12 M",value:"365-9999"},{label:"All ",value:"0-9999"}]},isSearching:function(){return this.$store.getters.isSearching},rowCount:function(){return"games"===this.queryType?this.games.length:"players"===this.queryType?this.players.length:void 0},isPlaying:function(){return this.$store.getters.isPlaying},userIsAdmin:function(){return this.$store.getters.userIsAdmin},usernameChoices:function(){var e=this.$store.getters.usernameChoices.slice();return e.length&&e.unshift({playerId:"",username:"-"}),e},friendsUsernames:function(){return this.$store.getters.friendsUsernames},games:function(){return this.$store.getters.foundGames},players:function(){return this.$store.getters.foundPlayers},active:function(){return"archive"===this.$store.getters.activeTab},game:function(){return this.$store.getters.game}},watch:{usernameChoices:function(){var e=this.$store.getters.usernameChoices;this.active&&(e&&(this.showFriends=!1),!this.username2id&&0===e.length&&this.username.match(/^\d+$/)?(this.username="#"+this.username,this.keyUpUsername()):e&&1===e.length?this.user2?this.selectUser2name(e[0]):this.selectUsername(e[0]):this.user2&&0===e.length&&this.lastChoices.length>0&&!this.gameNr&&!this.user2name2id&&this.user2name.length>2?this.$store.commit("showNotification","No username matches"):0===e.length&&this.lastChoices.length>0&&!this.gameNr&&!this.username2id&&this.username.length>2&&this.$store.commit("showNotification","No username matches"),this.lastChoices=e)},active:function(e){var t=this;return d()(u.a.mark(function a(){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.$store.getters.connected){a.next=5;break}return a.next=3,y(100);case 3:a.next=0;break;case 5:return a.next=7,y(500);case 7:e&&t.firstDisplay&&!t.username&&t.initialSearch();case 8:case"end":return a.stop()}},a,t)}))()},banned:function(){this.username="",this.username2id=""},ipAddress:function(){this.username="",this.username2id=""},playerId:function(){this.username="",this.username2id=""},minRating:function(){this.username="",this.username2id=""},maxRating:function(){this.username="",this.username2id=""},daysBack:function(e){if(e){var t=e.split("-"),a=l()(t,2);this.fromDays=a[0],this.toDays=a[1],this.searchDatabase()}}},mounted:function(){var e=this;return d()(u.a.mark(function t(){var a,s,i,n,r,o,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$bus.$on("findPlayerGames",e.findPlayerGames),e.$bus.$on("restoreSearch",e.restoreSearch),e.$bus.$on("searchIP",e.searchIP),e.preventSearch=!0;case 4:if(e.$store.getters.connected){t.next=9;break}return t.next=7,y(100);case 7:t.next=4;break;case 9:return a=history.state&&history.state.search,s=a?JSON.parse(history.state.search):{},i=window.location.href,(n=i.match(/p=([^&]+)/))||(n=i.match(/t=archive/)),n&&n[1]&&(r=n[1],e.username=r,a&&(s.username=e.username,s.username2id=""),(o=i.match(/daysBack=([^&]+)/))&&(e.daysBack=o[1],e.fromDays=o[1].split("-")[0],e.toDays=o[1].split("-")[1],a&&(s.daysBack=e.daysBack),a&&(s.fromDays=e.fromDays),a&&(s.toDays=e.toDays)),(l=i.match(/gameType=([^&]+)/))&&(e.gameType=l[1],a&&(s.gameType=e.gameType))),t.next=17,y(200);case 17:e.preventSearch=!1,a?(e.$store.commit("setActiveTab","archive"),e.restoreSearch(s)):n&&(e.$store.commit("setActiveTab","archive"),e.keyUpUsername());case 19:case"end":return t.stop()}},t,e)}))()},methods:{initialSearch:function(){var e=this;this.username=window.context.user.username,this.username2id=window.context.user.id,this.daysBack="0-14",setTimeout(function(){e.searchDatabase()},this.isSearching?1001:1)},keyUpUsername:function(){var e=this;this.username=this.username.trim(),this.user2=!1,this.playerId="",this.ipMulti=[],clearTimeout(this.keyUpUsernameTimer),this.username.match(/^#\d+$/)?this.keyUpUsernameTimer=setTimeout(function(){e.gameNr=e.username.replace("#",""),e.searchDatabase()},400):(this.gameNr="",this.username2id="",this.keyUpUsernameTimer=setTimeout(function(){e.username.length>2?e.$socket.emit("autocomplete-username",{username:e.username,gameType:e.gameType,queryType:e.queryType}):""===e.username&&(e.$store.commit("clearUsernameChoices"),e.username2id="",e.userIsAdmin&&e.searchDatabase())},400))},keyUpUser2name:function(){var e=this;this.user2name=this.user2name.trim(),this.user2=!0,clearTimeout(this.keyUpUsernameTimer),this.user2name2id="",this.keyUpUsernameTimer=setTimeout(function(){e.user2name.length>2?e.$socket.emit("autocomplete-username",{username:e.user2name,gameType:e.gameType,queryType:e.queryType}):""===e.user2name&&(e.$store.commit("clearUsernameChoices"),e.user2name2id="",e.searchDatabase())},400)},clearUsername:function(){var e=this;this.gameNr="",this.username="",this.username2id="",this.$nextTick(function(){return e.$refs.username.focus()})},clearUser2name:function(){var e=this;this.gameNr="",this.user2name="",this.user2name2id="",this.$nextTick(function(){return e.$refs.user2name.focus()})},findPlayerGames:function(e,t){e&&!this.isPlaying&&(this.game.gameNr&&this.$store.commit("exitGame",this.game.gameNr),this.$store.commit("analysisModeOff"),this.$store.commit("setActiveTab","archive"),this.username=e.username,this.username2id=e.uid,this.gameType=t||"",this.gameNr="",this.playerId="",this.user2name="",this.user2name2id="",this.ipAddress="",this.ipMulti=[],this.queryType="games",this.searchDatabase())},searchIP:function(e){!this.isPlaying&&this.userIsAdmin&&(this.game.gameNr&&this.$store.commit("exitGame",this.game.gameNr),this.$store.commit("analysisModeOff"),this.$store.commit("setActiveTab","archive"),this.advancedSearch=!0,this.username="",this.username2id="",this.user2name="",this.user2name2id="",this.gameType="",this.gameNr="",this.playerId="",this.banned="",this.minRating="",this.maxRating="",this.queryType="players","string"==typeof e?(this.ipAddress=e,this.ipMulti=[]):(this.ipAddress="",this.ipMulti=e&&e.length?e:[]),this.searchDatabase())},selectFriend:function(e){this.showFriends=!1,this.username=e.username,this.username2id=e.uid,this.gameNr="",this.searchDatabase()},selectUsername:function(e){var t=this;this.$store.commit("clearUsernameChoices"),this.username=e.uid?e.username:"",this.username2id=e.uid,this.gameNr="",e.uid&&this.searchDatabase(),this.$nextTick(function(){return t.$refs.username.focus()})},selectUser2name:function(e){var t=this;this.$store.commit("clearUsernameChoices"),this.user2name=e.uid?e.username:"",this.user2name2id=e.uid,this.gameNr="",e.uid&&this.searchDatabase(),this.$nextTick(function(){return t.$refs.user2name.focus()})},searchDatabase:function(){var e=this;return d()(u.a.mark(function t(){var a,s,n,o,l,c,h,d,m,p;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.preventSearch){t.next=2;break}return t.abrupt("return");case 2:if(e.firstDisplay=!1,!e.isSearching){t.next=6;break}return e.isSearchingTimer=setTimeout(function(){e.$store.commit("isSearching",!1)},3e3),t.abrupt("return");case 6:if(clearTimeout(e.isSearchingTimer),e.gameNr||!e.username||e.username2id){t.next=10;break}return 0===e.usernameChoices.length&&e.$store.commit("showNotification","No username matches"),t.abrupt("return");case 10:if(!e.ipAddress||/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e.ipAddress)){t.next=13;break}return e.$store.commit("showNotification","Invalid IP address"),t.abrupt("return");case 13:if(!(e.minRating&&!/^\d+$/.test(e.minRating)||e.maxRating&&!/^\d+$/.test(e.maxRating))){t.next=16;break}return e.$store.commit("showNotification","Invalid rating"),t.abrupt("return");case 16:if(!e.playerId||e.playerId.match(/^\d+$/)){t.next=19;break}return e.$store.commit("showNotification","Invalid player ID"),t.abrupt("return");case 19:if(!e.gameNr||e.gameNr.match(/^\d+$/)){t.next=22;break}return e.$store.commit("showNotification","Invalid Game Nr"),t.abrupt("return");case 22:if(!e.advancedSearch||/^\d*\.?\d*$/.test(e.fromDays)&&/^\d*\.?\d*$/.test(e.fromDays)){t.next=25;break}return e.$store.commit("showNotification","Invalid days"),t.abrupt("return");case 25:if(e.ipMulti&&e.ipMulti.length&&(e.ipAddress=""),/^[1-4]$/.test(e.result)?e.gameType="singles":/^(1-0|0-1|draw)$/.test(e.result)&&(e.gameType="teams"),!(e.gameNr||e.username2id||e.user2name2id||e.userIsAdmin)){t.next=55;break}for(e.$store.commit("isSearching",!0),a=e.daysBack,e.fromDays&&e.toDays?a=e.fromDays+"-"+e.toDays:e.fromDays?a=e.fromDays+"-9999":e.fromDays&&(a="0-"+e.toDays),"games"===e.queryType?(s={days:a,includeAborted:e.includeAborted,playerId:e.playerId?e.playerId:e.username2id,gameType:e.gameType,gameNr:e.gameNr},e.advancedSearch&&(s.result=e.result,s.playerId2=e.user2name2id,s.rated=e.rated,s.ipAddress=e.ipAddress,s.customData=e.customData),e.$socket.emit("search-archive",s)):e.userIsAdmin&&"players"===e.queryType&&(n={username:e.username,playerId:e.playerId?e.playerId:e.username2id,ipAddress:e.ipAddress,ipMulti:e.ipMulti,minRating:e.minRating,maxRating:e.maxRating,gameType:e.gameType,banned:e.banned,uid:window.context.user.id},e.$socket.emit("search-players",n)),o={},l=!0,c=!1,h=void 0,t.prev=36,d=i()(_);!(l=(m=d.next()).done);l=!0)p=m.value,o[p]=e[p];t.next=44;break;case 40:t.prev=40,t.t0=t.catch(36),c=!0,h=t.t0;case 44:t.prev=44,t.prev=45,!l&&d.return&&d.return();case 47:if(t.prev=47,!c){t.next=50;break}throw h;case 50:return t.finish(47);case 51:return t.finish(44);case 52:e.$store.commit("setSearchformState",r()(o)),t.next=56;break;case 55:e.userIsAdmin&&e.$store.commit("showNotification","Not enough search criteria");case 56:case"end":return t.stop()}},t,e,[[36,40,44,52],[45,,47,51]])}))()},restoreSearch:function(e){var t=!0,a=!1,s=void 0;try{for(var n,r=i()(_);!(t=(n=r.next()).done);t=!0){var o=n.value;this[o]=e[o]}}catch(e){a=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw s}}this.username&&!this.username2id?this.keyUpUsername():this.searchDatabase()},searchDatabaseDelayed:function(e){clearTimeout(this.keyUpTimer),13===e.which?this.searchDatabase():this.keyUpTimer=setTimeout(this.searchDatabase,1200)},toggleadvancedSearch:function(){this.advancedSearch=!this.advancedSearch,this.advancedSearch?(this.user2name2id||this.result)&&this.searchDatabase():(this.queryType="games",this.username2id&&this.searchDatabase())},blurUsername:function(){var e=this;setTimeout(function(){e.usernameFocused=!1},100)}}}},fVsE:function(e,t,a){(function(t){a("GVU4"),a("Itpt");const s={colorNames:["Red","Blue","Yellow","Green"],inCheck:"rgba(121, 0, 0, 1)",deadPieceColor:"#8c8a88",whitePieceColor:"#f8f8f8",blackPieceColor:"#3a3a3a",premoveHlColor:"rgba(125, 122, 145, 0.8)",colors:["#bf3b43","#4185bf","#c09526","#4e9161"],primaryColors:["#bf3b43","#4185bf","#c09526","#4e9161"],altColors:["#BB6688","#1155BB","#DBC520","#00CCFF"],altColorNames:["red-alt","blue-alt","yellow-alt","green-alt"],hlColors:[{light:"rgb(218, 141, 141)",dark:"rgb(218, 141, 141)"},{light:"rgb(161, 206, 230)",dark:"rgb(161, 206, 230)"},{light:"rgb(217, 192, 130)",dark:"rgb(217, 192, 130)"},{light:"rgb(143, 204, 158)",dark:"rgb(143, 204, 158)"},{light:"rgb(211, 211, 211)",dark:"rgb(165, 165, 165)"}],hlColorsBW:[{light:"rgb(115, 115, 115)",dark:"rgb(115, 115, 115)"},{light:"rgb(161, 206, 230)",dark:"rgb(161, 206, 230)"},{light:"rgb(217, 192, 130)",dark:"rgb(217, 192, 130)"},{light:"rgb(251, 251, 251)",dark:"rgb(251, 251, 251)"},{light:"rgb(211, 211, 211)",dark:"rgb(165, 165, 165)"}],shadowColors:["rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)"],shadowColorsBW:["rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.8)"]};t(document).ready(function(){t.ui.isOverAxis2=function(e,t,a){return e>=t&&e<t+a},t.ui.isOver=function(e,a,s,i,n,r){return t.ui.isOverAxis2(e,s,n)&&t.ui.isOverAxis(a,i,r)};var e=`\n\n    .inCheck {\n      background-color: ${s.inCheck} !important;\n      /* outline: 2px solid ${s.inCheckBorder} !important; */\n      /* outline-offset: -2px; */\n    }\n\n    .pc {\n      z-index: 3;\n    }\n\n    .premove {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      pointer-events: none;\n    }\n\n    .notification-content {\n      color: #444 !important;\n    }\n\n   .btn-icon.annotation-help .icon-font { height: 14px !important; width: 14px !important }\n   .btn-icon.annotation-help .icon-font > span { font-size: 2rem !important; margin-top: -2px !important }\n   .panel-header .type-filter.game-type-select select { background: transparent !important; color:  }\n   .panel-header .type-filter.game-type-select select option { background: transparent !important; color: #666; }\n\n\n\n   .ui-draggable-handle {\n     -ms-touch-action: none;\n     touch-action: none;\n   }\n   /* Layout helpers\n   ----------------------------------*/\n   .ui-helper-hidden {\n     display: none;\n   }\n   .ui-helper-hidden-accessible {\n     border: 0;\n     clip: rect(0 0 0 0);\n     height: 1px;\n     margin: -1px;\n     overflow: hidden;\n     padding: 0;\n     position: absolute;\n     width: 1px;\n   }\n   .ui-helper-reset {\n     margin: 0;\n     padding: 0;\n     border: 0;\n     outline: 0;\n     line-height: 1.3;\n     text-decoration: none;\n     font-size: 100%;\n     list-style: none;\n   }\n   .ui-helper-clearfix:before,\n   .ui-helper-clearfix:after {\n     content: "";\n     display: table;\n     border-collapse: collapse;\n   }\n   .ui-helper-clearfix:after {\n     clear: both;\n   }\n   .ui-helper-zfix {\n     width: 100%;\n     height: 100%;\n     top: 0;\n     left: 0;\n     position: absolute;\n     opacity: 0;\n     filter:Alpha(Opacity=0); /* support: IE8 */\n   }\n\n   .ui-front {\n     z-index: 100;\n   }\n\n\n   /* Interaction Cues\n   ----------------------------------*/\n   .ui-state-disabled {\n     cursor: default !important;\n     pointer-events: none;\n   }\n\n\n   /* Icons\n   ----------------------------------*/\n   .ui-icon {\n     display: inline-block;\n     vertical-align: middle;\n     margin-top: -.25em;\n     position: relative;\n     text-indent: -99999px;\n     overflow: hidden;\n     background-repeat: no-repeat;\n   }\n\n   .ui-widget-icon-block {\n     left: 50%;\n     margin-left: -8px;\n     display: block;\n   }\n\n   /* Misc visuals\n   ----------------------------------*/\n\n   /* Overlays */\n   .ui-widget-overlay {\n     position: fixed;\n     top: 0;\n     left: 0;\n     width: 100%;\n     height: 100%;\n   }\n   .ui-resizable {\n     position: relative;\n   }\n   .ui-resizable-handle {\n     position: absolute;\n     font-size: 0.1px;\n     display: block;\n     -ms-touch-action: none;\n     touch-action: none;\n   }\n   .ui-resizable-disabled .ui-resizable-handle,\n   .ui-resizable-autohide .ui-resizable-handle {\n     display: none;\n   }\n   .ui-resizable-n {\n     cursor: n-resize;\n     height: 7px;\n     width: 100%;\n     top: -5px;\n     left: 0;\n   }\n   .ui-resizable-s { /* customized */\n     cursor: ns-resize;\n     height: 7px;\n     width: 100%;\n     bottom: -5px;\n     left: 0;\n     box-shadow\n   }\n   .ui-resizable-e {\n     cursor: e-resize;\n     width: 7px;\n     right: -5px;\n     top: 0;\n     height: 100%;\n   }\n   .ui-resizable-w { /* customized */\n     cursor: e-resize;\n     width: 7px;\n     left: -5px;\n     top: 0;\n     height: 100%;\n   }\n   .ui-resizable-se {\n     cursor: se-resize;\n     width: 12px;\n     height: 12px;\n     right: 1px;\n     bottom: 1px;\n   }\n   .ui-resizable-sw {\n     cursor: sw-resize;\n     width: 9px;\n     height: 9px;\n     left: -5px;\n     bottom: -5px;\n   }\n   .ui-resizable-nw {\n     cursor: nw-resize;\n     width: 9px;\n     height: 9px;\n     left: -5px;\n     top: -5px;\n   }\n   .ui-resizable-ne {\n     cursor: ne-resize;\n     width: 9px;\n     height: 9px;\n     right: -5px;\n     top: -5px;\n   }\n   `,a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),a.appendChild(i),t("#judo_open").css("top","auto").css("bottom","0")}),e.exports=function(e,a){"use strict";a||(a="#board");var i,n=a+"Panel ";a+=" ";var r=t(n+"#editPosition").is(":checked"),o=console.log,l=function(e){return new Promise(t=>setTimeout(t,e))},c=function(e){return e.length?{player:parseInt(e.attr("data-player")),piece:e.attr("data-piece"),dead:e.hasClass("dead"),isRealKing:e.hasClass("realKing")}:null},u=function(e){return t((/^spare_/.test(e)?n:a)+"#"+e)},h=function(e){return e.parent().attr("id")},d=function(e){return t((/^spare_/.test(e)?n:a)+"#"+e+" > img.pc")},m=function(e){return t(a+"img.pc[data-player="+e+"]")},p=function(){return t(a+".square-55d63").not(".cornerSquare")},v=function(t){const a=e.getKingSquare(t);return!a||e.dead(t)?null:d(a)};function f(s){if(!s)return;const i=s.split("-")[0].split("/");if(14!==i.length)return w.store.commit("showNotification",'Fen must contain 14 rows (13 "/"s).'),void console.log("invalid fen: ",i);for(var n,r,l,h,m,p=13;p>=0;p--){m=0;for(var v=0,f=(n=i[13-p].split(",")).length;v<f;v++){const s=n[v].trim();if(/^\d+$/.test(s)){r=parseInt(s);for(var y=0;y<r&&m+y<14;y++)t(a+"#"+e.ij2sq(m+y,p)+" > img.pc").remove();m+=r}else{const i=/^(d)?([0-3])?([KQDRBNPX])$/.exec(s);if(!i)return void w.store.commit("showNotification","Couldn't read piece \""+s+'"');if(l={player:i[2]?parseInt(i[2]):4,piece:i[3],dead:"d"===i[1]},h=e.ij2sq(m,p),u(h).hasClass("cornerSquare")){m++;continue}const n=t(a+"#"+h+" > img.pc");n.length>1&&(o("removing phantom piece on "+h),t(a+"#"+h+" > img.pc").remove(),n.length=0);const r=c(n),d=r&&r.player===l.player&&r.piece===l.piece&&r.dead===l.dead;r&&d||(r&&n.remove(),g(l).appendTo(a+"#"+h)),m++}}}w.rotate(),e.position(s);for(let t of[0,1,2,3]){const a=e.getKingSquare(t);if(!a)continue;const s=d(a);s.length&&s.addClass("realKing")}}function g(s){s&&/^[0-4]$/.test(s.player)&&/^[KQDRBNPX]$/.test(s.piece)||o("missing or invalid data in b.createPiece",s);const i=w.getRv("blindfold");var n=document.createElement("img");return n.setAttribute("src",w.pieceSrc(s)),n.setAttribute("data-player",s.player),n.setAttribute("data-piece",s.piece),n.setAttribute("class","pc"),s.dead&&t(n).addClass("dead"),s.spare&&t(n).addClass("spare"),t(n).css("width",w.squareSize),t(n).css("height",w.squareSize),t(n).css("z-index","3"),t(n).css("opacity",i?0:1),t(n).on("mousedown",function(i){if(1!==i.which)return;if(w.store.getters.mainScreen)return;if(t(this).hasClass("spare"))return void t(a+".ui-droppable").droppable("enable");w.uhlLegal();let n=w.store.getters.allowPlay;const o="premove"===n;o||"preTurn"===n?n=w.store.getters.seat===s.player:n&&(n=e.turn()===s.player);const l=e.getDestinations(h(t(this)),!0,o&&!i.shiftKey),c=t("#highlightLegal").is(":checked")||i.shiftKey;if(r){if(t(a+".ui-droppable").droppable("enable"),i.shiftKey)for(let e of l)w.hlLegal(e)}else{t(a+".ui-droppable").droppable("disable");for(var u,d=0,m=l.length;d<m;d++)u=l[d],n&&t(a+"#"+u).droppable("enable"),(i.shiftKey||n&&c)&&w.hlLegal(u)}}),t(n).on("mouseup",function(a){if(1!==a.which)return;if(w.store.getters.mainScreen)return!1;if(w.dragging)return;w.uhlLegal();const s=t(this),i=c(s);if(!i)return;if(!r&&e.isBrick(i))return!1;let n=w.store.getters.allowPlay;if(!r){if(!n)return;if(w.premove&&"premove"===n)return;if(("preTurn"===n||"premove"===n)&&w.store.getters.seat!==i.player)return;if("preTurn"!==n&&"premove"!==n&&e.turn()!==i.player)return}if(w.selectedPc){const e=/spare/.test(h(s)),t=w.selectedSq===h(s);if(r&&!t&&!e)return;if(w.uhl(u(w.selectedSq),!0),p().off("mouseover").off("mouseout").css("cursor","default"),w.selectedPc=null,w.selectedSq=null,t)return}if(w.newPcSelected=!0,setTimeout(()=>{w.newPcSelected=!1},10),w.selectedPc=s,w.selectedSq=h(s),w.hl(u(w.selectedSq),i.player),r)return p().mouseover(function(e,a){w.hl(t(this),i.player),t(this).css("cursor","move")}).mouseout(function(){w.uhl(t(this),!0),t(this).css("cursor","default")}),void u(w.selectedSq).off("mouseover").off("mouseout").css("cursor","default");w.uhlLegal();const o=t("#highlightLegal").is(":checked");if(w.premove&&"premove"===n)return;const l=e.getDestinations(w.selectedSq,!0,"premove"===n);for(let e of l)o&&w.hlLegal(e),u(e).mouseover(function(a,s){w.hl(t(this),i.player),"preTurn"!==n&&t(this).css("cursor","move");const r=c(w.selectedPc);r&&"P"===r.piece&&w.isPromotion(e,i)&&w.hlPromotion(t(this),w.selectedPc)}).mouseout(function(){w.uhl(t(this),!0),w.uhlPromotion(t(this)),t(this).css("cursor","default")})}),t(n).draggable({drag:w.counterRotate,start:function(a,s){if(w.store.getters.mainScreen)return!1;const i=t(this),n=c(i);if(!n)return;const o=n.player;if(!r&&e.isBrick(n))return!1;w.dragging=!0,w.selectedPc&&(w.uhl(u(w.selectedSq)),w.selectedSq!==h(i)&&w.uhl(u(w.selectedSq)),p().off("mouseover").off("mouseout"),w.selectedPc=null,w.selectedSq=null);const l=w.store.getters.allowPlay&&e.turn()===o;(r||l)&&i.css("cursor","move"),i.css("z-index",99),l&&!r&&w.lastMove[o]&&w.lastMove[o].length&&(w.uhl(w.lastMove[o][0],!1),w.uhl(w.lastMove[o][1],!1)),w.dragStartSquare=i.parent(),(r||l)&&w.hl(w.dragStartSquare,o),w.dropped=!1},stop:function(e,a){if(w.dragging=!1,!r)return;const s=t(this);w.dropped||s.hasClass("spare")||(s.fadeOut(w.animationSpeed),setTimeout(function(){s.detach(),s.remove(),w.forceEditPositionUpdate()},w.animationSpeed))},revert:function(e,a){const s=t(this);if(w.uhl(w.dragStartSquare),r&&!w.dropped&&!s.hasClass("spare"))return;const i=c(s);if(!i)return;const n=i.player;return w.uhlLegal(),w.hlMoveablePieces(),s.css("z-index",3),!w.dropped&&w.lastMove[n]&&w.lastMove[n].length&&(w.hl(w.lastMove[n][0],n),w.hl(w.lastMove[n][1],n)),!e},revertDuration:100}),t(n)}async function y(s,i){if(w.dropped=!0,w.cancelPremove(),!i)return;w.uhlPromotion(),w.uhlLegal(),w.uhl(t(this),!0);const n=i.draggable,l=c(n);if(!l)return;const h=n.parent().attr("id"),m=t(s.target).attr("id"),p=n.hasClass("spare"),v="premove"===w.store.getters.allowPlay,f=w.store.getters.allowPlay;if(n.css("top",0),n.css("left",0),1!==s.which)return;if(!/^[a-n]\d+$/.test(m))return;if(h===m)return;if(!f&&!r)return;if(!r){if(p)return void o("spare piece??");if(f&&(v||e.turn()===l.player)){if(v){if(w.premove)return;return w.premove={sq1:h,sq2:m},w.hlPremove(),!1}const e=w.isPromotion(m,l)&&!w.getRv("promoteTo");let t=e?await w.askPromotion(l.player,s):"";if(e&&!t)return;await w.onUserMove(h,m,t)}return void w.hlMoveablePieces()}u(h).css("cursor","default"),n.detach(),p&&(n.removeClass("spare"),n.css({width:w.squareSize,height:w.squareSize}),b(c(n)));const g=d(m);g.length&&g.detach(),n.appendTo(a+"#"+m),w.forceEditPositionUpdate()}function _(){p().droppable({drop:y,tolerance:"pointer",over:function(a,s){const i=t(this),n=s.draggable,o=c(n);if(!o||!i.length)return;const l=i.attr("id"),u=w.store.getters.allowPlay&&e.turn()===o.player;u&&w.hl(i,o.player),(r||u)&&setTimeout(()=>{n.css("cursor","move")},5),!r&&w.isPromotion(l,o)&&w.hlPromotion(i,n)},out:function(e,a){w.uhl(t(this),!0),w.uhlPromotion(t(this)),a.draggable.css("cursor","default")}}).css("background-color",""),p().mousedown(function(){w.hidePromotionDialog()}),p().mouseup(async function(s){if(1!==s.which)return;if(w.dragging||w.newPcSelected||!w.selectedPc)return;const i=w.selectedPc,n=c(i);if(!n)return;var o=h(i),l=t(this).attr("id");if(w.uhl(u(w.selectedSq),!0),w.uhlPromotion(),w.uhlLegal(),p().off("mouseover").off("mouseout").css("cursor","default"),w.selectedPc=null,w.selectedSq=null,w.cancelPremove(),!o||!l||o===l)return;if(!/^[a-n]\d+$/.test(l))return;if(!w.store.getters.allowPlay&&!r)return;if(!r){const t="premove"===w.store.getters.allowPlay;if(w.store.getters.allowPlay&&(t||e.turn()===n.player)){if(t){if(w.premove)return;return w.premove={sq1:o,sq2:l},void w.hlPremove()}const e=w.isPromotion(l,n)&&!w.getRv("promoteTo");let a=e?await w.askPromotion(n.player,s):"";if(e&&!a)return;await w.onUserMove(o,l,a)}return void w.hlMoveablePieces()}const m=i.hasClass("spare");if(w.uhlAll(),w.uhl(u(w.selectedSq),!0),i.detach(),m){i.removeClass("spare"),i.css({width:w.squareSize,height:w.squareSize});const e=b(c(i));e.length&&e.trigger({type:"mouseup",which:1})}const v=d(l);v.length&&v.detach(),i.appendTo(a+"#"+l),w.forceEditPositionUpdate()})}function b(e){var a,s,i=e?"#spare_"+e.player+"_"+e.piece:"div[id^=spare_]";if(t(n+i).each(function(){const i=t(this).attr("id").split("_");e={player:parseInt(i[1]),piece:i[2],dead:"4"===i[1],spare:!0},(a=t(n+"#"+t(this).attr("id")+" > img.pc")).length||(a=g(e),s=!0,a.css({width:w.isPremium?w.squareSize:w.halfsize,height:w.isPremium?w.squareSize:w.halfsize}),a.appendTo(t(this)))}),e&&s)return a}var w={onUserMove:function(){},store:null,socket:null,forceBoardUpdate:function(){},forcePanelUpdate:function(){},forceMovesUpdate:function(){},forcePgnUpdate:function(){},forceEditPositionUpdate:function(){},forceChatUpdate:function(){},forcePlayerBoxUpdate:function(){t(a+".forcePlayerBoxUpdate").click()},reset:function(t){w.makeDroppables=_,w.selectedPc=null,w.selectedSq=null,w.premove=null,w.currplview=0,w.rotation=0,w.lastMove=[[],[],[],[]],w.lastHl={},w.animationSpeed=200,f(t||e.DEFAULT_FEN),b(),w.uhlAll(),w.uhlChecks(),w.rotate(0)},uhlChecks:function(){w.uhlNCheck(),t(a+".square-55d63.inCheck").removeClass("inCheck")},hlChecks:function(){w.uhlChecks();const s=e.getCheckedKingSquares();for(var i=0,n=s.length;i<n;i++)t(a+"#"+s[i]).addClass("inCheck");w.hlNCheck(),w.hlResignedKings()},hlLastMoves:function(t){w.uhlAll(),w.lastMove=[];const a=e.startFenData();for(let s of t){if(!s.from||!s.to)continue;let t=s.to;if(e.chess960()&&s.castle){const i=a[s.player]["O-O"===s.castle?"Kk":"Kq"];t=e.ij2sq(i[0],i[1])}const i=u(s.from),n=u(t);w.hl(i,s.player),w.hl(n,s.player),w.lastMove[s.player]=[i,n]}},hl:function(e,t){const a=e.css("background-color");if(a===w.inCheck)return;w.lastHl[e.attr("id")]=a;const s=e.hasClass("black-3c85d")?"dark":"light";e.css("background-color",w.hlColors[t][s])},uhl:function(e,t){e.css("background-color")!==w.inCheck&&e.css("background-color",t?w.lastHl[e.attr("id")]:"")},uhlAll:function(e){p().css("background-color",""),t(a+"img.pc.realKing").css("box-shadow","").css("border-radius","")},hlPremove:function(){var e=document.createElement("div");e.setAttribute("class","premove"),t(e).css("background-color",s.premoveHlColor),t(e).appendTo(a+"#"+w.premove.sq1),t(e).clone().appendTo(a+"#"+w.premove.sq2)},cancelPremove:function(){w.premove=null,t(a+"div.premove").remove()},hlPromotion:function(a,s){const i=c(s);if(!i)return;i.piece=e.promoteTo(),i.piece||(i.piece="Q");let n=w.pieceSrc(i);const r="rotate("+w.rotation+"deg)";var o=document.createElement("div");o.setAttribute("class","promotionIndicator"),t(o).css("position","absolute").css("top",0).css("left",0).css("opacity",.6).css("z-index","1").css("pointer-events","none").css("background-image","url("+n+")").css("background-size","contain").css("width",w.halfsize).css("height",w.halfsize).css("-webkit-transform",r).css("-o-transform",r).css("-ms-transform:",r).css("transform",r).appendTo(a);let l=["Q","R","B","N"];if(e.getRuleVariants().antichess&&!e.getRuleVariants().koth&&l.push("K"),!e.promoteTo())for(let e of l){i.piece=e,n="url("+w.pieceSrc(i)+")";var u=t(o).clone();u.css("background-image",n),/[BN]/.test(e)&&u.css("top",w.halfsize+"px"),/[RN]/.test(e)&&u.css("left",w.halfsize+"px"),/[K]/.test(e)&&u.css("top",w.squareSize+"px"),u.appendTo(a)}},uhlPromotion:function(e){e?e.find("div.promotionIndicator").remove():t(a+"div.promotionIndicator").remove()},castle:function(t,a){const s=a[t.player]["O-O"===t.castle?"kR":"qR"],i=a[t.player]["O-O"===t.castle?"kRk":"qRq"];w.moveRook(e.ij2sq(s[0],s[1]),e.ij2sq(i[0],i[1]))},uncastle:function(t,a){const s=a[t.player]["O-O"===t.castle?"kR":"qR"],i=a[t.player]["O-O"===t.castle?"kRk":"qRq"];w.moveRook(e.ij2sq(i[0],i[1]),e.ij2sq(s[0],s[1]))},moveRook:function(e,s){const i=t(a+"#"+e+" > img.pc[data-piece=R]");i.length&&(d(s).length||(i.detach(),i.appendTo(a+"#"+s)))},hlMoveablePieces:function(){if(r)t("img.pc").css("cursor","move");else{w.uhlMoveablePieces();let a=w.store.getters.allowPlay;if(w.premove&&"premove"===a)return;a&&"preTurn"!==a&&m(e.turn()).not(".dead").each(function(){e.getDestinations(h(t(this)),!1,"premove"===a).length&&t(this).css("cursor","move")})}},uhlMoveablePieces:function(){t("img.pc").css("cursor","default")},refreshBlindfold:function(){const e=w.getRv("blindfold");t(a+"img.pc").css("opacity",e?0:1)},showPromotionDialog:function(s,i){t(a).offset();const n=document.createElement("div"),r=e.getRuleVariants().antichess&&!e.getRuleVariants().koth;let o=["Q","R","B","N"];r&&o.push("K");for(let e of o){const a=document.createElement("img");a.setAttribute("src",w.pieceSrc({player:s,piece:e})),t(a).css("width",w.squareSize).css("height",w.squareSize).mousedown(function(t){w.promoteTo=e,w.hidePromotionDialog(),t.stopPropagation(),t.preventDefault()}).appendTo(t(n))}t(n).addClass("askPromotion").css("position","absolute").css("z-index","9").css("cursor","pointer").css("background-color","rgba(0,0,0,0.5)").css("border-radius","3px").css("top",w.halfsize).css("left",w.halfsize).css("transform","rotate("+w.rotation+"deg)").css("width",2*w.squareSize).css("height",w.squareSize*(r?3:2)).appendTo(a+"#"+w.eventSquare(i))},hidePromotionDialog:function(){w.cancelPromotion=!0,t(a+".askPromotion").remove()},askPromotion:async function(e,t){w.showPromotionDialog(e,t);let a=0;for(w.cancelPromotion=!1;!(w.promoteTo||(await l(10),w.cancelPromotion||a++>9999)););w.hidePromotionDialog();var s=w.promoteTo;return w.promoteTo=!1,s},refreshColors:function(){const e=w.store.getters.settings.blackAndWhite;w.colors=w.store.getters.settings.altColorScheme?s.altColors.slice():s.colors.slice(),w.hlColors=e?s.hlColorsBW.slice():s.hlColors.slice(),w.shadowColors=e?s.shadowColorsBW.slice():s.shadowColors.slice(),e&&(w.colors[0]=w.whitePieceColor,w.colors[3]=w.blackPieceColor),t("img.pc").each(function(){const e=t(this);e.attr("src",w.pieceSrc(c(e)))})},counterRotate:function(e,t){if(0!==w.rotation)if(180===w.rotation)t.position.top=-t.position.top,t.position.left=-t.position.left;else if(90===w.rotation){var a=t.position.left;t.position.left=-t.position.top,t.position.top=a}else a=t.position.left,t.position.left=t.position.top,t.position.top=-a},eventSquare:function(e){var a=t(e.target).attr("id");if(a||(a=h(t(e.target))),/^[a-n][1-9][0-9]?$/.test(a)&&!u(a).hasClass("cornerSquare"))return a},getSquareOffset:function(e){const s=u(e),i=t(a).offset().top,n=t(a).offset().left,r=14*w.squareSize;var o,l=s.offset().left-n+w.halfsize,c=s.offset().top-i+w.halfsize;return 90===w.rotation?(o=l,l=r-c,c=o):180===w.rotation?(l=r-l,c=r-c):270===w.rotation&&(o=l,l=c,c=r-o),[l,c]},isPromotion:function(t,a){if("P"!==a.piece)return"";const s=e.promotionRank()?e.promotionRank()-1:Ffa?7:10,[i,n]=e.sq2ij(t);return 0===a.player&&n===s||1===a.player&&i===s||2===a.player&&n===13-s||3===a.player&&i===13-s?"=Q":""},hlLegal:function(a){const s={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"18%",height:"18%",zIndex:"3",border:"5px solid #666",opacity:"0.2",borderRadius:"50%"};let i;const n=d(a).length||e.isEnpassantSquare(a);n&&(s.width="98%",s.height="98%",s.opacity="0.35",i=u(a).hasClass("inCheck"));const r=w.squareSize/40,o=Math.round((n?4:6)*r);s.border=o+"px solid "+(i?"#fff":"#666"),t("<div/>",{class:"legalMoveIndicator"}).css(s).appendTo(u(a))},uhlLegal:function(){t(a+".legalMoveIndicator").remove()},promote:function(e,t){const a=c(e);a&&"P"===a.piece&&(a.piece=t||"Q",e.attr("data-piece",a.piece),e.attr("src",w.pieceSrc(a)))},unpromote:function(e,t){const a=c(e);a&&("Q"===t?/[DQ]/:new RegExp(t)).test(a.piece)&&(a.piece="P",e.attr("data-piece",a.piece),e.attr("src",w.pieceSrc(a)))},rip:async function(a,s,i){void 0===a&&(a=e.turn());const n=m(a);i&&n.hide(),n.each(function(){const e=t(this),a=c(e);a&&(s&&a.isRealKing||(a.dead=!0,e.addClass("dead").attr("src",w.pieceSrc(a))))}),i&&n.fadeIn(w.animationSpeed),i&&await l(w.animationSpeed)},unrip:async function(a,s){void 0===a&&(a=e.turn());const i=m(a);s&&i.hide(),i.each(function(){const e=t(this),a=c(e);a&&(a.dead=!1,t(this).removeClass("dead").attr("src",w.pieceSrc(a)))}),s&&i.fadeIn(w.animationSpeed),s&&await l(w.animationSpeed)},hlResignedKings:function(t){const a=void 0!==t?[t]:[0,1,2,3];for(let t of a){const a=e.getKingSquare(t);if(!a)continue;const s=d(a);i&&s.length&&(e.getRuleVariants().antichess||(s.css("box-shadow","").css("border-radius",""),!s.hasClass("dead")&&e.isZombie(t)&&s.css("box-shadow","2px -3px 6px "+w.shadowColors[t]).css("border-radius","50%")))}},resize:function(e,s){if(w.halfsize=Math.round(e/2),w.squareSize=e,w.isPremium=s,t(a+".square-55d63").css({width:e,height:e}),t(a+"img.pc").css({width:e,height:e}),t(n+"#sparePieces img.pc").css({width:w.isPremium?w.squareSize:w.halfsize,height:w.isPremium?w.squareSize:w.halfsize}),w.onDividerResize(),w.hlNCheck(),!s){var i="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,r=i<620?"scale("+i/650+")":"";t(".r2d2-container2 iframe").css("transform",r),t(".r2d2-placeholder2 a").css("transform",r)}var o="innerWitdh"in window?window.innerWitdh:document.documentElement.offsetWidth;t(".user-nav").css("visibility",o<960?"hidden":"visible")},rotate:function(s){void 0===s&&(s=w.currplview),"next"===s&&(s=++w.currplview%4),"turn"===s&&(s=e.turn()),w.currplview=s,w.rotation=90*s;var i="rotate("+-w.rotation+"deg)",r="rotate("+w.rotation+"deg)";t(a).css("-webkit-transform",i).css("-o-transform",i).css("-ms-transform:",i).css("transform",i),t(a+"img.pc, "+a+".playerbox-wrapper, "+a+".plus-points-container, "+a+".nCheckIndicator, "+a+".coord-wrapper").css("-webkit-transform",r).css("-o-transform",r).css("-ms-transform:",r).css("transform",r);var o="rotate("+(-45-w.rotation)+"deg)";t(n+".btn-icon.rotate > div").css("-webkit-transform",o).css("-o-transform",o).css("-ms-transform:",o).css("transform",o),w.forceBoardUpdate(),w.forcePlayerBoxUpdate()},scrollToMove:function(e,a,s){var i=t(n+"#moveInList"+e+"_"+a+"_"+s);if(i.length){var r=t(n+".movesList"),o=i.offset().top-r.offset().top,l=r.height(),c=r.scrollTop();r.scrollTop(c+o-l/2)}},calcTabHeight:function(e){var a=t(n+".tab-content").offset().top;return t(n+(e?".chat-input-f":".tabs")).offset().top-a},calcFenboxHeight:function(){var e=t(n+".fen-buttons").offset().top;return t(n+".tabs").offset().top-e},gameStartAnimation:function(e){t(".board-container").fadeOut(e,()=>{t(".board-container").fadeIn(100)}),t(".sidebar-content").fadeOut(e,()=>{t(".sidebar-content").fadeIn(100)})},getUserEditablePgnAttributes:function(){let e={};for(var s,i=0;i<4;i++)(s=t(a+".username-wrapper .username[data-player="+i+"] .truncate120").text().trim())&&s!==w.colorNames[i]&&(e[w.colorNames[i]]=s,e[w.colorNames[i]+"Elo"]=t(a+".username-wrapper .username[data-player="+i+"] .rating").text().replace(/[()]/g,"").trim());return e},getFenFromFenBox:()=>t(n+"#fen4").val(),animatePointsTimer:[],animatePoints:function(e,a){if(!a||a<=0)return;const s=t(".plus-points-"+e);s.html("+"+a).css("color",w.colors[e]),s.fadeIn(100),clearTimeout(w.animatePointsTimer[e]);let i=600;a>24?i=3e3:a>14?i=2400:a>9?i=1700:a>4?i=1100:a>2&&(i=800),w.animatePointsTimer[e]=setTimeout(()=>{s.fadeOut(300,()=>{s.html("")})},i)},uhlNCheck:function(e){t(a+"div.nCheckIndicator").remove()},hlNCheck:function(){if(w.uhlNCheck(),w.getRv("nCheck"))for(let s of[0,1,2,3]){if(e.dead(s))continue;const i=e.lives(s),n=v(s);if(!n||!n.length)continue;const r="rotate("+w.rotation+"deg)";var a=document.createElement("div");a.setAttribute("class","nCheckIndicator"),t(a).html(i).css("font-size",Math.round(w.squareSize/1.5)+"px").css("color",1===i?"rgba(245, 171, 61, 1)":"#fff").css("position","absolute").css("pointer-events","none").css("top",0).css("left",0).css("opacity",1===i?.9:.75).css("text-align","center").css("font-weight",700).css("z-index","5").css("width",w.squareSize).css("height",w.squareSize).css("-webkit-transform",r).css("-o-transform",r).css("-ms-transform:",r).css("transform",r).appendTo(n.parent())}},resizeablePanel:function(e){w.isPremium=e;var a="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight;e||(a-=265),t(".moves-controls").resizable({minHeight:65,maxHeight:a-140,handles:"s",stop:w.onDividerResize})},onDividerResize:function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight;w.isPremium||(e-=265);var a=t(".moves-controls").css("height").replace("px","");a<65?a=65:a>e-140&&(a=e-140),localStorage.setItem("dividerHeight",a+"px"),w.forceChatUpdate(),w.forcePgnUpdate(),w.forceEditPositionUpdate()},getChatScrollAmount:function(){var e=t(".chat-stream-f");return e[0].scrollHeight-e.scrollTop()-e.innerHeight()},resizeableReports:function(){t("#view-abuse-reports").resizable({handles:"n, ne, e"})},getRv:function(e){if(w.store&&w.store.getters.game.customData.ruleVariants)return w.store.getters.game.customData.ruleVariants[e]},downloadTextFile:function(e,a,s){if(!window.FileReader)return alert("Your browser is not supported. Open your .pgn4 file in a text editor and copy-paste the contents here. Then click &uarr; Load."),!1;var i=t("#"+s),n=(t("#"+a),i.get(0)),r=new FileReader;if(n.files.length){var o=n.files[0];r.readAsText(o),t(r).on("load",e)}else w.commit("showNotification","Please upload a file before continuing")},pieceSrc:function(e){if(!e)return"";const t=w.svgPiece(e);return"data:image/svg+xml;base64,"+window.btoa(t)},svgPiece:function(t){if(!t||!t.piece)return"";if(!t.dead&&!t.color&&void 0===t.player)return"";let a;a=t.dead||!/^[0-3]$/.test(t.player)?w.deadPieceColor:w.colors[t.player],t.color&&(a=t.color);const s=t.dead&&e.getRuleVariants().deadWall;let i=svgStart;return(s||"X"===t.piece)&&(i+=wallSvg),"P"===t.piece?i+=pawnSvg:"N"===t.piece?i+=knightSvg:"B"===t.piece?i+=bishopSvg:"R"===t.piece?i+=rookSvg:"K"===t.piece?i+=kingSvg:"Q"===t.piece?i+=queenSvg:"D"===t.piece&&(i+=queenSvg+onePtSvg),i=(i+=svgEnd).replace(/___COLORCODE___/g,a)},debug:function(){t(n+".dbg").toggle()},tweakChat:function(e){setTimeout(()=>{var a=t("#"+e),s=a.contents().find("html"),i=a.contents().find("body");if(i.length){var n=i.find("div.club-chat-app");n.detach(),i.html(""),s.css("height:","100%"),n.css("height","100vh"),t(document.createElement("style")).append('#chat-app { background-color: transparent !important; }\n          a[class*="chat-message-content-username"] { color: rgba(255, 255, 255, 0.9) !important }\n          div[class*="chat-message-component"] { color: rgba(255, 255, 255, 0.7) !important }\n          .chat-input-component input[type=text] {\n            color: rgba(255, 255, 255, 0.9) !important;\n            background-color: transparent !important;\n            border-top: 1px solid rgba(255, 255, 255, 0.2);\n          }\n          div[class*="warn-message-yellow"], div[class*="warn-message-grey"] {\n            color: #ffffd3 !important;\n            background-color: rgba(255, 255, 255, 0.4) !important;\n          }\n          .welcome-message-component { display: none !important }\n          div[class*="chat-members-component"] div[class*="chat-members-list"],\n          div[class*="chat-members-component"] div[class*="chat-members-header"] {\n            color: rgba(255, 255, 255, 0.4) !important;\n            background-color: transparent !important;\n          }\n          div[class*="club-chat-app-component"] div[class*="club-chat-app-room"] {\n            border-right: 1px solid rgba(255, 255, 255, 0.2);\n          }\n          div[class*="warn-message-grey"] div[class*="chat-members-header"] {\n            color: rgba(255, 255, 255, 0.4) !important;\n            background-color: transparent !important;\n          }\n          ').appendTo(i),n.appendTo(i),n.find('div[class~="chat-members-list"] a[class~="user-username-component_0"]').each(function(){t(this).prop("target","_blank")});var r=Math.round(.95*i.height());a.css("height",r+"px")}},30)}};for(let e in s)w[e]=s[e];return t(document).ready(function(){var e=!1,t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox",document.body.appendChild(t),window.setTimeout(function(){0===t.offsetHeight&&(e=!0),t.remove(),w.store.commit("adsBlocked",e)},6e3)}),{b:w,getPosition:function(s){for(var i,n,r,l,u=[],h=13;h>=0;h--){i=[],l=0;for(var m=0;m<14;m++){n=e.ij2sq(m,h),(r=d(n)).length>1&&(o("phantom piece bug? removing non-draggable pieces from "+n),t(a+"#"+n+" > img.pc").not("ui-draggable").remove(),r=d(n));const s=c(r);s?(l&&i.push(l),l=0,i.push((s.dead&&"X"!==s.piece?"d":"")+(s.player<4?s.player:"")+s.piece)):l++,13===m&&l&&i.push(l)}u.push(i.join(","))}var p=u.join("/");return s?p+s:p},setPosition:f,play:async function(s,n){if(s.isEndMove){if(s.eliminate&&s.eliminate.length){const e=i&&("R"===s.san||"T"===s.san)&&!w.getRv("antichess");n?await w.rip(s.player,e,!0):w.rip(s.player,e)}return}const r=e.startFenData();let o=s.to;if(e.chess960()&&s.castle){const t=r[s.player]["O-O"===s.castle?"Kk":"Kq"];o=e.ij2sq(t[0],t[1])}const c=d(s.from);if(w.animating=!1,n&&w.animationSpeed){w.animating=!0,c.css("z-index","999");const e=t(a+"#"+s.from),i=t(a+"#"+o);var u,h=i.offset().left-e.offset().left,m=i.offset().top-e.offset().top;90===w.rotation?(u=h,h=-m,m=u):180===w.rotation?(h=-h,m=-m):270===w.rotation&&(u=h,h=m,m=-u),n&&i.length&&c.animate({left:h,top:m},w.animationSpeed,function(){w.animating=!1,c.css("z-index","3")}),await l(w.animationSpeed)}for(;w.animating;)await l(3);if(s.capture&&d(o).detach().remove(),c.detach().css("left",0).css("top",0).appendTo(a+"#"+o),s.promote&&w.promote(c,s.promote),s.castle&&w.castle(s,r),i&&s.eliminate&&s.eliminate.length)for(var p=0;p<s.eliminate.length;p++)n?await w.rip(s.eliminate[p],!1,!0):w.rip(s.eliminate[p],!1)},undo:async function(s,n){if(s.isEndMove)return void(s.eliminate&&s.eliminate.length&&(n?await w.unrip(s.eliminate[0],!0):w.unrip(s.eliminate[0])));const r=e.startFenData();let c=s.to;if(e.chess960()&&s.castle){const t=r[s.player]["O-O"===s.castle?"Kk":"Kq"];c=e.ij2sq(t[0],t[1])}const u=d(c);if(!u.length)return o("board.js: error in undo(move), pc not found"),void o(s);if(w.animating=!1,n&&w.animationSpeed){w.animating=!0,u.css("z-index","999");const e=t(a+"#"+s.from),i=t(a+"#"+c);var h,m=e.offset().left-i.offset().left,p=e.offset().top-i.offset().top;90===w.rotation?(h=m,m=-p,p=h):180===w.rotation?(m=-m,p=-p):270===w.rotation&&(h=m,m=p,p=-h),n&&e.length&&u.animate({left:m,top:p},w.animationSpeed,function(){u.css("z-index","3"),w.animating=!1}),await l(w.animationSpeed)}for(;w.animating;)await l(3);if(u.detach().css("left",0).css("top",0).appendTo(a+"#"+s.from),s.capture){const e=g(s.capture),t="rotate("+w.rotation+"deg)";e.css("-webkit-transform",t).css("-o-transform",t).css("-ms-transform:",t).css("transform",t),e.appendTo(a+"#"+c)}if(s.promote&&w.unpromote(u,s.promote),s.castle&&w.uncastle(s,r),i&&s.eliminate&&s.eliminate.length)for(var v=0;v<s.eliminate.length;v++)n?await w.unrip(s.eliminate[v],!0):w.unrip(s.eliminate[v])},pcsq:d,setGameType:function(e){i="singles"===e},setEditPosition:function(e,t){(r=e)?(w.uhlChecks(),w.uhlAll()):(w.uhlAll(),w.hlChecks(),w.selectedPc&&(w.uhl(u(w.selectedSq)),p().off("mouseover").off("mouseout").css("cursor","default"),w.selectedPc=null,w.selectedSq=null))}}}}).call(t,a("7t+N"))},g9DJ:function(e,t){},gGcX:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"leaderboard-wrapper"},[a("div",{staticClass:"leaderboard-header"},[e.myStanding?a("div",{staticClass:"my-standing"},[a("span",{staticClass:"label"},[e._v("My Rank:")]),e._v(" "),a("span",{staticClass:"ranking"},[e._v("#"+e._s(e.myStanding.rank)+" ("+e._s(Math.round(e.myStanding.item[e.selectedRatingType]))+")")])]):e._e(),e._v(" "),a("select-dark",{staticClass:"game-type-select",attrs:{options:e.gameTypeOptions},model:{value:e.selectedGameType,callback:function(t){e.selectedGameType=t},expression:"selectedGameType"}})],1),e._v(" "),e.leaderboard?a("ul",{staticClass:"standings-list"},e._l(e.leaderboard[e.selectedGameType],function(t,s){return a("li",{key:s,staticClass:"standing",class:e.topRankStyles(s)},[a("span",{staticClass:"ranking"},[e._v("#"+e._s(s+1))]),e._v(" "),a("div",{staticClass:"standing-avatar"},[a("a",{attrs:{target:"_blank",href:e.getMemberProfileUrl(t.username)}},[a("img",{staticClass:"img-player",attrs:{src:t.avatarUrl}})])]),e._v(" "),a("span",{staticClass:"standing-username",on:{click:function(a){e.$bus.emit("showUserPopup",t.uid,t.username,a)}}},[e._v("\n        "+e._s(t.username)+"\n      ")]),e._v(" "),a("span",{staticClass:"standing-rating"},[e._v("\n        "+e._s(Math.round(t[e.selectedRatingType]))+"\n      ")])])})):e._e()])},i=[]},gLZI:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-container",[a("modal-content",[a("section-container",{style:e.scStyle()},[a("section-content",[a("div",{staticClass:"over-wrapper",style:{width:e.isPremium?"300px":"600px",height:e.isPremium?"":"600px"}},[e.isPremium?e._e():a("div",{staticClass:"r2d2-container"},[a("short-top-sidebar-ad",{attrs:{provider:e.$parent.provider,"slot-id":e.$parent.slotId3}})],1),e._v(" "),e.$store.getters.showGameOverModal?a("div",{staticClass:"game-over-container"},[a("center",[a("div",{staticClass:"close-modal-container"},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.hideGameOverModal(t)}}})],1),e._v(" "),a("div",{staticClass:"arrowsBg",style:{width:"300px",height:e.isPremium?"50px":"120px"}}),e._v(" "),a("div",[a("h1",{staticClass:"winner",class:e.colors[e.gameOverData.winner]},[e._v(e._s(e.getWinner))])]),e._v(" "),a("ul",{staticClass:"standings-list"},e._l(e.getStandings,function(t,s){return a("li",{staticClass:"standing"},[a("div",{staticClass:"place"},[a("img",{staticClass:"place-player-avatar",attrs:{src:t.avatar}}),e._v(" "),a("div",{staticClass:"box-f",class:"place-"+t.color},[e.isSingles()?a("div",{staticClass:"points-f noSelect"},[e._v(e._s(t.points))]):e._e()])]),e._v(" "),a("div",{staticClass:"standing-stats",class:t.color.toLowerCase()},[a("span",{staticClass:"user-name pointer noSelect",on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v("\n                      "+e._s(t.username)+"\n                    ")]),e._v(" "),a("div",{staticClass:"standing-rating",class:{myNewRating:t.seat===e.seat}},[e.game.rated?a("span",{staticClass:"noSelect",attrs:{title:t.finalRatingDecimal}},[e._v(e._s(t.finalRating)+" ("+e._s(t.ratingDifference)+")")]):e._e()])])])})),e._v(" "),e.$store.getters.disable_play?e._e():a("div",{staticClass:"play-again"},[!e.lookingForGame&&e.game.customData.queue?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.playAgain(t)}}},[e._v("\n                  Play "),"teams"===e.game.gameType?a("font",{attrs:{size:"-1"}},[e._v("  (random teammate)")]):e._e()],1):e._e(),e._v(" "),!e.lookingForGame&&!e.game.customData.queue&&!e.joinedAlready&&e.game.customData.creatorId<0?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){e.$store.commit("joinCustomGame",e.game.customData.creatorId)}}},[e._v("\n                  Play this game "+e._s(void 0!==e.seat?"again":"")+"\n                ")]):e._e(),e._v(" "),e.showInviteButton?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){e.invitePlayer(e.game.players[e.fourPlayer.getPartner(e.seat)])}}},[e._v("\n                  Invite "+e._s(e.game.players[e.fourPlayer.getPartner(e.seat)].username)+"\n                ")]):e._e(),e._v(" "),!e.lookingForGame&&e.showRematchButton?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.rematch(t)}}},[e._v("\n                  Rematch "),e.rematchReady.length?a("span",[e._v(" ("+e._s(e.rematchReady.length)+")")]):e._e()]):e._e(),e._v(" "),!e.lookingForGame&&e.isInviter?a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){e.inviteAll()}}},[e._v("\n                  Invite all to rematch\n                ")]):e._e(),e._v(" "),a("form-button",{attrs:{size:"large",theme:"primary"},nativeOn:{click:function(t){return e.hideGameOverModal(t)}}},[e._v("\n                  Close\n                ")])],1)])],1):e._e()])])],1)],1)],1)},i=[]},gcDo:function(e,t,a){"use strict";var s=a("SXMi"),i=a("lks0"),n=a("XyMi");var r=function(e){a("ggd+")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-49bf7e0b",null);t.a=o.exports},"ggd+":function(e,t){},"h+wZ":function(e,t,a){"use strict";var s=a("HMfM"),i=a("IbS7"),n=a("XyMi");var r=function(e){a("R40h"),this.$style=a("YZ2P")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-51e49430",null);t.a=o.exports},"h/TV":function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("tNyc"),r=a("qP1x");t.a={components:{FormButton:n.a,IconFont:r.a},props:{},data:function(){return{hovering:!1,alreadyClickedResign:!1}},computed:{fourPlayer:function(){return this.$store.getters.fourPlayer},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},turn:function(){return this.game.turn},seat:function(){return this.$store.getters.seat},isPlaying:function(){return this.$store.getters.isPlaying},mainScreen:function(){return this.$store.getters.mainScreen},analysisMode:function(){return this.$store.getters.analysisMode},rematchReady:function(){return this.$store.getters.rematchReady},isDev:function(){return!1},gameOverData:function(){return this.game.gameOverData?this.game.gameOverData:{}},showReinviteButton:function(){if(!this.game.isLiveGame&&!this.$store.getters.showGameOverModal&&!this.$store.getters.showInvitationalModal&&!this.$store.getters.lookingForGame&&this.game.customData)return this.game.customData.creatorId===window.context.user.id},showRematchButton:function(){var e=this.$store.getters.observers;if(!e||this.$store.getters.lookingForGame||this.$store.getters.showGameOverModal||void 0===this.$store.getters.seat)return!1;var t=0;for(var a in e){var s=!0,n=!1,r=void 0;try{for(var o,l=i()(this.game.players);!(s=(o=l.next()).done);s=!0){o.value.playerId===e[a].playerId&&t++}}catch(e){n=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}}return 4===t},nextGame:function(){if(this.gameNr&&!this.isPlaying){var e=this.$store.getters.gamesInList,t=e.indexOf(this.gameNr);return-1!==t&&e[t+1]}},prevGame:function(){if(this.gameNr&&!this.isPlaying){var e=this.$store.getters.gamesInList,t=e.indexOf(this.gameNr);return!(t<1)&&e[t-1]}}},mounted:function(){window.onunload=this.exitObserve,window.addEventListener("keydown",this.keyDown)},methods:{keyDown:function(e){if("true"!==e.target.contentEditable&&!e.target.tagName.match(/input|textarea/i)&&!(e.ctrlKey||e.altKey||e.metaKey))switch(e.which){case 27:this.exitObserve();break;case 32:if(this.mainScreen)return;this.playRandomMove()}},exitObserve:function(){this.analysisMode&&this.$store.commit("analysisModeOff"),this.isPlaying||this.gameNr&&this.$store.commit("exitGame",this.gameNr)},mouseOver:function(){this.hovering=!0},mouseOut:function(){this.hovering=!1},resign:function(){var e=this;this.alreadyClickedResign||(this.alreadyClickedResign=!0,setTimeout(function(){e.alreadyClickedResign=!1},500),this.$socket.emit("game",{gameNr:this.gameNr,action:"new-move",move:{san:"R",player:this.seat},uid:window.context.user.id}))},rematch:function(){if(this.rematchReady.includes(window.context.user.id))return!1;this.$socket.emit("game",{action:"rematch",gameNr:this.game.gameNr,uid:window.context.user.id})},inviteAll:function(){this.$bus.emit("reinviteAllPlayers")},playRandomMove:function(){if(this.isDev){var e=this.fourPlayer.getRandomMove();this.$store.getters.board.b.onUserMove(e.from,e.to,!1,!1,!0)}}}}},h92M:function(e,t,a){"use strict";var s=a("mvHQ"),i=a.n(s),n=a("Xxa5"),r=a.n(n),o=a("exGp"),l=a.n(o),c=a("lHA8"),u=a.n(c),h=a("Gu7T"),d=a.n(h),m=a("fZjL"),p=a.n(m),v=a("BO1k"),f=a.n(v),g=a("//Fk"),y=a.n(g),_=a("Su9W"),b=a("JP+h"),w=a("tNyc"),R=a("3/ZL"),N=a("a1iv"),B=a("Gg0z"),k=a("kApn"),C=a("qP1x"),x=function(e){return new y.a(function(t){return setTimeout(t,e)})},S=["gameType","timeControlInitial","increment","isDelay","minRating","maxRating","showObserverChat","startingPosition","prettyFen","bookPgn","ruleVariants"];t.a={components:{ModalContainer:_.a,ModalContent:b.a,FormButton:w.a,FormInput:R.a,FormLabel:N.a,SectionContainer:B.a,SectionContent:k.a,IconFont:C.a},data:function(){return{gameType:"singles",timeControlInitial:1,increment:15,isDelay:!0,rated:!1,isPublic:!1,minRating:500,maxRating:3500,inviterUsername:window.context.user.username,showObserverChat:!1,username:"",username2id:0,startingPosition:"",prettyFen:"",bookPgn:"",final4complete:!1,startFen:"",dead:[!1,!1,!1,!1],numRequired:4,startFenOk:!0,starting:!1,autoStart:!0,usernameFocused:!1,opacity:1,showHint:!1,ruleVariants:{dkw:!1,enPassant:!1,chess960:!1,koth:!1,oppX:0,captureTheKing:!1,antichess:!1,nCheck:0,teammate:2,promotionRank:0,promoteTo:"",deadWall:!1,blindfold:!1,ghostBoard:!1,anonymous:!1},players:[{playerId:window.context.user.id,username:window.context.user.username,avatarSmallUrl:window.context.user.avatarSmallUrl,avatarUrl:window.context.user.avatarUrl,seat:-1}],finalPlayers:[{},{},{},{}]}},computed:{minimized:function(){return this.$store.getters.minimizeInvitationalModal},userIsAdmin:function(){return this.$store.getters.userIsAdmin},usernameChoices:function(){return this.username?this.$store.getters.usernameChoices:this.usernameFocused?this.availableFriends:[]},availableFriends:function(){var e=[],t=!0,a=!1,s=void 0;try{for(var i,n=f()(this.$store.getters.availableFriends);!(t=(i=n.next()).done);t=!0){var r=i.value,o=!1,l=!0,c=!1,u=void 0;try{for(var h,d=f()(this.players);!(l=(h=d.next()).done);l=!0){if(h.value.playerId===r.uid){o=!0;break}}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}o||e.push(r)}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}return e},board:function(){return this.$store.getters.board},fenUtils:function(){return this.$store.getters.fenUtils},game:function(){return this.$store.getters.game},fourPlayer:function(){return this.$store.getters.fourPlayer},defaultTime:function(){return this.$store.getters.defaultTime},lookingForGame:function(){return this.$store.getters.lookingForGame},showInvitationalModal:function(){return this.$store.getters.showInvitationalModal},staging:function(){return!1},freeze:function(){return this.rated||this.isPublic&&this.players.length>1},disableRated:function(){return this.freeze||this.players.length>1},manualStart:function(){return!this.rated||this.userIsAdmin},antichess:function(){return this.ruleVariants.antichess},koth:function(){return this.ruleVariants.koth},data:function(){return{creatorId:window.context.user.id,inviterUsername:this.userIsAdmin?this.inviterUsername:window.context.user.username,inviterAvatarUrl:window.context.user.avatarSmallUrl,timeControlInitial:this.timeControlInitial,increment:this.increment,isDelay:this.isDelay,players:this.players,finalPlayers:this.final4complete?this.finalPlayers:[],isPublic:this.isPublic,minRating:this.minRating,maxRating:this.maxRating,bookPgn:this.bookPgn,rated:this.rated,manualStart:this.manualStart,gameType:this.gameType,startFen:"Custom"===this.startingPosition?this.startFen:"",showObserverChat:this.showObserverChat,ruleVariants:this.ruleVariants,uid:window.context.user.id}}},watch:{gameType:function(e){},antichess:function(e){e&&(this.ruleVariants.nCheck=0,this.ruleVariants.oppX=0,this.ruleVariants.captureTheKing=!1,this.ruleVariants.dkw=!1,this.koth&&"K"===this.promoteTo&&(this.promoteTo=""))},koth:function(){this.antichess&&"K"===this.promoteTo&&(this.promoteTo="")},bookPgn:function(e){var t=this;clearTimeout(this.booktimer),this.booktimer=setTimeout(function(){e&&(t.$store.getters.pgnUtils.parsePgn(e,function(e){t.$store.commit("showNotification",e.toString())}),t.emitUpdate())},2e3)},usernameChoices:function(e){e&&1===e.length&&this.selectUsername(e[0])},showInvitationalModal:function(e){var t=this;e?(this.emitUpdate(),this.$store.commit("showCustomGames",!0),this.$bus.emit("updateOnlineFriends"),this.updateInterval=setInterval(function(){t.$bus.emit("updateOnlineFriends")},15e3)):(clearInterval(this.updateInterval),this.cancelGame())},startingPosition:function(e){"960"===e?this.new960():this.ruleVariants.chess960=!1},timeControlInitial:function(e){},username:function(e){e.trim()||(this.username2id="")}},mounted:function(){var e=this;window.addEventListener("resize",this.forceUpdate),this.$bus.$on("showPreview",function(t){e.opacity=t?.1:1,e.forceUpdate()}),window.onunload=this.cancelGame,this.$bus.$off("reinviteAllPlayers"),this.$bus.$on("reinviteAllPlayers",this.reinviteAllPlayers);var t=localStorage.getItem("customGameState");if(t){var a=JSON.parse(t);if(p()(a).length){var s=!0,i=!1,n=void 0;try{for(var r,o=f()(S);!(s=(r=o.next()).done);s=!0){var l=r.value;this[l]=a[l]}}catch(e){i=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw n}}}this.onChangeStartFen()}delete this.$options.sockets.custom_game_players,this.$options.sockets.custom_game_players=function(t){var a=t.players,s=(t.finalPlayers,t.joined),i=t.left,n={},r=!0,o=!1,l=void 0;try{for(var c,u=f()(e.players);!(r=(c=u.next()).done);r=!0){var h=c.value;n[h.playerId]=h.seat}}catch(e){o=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw l}}var d=[],m=!0,p=!1,v=void 0;try{for(var g,y=f()(a);!(m=(g=y.next()).done);m=!0){var _=g.value;d.push(_.playerId),_.seat=void 0!==n[_.playerId]?n[_.playerId]:-1}}catch(e){p=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw v}}if(e.players=a,e.rated)e.$forceUpdate();else{if(s){if(e.$store.commit("showNotification",s.username+" has joined the matchmaker"),4===e.players.length&&e.manualStart){if(e.autoStart){if(e.randomSeating(),"singles"===e.gameType)return void e.startGame();for(var b={},w=[0,1,2,3],R=0;R<w.length;R++){var N=w[R];b[e.finalPlayers[N].playerId]=N}for(var B=[0,1,2,3],k=0;k<B.length;k++){var C=B[k],x=e.finalPlayers[C].partnerId;if(x&&!(x&&void 0===b[x]||x&&b[x]===C)){var S=[[],[1,0,3,2],[2,3,0,1],[3,2,1,0]][/^[13]$/.test(e.ruleVariants.teammate)?e.ruleVariants.teammate:2][C];if(b[x]===S)break;var P=e.players[S];e.finalPlayers[S]=e.finalPlayers[b[x]],e.finalPlayers[b[x]]=P;break}}return void e.startGame()}e.$store.commit("playNotifySound"),e.$store.commit("showNotification","Seat the players and start the game!"),e.$store.commit("minimizeInvitationalModal",!1)}if(e.game.gameNr)for(var K=[0,1,2,3],M=0;M<K.length;M++){var T=K[M],$=e.game.players[T];if($&&$.playerId===s.playerId){var Q=e.players.length-1;if(e.players[Q].playerId!==s.playerId)break;e.players[Q].seat=T,e.onChangeSeat(Q);break}}}i&&e.$store.commit("showNotification",i.username+" has left the matchmaker");for(var A=[0,1,2,3],I=0;I<A.length;I++){var D=A[I];d.includes(e.finalPlayers[D].playerId)||(e.finalPlayers[D]={})}e.check4complete(),e.$forceUpdate()}},delete this.$options.sockets.observe_your_game,this.$options.sockets.observe_your_game=function(t){e.$store.commit("hideInvitationalModal"),e.resetPlayers(),t&&setTimeout(function(){e.$store.commit("showNotification","You are now spectating the game you created."),e.$store.commit("joinGame",t)},300)}},methods:{forceUpdate:function(){this.$forceUpdate()},templates:function(){var e=[],t={},a=!0,s=!1,i=void 0;try{for(var n,r=f()(this.$store.getters.customGames);!(a=(n=r.next()).done);a=!0){var o=n.value;o.creatorId>0||o.rated||(e.push(o),t[o.startFen]=1)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}return e.sort(function(e,t){return e.title>t.title?1:e.title<t.title?-1:0}),e},scStyle:function(){var e={"z-index":9},t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a="innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,s=a<900?"scale("+a/950+")":"";return s||(s=t<700?"scale("+t/750+")":""),s&&(e.transform=s),e.opacity=this.opacity,e},resetPlayers:function(){this.finalPlayers=[{},{},{},{}],this.players=[this.players[0]],this.username="",this.username2id=0,this.final4complete=!1,this.usernameFocused=!1,this.isPublic=!1,this.rated=!1,this.isPublic=!1},new960:function(){var e=Math.ceil(960*Math.random());this.ruleVariants.chess960=e,this.emitUpdate()},showEditPosition:function(){this.$store.commit("analysisModeOn"),this.$store.commit("setGameType",this.gameType),this.$store.commit("setRuleVariants",this.ruleVariants),this.$store.commit("startFromPosition",this.startFen),this.$bus.emit("selectPanelTab","fen"),this.$store.commit("minimizeInvitationalModal",!0)},randomSeating:function(){this.finalPlayers=[{},{},{},{}];for(var e=[],t=0,a=this.players.length;t<a;t++)e.push(t);for(var s=[],i=[0,1,2,3],n=0;n<i.length;n++){var r=i[n];this.dead[r]||s.push(r)}for(var o=0;e.length>0&&o++<4;){var l=Math.floor(Math.random()*e.length),c=e[l],u=s[Math.floor(Math.random()*s.length)];this.players[c].seat=u,this.onChangeSeat(c),e.splice(l,1),s.splice(s.indexOf(u),1)}},cancel:function(){this.rated=!1,this.$store.commit("hideInvitationalModal")},cancelGame:function(){this.resetPlayers(),this.$socket.emit("cancel-custom-game",{uid:window.context.user.id})},check4complete:function(){this.final4complete=!1;for(var e=[],t=[0,1,2,3],a=0;a<t.length;a++){var s=t[a];if(!this.dead[s]){if(!this.finalPlayers[s]||!this.finalPlayers[s].playerId)return!1;e.push(this.finalPlayers[s].playerId)}}var i=[].concat(d()(new u.a(e)));return e.length===i.length&&(this.final4complete=!0,!0)},invitePlayer:function(){this.username2id&&(this.$socket.emit("invite-player",{playerId:this.username2id,username:this.username,uid:window.context.user.id,customGame:window.context.user.id}),this.username="",this.username2id="")},reinviteAllPlayers:function(){var e=this;return l()(r.a.mark(function t(){var a,s,i,n,o,l,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("showInvitationalModal"),e.$store.commit("minimizeInvitationalModal",!1),a=0;case 3:if(e.$store.getters.createdGame||!(a++<49)){t.next=8;break}return t.next=6,x(100);case 6:t.next=3;break;case 8:if(e.$store.getters.createdGame){t.next=11;break}return e.$store.commit("hideInvitationalModal"),t.abrupt("return");case 11:e.resetPlayers(),e.adoptCustomData(e.game.customData),e.rated=e.game.customData.rated,s=!0,i=!1,n=void 0,t.prev=17,o=f()(e.game.players);case 19:if(s=(l=o.next()).done){t.next=29;break}if((c=l.value).playerId!==window.context.user.id){t.next=23;break}return t.abrupt("continue",26);case 23:e.username=c.username,e.username2id=c.playerId,e.invitePlayer();case 26:s=!0,t.next=19;break;case 29:t.next=35;break;case 31:t.prev=31,t.t0=t.catch(17),i=!0,n=t.t0;case 35:t.prev=35,t.prev=36,!s&&o.return&&o.return();case 38:if(t.prev=38,!i){t.next=41;break}throw n;case 41:return t.finish(38);case 42:return t.finish(35);case 43:e.players[0].seat=e.$store.getters.seat,e.onChangeSeat(0),"teams"===e.gameType&&(e.autoStart=!1);case 46:case"end":return t.stop()}},t,e,[[17,31,35,43],[36,,38,42]])}))()},adoptCustomData:function(e){this.showObserverChat=e.showObserverChat,this.ruleVariants=e.ruleVariants,this.timeControlInitial=e.timeControlInitial,this.increment=e.increment,this.isDelay=!!e.isDelay,this.gameType=e.gameType,this.prettyFen="",this.startingPosition="",e.ruleVariants.chess960?this.startingPosition="960":e.startFen&&(this.startingPosition="Custom",this.prettyFen=this.fenUtils.prettyFen(e.startFen),this.onChangeStartFen())},keyUpUsername:function(){var e=this;clearTimeout(this.keyUpUsernameTimer),this.username2id="",this.keyUpUsernameTimer=setTimeout(function(){e.username.length>2?e.$socket.emit("autocomplete-username",{username:e.username,gameType:e.gameType}):""===e.username&&(e.$store.commit("clearUsernameChoices"),e.username2id="")},400)},selectUsername:function(e){var t=this;this.username=e.username,this.username2id=e.uid,this.$store.commit("clearUsernameChoices"),this.$nextTick(function(){return t.$refs.username.select()})},clearUsername:function(){this.username="",this.username2id="",this.$store.commit("clearUsernameChoices")},onChangeStartFen:function(){var e=this;this.prettyFen||(this.prettyFen=""),this.prettyFen=this.prettyFen.trim(),this.startFenOk=!0;var t=this.fenUtils.unprettyFen(this.prettyFen,function(t){e.$store.commit("showNotification",t.toString())});if(void 0===t&&(this.startFenOk=!1),t===this.fourPlayer.DEFAULT_FEN&&(t="",this.prettyFen=""),t){var a=this.fourPlayer.getRuleVariants(),s=this.fourPlayer.getRuleVariants(),i=this.fourPlayer.fen();if(this.fourPlayer.reset(),this.fourPlayer.setGameType(this.gameType),this.fourPlayer.setRuleVariants(this.ruleVariants),this.fourPlayer.position(t),t===this.fourPlayer.getDefaultFenWithFlexdata())t="",this.prettyFen="";else try{var n=this.fourPlayer.turn(),r=this.fourPlayer.isInCheckmate(n);(this.fourPlayer.isInStalemate(n)||r)&&(this.$store.commit("showNotification",this.board.b.colorNames[n]+" is in "+(r?"checkmate":"stalemate")),this.startFenOk=!1),this.fourPlayer.gameOver()&&(this.$store.commit("showNotification","In this position, the game is over. ("+this.fourPlayer.gameOverInfo()+")"),this.startFenOk=!1)}catch(e){console.log(e),this.$store.commit("showNotification","Error reading FEN4"),t="",this.startFenOk=!1}this.fourPlayer.reset(),this.fourPlayer.setGameType(a),this.fourPlayer.setRuleVariants(s),this.fourPlayer.fen(i)}this.startFenOk?(this.startFen=t,this.emitUpdate()):this.startFen=""},previewPosition:function(e){var t=this.ruleVariants.chess960?this.fenUtils.generate960Fen(this.ruleVariants.chess960):this.startFen;e?this.$bus.emit("showPreview",t,this.gameType,t.split("-")[1],this.data):this.$bus.emit("showPreview",null)},onChangeSeat:function(e){var t=this.players[e];if(t){void 0===t.seat&&(t.seat=-1);var a=t.seat;if(a>-1){this.finalPlayers[a]=t;var s=!0,i=!1,n=void 0;try{for(var r,o=f()(this.players);!(s=(r=o.next()).done);s=!0){var l=r.value;l.playerId!==t.playerId&&l.seat===a&&(l.seat=-1)}}catch(e){i=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw n}}}else{t.seat=-1;for(var c=[0,1,2,3],u=0;u<c.length;u++){var h=c[u],d=this.finalPlayers[h];d&&d.playerId===t.playerId&&(this.finalPlayers[h]={})}}this.$forceUpdate(),this.check4complete(),this.final4complete&&this.emitUpdate()}},emitUpdate:function(){var e=this;this.checkRated(),this.timeControlInitial||this.increment?this.showInvitationalModal&&(clearTimeout(this.emitUpdateTimer),this.emitUpdateTimer=setTimeout(function(){e.$socket.emit("update-custom-game",e.data);var t={},a=!0,s=!1,n=void 0;try{for(var r,o=f()(S);!(a=(r=o.next()).done);a=!0){var l=r.value;t[l]=e[l]}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}localStorage.setItem("customGameState",i()(t))},500)):this.$store.commit("showNotification","0+0 is not a valid time conttol.")},blurUsername:function(){var e=this;setTimeout(function(){e.usernameFocused=!1},200)},checkRated:function(){this.rated&&(this.showObserverChat=!1,this.userIsAdmin||(this.isPublic=!0))},startGame:function(){var e=this;return l()(r.a.mark(function t(){var a,s,i,n,o,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.starting=!0,e.final4complete=!1,e.emitUpdate(),t.next=5,x(1e3);case 5:if(e.check4complete(),e.final4complete){t.next=8;break}return t.abrupt("return");case 8:e.teammate=parseInt(e.teammate),e.$socket.emit("start-custom-game",{uid:window.context.user.id,creatorId:window.context.user.id,finalPlayers:e.finalPlayers}),e.final4complete=!1,e.starting=!1,a=!1,s=!0,i=!1,n=void 0,t.prev=16,o=f()(e.finalPlayers);case 18:if(s=(l=o.next()).done){t.next=26;break}if(l.value.playerId!==window.context.user.id){t.next=23;break}return a=!0,t.abrupt("break",26);case 23:s=!0,t.next=18;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(16),i=!0,n=t.t0;case 32:t.prev=32,t.prev=33,!s&&o.return&&o.return();case 35:if(t.prev=35,!i){t.next=38;break}throw n;case 38:return t.finish(35);case 39:return t.finish(32);case 40:a||e.$store.commit("showNotification","Please wait for the game to start..");case 41:case"end":return t.stop()}},t,e,[[16,28,32,40],[33,,35,39]])}))()}}}},hfJ9:function(e,t,a){"use strict";var s=a("n6H9"),i=a("I57T"),n=a("XyMi");var r=function(e){a("GjYY")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-75be6ef0",null);t.a=o.exports},hmYi:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isPlaying||e.mainScreen||e.$store.getters.disable_play?e._e():a("div",{staticClass:"rematch-btn-container",on:{mouseover:e.mouseOver,mouseout:e.mouseOut}},[e.showRematchButton?a("form-button",{attrs:{size:"small",theme:"primary"},nativeOn:{click:function(t){return e.rematch(t)}}},[e._v("\n      Rematch "),e.rematchReady.length?a("span",[e._v(" ("+e._s(e.rematchReady.length)+")")]):e._e()]):e._e(),e._v(" "),e.showReinviteButton?a("form-button",{attrs:{size:"small",theme:"primary"},nativeOn:{click:function(t){e.inviteAll()}}},[e._v("\n      Reinvite all\n    ")]):e._e()],1),e._v(" "),a("div",{staticClass:"btns-container"},[e.isPlaying||e.mainScreen?e._e():a("div",{staticClass:"inner-container",staticStyle:{float:"right"}},[e.prevGame?a("icon-font",{class:e.$style["icon-small"],staticStyle:{cursor:"pointer",float:"left"},attrs:{title:"Previous archive game",family:"chess",theme:"neutral",name:"chevron-left"},on:{click:function(t){e.$store.commit("joinGame",e.prevGame),e.$bus.emit("visited",e.prevGame)}}}):e._e(),e._v(" "),e.nextGame?a("icon-font",{class:e.$style["icon-small"],staticStyle:{cursor:"pointer",float:"left"},attrs:{title:"Next archive game",family:"chess",theme:"neutral",name:"chevron-right"},on:{click:function(t){e.$store.commit("joinGame",e.nextGame),e.$bus.emit("visited",e.nextGame)}}}):e._e()],1),e._v(" "),e.isPlaying||e.mainScreen||e.game.isLiveGame&&e.game.gameOver?e._e():a("div",{staticClass:"inner-container",on:{mouseover:e.mouseOver,mouseout:e.mouseOut}},[a("form-button",{attrs:{size:"large",theme:"dark-alternate"},nativeOn:{click:function(t){return e.exitObserve(t)}}},[e.hovering?a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"secondary",name:"x"}}):a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"x"}}),e._v(" "),a("span",[e._v("Exit")])],1)],1),e._v(" "),e.isPlaying&&e.seat===e.game.turn?a("div",{staticClass:"inner-container",on:{mouseover:e.mouseOver,mouseout:e.mouseOut}},["singles"===e.game.gameType&&e.game.canClaim?a("form-button",{attrs:{size:"large",theme:"dark-alternate"},nativeOn:{click:function(t){return e.resign(t)}}},[a("span",[e._v("\n          Claim Win\n        ")])]):a("form-button",{attrs:{size:"large",theme:"dark-alternate"},nativeOn:{click:function(t){return e.resign(t)}}},[e.hovering?a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"secondary",name:"flag"}}):a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"flag"}}),e._v(" "),a("span",[e._v("\n          Resign\n        ")])],1)],1):e._e(),e._v(" "),e.isPlaying?a("input",{directives:[{name:"model",rawName:"v-model",value:e.game.playRandomMove,expression:"game.playRandomMove"},{name:"show",rawName:"v-show",value:e.isDev,expression:"isDev"}],staticStyle:{float:"right"},attrs:{type:"checkbox",title:"Auto-play a random move"},domProps:{checked:Array.isArray(e.game.playRandomMove)?e._i(e.game.playRandomMove,null)>-1:e.game.playRandomMove},on:{change:function(t){var a=e.game.playRandomMove,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&e.$set(e.game,"playRandomMove",a.concat([null])):n>-1&&e.$set(e.game,"playRandomMove",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.game,"playRandomMove",i)}}}):e._e(),e._v(" "),e.isPlaying?a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDev,expression:"isDev"}],staticStyle:{float:"right",cursor:"pointer"},attrs:{type:"checkbox",title:"Play random move (Shortcut: Spacebar)"},on:{click:function(t){e.playRandomMove()}}},[a("icon-font",{class:e.$style["icon-small"],staticStyle:{"margin-top":"-5px",display:"inline-block !important"},attrs:{family:"chess",theme:"neutral",name:"stumbleupon"}})],1):e._e()])])},i=[]},hyvV:function(e,t){},i7z1:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("div")},i=[]},iAG0:function(e,t,a){"use strict";var s=a("cEu1"),i=a("mSCy"),n=a("XyMi");var r=function(e){a("ADW4")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-3034dfd7",null);t.a=o.exports},iFe7:function(e,t,a){"use strict";var s=a("a1iv"),i=a("OqyX");t.a={name:"FormInput",components:{FormLabel:s.a,FormHelp:i.a},data:function(){return{value:this.defaultValue}},watch:{defaultValue:function(e){this.value=e}},props:{id:{type:String,default:""},size:{type:String,default:"normal"},inputType:{type:String,default:"text"},readonly:{type:Boolean,default:!1},color:{type:String},label:{type:String,default:null},placeholder:{type:String,default:""},title:{type:String,default:""},defaultValue:{type:String,default:""},helpText:{type:String,default:null},enterAction:{type:Function},clearOnEnter:{type:Boolean,default:!1}},methods:{onEnter:function(e){this.clearOnEnter&&(this.value=""),this.enterAction(e.target.value)}}}},iLng:function(e,t,a){"use strict";var s=a("qP1x");t.a={name:"SectionTitle",components:{IconFont:s.a},props:{icon:{type:String,required:!0},link:{type:String},name:{type:String,required:!0},rightname:{type:String}}}},j697:function(e,t){e.exports={icon:"icon_2qhuX2iq_1"}},jWDl:function(e,t,a){(function(t){const a="https://api.chess.com/";e.exports=function(e){return{get:async function(e){return new Promise((s,i)=>{if(!e)return i("no api path given");try{var n=document.createElement("div");t(n).load(a+e,function(e){s(e?JSON.parse(e):null)})}catch(e){console.log(e),i(e)}})}}}}).call(t,a("7t+N"))},jodq:function(e,t,a){(function(t){const a='\n{\n  "avatarUrl": "https://images.chesscomfiles.com/uploads/v1/user/2204966.87c93781.50x50o.db4ba0f000b3.jpeg",\n  "bestRating": 1788,\n  "bestRatingType": "lightning",\n  "chessTitle": null,\n  "isEnabled": true,\n  "isStaff": true,\n  "countryName": "United Kingdom",\n  "countryId": 164,\n  "membership": {\n    "level": 90,\n    "name": "Staff",\n    "code": "staff",\n    "vacation_add_days": 28,\n    "vacation_cap_days": 90,\n    "vacation_accrue_days": 2.5\n  },\n  "joinDate": "Oct 4, 2009",\n  "lastLoginDate": "3 hrs ago",\n  "firstName": "Frodo",\n  "lastName": "Baggins",\n  "userId": 2204966,\n  "areFriends": true,\n  "isTracked": true,\n  "isBlocked": true,\n  "isFriendRequestExists": false,\n  "isMessageable": true,\n  "isFriendRequestFromUserExists": false,\n  "onlineStatus": "online"\n}',s="/callback/user/popup/";e.exports=function(e){return{getPopup:async function(i){return"production"!==e&&"staging"!==e?new Promise((e,t)=>{e(JSON.parse(a))}):new Promise((e,a)=>{try{t("#callbackdata").load(s+i,function(t){e(t?JSON.parse(t):null)})}catch(t){console.log(t),e(null)}})}}}}).call(t,a("7t+N"))},"k4++":function(e,t,a){"use strict";var s=a("z1to"),i=a("45FZ");t.a={components:{SelectDark:i.a,CustomData:s.a},props:{show:null},data:function(){return{visited:{},sort:"-date",sortOptions:[{label:"Sort",value:"-date"},{label:"↑ Date ",value:"date"},{label:"↓ Rating +/- ",value:"-ratingDiff"},{label:"↑ Rating +/- ",value:"ratingDiff"},{label:"↓ Rating ",value:"-rating"},{label:"↑ Rating ",value:"rating"},{label:"↓ Moves ",value:"-plies"},{label:"↑ Moves ",value:"plies"},{label:"↓ Duration ",value:"-duration"},{label:"↑ Duration ",value:"duration"}],playerSortOptions:[{label:"Sort",value:"-lastSeen"},{label:"↑ Last seen ",value:"lastSeen"},{label:"↓ First seen ",value:"-createdAt"},{label:"↑ First seen ",value:"createdAt"},{label:"↓ Latest FFA ",value:"-lastPlayedSingles.0"},{label:"↑ Latest FFA ",value:"lastPlayedSingles.0"},{label:"↓ Latest Teams ",value:"-lastPlayedTeams.0"},{label:"↑ Latest Teams ",value:"lastPlayedTeams.0"},{label:"↓ Rating ",value:"-rating"},{label:"↑ Rating ",value:"rating"},{label:"↓ TeamRating ",value:"-teamRating"},{label:"↑ TeamRating ",value:"teamRating"},{label:"↓ Games ",value:"-numGames"},{label:"↑ Games ",value:"numGames"},{label:"↓ Aborts ",value:"-numAborts"},{label:"↑ Aborts ",value:"numAborts"},{label:"↓ Playban ",value:"-playban"},{label:"↑ Playban ",value:"playban"},{label:"↓ Chatban ",value:"-chatban"},{label:"↑ Chatban ",value:"chatban"},{label:"↓ Reportban ",value:"-reportban"},{label:"↑ Reportban ",value:"reportban"}]}},computed:{games:function(){var e=this.$store.getters.foundGames;if(this.sort){var t=this.$parent.username2id,a=/^-/.test(this.sort)?this.sort.substr(1):this.sort,s=/^-/.test(this.sort)?1:-1;e.sort(function(e,i){var n=e[a],r=i[a];if("rating"===a||"ratingDiff"===a){if(!t)return 0;for(var o=[0,1,2,3],l=0;l<o.length;l++){var c=o[l];e["uid"+(c+1)]===t&&(n=e[a+(c+1)]),i["uid"+(c+1)]===t&&(r=i[a+(c+1)])}}return void 0===n?-s:void 0===r?-s:n<r?s:n===r?0:-s})}return e},players:function(){var e=this.$store.getters.foundPlayers;if(this.sort){var t=/^-/.test(this.sort)?this.sort.substr(1):this.sort,a=/^-/.test(this.sort)?1:-1;e.sort(function(e,s){return e[t]<s[t]?a:-a})}return e},mainScreen:function(){return this.$store.getters.mainScreen},fourPlayer:function(){return this.$store.getters.fourPlayer}},watch:{games:function(){this.$bus.emit("showPreview",null)},mainScreen:function(){this.$forceUpdate()},show:function(){this.sort=""}},mounted:function(){this.$bus.on("visited",this.visited_)},methods:{visited_:function(e){this.visited[e]=!0},standings:function(e){return e.standings&&4===e.standings.length?e.standings:[1,2,3,4]},joinGame:function(e){this.$bus.emit("showPreview",null),this.visited[e]=!0,this.$store.commit("joinGame",e)},playerWasSearched:function(e){return e===this.$parent.username2id},playerIsUser:function(e){return e===window.context.user.id},preview:function(e,t){e.gameNr!==this.lastPreview&&(this.$bus.emit("showPreview",e.endFen,e.gameType,e.endFen.split("-")[1],e.customData),this.lastPreview=e.gameNr)},cancelPreview:function(){this.$bus.emit("showPreview",null),this.lastPreview=null},ts2date:function(e){if(!e)return"-";var t=new Date(e);return t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+", "+t.getFullYear()},ts2datetime:function(e){return e?this.ts2date(e)+" "+this.ts2time(e):"-"},ts2gamedate:function(e){var t=this.ts2time(e).split(":"),a="AM",s=t[0]-0;return 0===s?s=12:s>=12&&(a="PM",0===(s-=12)&&(s=12)),this.ts2date(e).replace(/, 20\d\d/,"")+" "+s+":"+t[1]+" "+a},ts2time:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},banstatus:function(e){if(e.banned)return'<font color="red">Locked out</font><br/>';var t=Date.now()<new Date(e.chatban).getTime(),a=Date.now()<new Date(e.playban).getTime(),s=Date.now()<new Date(e.reportban).getTime(),i=!a&&new Date(e.playban).getFullYear()>1971,n=!t&&new Date(e.chatban).getFullYear()>1971,r=!s&&new Date(e.reportban).getFullYear()>1971,o="";return t&&(o+='<font color="red">chatbanned till '+this.ts2gamedate(e.chatban)+"</font><br/>"),a&&(o+='<font color="red">playbanned till '+this.ts2date(e.playban)+"</font><br/>"),s&&(o+='<font color="red">reportbanned till '+this.ts2date(e.reportban)+"</font><br/>"),n&&(o+="chatban exp "+this.ts2date(e.chatban)+"<br/>"),i&&(o+="playban exp "+this.ts2gamedate(e.playban)+"<br/>"),r&&(o+="reportban exp "+this.ts2gamedate(e.reportban)+"<br/>"),o}}}},k4w8:function(e,t,a){(function(t){const a='{\n  "friends": [{\n    "username": "frodo1253",\n    "user_id": 1253,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/images/noavatar_l.gif",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532229569",\n    "create_date": "1394760205",\n    "best_rating": 1640,\n    "best_rating_type": "lightning",\n    "is_online": 0,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1402348861,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1254",\n    "user_id": 1254,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/1978712.e7ad1672.20x20o.0c461d5d437d.gif",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532221282",\n    "create_date": "1245220544",\n    "best_rating": 1372,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1396504951,\n    "is_tracked": 0,\n    "is_enabled": 1,\n    "membership_level": 40\n  }, {\n    "username": "frodo1255",\n    "user_id": 1255,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/39491988.4ce9ad04.20x20o.c4e72afd6b54.jpeg",\n    "country_id": 54,\n    "country_name": "Germany",\n    "last_login_date": "1532218721",\n    "create_date": "1508146403",\n    "best_rating": 1700,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1510140965,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 50\n  }, {\n    "username": "frodo1256",\n    "user_id": 1256,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/36947986.d794f15b.20x20o.4f4ac6a65108.jpeg",\n    "country_id": 92,\n    "country_name": "Malaysia",\n    "last_login_date": "1532215499",\n    "create_date": "1499763116",\n    "best_rating": 1222,\n    "best_rating_type": "bullet",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1508393210,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1257",\n    "user_id": 1257,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/12655398.6eda116b.20x20o.533139ebb2d0.jpeg",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532214510",\n    "create_date": "1373425861",\n    "best_rating": 2087,\n    "best_rating_type": "rapid",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1513833910,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 90\n  }, {\n    "username": "frodo1258",\n    "user_id": 1258,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/1647368.c9b5535d.20x20o.9e02bbc385bc.jpeg",\n    "country_id": 3,\n    "country_name": "Canada",\n    "last_login_date": "1532213848",\n    "create_date": "1228971104",\n    "best_rating": 2724,\n    "best_rating_type": "bullet",\n    "is_online": 1,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1490227086,\n    "is_tracked": 1,\n    "chess_title": "GM",\n    "is_enabled": 1,\n    "membership_level": 50\n  }, {\n    "username": "frodo1259",\n    "user_id": 1259,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/images/noavatar_l.gif",\n    "country_id": 88,\n    "country_name": "Lithuania",\n    "last_login_date": "1532206597",\n    "create_date": "1332223398",\n    "best_rating": 1509,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1411843908,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1261",\n    "user_id": 1261,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/32782264.ec09f382.20x20o.7aab3b746b54.png",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532206344",\n    "create_date": "1485755565",\n    "best_rating": 1417,\n    "best_rating_type": "bullet",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1513899575,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1242",\n    "user_id": 1242,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/1786183.123de062.20x20o.617a562c50f7.gif",\n    "country_id": 132,\n    "country_name": "Sweden",\n    "last_login_date": "1532205199",\n    "create_date": "1235502777",\n    "best_rating": 1852,\n    "best_rating_type": "chess960",\n    "is_online": 1,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1510085611,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 50\n  }, {\n    "username": "frodo1237",\n    "user_id": 1237,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/2204966.17cdd662.20x20o.268f835c11fa.jpeg",\n    "country_id": 164,\n    "country_name": "United Kingdom",\n    "last_login_date": "1532200109",\n    "create_date": "1254661132",\n    "best_rating": 1710,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1510595887,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 30\n  }, {\n    "username": "frodo1260",\n    "user_id": 1260,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/25711641.1b7e464f.20x20o.0293e7bada1d.jpeg",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532191188",\n    "create_date": "1450838540",\n    "best_rating": 2475,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1510596950,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1238",\n    "user_id": 1238,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/27908780.9932bab3.20x20o.469dfc79e7ed.png",\n    "country_id": 225,\n    "country_name": "International",\n    "last_login_date": "1532160672",\n    "create_date": "1461602737",\n    "best_rating": 1817,\n    "best_rating_type": "bullet",\n    "is_online": 1,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1517406539,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1263",\n    "user_id": 1263,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/15080560.6aedd929.20x20o.9adcb9b1e21c.png",\n    "country_id": 231,\n    "country_name": "Serbia",\n    "last_login_date": "1532128238",\n    "create_date": "1387302572",\n    "best_rating": 1445,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1429516718,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1264",\n    "user_id": 1264,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/35856082.fa975056.20x20o.64ff8e72309c.png",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532101619",\n    "create_date": "1495892927",\n    "best_rating": 1000,\n    "best_rating_type": "daily",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1519065893,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 30\n  }, {\n    "username": "frodo1265",\n    "user_id": 1265,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/37098960.0a32c254.20x20o.21ffcae1d0d8.jpeg",\n    "country_id": 2,\n    "country_name": "United States",\n    "last_login_date": "1532038512",\n    "create_date": "1500298202",\n    "best_rating": 1111,\n    "best_rating_type": "daily",\n    "is_online": 1,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1519834843,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 50\n  }, {\n    "username": "frodo1240",\n    "user_id": 1240,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/images/noavatar_l.gif",\n    "country_id": 34,\n    "country_name": "Colombia",\n    "last_login_date": "1531878636",\n    "create_date": "1371747726",\n    "best_rating": 1427,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 1,\n    "is_friend": 1,\n    "friends_from": 1389986598,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1239",\n    "user_id": 1239,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/39582054.d7785c01.20x20o.c870f648dc17.png",\n    "country_id": 69,\n    "country_name": "India",\n    "last_login_date": "1531400753",\n    "create_date": "1508422679",\n    "best_rating": 1023,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1522535076,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1266",\n    "user_id": 1266,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/35843038.f37d5758.20x20o.57a056021ad3.jpeg",\n    "country_id": 225,\n    "country_name": "International",\n    "last_login_date": "1530029868",\n    "create_date": "1495840455",\n    "best_rating": 1189,\n    "best_rating_type": "daily",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1510099004,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1267",\n    "user_id": 1267,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/41692560.b11ad1ac.20x20o.5992db778659.jpeg",\n    "country_id": 149,\n    "country_name": "Vietnam",\n    "last_login_date": "1527728448",\n    "create_date": "1514283127",\n    "best_rating": 1563,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1515958976,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 10\n  }, {\n    "username": "frodo1241",\n    "user_id": 1241,\n    "avatar_url": "https://images.chesscomfiles.com/uploads/v1/user/15035982.9c6a8689.20x20o.ec61d75eb242.jpeg",\n    "country_id": 3,\n    "country_name": "Canada",\n    "last_login_date": "1525222164",\n    "create_date": "1387064571",\n    "best_rating": 2024,\n    "best_rating_type": "lightning",\n    "is_online": 1,\n    "is_in_livechess": 0,\n    "is_friend": 1,\n    "friends_from": 1510168029,\n    "is_tracked": 1,\n    "is_enabled": 1,\n    "membership_level": 30\n  }],\n  "friendsPerPage": 20\n}',s="/callback/friends/"+window.context.user.id+"/search";e.exports=function(e){return{getFriends:async function(i){return i||(i=1),"production"!==e&&"staging"!==e?new Promise((e,t)=>{e(JSON.parse(a).friends)}):new Promise((e,a)=>{try{t("#callbackdata").load(s+"?page="+i,function(t){if(t){var a=JSON.parse(t);e(a&&a.friends?a.friends:null)}else e(null)})}catch(t){console.log(t),e(null)}})}}}}).call(t,a("7t+N"))},kApn:function(e,t,a){"use strict";var s=a("A/7+"),i=a("GJgP"),n=a("XyMi");var r=function(e){this.$style=a("/W1e")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},kbMD:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board-container",style:{width:e.boardWidth+"px"}},[a("div",{staticClass:"board",style:{width:e.boardWidth+"px",visibility:e.ghostBoard||!e.visible?"hidden":"visible"},attrs:{id:"board",oncontextmenu:"return false"},on:{mousemove:e.onMouseMove,mousedown:e.mousedown,mouseup:e.mouseup}},[e._l([0,1,2,3],function(t){return a("player-boxes",{directives:[{name:"show",rawName:"v-show",value:!e.previewMode&&!e.mainScreen,expression:"!previewMode && !mainScreen"}],key:t,attrs:{player:t,squareSize:e.squareSize}})}),e._v(" "),e._l(e.files,function(t){return a("div",{staticClass:"rank"},[e._l(e.ranks,function(s){return a("div",{class:e.squareClass(t,s),style:e.squareStyle(t,s),attrs:{id:t+s}},[a("div",{staticClass:"coord-wrapper"},[e.showCoordinates&&e.showXCoord(t,s)?a("div",{staticClass:"coord fileCoord",style:e.xCoordStyle(t,s)},[e._v(e._s(t))]):e._e(),e._v(" "),e.showCoordinates&&e.showYCoord(t,s)?a("div",{staticClass:"coord rankCoord",style:e.yCoordStyle(t,s)},[e._v(e._s(s))]):e._e()])])}),e._v(" "),a("div",{staticClass:"clb"})],2)}),e._v(" "),a("div",{staticClass:"plus-points-wrapper"},[a("div",{staticClass:"plus-points-container"},e._l([0,1,2,3],function(e){return a("div",{staticClass:"plus-points",class:"plus-points-"+e})}))]),e._v(" "),a("div",{staticClass:"center-of-board"},[e.loadingGame||"singles"!==e.game.gameType?e._e():a("div",{staticClass:"center-of-board-indicator"}),e._v(" "),e.loadingGame?a("div",{staticClass:"nb-spinner"}):e._e()]),e._v(" "),e._l(e.arrows,function(t,s){return a("arrow",{directives:[{name:"show",rawName:"v-show",value:!e.previewMode,expression:"!previewMode"}],key:t.uniqueId,attrs:{from:t.from,to:t.to,color:t.color,seat:t.seat,squareSize:e.squareSize}})}),e._v(" "),!e.reconnecting&&e.lookingForGame&&e.mainScreen&&!e.$store.getters.showSettingsModal?a("pre-game-arrows"):e._e()],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.mainScreen&&!e.previewMode&&"teams"===e.game.gameType&&(!e.showStandings||e.standingsAtBottom),expression:"!mainScreen && !previewMode && game.gameType === 'teams' && (!showStandings || standingsAtBottom)"}],staticClass:"materialCount"},[e._l(e.materialDiff2,function(t){return a("img",{staticClass:"materialDiffPiece",class:{dead:t.dead},style:e.materialDiffPieceStyle(t),attrs:{"data-player":t.player,"data-piece":t.piece,src:e.b.pieceSrc(t)}})}),e._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"4px","font-size":"11px"}},[a("icon-font",{class:e.$style.icon,staticStyle:{display:"inline-block !important","margin-top":"-5px"},attrs:{family:"chess",theme:"primary",name:"scales"}}),e._v(" "),a("div",{staticStyle:{"pointer-events":"all","margin-top":"3px",display:"inline","font-weight":"bold"},attrs:{tooltip:"Bishops are counted as 4"}},[e._v(e._s(e.materialDiffPoints))])],1),e._v(" "),e._l(e.materialDiff1,function(t){return a("img",{staticClass:"materialDiffPiece",class:{dead:t.dead},style:e.materialDiffPieceStyle(t),attrs:{"data-player":t.player,"data-piece":t.piece,src:e.b.pieceSrc(t)}})})],2),e._v(" "),e.previewMode||!e.game.isLiveGame||e.fourPlayer.turn()!==e.seat||e.fourPlayer.gameOver()?e._e():a("div",{staticClass:"nextToMove"},[a("div",{staticStyle:{color:"rgba(255, 255, 255, 0.4)"}},[e._v("\n      It's your turn.\n      "),a("span",{staticStyle:{"font-size":"9px"}},[a("br"),e._v(" "),a("a",{on:{click:function(t){e.$store.commit("forceJoinGame",e.game.gameNr)}}},[e._v("Can't move? Reload game.")])])])]),e._v(" "),e.previewMode||e.game.isLiveGame||e.fourPlayer.gameOver()||e.showStandings?e._e():a("div",{staticClass:"nextToMove"},[e.editPosition||e.mainScreen||e.isPlaying||!e.analysisMode?e._e():a("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.playRandomMove()}}},[a("icon-font",{class:e.$style.icon,staticStyle:{"margin-top":"-5px",display:"inline-block !important"},attrs:{family:"chess",theme:"neutral",title:"Play a random move (Shortcut: Spacebar)",name:"stumbleupon"}})],1),e._v(" "),e.editPosition?a("div",{staticStyle:{color:"rgba(255, 255, 255, 0.4)"}},[e._v("\n      Edit position\n    ")]):e.fourPlayer.turn()!==e.b.currplview?a("div",{staticClass:"pointer",class:e.colors[e.fourPlayer.turn()],attrs:{title:"Turn the board"},on:{click:function(t){e.b.rotate("turn")}}},[e._v("\n      "+e._s(e.b.colorNames[e.fourPlayer.turn()])+"'s move\n    ")]):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.reconnecting,expression:"reconnecting"}],staticClass:"board-header"},[a("div",{staticClass:"reconnecting-message",staticStyle:{color:"red","font-weight":"700","font-size":"16px"}},[e._v("Reconnecting...")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.reconnecting,expression:"!reconnecting"}],staticClass:"board-header",style:{transform:"scale("+e.b.squareSize/38*1+")"}},[e.mainScreen&&!e.previewMode||!e.game.customData.timeControl?e._e():a("div",{attrs:{tooltip:"Time control"}},[e._v("\n      "+e._s(e.game.customData.timeControl)+"\n    ")]),e._v(" "),!e.mainScreen||e.previewMode?a("custom-data",{staticClass:"customData",attrs:{data:e.game.customData,boardTop:!0}}):e._e()],1),e._v(" "),e.showStandings&&!e.previewMode?a("div",{staticClass:"standings-list",class:e.standingsAtBottom?"board-footer":"board-left",style:{transform:"scale("+e.b.squareSize/40*.69+")"}},e._l(e.standings(e.game),function(t){return a("div",{staticClass:"standing"},[a("div",{staticClass:"place"},[a("div",{staticClass:"box-f",class:"place-"+e.colors[t-1]},[a("div",{staticClass:"standing-stats"},[a("div",{staticClass:"truncate100 pointer noSelect",attrs:{title:e.game["username"+t]},on:{click:function(a){e.$bus.emit("showUserPopup",e.game["uid"+t],e.game["username"+t],a)}}},[e._v("\n              "+e._s(e.game["username"+t])+"\n            ")]),e._v(" "),a("div",{staticClass:"standing-rating noSelect"},[e._v("\n              "+e._s(e.game["rating"+t]+Math.round(e.game["ratingDiff"+t]))+"\n              "),e.game.rated?a("span",{staticClass:"standing-ratingDiff noSelect"},[e._v("\n                ("+e._s(e.game["ratingDiff"+t]<0?"":"+")+e._s(e.game["ratingDiff"+t])+")\n              ")]):"singles"===e.game.gameType?a("span",{staticClass:"points-f noSelect"},[e._v("\n                "+e._s(e.game["points"+t])+"\n              ")]):e._e()])])])])])})):e._e()])},i=[]},kcVJ:function(e,t,a){"use strict";var s=a("GfGX"),i=a("uXmL"),n=a("XyMi");var r=function(e){a("e56d"),this.$style=a("sYZk")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-5b4770f1",null);t.a=o.exports},kysi:function(e,t){e.exports={"icon-large":"icon-large_7g30bkKz_1",icon:"icon_1u-JPHkc_1","icon-small":"icon-small_1P4U9Tkt_1","icon-tiny":"icon-tiny_1RFFxwTl_1"}},lfUJ:function(e,t){e.exports={icon:"icon_jaWqvf5S_1","icon-large":"icon-large_1ruskZak_1","icon-collapse":"icon-collapse_HQmscaJw_1","icon-small":"icon-small_29f-iG3a_1","icon-clear":"icon-clear_2hcOioBc_1"}},lhq8:function(e,t,a){"use strict";var s=a("6sQd"),i=a("bB0f"),n=a("r5Ml"),r=a("G19B"),o=a("TEqg"),l=a("KNQF"),c=a("tlgK");t.a={name:"SidebarContainer",components:{Tabs:s.a,PanelWatch:i.a,PanelLeaderboard:n.a,PanelArchive:r.a,PanelFriends:o.a,PanelChat:l.a,PanelRules:c.a},data:function(){return{chatTabVisited:!1,resizeTimer:null}},computed:{topAdShown:function(){return!window.context.user.isPremium&&(this.$store.getters.mainScreen||!this.$store.getters.collapse)},activeTab:function(){return this.$store.getters.activeTab},mainScreen:function(){return this.$store.getters.mainScreen}},watch:{activeTab:function(e){"chat"===e&&(this.chatTabVisited=!0)},mainScreen:function(e){e?"chat"===this.activeTab&&(this.chatTabVisited=!0):this.chatTabVisited=!1}},mounted:function(){window.addEventListener("resize",this.onResize),window.location.href.match(/t=chat/)&&(this.chatTabVisited=!0)},methods:{onResize:function(){var e=this;this.chatTabVisited=!1,clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.chatTabVisited=!0},800)}}}},lks0:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"four-pair-request",style:{opacity:e.opacity}},e._l(e.invitations,function(t,s){return a("div",{staticClass:"request-container"},[t.customData&&t.customData.anonymous?e._e():a("a",{staticClass:"inviter-avatar",attrs:{href:e.getMemberProfileUrl(t.inviterUsername),target:"_blank"}},[a("img",{attrs:{width:"50",height:"50",alt:t.inviterUsername,src:t.fromAvatar}})]),e._v(" "),a("div",{staticClass:"request-invitation"},[a("div",{staticClass:"invitation"},[t.customData&&t.customData.anonymous?a("span",[e._v("Anonymous")]):a("span",{staticClass:"invitation-username",on:{click:function(a){e.$bus.emit("showUserPopup",t.inviterId,t.inviterUsername,a)}}},[e._v(e._s(t.inviterUsername))]),e._v(" "),!t.customData||t.isTeamInvite?a("span",[e._v("wants to play on a team with you!")]):a("span",[e._v(" has invited you to a custom game!")]),e._v(" "),a("br"),e._v(" "),t.customData?a("div",[a("strong",[e._v("\n            "+e._s(t.customData.timeControl)+" • "+e._s("singles"===t.customData.gameType?"Free-for-All":"Teams")+" • "+e._s(t.customData.rated?"Rated":"Casual")+" "+e._s("wta"===t.customData.rated?"WTA":"")+e._s("wta3"===t.customData.rated?"WTA3.0":"")+"\n            "),500!==t.customData.minRating||3500!==t.customData.maxRating?a("span",[e._v("\n               • "),500!==t.customData.minRating?a("span",[e._v(e._s(t.customData.minRating)),3500===t.customData.maxRating?a("span",[e._v("+")]):a("span",[e._v("-"+e._s(t.customData.maxRating))])]):3500!==t.customData.maxRating?a("span",[e._v("<"+e._s(t.customData.maxRating))]):e._e()]):e._e()]),e._v(" "),a("br"),e._v(" "),a("custom-data",{attrs:{data:t.customData}})],1):e._e()]),e._v(" "),a("div",{staticClass:"response-container"},[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.acceptInvitation(s)}}},[e._v("\n          Accept\n        ")]),e._v(" "),a("span",{staticClass:"or"},[e._v(" | ")]),e._v(" "),a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.declineInvitation(s)}}},[e._v("\n          Decline\n        ")])])])])}))},i=[]},m1M3:function(e,t,a){"use strict";t.a={name:"ModalContainer",data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}}}},m2Zb:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;this._self._c;return this._m(0)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"maintenance"},[t("h3",[this._v("Four Player Chess is closed for maintenance.")]),this._v(" "),t("h3",[this._v("We expect to be back shortly.")])])}]},mBDK:function(e,t,a){"use strict";t.a={name:"FormHelp",props:{helpText:{type:String,default:null}}}},mSCy:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"arrow-container":!e.minimize,"arrow-container-minimized":e.minimize}},[a("div",{staticClass:"arrow-box"},[a("span",{staticClass:"up-arrow",class:e.colorRed()},[a("div",{staticClass:"arrow-stem",class:e.colorRed()},[!e.gameStarting&&e.colorRed()?a("div",{staticClass:"spinner-f"}):e._e(),e._v(" "),a("img",{staticClass:"preview-player-avatar",class:e.colorRed(),attrs:{src:e.getRedAvatar(),alt:""}})]),e._v(" "),a("div",{staticClass:"arrow-head",class:e.colorRed()})]),e._v(" "),a("span",{staticClass:"right-arrow",class:e.colorBlue()},[a("div",{staticClass:"arrow-stem",class:e.colorBlue()},[!e.gameStarting&&e.colorBlue()?a("div",{staticClass:"spinner-f"}):e._e(),e._v(" "),a("img",{staticClass:"preview-player-avatar",class:e.colorBlue(),attrs:{src:e.getBlueAvatar(),alt:""}})]),e._v(" "),a("div",{staticClass:"arrow-head",class:e.colorBlue()})]),e._v(" "),a("span",{staticClass:"down-arrow",class:e.colorYellow()},[a("div",{staticClass:"arrow-stem",class:e.colorYellow()},[!e.gameStarting&&e.colorYellow()?a("div",{staticClass:"spinner-f"}):e._e(),e._v(" "),a("img",{staticClass:"preview-player-avatar",class:e.colorYellow(),attrs:{src:e.getGoldAvatar(),alt:""}})]),e._v(" "),a("div",{staticClass:"arrow-head",class:e.colorYellow()})]),e._v(" "),a("span",{staticClass:"left-arrow",class:e.colorGreen()},[a("div",{staticClass:"arrow-stem",class:e.colorGreen()},[!e.gameStarting&&e.colorGreen()?a("div",{staticClass:"spinner-f"}):e._e(),e._v(" "),a("img",{staticClass:"preview-player-avatar",class:e.colorGreen(),attrs:{src:e.getGreenAvatar(),alt:""}})]),e._v(" "),a("div",{staticClass:"arrow-head",class:e.colorGreen()})])])])},i=[]},n6H9:function(e,t,a){"use strict";var s=a("y639");t.a={name:"ShortTopSidebarAd",props:s.c,components:s.b}},nu5u:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat-master",style:{"padding-bottom":e.game.isLiveGame?0:"50px"}},[e.messages?a("div",{staticClass:"chat-stream-f",style:{height:e.chatHeight},attrs:{id:"loadedGameChat"}},e._l(e.messages,function(t,s){return void 0===t.onlyForAdmin||e.showOpponentChat&&e.userIsAdmin?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.muted[t.playerId],expression:"!muted[message.playerId]"}],staticClass:"message-row",on:{mouseover:function(t){e.msgHover(s,!0)},mouseleave:function(t){e.msgHover(s,!1)}}},[e.msgDeletable(t)?a("div",{staticClass:"message-delete-icon",class:{show:e.mouseOverMsg===s},attrs:{title:"Delete this message"},on:{click:function(a){e.deleteMsg(t,s)}}},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"neutral",name:"x"}})],1):e._e(),e._v(" "),a("span",{staticClass:"chat-user-f"},[t.chatIcon?a("span",{staticClass:"membership-icon"},["admin"===t.chatIcon?a("a",{attrs:{title:"Admin",target:"_blank",href:"https://www.chess.com/about"}},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"primary",name:"user-shield"}})],1):t.chatIcon.length>3?a("a",{class:["membership-level",t.chatIcon],attrs:{target:"_blank",href:"staff"===t.chatIcon?"https://www.chess.com/about":"https://www.chess.com/membership?c=icon",title:t.chatIcon.replace(/\b\w/g,function(e){return e.toUpperCase()})}}):a("a",{staticClass:"chess-title ",attrs:{href:"https://www.chess.com/members/titled-players",target:"_blank"}},[e._v(e._s(t.chatIcon)+" ")])]):e._e(),e._v(" "),"info"!==t.type?a("span",{staticClass:"username-f",class:e.colors[t.seat],attrs:{tooltip:e.messageTitle(t)},on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v("\n          "+e._s(t.username)+": \n        ")]):e._e()]),e._v(" "),a("span",{staticClass:"chat-content-f",class:{infomsg:"info"===t.type},attrs:{tooltip:"info"===t.type?e.messageTitle(t):void 0}},[/#(\d+)\b/.test(t.message)&&!/started!/.test(t.message)?a("span",[e._v("\n          "+e._s(t.message.replace(/^(.*?)#\d+\b.*/,"$1"))+"\n          "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.joinGame(parseInt(t.message.replace(/.*?#(\d+).*/,"$1")))}}},[e._v("\n            "+e._s(t.message.replace(/.*?(#\d+).*/,"$1"))+"\n          ")]),e._v("\n          "+e._s(t.message.replace(/.*?#\d+\b(.*)/,"$1"))+"\n        ")]):a("span",[e._v(e._s(t.message))])])]):e._e()})):e._e(),e._v(" "),a("div",{staticClass:"chat-input-f",style:{bottom:e.game.isLiveGame?0:"50px"}},[a("form-input",{staticClass:"send-message-f",attrs:{id:"chat-message-input",enterAction:this.sendMessage,clearOnEnter:!0,placeholder:"Please be nice when you chat.",size:"large"}}),e._v(" "),e.showMsgsToAdmin?a("input",{directives:[{name:"model",rawName:"v-model",value:e.showOpponentChat,expression:"showOpponentChat"}],staticClass:"showOpponentChatCB",attrs:{type:"checkbox",title:"Show all team messages"},domProps:{checked:Array.isArray(e.showOpponentChat)?e._i(e.showOpponentChat,null)>-1:e.showOpponentChat},on:{change:function(t){var a=e.showOpponentChat,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=e._i(a,null);s.checked?n<0&&(e.showOpponentChat=a.concat([null])):n>-1&&(e.showOpponentChat=a.slice(0,n).concat(a.slice(n+1)))}else e.showOpponentChat=i}}}):e._e()],1),e._v(" "),a("div",{staticClass:"muteContainer",style:{top:e.observerTop}},[a("icon-font",{directives:[{name:"show",rawName:"v-show",value:e.forceRefresh,expression:"forceRefresh"}],staticClass:"muteboxIcon",class:e.$style.icon,style:{"margin-top":e.$store.getters.isFirefox?"":"-2px"},attrs:{family:"chess",theme:"neutral",name:e.playersMuted?"sound-off":"sound-on"},on:{click:e.toggleMuteBox}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showMuteBox,expression:"showMuteBox"}],staticClass:"mutebox",style:{"max-height":this.isPremium?"360px":"180px"},on:{mouseleave:function(t){e.hideMute(t)},mouseenter:function(t){e.showMute(t)}}},e._l(Object.keys(e.muted),function(t){return a("div",{},[e.usernames[t]?a("div",{staticClass:"mutename",class:e.muteColor(t)},[a("icon-font",{class:e.$style.icon,staticStyle:{float:"left"},attrs:{tooltip:e.muted[t]?"Solo":"Others",family:"chess",theme:e.muteTheme(t),name:e.muted[t]?"sound-off":"sound-on"},on:{click:function(a){e.solo(t)}}}),e._v(" "),a("span",{on:{click:function(a){e.toggleMute(t)}}},[e._v(e._s(e.usernames[t]))])],1):e._e()])}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.numObservers,expression:"numObservers"}],staticClass:"observersContainer",style:{top:e.observerTop}},[a("div",{staticClass:"observer-count",style:{right:(Object.keys(e.muted).length?12:0)+"px"},on:{mouseenter:function(t){e.showObservers(t)}}},[e.numObservers?a("span",{attrs:{onclick:"return false"}},[e._v("\n        "+e._s(e.numObservers)+"\n        "),e.game.isLiveGame?a("span",[e._v("Spectator")]):a("span",[e._v("Observer")]),e.numObservers>1?a("span",[e._v("s")]):e._e()]):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showObserversBox,expression:"showObserversBox"}],staticClass:"observers",style:{"max-height":this.isPremium?"420px":"220px"},on:{mouseleave:function(t){e.hideObservers(t)}}},e._l(e.observers,function(t){return a("div",{staticClass:"user-name"},[a("span",{},[t.chatIcon?a("span",{staticClass:"membership-icon"},["admin"===t.chatIcon?a("a",{attrs:{title:"Admin",target:"_blank",href:"https://www.chess.com/about"}},[a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"primary",name:"user-shield"}})],1):t.chatIcon.length>3?a("a",{class:["membership-level",t.chatIcon],attrs:{target:"_blank",href:"https://www.chess.com/about",title:t.chatIcon.replace(/\b\w/g,function(e){return e.toUpperCase()})}}):a("a",{staticClass:"chess-title ",attrs:{href:"https://www.chess.com/members/titled-players",target:"_blank"}},[e._v(e._s(t.chatIcon)+" ")])]):e._e(),e._v(" "),a("a",{staticClass:"username",on:{click:function(a){e.$bus.emit("showUserPopup",t.playerId,t.username,a)}}},[e._v(e._s(t.username))])])])}))])])},i=[]},oGpd:function(e,t){e.exports={component:"component_2vQDtQqQ"}},oZKA:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cg-admin-container",style:{opacity:e.opacity}},[a("div",{staticStyle:{display:"flex",padding:"5px"}},[a("button",{staticClass:"flex-button tall",on:{click:function(t){e.getGames()}}},[e._v("Undo all changes (reload list from server)")]),e._v(" "),a("button",{staticClass:"flex-button save tall",on:{click:function(t){e.save()}}},[e._v("Save new list with "+e._s(e.games.length)+" games to server")]),e._v(" "),a("font",{attrs:{size:"-1"}},[e._v("\n      Note: Upon saving, removed games will remain in the list if\n      players joined (but won't be reacreated anymore).\n      Existing games are not changed until recreated.")])],1),e._v(" "),a("i",[e._v("These are the games that are automatically created\n    (and recreated within 20s after starting).\n    "),a("br"),a("font",{attrs:{size:"-1"}})],1),e._v(" "),a("div",{staticClass:"g-list"},e._l(e.games,function(t,s){return a("div",{staticClass:"flex-row"},[a("a",{staticStyle:{color:"darkblue","margin-top":"4px"},on:{click:function(t){e.copy(s)}}},[e._v("Copy")]),e._v(" "),a("button",{staticClass:"flex-button",on:{click:function(t){e.del(s)}}},[e._v("Remove")]),e._v(" "),a("div",{staticClass:"json1line"},[e._v(e._s(JSON.stringify(t)))])])})),e._v(" "),a("a",{on:{click:function(t){e.showRawList=!e.showRawList}}},[e._v("import/export list")]),e._v(" "),a("button",{on:{click:function(t){e.games=[]}}},[e._v("empty the list")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showRawList,expression:"showRawList"}],staticStyle:{position:"absolute"}},[a("button",{on:{click:e.exportRawList}},[e._v("↓ stringify")]),e._v(" "),a("button",{on:{click:e.importRawList}},[e._v("↑ parse")]),e._v(" "),a("Br"),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.rawList,expression:"rawList"}],domProps:{value:e.rawList},on:{input:function(t){t.target.composing||(e.rawList=t.target.value)}}})],1),e._v(" "),a("hr"),e._v(" "),a("div",{staticStyle:{display:"flex","padding-left":"200px"}},[a("div",{staticStyle:{margin:"0 5px"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.addGame,expression:"addGame"}],staticStyle:{width:"280px","background-color":"#eee"},domProps:{value:e.addGame},on:{keyup:e.shrinkFen,blur:e.shrinkFen,input:function(t){t.target.composing||(e.addGame=t.target.value)}}}),e._v(" "),a("br"),e._v(" "),a("font",{attrs:{size:"-2"}},[e._v("\n        creatorId must be < 0 and unique. (=playerId for user created games. Hover over game titles in list to see ids)\n        "),a("br"),e._v("\n        chess960: 1-960 (given pos nr). or true -> will pick random nr. no startFen allowed (will be ignored).\n        "),a("br"),e._v("\n        Text must be valid JSON.\n        "),a("br"),e._v("\n        startFen will be converted to machine fen automatically on paste.\n      ")])],1),e._v(" "),a("div",[a("a",{staticStyle:{color:"darkblue"},on:{click:function(t){e.addGame=e.cgPresetMax}}},[e._v("All props")]),e._v(" "),a("br"),e._v(" "),a("a",{staticStyle:{color:"darkblue"},on:{click:function(t){e.addGame=e.cgPresetMin}}},[e._v("Required props")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("button",{staticClass:"flex-button",on:{click:function(t){e.add()}}},[e._v("Add to list")]),e._v(" "),a("br"),e._v(" "),a("div",[a("font",{attrs:{color:"darkred"},domProps:{innerHTML:e._s(e.error)}})],1)])])])},i=[]},oi3G:function(e,t,a){"use strict";var s=a("OxRA"),i=a("Sa/b"),n=a("XyMi");var r=function(e){a("767p")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-b7a44bca",null);t.a=o.exports},ou9o:function(e,t){e.exports={icon:"icon_1RQDgIvA_1",randomUser:"randomUser_4aFnZnXl_1",plus:"plus_3AP74fPH_1",closeIcon:"closeIcon_3a83Ka91_1"}},p1rt:function(e,t,a){"use strict";var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),o=a("jWDl"),l=a.n(o);t.a={name:"PanelChat",components:{},data:function(){return{iframeLoaded:!1}},mounted:function(){},methods:{testApi:function(){var e=this;return r()(i.a.mark(function t(){var a,s,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new l.a("production"),s="/v1/users/blocked?loginToken=75709ab05382139908ad3d151e14c642",e.prev=2,e.next=5,a.get(s);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},t,e,[[2,9]])}))()},onIframeLoaded:function(){var e=this;this.$store.getters.board.b.tweakChat("chat-app-iframe"),setTimeout(function(){e.iframeLoaded=!0},500)}}}},p8Rj:function(e,t){},pmr0:function(e,t,a){"use strict";var s=a("d7EF"),i=a.n(s),n=a("fZjL"),r=a.n(n),o=a("woOf"),l=a.n(o),c=a("BO1k"),u=a.n(c),h=a("mvHQ"),d=a.n(h),m=a("XbiD"),p=a("Mdvq"),v=a("qP1x"),f=a("iAG0"),g=a("z1to");t.a={components:{PlayerBoxes:m.a,Arrow:p.a,IconFont:v.a,PreGameArrows:f.a,CustomData:g.a},props:{boardWidth:0},data:function(){return{files:["a","b","c","d","e","f","g","h","i","j","k","l","m","n"],ranks:[14,13,12,11,10,9,8,7,6,5,4,3,2,1],squareSize:0,editPosition:!1,arrows:[],coordHelper:!1,previewMode:!1,visible:!1,loading:!0,capturedPieces:[[],[],[],[]],materialDiff1:[],materialDiff2:[],materialDiffPoints:""}},computed:{game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},mainScreen:function(){return this.$store.getters.mainScreen},ruleVariants:function(){return this.mainScreen&&!this.previewMode||!this.game.customData||!this.game.customData.ruleVariants?{}:this.game.customData.ruleVariants},blindfold:function(){return(!this.mainScreen||this.previewMode)&&this.ruleVariants.blindfold},ghostBoard:function(){return(!this.mainScreen||this.previewMode)&&this.ruleVariants.ghostBoard},deadWall:function(){return this.ruleVariants.deadWall},seat:function(){return this.$store.getters.seat},isPlaying:function(){return this.$store.getters.isPlaying},reconnecting:function(){return this.$store.getters.reconnecting},allowPlay:function(){return this.$store.getters.allowPlay},fourPlayer:function(){return this.$store.getters.fourPlayer},atMove:function(){return this.$store.getters.atMove},atEndOfGame:function(){return this.$store.getters.inVariation<0&&this.atMove===this.game.moves.length-1},analysisMode:function(){return this.$store.getters.analysisMode},lookingForGame:function(){return this.$store.getters.lookingForGame},loadingGame:function(){return this.$store.getters.loadingGame},showCoordinates:function(){return this.$store.getters.settings.showCoordinates},animationSpeed:function(){return this.$store.getters.settings.animationSpeed},board:function(){return this.$store.getters.board},b:function(){return this.board.b},colorNames:function(){return this.altColorScheme?this.b.altColorNames:this.b.colorNames},colors:function(){return this.colorNames.join("|").toLowerCase().split("|")},altColorScheme:function(){return this.$store.getters.settings.altColorScheme},blackAndWhite:function(){return this.$store.getters.settings.blackAndWhite},showTeammateArrows:function(){return this.$store.getters.settings.showTeammateArrows},showArrowsWhileObserving:function(){return!this.game.shared_ip_spectator&&(this.$store.getters.settings.showArrowsWhileObserving&&!this.isPlaybanned)},isPlaybanned:function(){return!!this.$store.getters.userPlayban&&Date.now()<new Date(this.$store.getters.userPlayban).getTime()},showGameOverModal:function(){return this.$store.getters.showGameOverModal},standingsAtBottom:function(){return("innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight)-this.boardWidth>67},showStandings:function(){if(this.previewMode||this.showGameOverModal||this.game.isLiveGame||this.editPosition||this.game.moves.length<1)return!1;var e=this.game.endFen,t=this.game.moves[this.game.moves.length-1].fen;return this.atEndOfGame&&e&&t&&e.split("-")[0]===t.split("-")[0]},ratingDiffs:function(){return this.game.rating1+" "+(this.game.ratingDiff1<0?"":"+")+this.game.ratingDiff1+"   "+this.game.rating2+" "+(this.game.ratingDiff2<0?"":"+")+this.game.ratingDiff2+"   "+this.game.rating3+" "+(this.game.ratingDiff3<0?"":"+")+this.game.ratingDiff3+"   "+this.game.rating4+" "+(this.game.ratingDiff4<0?"":"+")+this.game.ratingDiff4}},watch:{boardWidth:function(e){this.squareSize=Math.round(e/14),this.b.resize(this.squareSize,window.context.user.isPremium)},gameNr:function(e){this.arrows=[],this.previewMode=!1,this.$store.commit("setAllowPlay"),this.b.cancelPremove()},analysisMode:function(e){this.$store.commit("setAllowPlay"),this.previewMode=!1,this.gameNr||e||(this.arrows=[],this.b.uhlAll(),this.b.uhlChecks(),this.b.cancelPremove())},animationSpeed:function(e){this.b.animationSpeed=e},altColorScheme:function(){this.board.b.refreshColors()},blackAndWhite:function(){this.board.b.refreshColors()},deadWall:function(){this.board.b.refreshColors()},blindfold:function(){this.board.b.refreshBlindfold()},ghostBoard:function(){this.$forceUpdate()},showTeammateArrows:function(e){this.gameNr&&"teams"===this.game.gameType&&void 0!==this.seat&&this.$socket.emit("game",{gameNr:this.gameNr,action:"partnersArrowsSetting",showTeammateArrows:e,uid:window.context.user.id})},isPlaying:function(e){e&&"teams"===this.game.gameType&&!this.showTeammateArrows&&this.$socket.emit("game",{gameNr:this.gameNr,action:"partnersArrowsSetting",showTeammateArrows:!1,uid:window.context.user.id})}},mounted:function(){var e=this;window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.squareSize=Math.round(this.boardWidth/14),this.b.resize(this.squareSize,window.context.user.isPremium),this.b.reset(),this.b.makeDroppables(),this.$bus.$on("showPreview",this.showPreview),this.$bus.$on("editPosition",this.setEditPosition),this.b.animationSpeed=this.animationSpeed,this.visible||setTimeout(function(){e.visible=!0,e.loading=!1},220),this.board.b.store=this.$store,this.board.b.socket=this.$socket,this.board.b.forceBoardUpdate=this.forceUpdate,void 0!==this.seat&&this.b.rotate(this.seat),this.$options.sockets.clear_arrows=function(t){e.clearArrows(t)},this.$options.sockets.new_arrow=function(t){var a=t.from,s=t.to,i=t.seat;if((!e.isPlaying||i===e.seat||e.showTeammateArrows)&&(e.isPlaying||i===e.seat||e.showArrowsWhileObserving)){var n=e.colors[i];e.drawArrow(a,s,n,i)}},window.onfocus=function(){e.lastKeyDownEvent=""},window.onblur=function(){e.lastKeyDownEvent=""}},beforeUpdate:function(){},methods:{forceUpdate:function(){this.$forceUpdate()},showPreview:function(e,t,a,s){if(!this.loadingGame&&!this.isPlaying){if(e)this.restoreView=this.board.b.currplview,this.restoreGameType=this.game.gameType,this.restoreCustomData=d()(this.game.customData),this.previewMode=!0,t&&(this.board.setGameType(t),this.fourPlayer.setGameType(t)),s&&(this.game.customData=s,this.$store.commit("setRuleVariants",s.ruleVariants)),this.board.setPosition(e),void 0!==a&&this.board.b.rotate(a);else{if(!this.previewMode)return;if(this.previewMode=!1,this.editPosition)return;void 0===this.restoreView&&(this.restoreView=0),void 0===this.restoreGameType&&(this.restoreGameType="singles"),void 0===this.restoreRuleVariants&&(this.restoreRuleVariants={}),this.board.setGameType(this.restoreGameType),this.fourPlayer.setGameType(this.restoreGameType),this.game.customData=this.restoreCustomData?JSON.parse(this.restoreCustomData):{ruleVariants:{}},this.$store.commit("setRuleVariants",this.game.customData.ruleVariants),this.mainScreen?this.board.setPosition(this.fourPlayer.DEFAULT_FEN):this.$store.commit("gotoMove",{atMove:this.atMove}),this.board.b.refreshColors(),this.board.b.hlChecks(),void 0!==this.restoreView&&this.board.b.rotate(this.restoreView),clearTimeout(this.closePreviewTimer)}this.b.uhlAll(),this.board.b.hlChecks(),this.board.b.refreshColors()}},clearArrows:function(e){var t=[],a=!0,s=!1,i=void 0;try{for(var n,r=u()(this.arrows);!(a=(n=r.next()).done);a=!0){var o=n.value;o.seat!==e&&t.push(o)}}catch(e){s=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}this.arrows=t},drawArrow:function(e,t,a,s){var i=!1,n=[],r=!0,o=!1,l=void 0;try{for(var c,h=u()(this.arrows);!(r=(c=h.next()).done);r=!0){var d=c.value;d.from===e&&d.to===t&&d.seat===s?d.color!==a&&(i=!0):n.push(d)}}catch(e){o=!0,l=e}finally{try{!r&&h.return&&h.return()}finally{if(o)throw l}}this.arrows.length===n.length?this.arrows.push({from:e,to:t,color:a,seat:s,uniqueId:Date.now()}):(this.arrows=n,i&&this.arrows.push({from:e,to:t,color:a,seat:s,uniqueId:Date.now()}))},keyDown:function(e){if(this.lastKeyDownEvent=e,"true"!==e.target.contentEditable&&(/(checkbox|radio)/i.test(e.target.type)||!e.target.tagName.match(/input|textarea/i))){if(71===e.which&&e.shiftKey&&e.altKey){if(this.isPlaying&&this.game.isGhostBoard||this.mainScreen)return;var t=l()({},this.ruleVariants);return t.ghostBoard=!t.ghostBoard,void this.$store.commit("setRuleVariants",t)}if(66===e.which&&e.shiftKey&&e.altKey){if(this.isPlaying&&this.game.isBlindfold||this.mainScreen||this.game.shared_ip_spectator)return;var a=l()({},this.ruleVariants);return a.blindfold=!a.blindfold,void this.$store.commit("setRuleVariants",a)}if(!(e.ctrlKey||e.altKey||e.metaKey))switch(e.which){case 75:this.coordHelper=!this.coordHelper;break;case 87:var s=!this.$store.getters.settings.transparentArrows;this.$socket.emit("update-settings",{setting:"transparentArrows",value:s,uid:window.context.user.id});break;case 70:this.mainScreen||this.$store.commit("collapse",!this.$store.getters.collapse);break;case 67:this.$store.commit("showCustomGames",!this.$store.getters.showCustomGames)}}},keyUp:function(e){this.lastKeyDownEvent=null},mousedown:function(e){var t,a;switch(e.which){case 1:if(t=this.b.eventSquare(e),a=this.board.pcsq(t),this.board.b.premove&&(!a.length||parseInt(a.attr("data-player"))!==this.seat))return this.board.b.cancelPremove(),void(this.arrowFromSq=null);a.length&&!a.hasClass("dead")||this.arrows.length&&(e.shiftKey?this.clearArrows(this.seat):this.arrows=[],this.gameNr&&void 0!==this.seat&&this.$socket.emit("game",{gameNr:this.gameNr,action:"clear-arrows",seat:this.seat,uid:window.context.user.id}));break;case 2:break;case 3:if(this.board.b.premove)return this.board.b.cancelPremove(),void(this.arrowFromSq=null);(t=this.b.eventSquare(e))&&(this.arrowFromSq=t)}},mouseup:function(e){switch(e.which){case 1:break;case 3:if(this.mainScreen)return;if(this.b.dragging)return;if(this.arrowToSq=this.b.eventSquare(e),!this.arrowFromSq||!this.arrowToSq)return;var t="",a=!this.game.isLiveGame&&r()(this.$store.getters.observers).length<2,s=this.game.isLiveGame&&void 0!==this.seat&&this.game.eliminated[this.seat],i=this.gameNr&&void 0!==this.seat&&!a&&!s;i&&(t=this.colors[this.seat]);var n=this.lastKeyDownEvent;(void 0===this.seat||a)&&n&&n.which>=49&&n.which<=52&&(t=this.colors[n.which-49]),i?this.$socket.emit("game",{from:this.arrowFromSq,to:this.arrowToSq,seat:this.seat,gameNr:this.gameNr,action:"draw-arrow",uid:window.context.user.id}):this.drawArrow(this.arrowFromSq,this.arrowToSq,t,this.seat)}},onMouseMove:function(e){if(e.target){var t=e.target.id?e.target.id:e.target.parentNode.id;if(t&&t.match(/^[a-n]\d+$/)){var a=document.getElementById(t);if(a&&a.className.match(/white|black/)){var s=document.getElementsByClassName("coordHelper")[0];if(s&&s.parentNode&&s.parentNode.removeChild(s),this.coordHelper&&a){var i=document.getElementById(t);s=document.createElement("div");var n="rotate("+this.b.rotation+"deg)";s.className="coordHelper",s.style.color="#fff",s.style.textShadow="1px 1px 2px rgba(0, 0, 0, 0.5)",s.style.fontWeight=700,s.style.fontSize=Math.round(this.squareSize/1.8)+"px",s.style.zIndex="4",s.style.position="absolute",s.style.pointerEvents="none",s.style.top="1px",s.style.left="2px",s.style.transform=n,s.innerHTML=t,i.appendChild(s)}}}}},setEditPosition:function(e){this.editPosition=e},standings:function(e){return e.standings&&4===e.standings.length?e.standings:[1,2,3,4]},updateMaterialDiff:function(){if("teams"!==this.game.gameType)return[[],[]];for(var e={},t={},a=[0,1,2,3],s=0;s<a.length;s++){var i=a[s];if(0===i||i===this.fourPlayer.getTeammate()){var n=!0,r=!1,o=void 0;try{for(var l,c=u()(this.capturedPieces[i]);!(n=(l=c.next()).done);n=!0){var h=l.value;void 0===e[h.piece]&&(e[h.piece]=[]),e[h.piece].push(h)}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}}else{var d=!0,m=!1,p=void 0;try{for(var v,f=u()(this.capturedPieces[i]);!(d=(v=f.next()).done);d=!0){var g=v.value;void 0===t[g.piece]&&(t[g.piece]=[]),t[g.piece].push(g)}}catch(e){m=!0,p=e}finally{try{!d&&f.return&&f.return()}finally{if(m)throw p}}}}this.materialDiff1=[],this.materialDiff2=[],this.materialDiffPoints=0;for(var y=["Q","R","B","N","P"],_=0;_<y.length;_++){var b=y[_];if(e[b]||(e[b]=[]),t[b]||(t[b]=[]),e[b].length!==t[b].length)if(e[b].length>t[b].length)for(var w=t[b].length;w<e[b].length;w++)this.materialDiff1.push(e[b][w]),this.materialDiffPoints+=this.getMaterialValue(e[b][w]);else for(var R=e[b].length;R<t[b].length;R++)this.materialDiff2.push(t[b][R]),this.materialDiffPoints-=this.getMaterialValue(t[b][R])}0===this.materialDiffPoints?this.materialDiffPoints="":this.materialDiffPoints>0&&(this.materialDiffPoints="+"+this.materialDiffPoints)},getMaterialValue:function(e){return"P"===e.piece?1:"N"===e.piece?3:"B"===e.piece?4:"R"===e.piece?5:"Q"===e.piece?9:void 0},showXCoord:function(e,t){return e>"c"&&e<"l"&&(1===t||14===t)||(e<"d"||e>"k")&&(4===t||11===t)},showYCoord:function(e,t){return(t>11||t<4)&&("d"===e||"k"===e)||t>3&&t<12&&("a"===e||"n"===e)},squareClass:function(e,t){return this.fourPlayer.isCornerSquare(e.charCodeAt(0)-97,t-1)?"square-55d63 cornerSquare":e.charCodeAt(0)%2==1&&t%2==1||e.charCodeAt(0)%2==0&&t%2==0?"square-55d63 black-3c85d":"square-55d63 white-1e1d7"},squareStyle:function(e,t){var a={};return this.game.customData.ruleVariants.koth&&this.fourPlayer.isKothSquare(e.charCodeAt(0)-97,t-1)&&("g"===e&&(a["border-left"]=" 2px solid #fcfcfc"),"h"===e&&(a["border-right"]="2px solid #fcfcfc"),7===t&&(a["border-bottom"]=" 2px solid #fcfcfc"),8===t&&(a["border-top"]="    2px solid #fcfcfc")),a},materialDiffPieceStyle:function(e){var t=Math.round(this.squareSize/3)+"px";return{width:t,height:t}},pieceName:function(e){return"Q"===e?"Queen":"D"===e?"1pt Queen":"R"===e?"Rook":"B"===e?"Bishop":"N"===e?"Knight":"K"===e?"King":void 0},playRandomMove:function(){var e=this.fourPlayer.getRandomMove();this.$store.getters.board.b.onUserMove(e.from,e.to,!1,!1,!0)},rotatedSquareCoords:function(e,t){e=e.charCodeAt(0)-96;var a=void 0;return 90===this.b.rotation?(a=e,e=15-t,t=a):180===this.b.rotation?(e=15-e,t=15-t):270===this.b.rotation&&(a=e,e=t,t=15-a),[e=String.fromCharCode(e+96),t]},xCoordStyle:function(e,t){var a=this.rotatedSquareCoords(e,t),s=i()(a,2);e=s[0],t=s[1];var n=this.xCoordTop(e,t),r=this.xCoordLeft(e,t),o=this.xCoordRight(e,t),l=this.xCoordBottom(e,t);return this.scaleCoords(n,r,o,l)},yCoordStyle:function(e,t){var a=this.rotatedSquareCoords(e,t),s=i()(a,2);e=s[0],t=s[1];var n=this.yCoordTop(e,t),r=this.yCoordLeft(e,t),o=this.yCoordRight(e,t),l=this.yCoordBottom(e,t);return this.scaleCoords(n,r,o,l)},scaleCoords:function(e,t,a,s){var i=this.squareSize/50;return{top:e=void 0===e?"":Math.round(i*e)+"px",left:t=void 0===t?"":Math.round(i*t)+"px",right:a=void 0===a?"":Math.round(i*a)+"px",bottom:s=void 0===s?"":Math.round(i*s)+"px"}},xCoordTop:function(e,t){return t>7?0:void 0},xCoordBottom:function(e,t){return"a"===e&&4===t||"n"===e&&4===t||"k"===e&&1===t||"d"===e&&1===t?11:t<8?0:void 0},xCoordLeft:function(e,t){return e<"h"?1:void 0},xCoordRight:function(e,t){return e>"g"?1:void 0},yCoordTop:function(e,t){return"a"===e&&11===t||"n"===e&&11===t?14:"k"===e&&14===t||"d"===e&&14===t?14:t>7?0:void 0},yCoordBottom:function(e,t){return t<8?0:void 0},yCoordLeft:function(e,t){return"a"===e&&14===t?8:e<"h"?0:void 0},yCoordRight:function(e,t){return e>"g"?0:void 0}}}},pvfJ:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"section-container",class:this.$style.component},[this._t("default")],2)},i=[]},"q+oP":function(e,t,a){"use strict";var s=a("L5yA"),i=a("m2Zb"),n=a("XyMi");var r=function(e){a("PKgI")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-79d3a6da",null);t.a=o.exports},qKi9:function(e,t){},qP1x:function(e,t,a){"use strict";var s=a("HE7R"),i=a("2YhL"),n=a("XyMi");var r=function(e){this.$style=a("OJI4")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},qZYN:function(e,t,a){"use strict";var s=a("B/AG"),i=a("33mq"),n=a("XyMi");var r=function(e){a("dZHl"),this.$style=a("sRE0")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-0e01db16",null);t.a=o.exports},r5Ml:function(e,t,a){"use strict";var s=a("ymSa"),i=a("WSHl"),n=a("XyMi");var r=function(e){a("WtiW")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-0533ab14",null);t.a=o.exports},rvRZ:function(e,t){e.exports={icon:"icon_2hSiKENE_1"}},rxPB:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.$style.component},[this._t("default")],2)},i=[]},sRE0:function(e,t){e.exports={icon:"icon_3MMfGXnF_1"}},sSP5:function(e,t,a){"use strict";var s=a("h/TV"),i=a("hmYi"),n=a("XyMi");var r=function(e){a("Pc2Q"),this.$style=a("N9+A")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-4be208b5",null);t.a=o.exports},sYZk:function(e,t){e.exports={icon:"icon_2MeICyqa_1",randomUser:"randomUser_2ohpVKAR_1",plus:"plus_2VEnJrUP_1",closeIcon:"closeIcon_5VUW7FXr_1"}},"sca/":function(e,t){},so6P:function(e,t){},"t+Da":function(e,t,a){"use strict";var s=a("BVef"),i=a("RRlX"),n=a("XyMi");var r=function(e){a("auWG"),this.$style=a("ou9o")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-6a6eb554",null);t.a=o.exports},t800:function(e,t){e.exports={icon:"icon_3YYlLZl__1"}},tAm7:function(e,t){},tL07:function(e,t){},tNyc:function(e,t,a){"use strict";var s=a("dGNj"),i=a("7ta8"),n=a("XyMi");var r=function(e){this.$style=a("ys0V")},o=Object(n.a)(s.a,i.a,i.b,!1,r,null,null);t.a=o.exports},tS1M:function(e,t){},tc25:function(e,t,a){"use strict";var s=a("86OT");t.a={components:{Rules:s.a},data:function(){return{}},computed:{isPremium:function(){return window.context.user.isPremium}},methods:{}}},tlgK:function(e,t,a){"use strict";var s=a("xYYC"),i=a("HREK"),n=a("XyMi");var r=function(e){a("2S6m")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-2bf772e6",null);t.a=o.exports},u9lM:function(e,t){},uGO6:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"results-wrapper"},[a("select-dark",{directives:[{name:"show",rawName:"v-show",value:e.games.length,expression:"games.length"}],staticClass:"sortSelect",attrs:{options:"players"===e.show?e.playerSortOptions:e.sortOptions},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"games"===e.show,expression:"show === 'games'"}],staticClass:"foundGames"},[e._l(e.games,function(t){return a("div",{staticClass:"game-container",style:{opacity:e.visited[t.gameNr]?.84:1},attrs:{title:"Game #"+t.gameNr+" • "+e.ts2date(t.date)+" • "+t.termination},on:{click:function(a){e.joinGame(t.gameNr)},mouseenter:function(a){e.preview(t,a)},mouseover:function(a){e.preview(t,a)},mouseleave:e.cancelPreview}},[a("div",{staticClass:"game-title pointer"},[t.gameOver?e._e():a("span",[e._v("Live!")]),e._v(" "),t.gameOver?a("span",[e._v(e._s(e.ts2gamedate(t.date)))]):e._e(),e._v(" "),t.gameOver?a("span",[e._v(" • "+e._s(t.duration)+"'")]):e._e(),e._v(" "),t.gameOver?a("span",[e._v(" • "+e._s(t.plies))]):e._e(),t.gameOver?a("span",{staticClass:"superscript"},[e._v("p")]):e._e(),e._v(" "),a("span",[e._v(" • "+e._s("teams"===t.gameType?"Teams":"FFA")+" ")]),e._v(" "),t.result&&t.result.match(/abort/i)?a("span",[e._v(" • Aborted")]):t.result&&t.gameOver&&"teams"===t.gameType?a("span",[t.result.match(/1-0|0-1/)?a("span",[e._v(" • "+e._s(t.result))]):t.result.match(/draw/i)?a("span",[e._v(" • ½-½")]):e._e()]):e._e()]),e._v(" "),t.customData?a("div",{staticClass:"game-title",staticStyle:{display:"inline"}},[t.customData.timeControl?a("span",[e._v(e._s(t.customData.timeControl))]):e._e(),e._v(" "),t.customData.creatorId<0?a("span",[t.rated?e._e():a("span",[e._v(" • Casual")]),e._v("\n           • "+e._s(t.customData.title))]):a("span",[a("custom-data",{attrs:{data:t.customData,compact:!0}})],1)]):e._e(),e._v(" "),e._l(e.standings(t),function(s){return a("div",{staticClass:"game-details"},[a("div",{staticClass:"game-player",on:{mouseenter:function(a){e.preview(t,a)}}},[a("div",{class:{red:1===s,blue:2===s,yellow:3===s,green:4===s,"user-name":!0}},[a("span",{staticClass:"truncate180",class:{pointer:!0,playerWasSearched:e.playerWasSearched(t["uid"+s])},attrs:{tooltip:t["username"+s]},on:{click:function(a){e.$bus.emit("showUserPopup",t["uid"+s],t["username"+s],a)}}},[e._v(e._s(t["username"+s]))])]),e._v(" "),a("div",{staticClass:"rating"},[e._v("("+e._s(t["rating"+s])+")")]),e._v(" "),t.gameOver&&t.rated?a("div",{staticClass:"ratingDiff",class:{red:1===s&&e.playerWasSearched(t["uid"+s]),blue:2===s&&e.playerWasSearched(t["uid"+s]),yellow:3===s&&e.playerWasSearched(t["uid"+s]),green:4===s&&e.playerWasSearched(t["uid"+s])}},[e._v("\n            "+e._s(t["ratingDiff"+s]<0?"":"+")+e._s(t["ratingDiff"+s])+"\n          ")]):e._e(),e._v(" "),t.gameOver&&"teams"!==t.gameType?a("div",{staticClass:"points"},[e._v(e._s(t["points"+s]))]):e._e()])])})],2)}),e._v(" "),a("div",{staticClass:"bottom-spacer"})],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"players"===e.show,expression:"show === 'players'"}],staticClass:"foundPlayers"},[e._l(e.players,function(t){return a("div",[a("div",{staticStyle:{float:"left",clear:"left",padding:"4px","margin-top":"-4px"}},[a("a",{attrs:{href:"https://www.chess.com/member/"+t.username,target:"_blank"}},[a("img",{staticStyle:{"max-width":"50px","max-height":"50px"},attrs:{src:t.avatarUrl}})])]),e._v(" "),a("div",{staticStyle:{float:"left",padding:"4px","margin-top":"0px"}},[a("a",{staticStyle:{float:"left"},attrs:{tooltip:t.username},on:{click:function(a){e.$bus.emit("showUserPopup",t.uid,t.username,a)}}},[e._v(e._s(t.username))]),e._v("\n         ("+e._s(Math.round(t.numGames))+")\n        "),a("span",{staticStyle:{"font-size":"11px"}},[e._v("\n          Seen "+e._s(e.ts2date(t.lastSeen))+"\n          "),a("br"),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.banstatus(t))}}),e._v(" "),a("span",{staticStyle:{color:"lightblue",display:"inline-block","max-width":"250px"}},[e._v(e._s(t.adminNotes))])])])])}),e._v(" "),a("div",{staticClass:"bottom-spacer"})],2)],1)},i=[]},uIGC:function(e,t,a){"use strict";var s=a("SQvp"),i=a("oZKA"),n=a("XyMi");var r=function(e){a("aC/b"),this.$style=a("74BU")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-41f5e35c",null);t.a=o.exports},uXmL:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-container",[a("modal-content",[a("section-container",{staticStyle:{"z-index":"9"}},[a("section-content",[a("div",{staticClass:"play-container"},[a("center",[a("div",{staticClass:"close-modal-container"},[a("icon-font",{class:e.$style.closeIcon,attrs:{family:"chess",theme:"primary",name:"x"},nativeOn:{click:function(t){return e.hidePlayModal(t)}}})],1),e._v(" "),a("div",{staticClass:"modal-head"},[a("h1",[e._v("4 Player Chess")])]),e._v(" "),a("div",{staticClass:"type-container"},[a("div",[a("form-label",{attrs:{label:"Type"}}),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"type-selector",attrs:{required:!0},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?a:a[0]},e.changeType]}},[a("option",{attrs:{value:"singles"},domProps:{selected:!0}},[e._v("Free-for-All")]),e._v(" "),a("option",{attrs:{value:"teams"}},[e._v("Teams")]),e._v(" "),a("option",{attrs:{value:"invitational"}},[e._v("Create custom game")]),e._v(" "),a("option",{attrs:{value:"analysis-board"}},[e._v("Analysis Board")])])],1),e._v(" "),"teams"===e.selected||"singles"===e.selected?a("div",{staticClass:"rules",on:{click:e.showRules}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"circle-question"}}),e._v(" "),a("a",{staticClass:"bluelink"},[e._v("Rules")])],1):e._e()]),e._v(" "),"teams"===e.selected?a("div",{staticClass:"four-game-options"},[a("div",{staticClass:"current-user-info"},[a("img",{staticClass:"selected-player-avatar",attrs:{src:e.profileAvatar}}),e._v(" "),a("span",{staticClass:"four-profile-username"},[e._v("\n                  "+e._s(e.profileUsername)+"\n                ")])]),e._v(" "),a("icon-font",{class:e.$style.plus,attrs:{family:"chess",theme:"primary",name:"plus"}}),e._v(" "),a("div",{staticClass:"current-user-info"},[a("div",{staticClass:"random-user-container"},[a("icon-font",{class:e.$style.randomUser,attrs:{family:"chess",theme:"primary",name:"user-question"}})],1),e._v(" "),a("form-input",{staticClass:"invite-by-username",attrs:{defaultValue:e.inviteUsername,placeholder:"Random",size:"small",enterAction:this.invitePlayer,color:"white"},model:{value:e.inviteUsername,callback:function(t){e.inviteUsername=t},expression:"inviteUsername"}}),e._v("\n                 \n                "),a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"users"},on:{click:function(t){e.showAvailableFriends=!e.showAvailableFriends}}}),e._v(" "),e.showAvailableFriends&&e.availableFriends.length?a("div",{staticStyle:{position:"absolute"}},[a("div",{staticClass:"autocomplete-wrapper"},e._l(e.availableFriends,function(t){return a("div",{staticClass:"autocompleteUsername",on:{click:function(a){e.selectFriend(t)}}},[e._v(e._s(t.username))])}))]):e._e(),e._v(" "),a("div",[a("p",[e._v("Play with a random partner or enter a username.")])])],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"singles"!==e.selected||e.$store.getters.rulesAcknowledged,expression:"selected !== 'singles' || $store.getters.rulesAcknowledged"}],staticClass:"modal-foot"},[e.lookingForGame?e._e():a("form-button",{attrs:{size:"x-large",theme:"primary"},nativeOn:{click:function(t){return e.playFourPlayer(t)}}},["analysis-board"===e.selected?a("span",[e._v("Start")]):"invitational"===e.selected?a("span",[e._v("Create Custom Game")]):e.inviteUsername&&"teams"===e.selected?a("span",[e._v("Invite")]):a("span",[e._v("Play")])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"singles"===e.selected&&!e.$store.getters.rulesAcknowledged,expression:"selected === 'singles' && !$store.getters.rulesAcknowledged"}]},[a("div",{staticClass:"type-container"},[a("div",{staticClass:"rules_changes_container"},[a("p",[a("strong",[e._v("4 Player Chess FFA Rules Changes:")])]),e._v(" "),a("p",{staticClass:"rules_changes"},[e._v("1. "),a("strong",[a("span",{staticClass:"red_text"},[e._v("IMPORTANT:")])]),e._v(" Players must think independently. You are not allowed to attempt to influence another player's decisions.\n                      It is "),a("strong",[e._v("prohibited")]),e._v(" to suggest moves and/or coordinate attacks using chat\n                        (or other means of communication) "),a("strong",[e._v("during")]),e._v(" FFA 4PC games!\n                        Also players may not discuss blunders which can be fixed, but may discuss\n                        what already happened and cannot be undone. If you break this rule you will be "),a("strong",[e._v("chat-banned")]),e._v(" or\n                        even "),a("strong",[e._v("play-banned")]),e._v('! Examples of prohibited phrases: "Check red", "Let\'s attack green together",\n                        "I won\'t take your queen", "Mind your rook", "Protect your pawn", "Mate in 2", "Resign!", "Don\'t resign".\n                        You can use these and similar phrases in chat '),a("strong",[e._v("after")]),e._v(" a game, but "),a("strong",[e._v("not during")]),e._v(" a game.")]),e._v(" "),a("p",{staticClass:"rules_changes"},[e._v("2. "),a("strong",[a("span",{staticClass:"red_text"},[e._v("IMPORTANT:")])]),e._v(" It is "),a("strong",[e._v("prohibited")]),e._v(' to ask other players to give you points!\n                        For example: "Give me 7 points and I will resign.", "Just 5 points, ple-e-ease!"\n                        You can be '),a("strong",[e._v("chat-banned")]),e._v(" for doing this.")]),e._v(" "),a("p"),"teams"===e.selected||"singles"===e.selected?a("div",{staticClass:"rules",on:{click:e.showRules}},[a("a",{staticClass:"bluelink"},[e._v("4PC Rules (Full Text)")])]):e._e(),e._v(" "),a("p")]),e._v(" "),a("div",{staticClass:"modal-foot"},[a("form-button",{attrs:{size:"x-large",theme:"primary"},nativeOn:{click:function(t){return e.acknowledgeRules(t)}}},[a("span",[e._v("I acknowledge the rules")])])],1)])])])],1)])],1)],1)],1)},i=[]},uclK:function(e,t){},utHB:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("bOdI"),r=a.n(n),o=a("45FZ");t.a={components:{SelectDark:o.a},props:{},data:function(){return{reports:[],reporters:[],reported:[],statusFilter:-1,reportersFilter:"",reportedFilter:"",minReported:5,statusFilterOptions:[{label:"New or Updated",value:-1},{label:"New",value:0},{label:"Updated",value:1},{label:"Closed",value:5},{label:"Ignored",value:6}],minReportedFilterOptions:[{label:"1x",value:1},{label:"2x",value:2},{label:"3x",value:3},{label:"4x",value:4},{label:"5x",value:5},{label:"6x",value:6},{label:"7x",value:7},{label:"8x",value:8},{label:"9x",value:9}],reportStatusOptions:[{label:"New",value:0},{label:"Update",value:1},{label:"Close",value:5},{label:"Ignore",value:6},{label:"-> Delete forever <-",value:"delete"}],byReporter:[],FilterOptions:[]}},watch:{userReports:function(){this.reports=this.userReports,this.filterReports()},viewReports:function(e){e&&(this.statusFilter=-1,this.filterReports())}},computed:{userReports:function(){return this.$store.getters.userReports},userIsAdmin:function(){return this.$store.getters.userIsAdmin},game:function(){return this.$store.getters.game},viewReports:function(){return this.$parent.viewReports}},mounted:function(){var e=this;this.userIsAdmin&&(document.getElementById("userReports").scrollTop=localStorage.getItem("reportsScrollPos"),this.$store.getters.board.b.resizeableReports(),this.$options.sockets.update_report_success=function(){e.saveScrollPos(),e.findReports()})},methods:{close:function(){this.$emit("close"),localStorage.setItem("reportsScrollPos",0)},findReports:function(){var e=parseInt(this.statusFilter);-1===e&&(e={$lt:2}),this.$socket.emit("get-reports",{params:{status:e},minReported:this.minReported,uid:window.context.user.id})},updateReport:function(e,t,a){var s={_id:e._id,set:r()({},t,a),uid:window.context.user.id,username:window.context.user.username};this.$socket.emit("update-report",s)},prompt:function(e,t){return window.prompt(e,t)},saveScrollPos:function(){localStorage.setItem("reportsScrollPos",document.getElementById("userReports").scrollTop)},keyUpFilter:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.filterReports()},800)},filterReports:function(){var e=this;this.$nextTick(function(){return e.$refs.filter.focus()});var t=[],a=[],s=this.$refs.filter.value.trim(),n=[],r={},o=this.filterToRegex(this.$refs.filter.value),l=!0,c=!1,u=void 0;try{for(var h,d=i()(this.userReports);!(l=(h=d.next()).done);l=!0){var m=h.value,p=!0;if(s.length>2){var v=m.username;if(m.gameNr&&(v+=" #"+m.gameNr),m.players){var f=!0,g=!1,y=void 0;try{for(var _,b=i()(m.players);!(f=(_=b.next()).done);f=!0){v+=" "+_.value.username}}catch(e){g=!0,y=e}finally{try{!f&&b.return&&b.return()}finally{if(g)throw y}}}v+=" "+m.reasons,v+=" "+m.lastModifiedBy,v+=" "+m.message,v=(v+=" "+m.notes).replace(/[\r\n]/g,""),o.test(v)||(p=!1)}if(this.reportersFilter&&m.username!==this.reportersFilter&&(p=!1),this.reportedFilter){var w=!0,R=!1,N=void 0;try{for(var B,k=i()(m.players);!(w=(B=k.next()).done);w=!0){if(B.value.username===this.reportedFilter)break;p=!1}}catch(e){R=!0,N=e}finally{try{!w&&k.return&&k.return()}finally{if(R)throw N}}}p&&n.push(m),t[m.username]||(t[m.username]=0),t[m.username]++;var C=!0,x=!1,S=void 0;try{for(var P,K=i()(m.players);!(C=(P=K.next()).done);C=!0){var M=P.value,T=m.username+M.username;a[M.username]||(a[M.username]=0),r[T]||a[M.username]++,r[T]=!0}}catch(e){x=!0,S=e}finally{try{!C&&K.return&&K.return()}finally{if(x)throw S}}}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}this.reports=n,this.reporters=[],this.reported=[];var $=[];for(var Q in t)$.push([Q,t[Q]]);$.sort(function(e,t){return t[1]-e[1]});var A=!0,I=!1,D=void 0;try{for(var V,O=i()($);!(A=(V=O.next()).done);A=!0){var F=V.value;this.reporters.push({label:F[0]+" ("+F[1]+")",value:F[0]})}}catch(e){I=!0,D=e}finally{try{!A&&O.return&&O.return()}finally{if(I)throw D}}for(var G in $=[],a)$.push([G,a[G]]);$.sort(function(e,t){return t[1]-e[1]});var z=!0,E=!1,L=void 0;try{for(var U,q=i()($);!(z=(U=q.next()).done);z=!0){var H=U.value;this.reported.push({label:H[0]+" ("+H[1]+")",value:H[0]})}}catch(e){E=!0,L=e}finally{try{!z&&q.return&&q.return()}finally{if(E)throw L}}this.$forceUpdate()},ts2date:function(e){var t=new Date(e);return t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+", "+t.getFullYear()},ts2datetime:function(e){return this.ts2date(e)+" "+this.ts2time(e)},ts2time:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())},filterToRegex:function(e){var t="^";1===e.split(/"/g).length-1&&(e=e.replace('"',""));var a=e.match(/"[^"]+"/g);if(null!==a)for(var s=0;s<a.length;s++){if(e=e.replace(a[s],""),a[s]=a[s].replace(/"/g,""),0!==a[s].length)t+="(?=.*"+a[s].replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+")"}for(var i=e.split(/\s+/),n=0;n<i.length;n++){if(0!==i[n].length)t+="(?=.*"+i[n].replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+")"}return new RegExp(t,"i")}}}},v8ry:function(e,t){e.exports={"icon-medium":"icon-medium_2oqA50aF_1","icon-tiny":"icon-tiny_2MQcrqXY_1",icon:"icon_2wW9darI_1"}},vgYD:function(e,t){e.exports={icon:"icon_xG7747vy_1"}},wEhC:function(e,t){e.exports={icon:"icon_1ktk06ja_1"}},wLAW:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-popup visible auto-height",attrs:{id:"user-popup"},on:{mouseleave:e.closePopup,mouseover:e.keepDetailsOpen}},[e.loading&&!e.haveData?a("div",{staticClass:"nb-spinner"}):e._e(),e._v(" "),e.haveData?a("div",{staticClass:"popup-inner"},[a("div",{staticClass:"profile auto-height"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{rowspan:"2"}},[a("span",{staticClass:"avatar-50"},[a("a",{style:{"pointer-events":e.popupData.player.anonymous?"none":""},attrs:{href:"https://www.chess.com/member/"+e.popupData.player.username,target:"_blank"}},[a("span",{staticClass:"user-status status-50",class:"status-"+e.popupData.callback.onlineStatus}),e._v(" "),a("img",{staticClass:"playerimg",attrs:{src:e.popupData.player.avatarUrl,width:"50",height:"50"}})])])]),e._v(" "),a("td",{attrs:{colspan:"2",rowspan:"1"}},[a("div",{staticClass:"user-tagline flex-row",class:{"has-title":e.popupData.player.chessTitle,"has-title-long":e.popupData.player.chessTitle&&3===e.popupData.player.chessTitle,"has-country":e.popupData.callback.countryId}},[e.popupData.player.chessTitle?a("a",{staticClass:"user-chess-title",attrs:{href:"https://www.chess.com/members/titled-players",target:"_blank"}},[e._v(e._s(e.popupData.player.chessTitle)+" ")]):e._e(),e._v(" "),a("a",{staticClass:"username popup-username truncate152",style:{"pointer-events":e.popupData.player.anonymous?"none":""},attrs:{href:"https://www.chess.com/member/"+e.popupData.player.username,target:"_blank",title:e.userTitle}},[e._v("\n                  "+e._s(e.popupData.player.username)+"\n                ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.popupData.player.anonymous&&e.popupData.callback.countryId,expression:"!popupData.player.anonymous && popupData.callback.countryId"}],staticClass:"country-flag-small",class:"flag-"+e.popupData.callback.countryId,attrs:{title:e.popupData.callback.countryName}}),e._v(" "),e.popupData.player.isStaff?a("a",{staticClass:"membership-level staff",attrs:{target:"_blank",title:"Staff",href:"https://www.chess.com/about"}}):e.popupData.player.isDiamond?a("a",{staticClass:"membership-level diamond",attrs:{target:"_blank",title:"Diamond Membership",href:"https://www.chess.com/membership?c=icon"}}):e.popupData.player.isPlatinum?a("a",{staticClass:"membership-level platinum",attrs:{target:"_blank",title:"Platinum Membership",href:"https://www.chess.com/membership?c=icon"}}):e.popupData.player.isGold?a("a",{staticClass:"membership-level gold",attrs:{target:"_blank",title:"Gold Membership",href:"https://www.chess.com/membership?c=icon"}}):e._e(),e._v(" "),e.isAdmin?a("icon-font",{class:e.$style["icon-small"],attrs:{family:"chess",theme:"primary",title:"Admin",name:"user-shield"}}):e._e()],1)])]),e._v(" "),a("tr",[a("td",{staticClass:"not-first",attrs:{rowspan:"1",colspan:"2"}},[a("div",{staticClass:"user-tagline"},[e.popupData.player.inGame?a("span",{staticClass:"isPlaying pointer",attrs:{title:"Watch"},on:{click:function(t){e.joinGame(e.popupData.player.inGame)}}},[e._v(e._s(e.popupData.player.isOnline?"Playing":"Disconnected"))]):e.popupData.player.observingGame?a("span",{staticClass:"isObserving pointer",on:{click:function(t){e.joinGame(e.popupData.player.observingGame)}}},[e._v("Observing "+e._s(e.game.gameNr&&e.popupData.player.observingGame!==e.game.gameNr?"another game":""))]):e.popupData.player.isOnline?a("span",{staticClass:"isOnline"},[e._v("Online")]):a("span",{staticClass:"small"},[e._v("Last seen "+e._s(e.timeSince(e.popupData.player.lastSeen)))]),e._v(" "),a("br"),e._v(" "),e.popupData.player.anonymous?e._e():a("span",{staticClass:"small"},[e._v("First seen "+e._s(e.firstSeen))])])])]),e._v(" "),a("tr",{style:{"pointer-events":e.popupData.player.anonymous?"none":""}},[a("td",{staticClass:"pointer",attrs:{rowspan:"1",title:"Find games"},on:{click:function(t){e.findGames()}}},[a("span",{staticClass:"bold",attrs:{title:e.numGamesTitle()}},[e._v("\n                "+e._s(e.popupData.player.numGames)+"\n              ")]),e._v("\n              Games\n            ")]),e._v(" "),a("td",{staticClass:"pointer",attrs:{rowspan:"1",title:"Find FFA games"},on:{click:function(t){e.findGames("singles")}}},[a("span",{attrs:{title:e.numGamesTitle("singles")}},[e._v("\n                "+e._s(e.popupData.player.numGamesSingles)+"\n              ")]),e._v("\n              FFA\n            ")]),e._v(" "),a("td",{staticClass:"pointer",attrs:{rowspan:"1",title:"Find Teams games"},on:{click:function(t){e.findGames("teams")}}},[a("span",{attrs:{title:e.numGamesTitle("teams")}},[e._v("\n                "+e._s(e.popupData.player.numGamesTeams)+"\n              ")]),e._v("\n              Teams\n            ")])]),e._v(" "),a("tr",[a("td",{attrs:{rowspan:"1"}},[e._v("Rating")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",title:e.popupData.player.rating?e.popupData.player.rating.toFixed(1):""}},[e._v(e._s(e.rating+(e.ratingDeviation>120?"?":""))+" "),e.userIsAdmin&&!e.playerIsUser?a("span",{staticClass:"change",on:{click:function(t){e.rating=e.prompt("Change FFA Rating?",e.rating)}}},[e._v("Change")]):e._e()]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",title:e.popupData.player.teamRating?e.popupData.player.teamRating.toFixed(1):""}},[e._v(e._s(e.teamRating+(e.teamRatingDeviation>120?"?":""))+" "),e.userIsAdmin&&!e.playerIsUser?a("span",{staticClass:"change",on:{click:function(t){e.teamRating=e.prompt("Change Teams Rating?",e.teamRating)}}},[e._v("Change")]):e._e()])]),e._v(" "),e.userIsAdmin||e.playerIsUser?a("tr",[a("td",{attrs:{rowspan:"1"}},[e._v("Deviation")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1"}},[e._v(e._s(e.ratingDeviation)+" "),e.userIsAdmin&&!e.playerIsUser?a("span",{staticClass:"change",on:{click:function(t){e.ratingDeviation=e.prompt("Change FFA Deviation?",e.ratingDeviation)}}},[e._v("Change")]):e._e()]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1"}},[e._v(e._s(e.teamRatingDeviation)+" "),e.userIsAdmin&&!e.playerIsUser?a("span",{staticClass:"change",on:{click:function(t){e.teamRatingDeviation=e.prompt("Change Teams Deviation?",e.teamRatingDeviation)}}},[e._v("Change")]):e._e()])]):e._e(),e._v(" "),a("tr",[a("td",{attrs:{rowspan:"1"}},[e._v("Latest")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1"}},[e._v(e._s(e.lastPlayedSingles))]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1"}},[e._v(e._s(e.lastPlayedTeams))])]),e._v(" "),e._m(0),e._v(" "),e.userIsAdmin?a("tr",{staticClass:"space-row admin-row"},[a("td",{attrs:{rowspan:"1",colspan:"3"}},[e._v(" ")])]):e._e(),e._v(" "),e.userIsAdmin&&"No"===e.banned?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("Chat ban")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[e._v(e._s(e.chatban)+" "),a("span",{staticClass:"change",on:{click:function(t){e.chatban=e.prompt("Chat-ban this player for how many DAYS? to unban, enter 0.",7)}}},[e._v("Change")])])]):e._e(),e._v(" "),e.userIsAdmin&&"No"===e.banned?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("Play ban")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[e._v(" "+e._s(e.playban)+" "),a("span",{staticClass:"change",on:{click:function(t){e.playban=e.prompt("Play-ban this player for how many DAYS? to unban, enter 0.",7)}}},[e._v("Change")])])]):e._e(),e._v(" "),e.userIsAdmin&&"No"===e.banned?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("Report ban")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[e._v(" "+e._s(e.reportban)+" "),a("span",{staticClass:"change",on:{click:function(t){e.reportban=e.prompt("Report-ban this player for how many DAYS? to unban, enter 0.",7)}}},[e._v("Change")])])]):e._e(),e._v(" "),e.userIsAdmin?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("Lock out")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[e._v(e._s(e.banned)+" "),a("span",{staticClass:"change",on:{click:function(t){e.banned=e.confirm('Lock this player out of four player chess? To un-ban, click "Cancel"!')}}},[e._v("Change")])])]):e._e(),e._v(" "),e.userIsAdmin?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("PlayerID")]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[e._v(e._s(e.popupData.player.playerId))])]):e._e(),e._v(" "),e.userIsAdmin?a("tr",{staticClass:"admin-row"},[a("td",{attrs:{rowspan:"1"}},[e._v("Reason")]),e._v(" "),a("td",{attrs:{rowspan:"1",colspan:"2",title:e.popupData.player.adminNotes}},[a("textarea",{ref:"adminNotes",attrs:{placeholder:"Shown to player"}},[e._v(e._s(e.popupData.player.adminNotes))]),e._v(" "),a("div",{staticClass:"change",staticStyle:{display:"inline-flex",transform:"translateY(-3px)"},on:{click:function(t){e.adminNotes=e.$refs.adminNotes.value}}},[e._v("Save")])])]):e._e(),e._v(" "),e.userIsAdmin?a("tr",{staticClass:"admin-row",style:{"pointer-events":e.popupData.player.anonymous?"none":""}},[a("td",{attrs:{rowspan:"1"}},[e._v("\n              IP Address"),a("br"),e._v(" "),a("span",{staticClass:"change",on:{click:function(t){e.$bus.emit("searchIP",e.popupData.player.lastIPs)}}},[e._v("Find any")])]),e._v(" "),a("td",{staticClass:"bold",attrs:{rowspan:"1",colspan:"2"}},[a("div",{staticStyle:{"max-height":"47px","overflow-y":"scroll"}},e._l(e.popupData.player.lastIPs,function(t){return t?a("span",[e._v("\n                  "+e._s(t)+"\n                  "),a("span",{staticClass:"change",on:{click:function(a){e.$bus.emit("searchIP",t)}}},[e._v("Find")]),e._v(" "),a("br")]):e._e()}))])]):e._e()])])]),e._v(" "),a("div",{staticClass:"actions"},[a("ul",{},[e.isPlaying||e.popupData.player.anonymous?e._e():a("li",{staticClass:"pointer",attrs:{title:"Find Games"},on:{click:function(t){e.findGames()}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"chess-board-folder"}})],1),e._v(" "),!e.$store.getters.disable_play&&e.popupData.player.isOnline&&!e.popupData.player.inGame&&!e.playerIsUser&&!e.isPlaying&&new Date(e.popupData.player.playban).getTime()<Date.now()?a("li",{staticClass:"pointer",attrs:{tooltip:"Invite to a teams game"},on:{click:function(t){e.invitePlayer()}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"chess-board-plus"}})],1):e._e(),e._v(" "),e.playerIsUser||e.popupData.player.anonymous?e._e():a("li",{attrs:{tooltip:"Send Message"}},[a("a",{attrs:{href:"https://www.chess.com/messages/compose/"+e.popupData.player.username,target:"_blank"}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"mail-plus"}})],1)]),e._v(" "),e.playerIsUser||e.popupData.player.anonymous?e._e():a("li",{staticClass:"pointer"},[a("span",{attrs:{tooltip:"Report"},on:{click:e.showReportForm}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"circle-danger"}})],1)]),e._v(" "),!e.game.gameNr||e.playerIsUser||e.popupData.player.anonymous?e._e():a("li",{staticClass:"pointer"},[a("span",{attrs:{tooltip:"Mute chat"},on:{click:function(t){e.toggleMute(e.popupData.player.playerId)}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:e.muted[e.popupData.player.playerId]?"sound-off":"sound-on"}})],1)]),e._v(" "),e.userIsSuperUser?a("li",{staticClass:"pointer"},[e.isAdmin?a("span",{attrs:{tooltip:"Revoke Admin"},on:{click:function(t){e.isAdmin=!e.confirm("Revoke Admin?")}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"user-broken-chain"}})],1):a("span",{attrs:{tooltip:"Make Admin"},on:{click:function(t){e.isAdmin=e.confirm("Make Admin?")}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"primary",name:"user-shield-plus"}})],1)]):e._e()]),e._v(" "),e.playerIsUser?a("div",{staticClass:"ping"},[a("span",[e._v("Ping "+e._s(e.ping())+" ms")]),a("br"),e._v(" "),a("span",[e._v("Server "+e._s(e.popupData.player.serverLag)+" ms")])]):e._e()])]):e._e()])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",{staticClass:"space-row"},[t("td",{attrs:{rowspan:"1",colspan:"3"}},[this._v(" ")])])}]},wN2i:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"four-container",style:{left:e.containerLeft+"px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"callbackdata"}}),e._v(" "),e.connected?e._e():a("auth"),e._v(" "),a("display-notification"),e._v(" "),a("display-admin-notification"),e._v(" "),this.invitations.length>0?a("partner-request"):e._e(),e._v(" "),a("user-popup",{attrs:{x:e.userPopupLeft,y:e.userPopupTop,containerLeft:e.containerLeft,loading:e.loadingPopup}}),e._v(" "),e.userIsAdmin?a("view-reports",{directives:[{name:"show",rawName:"v-show",value:e.viewReports,expression:"viewReports"}],on:{close:e.closeReports,show:e.showReports}}):e._e(),e._v(" "),a("div",{style:{position:"absolute",top:e.windowWidth<960?"35px":""}},[e.showNewGameButton?a("new-game"):e._e(),e._v(" "),e.reconnecting||!e.lookingForGame||e.mainScreen&&!e.showSettingsModal?e._e():a("pre-game-arrows",{attrs:{minimize:!0}}),e._v(" "),e.isPlaying||e.reconnecting||e.disable_play||e.gameStarting||e.isPlaybanned()?e._e():a("custom-games"),e._v(" "),!e.userIsAdmin||e.isPlaying||e.reconnecting?e._e():a("cg-admin",{directives:[{name:"show",rawName:"v-show",value:e.showCgAdmin,expression:"showCgAdmin"}]}),e._v(" "),e.mainScreen?a("div",{staticClass:"announcement"},[e.disable_play?a("div",{staticClass:"announcement-content"},[e.game.gameNr?e._e():a("span",[e._v("The server will go down for an update when all games have completed.")])]):e.announcement?a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showAnnouncement,expression:"!showAnnouncement"}],staticStyle:{"text-decoration":"underline","text-decoration-style":"dotted","white-space":"nowrap"},domProps:{innerHTML:e._s(e.announcement.split("___")[0])},on:{mouseenter:function(t){e.showAnnouncement=!0}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAnnouncement,expression:"showAnnouncement"}],staticClass:"announcement-content",domProps:{innerHTML:e._s(e.announcement.split("___")[1])},on:{mouseleave:function(t){e.showAnnouncement=!1}}})]):e._e()]):e._e()],1),e._v(" "),a("div",{staticClass:"topIcons",style:{right:e.topIconsRight+"px"}},[e.userIsAdmin?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying,expression:"!isPlaying"}],staticClass:"reportsIcon",on:{click:function(t){e.showCgAdmin=!e.showCgAdmin,e.$store.commit("showCustomGames",!0)}}},[a("icon-font",{class:e.$style["icon-medium"],attrs:{family:"chess",theme:e.showCgAdmin?"secondary":"neutral",title:"Custom games administration",name:"queen-wreath"}})],1):e._e(),e._v(" "),e.userIsAdmin?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying,expression:"!isPlaying"}],staticClass:"reportsIcon",on:{click:e.showReports}},[a("icon-font",{class:e.$style["icon-medium"],attrs:{family:"chess",theme:e.viewReports?"secondary":"neutral",name:"flag"}}),e._v(" "),e.userReports.length?a("div",{staticClass:"counter"},[e._v("("+e._s(e.userReports.length)+")")]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"settingsIcon",on:{click:e.toggleSettingsModal}},[a("icon-font",{class:e.$style["icon-medium"],attrs:{family:"chess",theme:e.showSettingsModal?"secondary":"neutral",name:"circle-gearwheel"}}),e._v(" "),e._e()],1),e._v(" "),e.mainScreen?e._e():a("div",{staticClass:"collapse",on:{click:function(t){e.$store.commit("collapse",!e.collapse)}}},[a("icon-font",{class:e.$style.icon,attrs:{family:"chess",theme:"neutral",name:e.collapse?"nav-collapsed":"nav-expanded"}})],1)]),e._v(" "),a("div",{staticClass:"four-board-wrapper",style:{width:e.wrapperWidth}},[a("invitational-modal",{directives:[{name:"show",rawName:"v-show",value:!e.reconnecting&&e.showInvitationalModal,expression:"!reconnecting && showInvitationalModal"}]}),e._v(" "),a("div",{staticClass:"four-board-container noSelect",style:{right:e.sidebarWidth+"px",top:e.top+"px"}},[a("board",{attrs:{boardWidth:e.boardWidth}}),e._v(" "),a("game-buttons",{directives:[{name:"show",rawName:"v-show",value:!e.reconnecting&&!e.gameStarting,expression:"!reconnecting && !gameStarting"}],staticClass:"four-buttons-wrapper"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.reconnecting,expression:"!reconnecting"}]},[this.showPlayModal?a("play-modal",{directives:[{name:"show",rawName:"v-show",value:!e.lookingForGame,expression:"!lookingForGame"}]}):e._e(),e._v(" "),a("game-over-modal",{directives:[{name:"show",rawName:"v-show",value:e.showGameOverModal,expression:"showGameOverModal"}]}),e._v(" "),e.showReportModal?a("report-modal",{attrs:{player:e.playerToReport},on:{close:e.closeReportForm}}):e._e(),e._v(" "),a("settings-modal",{directives:[{name:"show",rawName:"v-show",value:e.showSettingsModal,expression:"showSettingsModal"}]})],1)],1),e._v(" "),a("div",{staticClass:"four-sidebar-container",style:{width:e.sidebarWidth+"px"}},[e.isPremium?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:e.mainScreen||!e.collapse,expression:"mainScreen || !collapse"}]},[e.firstTimeConnect?a("div",[a("iframe",{attrs:{src:"https://www.youtube.com/embed/JrRVm9lRpfM?modestbranding=1&showinfo=0&controls=false",width:"350",height:"265",frameborder:"0"}})]):a("div",{staticClass:"r2d2-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.adsBlocked,expression:"adsBlocked"}]},[a("div",{staticClass:"r2d2-placeholder"},[e._v("\n              Support Four Player Chess\n              "),a("br"),e._v(" "),e._m(0),e._v(" "),"unknown"===e.adsBlocked?a("a",{attrs:{href:"https://www.chess.com/membership"}},[e._v("Remove ads")]):e._e(),e._v(" "),e.adsBlocked&&"unknown"!==e.adsBlocked?a("div",{ref:"adsBlocked",staticClass:"adsBlocked"},[e._v("\n                We notice you are using an ad blocker.\n                Please consider supporting Chess.com.\n                "),a("br"),e._v(" Thanks!\n                "),a("icon-font",{class:e.$style["icon-tiny"],attrs:{family:"chess",theme:"neutral'",name:"x"},on:{click:function(t){e.$refs.adsBlocked.style.display="none"}}})],1):e._e()])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.adsBlocked,expression:"!adsBlocked"}],staticClass:"r2d2"},[a("short-top-sidebar-ad",{attrs:{provider:e.provider,"slot-id":e.slotId}})],1)])]),e._v(" "),a("board-panel",{directives:[{name:"show",rawName:"v-show",value:!e.mainScreen&&!e.collapse,expression:"!mainScreen && !collapse"}],attrs:{id:"boardPanel"}}),e._v(" "),a("sidebar-container",{directives:[{name:"show",rawName:"v-show",value:e.mainScreen,expression:"mainScreen"}]}),e._v(" "),e.isPremium?e._e():a("div",{staticClass:"r2d2-wrapper"},[a("div",{staticClass:"r2d2-container2"},[a("short-top-sidebar-ad",{directives:[{name:"show",rawName:"v-show",value:!e.mainScreen&&e.collapse&&!e.adsBlocked,expression:"!mainScreen && collapse && !adsBlocked"}],attrs:{provider:e.provider,"slot-id":e.slotId2}}),e._v(" "),!e.mainScreen&&e.collapse&&e.adsBlocked?a("div",{staticClass:"r2d2-placeholder2"},[a("a",{attrs:{href:"https://www.chess.com/membership"}})]):e._e()],1)])],1)],1),e._v(" "),a("div",{staticClass:"statusbar",style:{left:e.containerLeft+"px"}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.showUserPopup(e.uid,e.username,t)}}},[e._v(e._s(e.username))]),e._v(" "),e.userIsAdmin?a("span",{attrs:{title:e.statusTitle}},[e._v(" | Admin")]):e._e(),e._v(" "),e.userIsSuperUser?a("span",{attrs:{title:"Superuser"}},[e._v(" | ∞ ")]):e._e(),e._v(" "),e.isChatbanned()?a("span",{staticClass:"pointer",on:{click:function(t){e.showBanInfo=!0}}},[e._v(" | Chat-banned")]):e._e(),e._v(" "),e.isPlaybanned()?a("span",{staticClass:"pointer",on:{click:function(t){e.showBanInfo=!0}}},[e._v(" | Play-banned")]):e._e(),e._v(" "),a("span",{staticClass:"pointer",on:{click:function(t){e.showFeedback=!0}}},[e._v(" | Forum")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBanInfo,expression:"showBanInfo"}],staticClass:"statusDetails",on:{mouseleave:function(t){e.showBanInfo=!1}}},[e.isChatbanned()?a("span",[e._v("Chat-banned until "+e._s(e.ts2dayntime(e.$store.getters.userChatban)))]):e._e(),e._v(" "),e.isChatbanned()?a("br"):e._e(),e._v(" "),e.isPlaybanned()?a("span",[e._v("Play-banned until "+e._s(e.ts2dayntime(e.$store.getters.userPlayban)))]):e._e(),e._v(" "),e.userBanReason?a("br"):e._e(),e._v(" "),e.userBanReason?a("span",[e._v("Reason: "+e._s(e.userBanReason))]):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFeedback,expression:"showFeedback"}],staticClass:"statusDetails",on:{mouseleave:function(t){e.showFeedback=!1}}},[a("a",{attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/4-player-chess"}},[e._v("Forum")]),e._v(" "),a("br"),e._v(" "),a("a",{attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/feedback-about-the-new-4pc-version"}},[e._v("Feedback & Suggestions")]),e._v(" "),a("br"),e._v(" "),a("a",{attrs:{target:"_blank",href:"https://www.chess.com/clubs/forum/view/list-of-known-bugs"}},[e._v("Report a bug")])])])],1)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"upgrade",attrs:{href:"https://www.chess.com/membership"}},[t("div",{staticStyle:{"margin-top":"-6px"}},[this._v("Go Premium")])])}]},wtbN:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("Xxa5"),r=a.n(n),o=a("exGp"),l=a.n(o),c=a("mvHQ"),u=a.n(c),h=a("//Fk"),d=a.n(h),m=a("IPwc"),p=a("HvXk"),v=a("oi3G"),f=a("Qe5k"),g=a("gcDo"),y=a("kcVJ"),_=a("04O3"),b=a("djFo"),w=a("8hbL"),R=a("6lcz"),N=a("9nGj"),B=a("sSP5"),k=a("Esv/"),C=a("z7bA"),x=a("t+Da"),S=a("82sP"),P=a("qP1x"),K=a("iAG0"),M=a("hfJ9"),T=a("8s4c"),$=a("uIGC"),Q=a("jodq"),A=new(a.n(Q).a)("production"),I=function(e){return new d.a(function(t){return setTimeout(t,e)})};t.a={name:"Container",components:{Auth:m.a,DisplayNotification:p.a,DisplayAdminNotification:v.a,PartnerRequest:g.a,PlayModal:y.a,InvitationalModal:_.a,GameOverModal:b.a,Board:w.a,BoardPanel:R.a,ShortTopSidebarAd:M.a,SidebarContainer:N.a,NewGame:f.a,GameButtons:B.a,UserPopup:k.a,ViewReports:C.a,ReportModal:x.a,SettingsModal:S.a,IconFont:P.a,PreGameArrows:K.a,CustomGames:T.a,CgAdmin:$.a},props:{},data:function(){return{userPopupLeft:0,userPopupTop:0,loadingPopup:!1,showReportModal:!1,playerToReport:null,containerLeft:"auto",boardWidth:0,top:0,topIconsRight:375,sidebarWidth:355,showFeedback:!1,showBanInfo:!1,showAnnouncement:!1,windowWidth:1e3,wrapperWidth:"100%",viewReports:!1,showCgAdmin:!1,firstTimeConnect:!1,isPageLoad:!0,provider:"tmsads",slotId:"div-gpt-ad-1521066958099-1",slotId2:"div-gpt-ad-1521066958099-0",slotId3:"div-gpt-ad-1544035633774-0"}},computed:{userReports:{get:function(){return this.userIsAdmin?this.$store.getters.userReports:[]},set:function(e){this.$store.commit("setUserReports",e)}},connected:function(){return this.$store.getters.connected},reconnecting:function(){return this.$store.getters.reconnecting},isPremium:function(){return window.context.user.isPremium},adsBlocked:function(){return this.$store.getters.adsBlocked},gameStarting:function(){return this.$store.getters.gameStarting},mainScreen:function(){return this.$store.getters.mainScreen},collapse:function(){return this.$store.getters.collapse},isPlaying:function(){return this.$store.getters.isPlaying},lookingForGame:function(){return this.$store.getters.lookingForGame},showGameOverModal:function(){return this.$store.getters.showGameOverModal},showPlayModal:function(){return this.$store.getters.showPlayModal},showSettingsModal:function(){return this.$store.getters.showSettingsModal},showInvitationalModal:function(){return this.$store.getters.showInvitationalModal},invitations:function(){return this.$store.getters.invitations},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},atMove:function(){return this.$store.getters.atMove},activeTab:function(){return this.$store.getters.activeTab},searchformState:function(){return this.$store.getters.searchformState},userIsAdmin:function(){return this.$store.getters.userIsAdmin},userIsSuperUser:function(){return this.$store.getters.userIsSuperUser},userPlayban:function(){return this.$store.getters.userPlayban},userChatban:function(){return this.$store.getters.userChatban},userBanReason:function(){return this.$store.getters.userBanReason},isDev:function(){return!1},disable_play:function(){return this.$store.getters.disable_play},announcement:function(){return this.$store.getters.announcement},username:function(){return window.context.user.username},uid:function(){return window.context.user.id},basePath:function(){return"4-player-chess"},showNewGameButton:function(){return!(this.isPlaying||this.reconnecting||this.gameStarting||this.showPlayModal||this.showInvitationalModal||this.disable_play||this.$store.getters.createdGame||this.$store.getters.joinedGames.length)},statusTitle:function(){var e=u()(window.context.user,null,2);return 9510244===window.context.user.id?e:""}},watch:{isPlaying:function(e){e&&this.closePopup()},mainScreen:function(e){this.closePopup(),this.doResize(),e||this.$store.commit("showCustomGames",!1)},userPlayban:function(){var e=this,t=new Date(this.$store.getters.userPlayban).getTime()-Date.now();t>0&&t<72e5&&setTimeout(function(){e.showBanInfo=!1,e.$forceUpdate()},t)},userChatban:function(){var e=this,t=new Date(this.$store.getters.userChatban).getTime()-Date.now();t>0&&t<72e5&&setTimeout(function(){e.showBanInfo=!1,e.$forceUpdate()},t)},collapse:function(){this.doResize()},gameNr:function(e){this.gameChanged=!0,this.pushState("gameNr")},activeTab:function(){this.pushState("activeTab")},searchformState:function(){this.pushState("searchformState")},atMove:function(e){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(30);case 2:if(!t.gameChanged){e.next=5;break}return t.gameChanged=!1,e.abrupt("return");case 5:t.pushState("atMove");case 6:case"end":return e.stop()}},e,t)}))()}},created:function(){},mounted:function(){var e=this;return l()(r.a.mark(function t(){var a,s,i,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){e.isPageLoad=!1},3e3),window.addEventListener("popstate",e.onPopState),e.$store.commit("setSocket",e.$socket),e.$store.commit("setStore",e.$store),e.$bus.$on("showUserPopup",e.showUserPopup),e.$bus.$on("submitReport",e.submitReport),e.$bus.$on("showReportForm",e.showReportForm),e.$bus.$on("showBanInfo",function(){e.showBanInfo=!0}),e.calcWidths(),window.addEventListener("resize",e.calcWidths),e.$options.sockets.show_video=function(){e.firstTimeConnect=!0},e.$options.sockets.reload_page=function(){e.isPlaying?e.$store.commit("showNotification","Server updated complete."):setTimeout(function(){window.location.href=window.location.href},e.isDev?1:Math.round(15e3*Math.random()))},a=0;case 13:if(e.connected||!(a++<99)){t.next=18;break}return t.next=16,I(100);case 16:t.next=13;break;case 18:if(e.connected){t.next=20;break}return t.abrupt("return");case 20:(s=window.location.href.match(/g=(\d+)-?(\d+)?/))&&(i=parseInt(s[1]),n=void 0!==s[2]?parseInt(s[2]):void 0,i&&e.loadGame(i,n));case 22:case"end":return t.stop()}},t,e)}))()},methods:{pushState:function(e){var t=this;clearTimeout(this.pushStateTimer),this.pushStateTimer=setTimeout(function(){if(!t.gotostate||t.gotostate.g!==t.gameNr||t.gotostate.t!==t.activeTab||t.gotostate.search&&t.gotostate.search!==t.searchformState){var a={g:t.gameNr,t:t.activeTab},s=t.basePath;t.gameNr?(s+="?g="+t.gameNr,"atMove"!==e||t.game.isLiveGame||(a.at=1+t.$store.getters.atMove,s+="-"+(1+t.$store.getters.atMove))):s+="?t="+t.activeTab;var n="4 Player Chess";if(t.gameNr){n+=" - Game #"+t.gameNr+" - ";var r=!0,o=!1,l=void 0;try{for(var c,u=i()(t.game.players);!(r=(c=u.next()).done);r=!0){n+=c.value.username+", "}}catch(e){o=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw l}}n=n.replace(/, $/,"")}else{n+=" - "+t.activeTab.substr(0,1).toUpperCase()+t.activeTab.substr(1);var h=JSON.parse(t.searchformState);"archive"===t.activeTab&&(h.username?(n+=" - "+h.username,s+="&p="+h.username):h.playerId&&(n+=" - "+h.playerId),h.gameType&&(n+=" - "+("singles"===h.gameType?"FFA":"Teams"),s+="&gameType="+h.gameType),"games"===h.queryType&&(h.daysBack&&(n+=" - "+h.fromDays+"-"+h.toDays,s+="&daysBack="+h.fromDays+"-"+h.toDays),h.gameNr&&(n+=" - #"+h.gameNr)))}if("archive"===t.activeTab&&(a.search=t.searchformState),t.isPageLoad)return t.isPageLoad=!1,void(history.state&&history.state.search);"atMove"===e?history.replaceState(a,n,s):history.pushState(a,n,s),t.$store.getters.settings.streaming||(document.title=n+" - Chess.com")}},300)},onPopState:function(e){this.isPlaying||(this.gotostate=e.state,e.state.g&&e.state.g!==this.gameNr?this.loadGame(e.state.g,e.state.at):!e.state.g&&this.gameNr&&this.$store.commit("exitGame",this.gameNr),e.state.t&&(this.$store.commit("setActiveTab",e.state.t),"archive"===e.state.t&&"{}"!==e.state.search&&e.state.search!==this.searchformState&&this.$bus.emit("restoreSearch",JSON.parse(e.state.search))))},loadGame:function(e,t){this.$store.commit("showCustomGames",!1),this.$store.commit("setLoadingGame",!0),this.$socket.emit("game",{gameNr:e,action:"join",atMove:t,uid:window.context.user.id})},doResize:function(){var e=this.sidebarWidth;this.mainScreen?this.sidebarWidth=355:this.isPremium?this.sidebarWidth=this.collapse?5:355:this.sidebarWidth=this.collapse?164:355,e!==this.sidebarWidth&&setTimeout(function(){window.dispatchEvent(new Event("resize"))},30)},calcWidths:function(){var e="innerWitdh"in window?window.innerWitdh:document.documentElement.offsetWidth,t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,a=this.sidebarWidth-5,s=10;e>960&&(s+=45),e>1249&&(s+=110);var i=e-s-a;for(i*=.76,(i=Math.round(i))>t-60&&(i=t-60),i>e-40&&(i=e-40),i<350&&(i=350);i%14!=0&&i>0;)i--;this.boardWidth=i;var n=(t-i)/2;this.top=n<45?22:n,s+i+120+a>e?(this.wrapperWidth=i+120+a+"px",this.topIconsRight=e-(s+i+120)):(this.wrapperWidth="100%",this.topIconsRight=30+this.sidebarWidth),this.windowWidth=e,this.containerLeft=s},isPlaybanned:function(){return!!this.$store.getters.userPlayban&&Date.now()<new Date(this.$store.getters.userPlayban).getTime()},isChatbanned:function(){return!!this.$store.getters.userChatban&&Date.now()<new Date(this.$store.getters.userChatban).getTime()},closeReportForm:function(){this.showReportModal=!1},closeReports:function(){this.viewReports=!1},showReportForm:function(e){this.playerToReport=e,this.showReportModal=!0,this.closePopup()},closePopup:function(){this.$store.commit("closePopup")},showReports:function(){this.userIsAdmin&&(this.viewReports=!this.viewReports,this.userReports.length||this.$socket.emit("get-reports",{params:{status:{$lt:2}},minReported:5,uid:window.context.user.id}))},toggleSettingsModal:function(){this.$store.commit("showSettingsModal",!this.showSettingsModal)},showUserPopup:function(e,t,a){var s=this;if(e){a.preventDefault(),a.stopPropagation(),this.userPopupLeft=a.clientX,this.userPopupTop=a.clientY,this.loadingPopup=!0,setTimeout(function(){s.loadingPopup=!1},3e3);var i={playerId:e};e===window.context.user.id&&(i.requestSentTimestamp=Date.now()),this.$socket.emit("search-playerDetails",i),this.doPopupCallback(t)}},doPopupCallback:function(e){var t=this;return l()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A.getPopup(e);case 2:s=a.sent,t.$store.commit("setPopupCallbackData",s);case 4:case"end":return a.stop()}},a,t)}))()},submitReport:function(e){this.$socket.emit("submit-report",{report:e,uid:window.context.user.id})},ts2dayntime:function(e){var t=new Date(e);return t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+" "+t.getFullYear()+", "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}}}},xJD8:function(e,t,a){"use strict";var s=a("9WXl"),i=a("RkFL"),n=a("q+oP");t.a={name:"FourPlayerChess",components:{Container:s.a,Banned:i.a,Maintenance:n.a},data:function(){return{}},computed:{isBanned:function(){return this.$store.getters.isBanned},maintenance:function(){return this.$store.getters.maintenance}},mounted:function(){}}},xYYC:function(e,t,a){"use strict";var s=a("86OT");t.a={name:"PanelRules",components:{Rules:s.a}}},y639:function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return p});var s=a("fZjL"),i=a.n(s),n=a("Zrlr"),r=a.n(n),o=a("wxAW"),l=a.n(o),c=a("7+uW"),u=a("L97e"),h=a("XmSz"),d=new(function(){function e(){var t=this;r()(this,e),this.providers={},this.layout="play",c.default.nextTick(function(){t.initProviderScripts()})}return l()(e,[{key:"registerAdSlot",value:function(e,t){e in this.providers||(this.providers[e]=[]),-1===this.providers[e].indexOf(t)&&this.providers[e].push(t)}},{key:"setLayout",value:function(e){this.layout=e}},{key:"initProviderScripts",value:function(){var e=this;i()(this.providers).forEach(function(t,a){u.a.init(e.layout)})}}]),e}()),m={provider:{type:String,default:"tmsads"},slotId:{type:String,required:!0},goPremiumLink:{type:String,default:"https://chess.com/"}},p={iframeAd:h.a}},yFHP:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),n=a("fZjL"),r=a.n(n),o=a("qP1x");t.a={components:{IconFont:o.a},props:{x:0,y:0,containerLeft:0,loading:!1},data:function(){return{mouseoutTimer:null,muted:{}}},watch:{x:function(e){(e-=295)<this.containerLeft+10&&(e=this.containerLeft+10),document.getElementById("user-popup").style.left=e+"px"},y:function(e){var t=this.userIsAdmin?366:182;e>window.innerHeight-t&&(e=window.innerHeight-t),e-=20,document.getElementById("user-popup").style.top=e+"px"},gameNr:function(){this.updateMute()},haveData:function(){this.$parent.loadingPopup=!1}},computed:{haveData:function(){return r()(this.popupData.player).length>0},popupData:function(){return this.$store.getters.popupData},playerIsUser:function(){return this.popupData.player.playerId===window.context.user.id},userIsAdmin:function(){return this.$store.getters.userIsAdmin&&!this.$store.getters.settings.streaming},userIsSuperUser:function(){return this.$store.getters.userIsSuperUser},lookingForGame:function(){return this.$store.getters.lookingForGame},game:function(){return this.$store.getters.game},gameNr:function(){return this.game.gameNr},isPlaying:function(){return this.$store.getters.isPlaying},userTitle:function(){var e=this.popupData.callback,t=this.popupData.player.username;if((e.firstName||e.lastName)&&(t+=" • "+e.firstName+" "+e.lastName+"\n"),e.areFriends&&(t+=" • Friends\n"),e.bestRating&&e.bestRatingType){var a=e.bestRatingType.replace("lightning","blitz");a=a.charAt(0).toUpperCase()+a.slice(1),t+=" • Best rating "+e.bestRating+" ("+a+")\n"}return t+=" • Joined "+e.joinDate+"\n"},lastPlayedSingles:function(){return this.ts2date(this.popupData.player.lastPlayedSingles[0])},lastPlayedTeams:function(){return this.ts2date(this.popupData.player.lastPlayedTeams[0])},firstSeen:function(){if(!this.popupData.player.createdAt||"1970-01-01T00:00:00.000Z"===this.popupData.player.createdAt)return"-";var e=new Date(this.popupData.player.createdAt);return this.ts2date(e.getTime())},rating:{get:function(){return Math.round(this.popupData.player.rating)},set:function(e){if(!e)return!1;e.toString().match(/^\d{3,4}\.?\d*$/)?(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,rating:e}),this.$store.commit("closePopup")):this.$notify(e+" is not a valid rating")}},ratingDeviation:{get:function(){return Math.round(this.popupData.player.ratingDeviation)},set:function(e){if(!e)return!1;e.toString().match(/^\d{2,4}\.?\d*$/)?(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,ratingDeviation:e}),this.$store.commit("closePopup")):this.$notify(e+" is not a valid deviation")}},teamRating:{get:function(){return Math.round(this.popupData.player.teamRating)},set:function(e){if(!e)return!1;e.toString().match(/^\d{3,4}$/)?(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,teamRating:e}),this.$store.commit("closePopup")):this.$notify(e+" is not a valid rating")}},teamRatingDeviation:{get:function(){return Math.round(this.popupData.player.teamRatingDeviation)},set:function(e){if(!e)return!1;e.toString().match(/^\d{2,4}$/)?(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,teamRatingDeviation:e}),this.$store.commit("closePopup")):this.$notify(e+" is not a valid deviation")}},chatban:{get:function(){var e=new Date(this.popupData.player.chatban).getTime();return 0===e?"never":e>Date.now()?this.ts2datetime(e):"expired "+this.ts2date(e)},set:function(e){void 0!==e&&null!==e&&!1!==e&&(isNaN(parseFloat(e))||parseFloat(e)<0?this.$notify(e+" is not a valid number of hours"):(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,chatban:e}),this.$store.commit("closePopup")))}},playban:{get:function(){var e=new Date(this.popupData.player.playban).getTime();return 0===e?"never":e>Date.now()?""+this.ts2datetime(e):"expired "+this.ts2date(e)},set:function(e){void 0!==e&&null!==e&&!1!==e&&(isNaN(parseFloat(e))||parseFloat(e)<0?this.$notify(e+" is not a valid number of days"):(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,playban:e}),this.$store.commit("closePopup")))}},reportban:{get:function(){var e=new Date(this.popupData.player.reportban).getTime();return 0===e?"never":e>Date.now()?""+this.ts2datetime(e):"expired "+this.ts2date(e)},set:function(e){void 0!==e&&null!==e&&!1!==e&&(isNaN(parseFloat(e))||parseFloat(e)<0?this.$notify(e+" is not a valid number of days"):(this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,reportban:e}),this.$store.commit("closePopup")))}},banned:{get:function(){return this.popupData.player.banned?"Yes":"No"},set:function(e){this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,banned:e}),this.$store.commit("closePopup")}},adminNotes:{get:function(){return this.popupData.player.adminNotes},set:function(e){this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,adminNotes:e}),this.$store.commit("closePopup")}},isAdmin:{get:function(){return this.popupData.player.isAdmin},set:function(e){return(!e||!this.popupData.player.isAdmin)&&(!(!e&&!this.popupData.player.isAdmin)&&void this.$socket.emit("update-playerDetail",{uid:window.context.user.id,playerId:this.popupData.player.playerId,isAdmin:e}))}}},mounted:function(){this.$bus.$on("updateMute",this.updateMute)},methods:{ping:function(){return this.popupData.player.requestSentTimestamp?Date.now()-this.popupData.player.requestSentTimestamp-this.popupData.player.serverLag:0},numGamesTitle:function(e){var t="";e?"singles"===e?t=this.popupData.player.numAbortsSingles+" aborted. \n":"teams"===e&&(t=this.popupData.player.numAbortsTeams+" aborted. \n"):t=this.popupData.player.numAborts+" aborted. \n";var a=this.popupData.player.lastAborts;if(a&&a.length&&!e){var s=!0,n=!1,r=void 0;try{for(var o,l=i()(a);!(s=(o=l.next()).done);s=!0){var c=o.value;t+=this.timeSince(c)+"\n"}}catch(e){n=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}}return t},updateMute:function(){if(this.gameNr){var e=localStorage.getItem("muted_"+this.gameNr);this.muted=e?JSON.parse(e):{}}else this.muted={}},keepDetailsOpen:function(){clearTimeout(this.mouseoutTimer)},closePopup:function(){var e=this;clearTimeout(this.mouseoutTimer),this.mouseoutTimer=setTimeout(function(){e.$store.commit("closePopup")},400)},confirm:function(e){return window.confirm(e)},prompt:function(e,t){return window.prompt(e,t)},findGames:function(e){this.popupData.player.anonymous||(this.$bus.emit("findPlayerGames",this.popupData.player,e),this.$store.commit("closePopup"))},invitePlayer:function(){this.popupData.player.anonymous||this.$socket.emit("invite-player",{playerId:this.popupData.player.playerId,username:this.popupData.player.username,uid:window.context.user.id})},joinGame:function(e){e&&e!==this.game.gameNr&&(this.isPlaying||this.$store.commit("joinGame",e))},toggleMute:function(e){this.muted[e]=!this.muted[e],this.$bus.emit("toggleMute",e,this.muted[e]),this.$forceUpdate()},showReportForm:function(){this.popupData.player.anonymous||(this.isReportbanned()?this.$store.commit("showNotification","Sorry, you have sent too many unjustified reports."):(this.$bus.emit("showReportForm",this.popupData.player),this.$store.commit("closePopup")))},isReportbanned:function(){return!!this.$store.getters.userReportban&&Date.now()<new Date(this.$store.getters.userReportban).getTime()},ts2date:function(e){if(!e)return"-";var t="function"==typeof e.getMonth?e:new Date(e);return t.getFullYear()<1971?"-":t.toLocaleString("en-us",{month:"short"})+" "+t.getDate()+", "+t.getFullYear()},ts2datetime:function(e){return this.ts2date(e)+" "+this.ts2time(e)},ts2time:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())},timeSince:function(e){if(!e)return"-";var t=new Date(e),a=Math.floor((new Date-t.getTime())/1e3),s=Math.floor(a/31536e3);return s>1?s>30?"-":s+" years ago":(s=Math.floor(a/2592e3))>1?s+" months ago":1===(s=Math.floor(a/86400))?"a day ago":s>1?s+" days ago":1===(s=Math.floor(a/3600))?"an hour ago":s>1?s+" hours ago":(s=Math.floor(a/60))>1?s+" minutes ago":s<0?"-":" a minute ago"}}}},yI0o:function(e,t,a){"use strict";var s,i,n,r,o=a("Xxa5"),l=a.n(o),c=a("exGp"),u=a.n(c),h=a("BO1k"),d=a.n(h),m=a("//Fk"),p=a.n(m),v=a("k9Ku"),f=(a.n(v),a("Q6D/")),g=a.n(f),y=a("fVsE"),_=a.n(y),b=a("8e8d"),w=a.n(b),R=a("AII2"),N=a.n(R),B=this,k=console.log.bind(console),C=function(e){return new p.a(function(t){return setTimeout(t,e)})},x=new N.a,S=new w.a(x),P=new g.a(x),K=new _.a(P,"#board"),M={dkw:!1,enPassant:!1,teammate:2,koth:!1,nCheck:!1,deadWall:!1,ghostBoard:!1,blindfold:!1,oppX:0,chess960:"",antichess:!1,captureTheKing:!1,promotionRank:0,promoteTo:""},T={defaultTime:{timeControl:1,timeIncrement:15,isDelay:!0},game:{players:[{},{},{},{}],gameType:null!=localStorage.getItem("gameType")?localStorage.getItem("gameType"):"singles",startFen:P.DEFAULT_FEN,customData:{ruleVariants:M},pgnAttributes:[],moves:[],movesList:[],variations:[],variationsList:[],chat:[]},atMove:-1,inVariation:-1,atVariationMove:-1,seat:void 0,allowPlay:!1,premove:!1,observers:[],rematchReady:[],loadingGame:!1,timersStarted:!1,clientTimeOffset:0,showGameOverModal:!1,analysisMode:!1,socket:null,gameStarting:!1,soundVolume:90},$={board:function(e){return K},fourPlayer:function(e){return P},pgnUtils:function(e){return S},fenUtils:function(e){return x},game:function(e){return e.game},seat:function(e){return e.seat},allowPlay:function(e){return e.allowPlay},atMove:function(e){return e.atMove},inVariation:function(e){return e.inVariation},atVariationMove:function(e){return e.atVariationMove},observers:function(e){return e.observers},rematchReady:function(e){return e.rematchReady},timersStarted:function(e){return e.timersStarted},loadingGame:function(e){return e.loadingGame},clientTimeOffset:function(e){return e.clientTimeOffset},showGameOverModal:function(e){return e.showGameOverModal},gameStarting:function(e){return e.gameStarting},analysisMode:function(e){return e.analysisMode},mainScreen:function(e){return!e.game.gameNr&&!e.analysisMode},defaultTime:function(e){return e.defaultTime},isPlaying:function(e){return e.game.isLiveGame&&!e.game.gameOver&&void 0!==e.seat&&!e.game.eliminated[e.seat]},playerclock:function(e){return function(t){var a=60*e.defaultTime.timeControl*1e3;if(!e.game.isLiveGame||!e.timersStarted)return a;var s=e.game.times[t];if(void 0===s)return a;if(e.game.turn!==t&&!e.game.gameOver)return 0!==s&&s<100&&(s=100),s;var i=Date.now()-e.clientTimeOffset-e.game.lastmoveTimestamp,n=1e3*e.game.timeControlIncrement,r=e.game.timeControlIsDelay&&e.game.timeControlIncrement>0;return r&&i>n?s-=i-n:r||(s-=i),!e.game.gameOver&&0!==s&&s<100?100:s}}},Q=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/notify.mp3"],volume:T.soundVolume/100}),A=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/move-self.mp3"],volume:T.soundVolume/100}),I=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/promote.mp3"],volume:T.soundVolume/100}),D=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/capture.mp3"],volume:T.soundVolume/100}),V=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/move-check.mp3"],volume:T.soundVolume/100}),O=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/castle.mp3"],volume:T.soundVolume/100}),F=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/shoutout.mp3"],volume:T.soundVolume/100}),G=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/decline.mp3"],volume:T.soundVolume/100}),z=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/game-end.mp3"],volume:T.soundVolume/100}),E=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/game-start.mp3"],volume:T.soundVolume/100}),L=new v.Howl({src:["https://images.chesscomfiles.com/chess-themes/sounds/_MP3_/default/tenseconds.mp3"],volume:T.soundVolume/100}),U=function(e){i=setTimeout(function(){e!==T.game.gameNr||T.game.gameOver||void 0===T.seat||T.game.turn!==T.seat||(Q.volume(1),L.volume(1),Q.play(),L.play(),Q.volume(T.soundVolume/100),L.volume(T.soundVolume/100),s=setTimeout(function(){e!==T.game.gameNr||T.game.gameOver||void 0===T.seat||T.game.turn!==T.seat||(Q.play(),L.play())},1e4))},1e4)},q=function(e){var t=S.parsePgn(e,function(e){return T.store.commit("showNotification",e)}),a=t.attributes,s=t.startFen,i=t.moves,n=t.variations,r=t.ruleVariants;P.reset(),P.setEmitMoves(!1),P.setPlayMatingMoves(!1),T.game.pgnAttributes=a,T.game.moves=[],T.game.movesList=[],T.game.variations=[],T.game.variationsList=[],T.atMove=-1,T.inVariation=-1,T.atVariationMove=-1,T.game.hasClockInfo=!1;var o=a.Variant?a.Variant.match(/team/i)?"teams":"singles":null;o&&H.setGameType(T,o),H.setRuleVariants(T,r),r.chess960&&(/^\d+$/.test(r.chess960)?s=x.generate960Fen(r.chess960):s||k("warning: 960 without pos nr or startFen",e)),!s&&T.game.customData.startFen&&(s=T.game.customData.startFen),s||(s=P.getDefaultFenWithFlexdata()),T.game.startFen=s,P.position(T.game.startFen);try{var l=[[],[],[],[]],c=i.length,u=0,h=!0,m=!1,p=void 0;try{for(var v,f=d()(i);!(h=(v=f.next()).done);h=!0){var g=v.value;if(u++,!(Q=S.playPgnMove(g,P))){T.store.commit("showNotification","loadPgn: illegal move "+g.san),console.log(g),console.log(T.game.moves);break}if(Q.fromPgn=!0,u===c&&(Q.isLastPgnMove=!0),H.addMove(T,Q),T.atMove++,g.annotation){var y=/\bclock=(-?\d+)/.exec(g.annotation);if(y){Q.clock=parseInt(y[1]);var _=/\bdate=(\S+)/.exec(g.annotation);_&&(Q.date=new Date(_[1])),T.game.hasClockInfo=!0}else Q.annotation=g.annotation}Q.capture&&!Q.capture.dead&&(l[Q.player].push(Q.capture),Q.capturedPieces=l[Q.player].slice())}}catch(e){m=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(m)throw p}}for(var b in n)if((b=parseInt(b))>0&&!T.game.moves[b-1])k("error in loadpgn/ add variation: move not found; "+b,T.game.moves);else{var w=b>0?T.game.moves[b-1].fen:T.game.startFen;for(var R in n[b]){R=parseInt(R),T.atMove=b-1,T.inVariation=-1,T.atVariationMove=-1,P.position(w);var N=!0,B=!1,C=void 0;try{for(var M,$=d()(n[b][R]);!(N=(M=$.next()).done);N=!0){var Q,A=M.value;if(!(Q=S.playPgnMove(A,P))){T.store.commit("showNotification","loadPgn: illegal variation move "+A.san),console.log(A),console.log(n[b][R]);break}Q.fromPgn=!0,A.annotation&&(Q.annotation=A.annotation),H.addMove(T,Q),T.atVariationMove++,T.inVariation=R,T.atMove=b}}catch(e){B=!0,C=e}finally{try{!N&&$.return&&$.return()}finally{if(B)throw C}}}}}catch(e){console.error(e,e.stack),T.store.commit("showNotification","error in loadPgn: "+e.toString())}P.setEmitMoves(!0),P.setPlayMatingMoves(!0);var I=void 0,D=/(\d+)-?(\d*)-?(\d*)/.exec(a.CurrentMove);D&&(I=D[2]&&D[3]&&T.game.variations[D[1]-1]&&T.game.variations[D[1]-1][D[2]-1]?T.game.variations[D[1]-1][D[2]-1][D[3]-1]:D[1]>0?T.game.moves[D[1]-1]:{atMove:-1});var V=T.game.moves.length;I||(I=V?T.game.moves[V-1]:{atMove:-1}),H.gotoMove(T,I),I&&I.atMove===V-1&&I.is3foldRepetition&&P.set3foldRepetition(!0),K.b.forcePgnUpdate()},H={joinGame:function(){var e=u()(l.a.mark(function e(t,a){var s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.game.isLiveGame&&!t.game.gameOver&&void 0!==t.seat&&!t.game.eliminated[t.seat],a&&!t.loadingGame&&!t.gameStarting&&!s){e.next=3;break}return e.abrupt("return");case 3:t.loadingGame=!0,r=setTimeout(function(){t.loadingGame=!1},8e3),t.store.commit("showCustomGames",!1),t.socket.emit("game",{gameNr:a,action:"join",uid:window.context.user.id});case 7:case"end":return e.stop()}},e,B)}));return function(t,a){return e.apply(this,arguments)}}(),exitGame:function(e,t){e.socket.emit("game",{action:"exit",gameNr:t,reset:!0,uid:window.context.user.id}),H.reset(e)},forceJoinGame:function(){var e=u()(l.a.mark(function e(t,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.socket.emit("game",{gameNr:a,action:"join",uid:window.context.user.id});case 1:case"end":return e.stop()}},e,B)}));return function(t,a){return e.apply(this,arguments)}}(),setLoadingGame:function(e,t){e.loadingGame=t,t&&(r=setTimeout(function(){e.loadingGame=!1},8e3))},setAllowPlay:function(e){if(e.mainScreen)e.allowPlay=!1;else if(e.game.isLiveGame){if(void 0===e.seat||P.gameOver()||P.eliminated(e.seat))return void(e.allowPlay=!1);var t=e.game.turn===e.seat,a=!e.game.moves.length||e.atMove===e.game.moves.length-1;e.allowPlay=!!a&&(!!t||(e.premove?"premove":"preTurn"))}else e.allowPlay=!P.gameOver();K.b.hlMoveablePieces()},setPremove:function(e,t){e.premove=t},setSocket:function(e,t){e.socket=t},setStore:function(e,t){e.store=t},loadPgn4:function(e,t){q(t)},setTimeControl:function(e,t){},hideGameOverModal:function(e){e.showGameOverModal=!1},analysisModeOn:function(e,t){e.analysisMode=!0},analysisModeOff:function(e){e.analysisMode=!1,e.game.customData.ruleVariants.blindfold=!1,e.game.customData.ruleVariants.ghostBoard=!1},setRuleVariants:function(e,t){e.game.customData.ruleVariants=t,P.setRuleVariants(t)},startFromPosition:function(e,t){e.game.startFen=t,e.game.moves=[],e.game.movesList=[],e.game.variations=[],e.game.variationsList=[],e.atMove=-1,e.inVariation=-1,e.atVariationMove=-1,t===P.getDefaultFenWithFlexdata()?delete e.game.pgnAttributes.StartFen4:(e.game.pgnAttributes.StartFen4=t,console.log("startFromPosition:",t)),K.setPosition(t),K.b.forcePgnUpdate()},setPgnAttributes:function(e,t){e.game.pgnAttributes=t},setGameType:function(e,t){e.game.gameType=t,e.game.customData.gameType=t,P.setGameType(t),K.setGameType(t),localStorage.setItem("gameType",t)},setSoundVolume:function(e,t){void 0===t&&(t=80),t<0&&(t=0),t>100&&(t=100),e.soundVolume=t;try{Q.volume(t/100),A.volume(t/100),I.volume(t/100),D.volume(t/100),V.volume(t/100),O.volume(t/100),F.volume(t/100),G.volume(t/100),z.volume(t/100),E.volume(t/100),L.volume(t/100),localStorage.setItem("soundVolume",t)}catch(e){}},playNotifySound:function(e){Q.play(),O.play()},playMoveSound:function(e,t){var a=e.game.customData.ruleVariants.antichess;t&&(t.check?V.play():t.castle?O.play():t.capture?D.play():t.promote?I.play():t.isEndMove||A.play(),"T"!==t.san&&"R"!==t.san||setTimeout(function(){G.play()},50),"#"===t.san&&F.play(),"singles"===e.game.gameType&&(("S"===t.san||void 0!==t.outOfPieces&&a)&&F.play(),"++"===t.check||"+++"===t.check||t.san.match(/#/)?(setTimeout(function(){F.play()},100),t.san.match(/##/)&&setTimeout(function(){F.play()},300),t.san.match(/###/)&&setTimeout(function(){F.play()},600)):t.capture&&"K"===t.capture.piece&&!t.capture.dead&&P.eliminated(t.capture.player)&&setTimeout(function(){F.play()},100)),t.kingReachedCenter&&setTimeout(function(){F.play()},100))},gotoMove:function(e,t){var a=t.atMove,s=t.inVariation,i=t.atVariationMove;if(void 0!==a){void 0===s&&(s=-1),void 0===i&&(i=-1),a=parseInt(a),s=parseInt(s),i=parseInt(i);var n=void 0;if(a<0)K.setPosition(e.game.startFen),-1!==a&&(a=-1);else if(s<0){var r=e.game.moves,o=r.length;if(a>o-1&&(a=o-1),!r[a])return void k("gotoMove: move not found; atMove:",a);if(n=r[a],Math.abs(a-e.atMove)>1?K.setPosition(n.fen):n.fen.split("-")[0]!==K.getPosition()&&K.setPosition(n.fen),P.fen()!==n.fen&&(t.isOnUserMove&&n.mateFollows||P.position(n.fen)),a===o-1){var l=n.is3foldRepetition;P.set3foldRepetition(l),l&&K.b.forceMovesUpdate()}}else{if(i<0)return void k("gotoMove: atVariationMove < 0");var c=e.game.variations[a];if(void 0===c||void 0===c[s])return void k("gotoMove: variation not found "+s);var u=c[s],h=u.length;if(i>h-1&&(i=h-1),!u[i])return void k("gotoMove: variation move not found",s,i);n=u[i],Math.abs(i-e.atVariationMove)>1?K.setPosition(n.fen):n.fen.split("-")[0]!==K.getPosition()&&K.setPosition(n.fen),P.fen()!==n.fen&&P.position(n.fen)}e.atMove=a,e.inVariation=void 0===s?-1:s,e.atVariationMove=void 0===i?-1:i}else k("gotoMove atMove undef")},addMove:function(e,t){S.addSanHtml(t,K.b.colors);var a=e.inVariation>-1;if(!a&&e.atMove===e.game.moves.length-1){t.atMove=e.atMove+1,t.inVariation=-1,t.atVariationMove=-1;var s=e.game.moves[e.game.moves.length-1];if(t.fullMoveNr=s?s.fullMoveNr:0,(!s||s.player>t.player)&&(t.fullMoveNr++,t.fullMoveIncremented=!0),void 0===t.capturedPieces){for(var i=e.atMove-1,n=e.game.moves[i];n&&n.player!==t.player;)i--,n=e.game.moves[i];n&&void 0!==n.capturedPieces?t.capturedPieces=n.capturedPieces.slice():t.capturedPieces=[],t.capture&&!t.capture.dead&&t.capturedPieces.push(t.capture)}return t.fromPgn&&!t.isLastPgnMove||(t.is3foldRepetition=S.checkFor3foldRepetition(t,e.game)),e.game.moves.push(t),void 0===e.game.movesList[t.fullMoveNr]&&(e.game.movesList[t.fullMoveNr]=[]),e.game.movesList[t.fullMoveNr][t.player]=t,void(t.fromPgn||K.b.forcePgnUpdate())}var r=a?e.atMove:e.atMove+1;e.game.variations[r]||(e.game.variations[r]=[]),e.game.variationsList[r]||(e.game.variationsList[r]=[]);var o=e.inVariation,l=e.atVariationMove+1,c=!1;if(0===l&&-1===e.inVariation){for(var u in e.game.variations[r])if(u=parseInt(u),e.game.variations[r][u][0].fen===t.fen){c=u;break}o=!1!==c?c:e.game.variations[r].length}t.atMove=r,t.inVariation=o,t.atVariationMove=l,e.game.variations[r][o]||(e.game.variations[r][o]=[]),e.game.variationsList[r][o]||(e.game.variationsList[r][o]=[]);var h=e.game.variations[r][o],m=e.game.variationsList[r][o];if(l>0){var p=h[l-1];t.fullMoveNr=p.fullMoveNr,p.player>t.player&&(t.fullMoveNr++,t.fullMoveIncremented=!0)}else if(-1===e.atMove)t.fullMoveNr=1,t.fullMoveIncremented=!0;else{if(!e.game.moves[e.atMove])return console.log("error: state.game.moves[state.atMove] is undef"),void console.log(e);var v=e.game.moves[e.atMove];t.fullMoveNr=v.fullMoveNr,v.player>t.player&&(t.fullMoveNr++,t.fullMoveIncremented=!0)}if(void 0===t.capturedPieces){for(var f=l-1,g=h[f];g&&g.player!==t.player;)g=h[--f];if(!g){var y=r-1;for(g=e.game.moves[y];g&&g.player!==t.player;)y--,g=e.game.moves[y]}g&&void 0!==g.capturedPieces?t.capturedPieces=g.capturedPieces.slice():t.capturedPieces=[],t.capture&&!t.capture.dead&&t.capturedPieces.push(t.capture)}!1===c&&(h.length=l,h.push(t)),m.length=0;var _=!0,b=!1,w=void 0;try{for(var R,N=d()(h);!(_=(R=N.next()).done);_=!0){var B=R.value;void 0===m[B.fullMoveNr]&&(m[B.fullMoveNr]=[]),m[B.fullMoveNr][B.player]=B}}catch(e){b=!0,w=e}finally{try{!_&&N.return&&N.return()}finally{if(b)throw w}}K.b.forcePgnUpdate()},removeVariation:function(e,t){var a=t.atMove,s=t.inVariation;delete e.game.variations[a][s],delete e.game.variationsList[a][s],K.b.forceMovesUpdate(),K.b.forcePgnUpdate()},truncateMoves:function(e,t){var a=e.game.moves,s=e.game.movesList;if(a.length){var i=a[t];if(i){a.length=t;var n=i.fullMoveNr;if(s.length=n+(i.fullMoveIncremented?0:1),!i.fullMoveIncremented)for(var r=0;r<4;r++)r>=i.player&&delete s[n][r];if(e.inVariation<0)for(var o in e.game.variations)(o=parseInt(o))>=t&&(delete e.game.variations[o],delete e.game.variationsList[o]);K.b.forceMovesUpdate(),K.b.forcePgnUpdate()}}},truncateVariation:function(e,t){var a=e.game.variations[e.atMove][e.inVariation],s=e.game.variationsList[e.atMove][e.inVariation];if(a.length){var i=a[t];if(i){var n=i.fullMoveNr;if(a.length=t,s.length=n+(i.fullMoveIncremented?0:1),!i.fullMoveIncremented)for(var r=0;r<4;r++)r>=i.player&&delete s[n][r];K.b.forceMovesUpdate(),K.b.forcePgnUpdate()}}},reset:function(e){clearTimeout(s),clearTimeout(i),K.b.uhlAll(),K.b.uhlChecks(),K.setPosition(P.DEFAULT_FEN),e.game={players:[{},{},{},{}],startFen:P.DEFAULT_FEN,gameType:null!=localStorage.getItem("gameType")?localStorage.getItem("gameType"):"singles",customData:{ruleVariants:M},pgnAttributes:[],moves:[],movesList:[],variations:[],variationsList:[],chat:[]},e.atMove=-1,e.inVariation=-1,e.atVariationMove=-1,e.seat=void 0,e.observers=[],e.rematchReady=[],e.timersStarted=!1,e.clientTimeOffset=0,e.showGameOverModal=!1,e.loadingGame=!1},SOCKET_PLAYER_NEW_RATING:function(e,t){var a=t.seat,s=t.rating,i=t.teamRating;e.game.customData.ruleVariants.anonymous||e.game&&void 0!==a&&(e.game.players[a].rating=s,e.game.players[a].teamRating=i)},SOCKET_JOIN_ARCHIVE_GAME:function(e,t){if(clearTimeout(s),clearTimeout(i),e.observers=[],e.rematchReady=[],e.game.isLiveGame&&!e.game.gameOver&&void 0!==e.seat&&!e.game.eliminated[e.seat]&&e.game.gameNr!==t.gameNr)e.loadingGame=!1;else{e.analysisMode=!1,e.timersStarted=!1,e.seat=void 0,t.players=[];for(var a=[1,2,3,4],n=0;n<a.length;n++){var o=a[n],l=t.gameOverData&&e.game.gameNr===t.gameNr?e.game.players[o-1].avatarUrl:t["avatarUrl"+o];l||(l="https://images.chesscomfiles.com/uploads/images/noavatar_l.gif"),t.players.push({playerId:parseInt(t["uid"+o])||0,username:t["username"+o],rating:"singles"===t.gameType?t["rating"+o]:"",teamRating:"teams"===t.gameType?t["rating"+o]:"",avatarUrl:l}),window.context.user.id===t.players[o-1].playerId&&(e.seat=o-1)}t.pgnAttributes=[],t.moves=[],t.movesList=[],t.variations=[],t.variationsList=[],t.isLiveGame=!1,e.game=t,t.gameOverData&&(e.gameOverData=t.gameOverData,z.play(),setTimeout(function(){e.showGameOverModal=!0},1)),t.customData.startFen&&!/StartFen4/.test(t.pgn4)&&(t.pgn4='[StartFen4 "'+x.prettyFen(t.customData.startFen)+'"]\n'+t.pgn4),t.pgn4&&q(t.pgn4),e.game.startFen||(e.game.startFen=P.DEFAULT_FEN),void 0!==t.atMove&&H.gotoMove(e,{atMove:t.atMove-1}),t.rated||e.game.chat.unshift({type:"info",message:"This game is not rated."}),e.loadingGame=!1,clearTimeout(r)}},SOCKET_JOIN_GAME:function(e,t){if(clearTimeout(s),clearTimeout(i),e.observers=[],e.rematchReady=[],e.game=t,!e.game.players||4!==e.game.players.length)return k("error: missing players"),e.loadingGame=!1,void H.exitGame(e,e.game.gameNr);e.game.pgnAttributes=[],e.game.ruleVariants={},e.game.moves=[],e.game.movesList=[],e.game.variations=[],e.game.variationsList=[],e.timersStarted=!0,e.game.isLiveGame=!0,e.seat=void 0;for(var a=[0,1,2,3],o=0;o<a.length;o++){var l=a[o];if(window.context.user.id===t.players[l].playerId){e.seat=l;break}}void 0!==e.seat&&(e.gameStarting=!1),e.clientTimeOffset=Date.now()-t.emitTimestamp,e.showGameOverModal=!1,e.analysisMode=!1;var c=void 0===e.seat||e.game.eliminated[e.seat];if(c||e.game.gameOver||E.play(),q(t.pgn4),e.game.startFen||(e.game.startFen=P.DEFAULT_FEN),e.game.turn===e.seat){var u=e.game.timeControlIncrement>0?400:1;setTimeout(function(){Q.play()},u),e.game.moves.length<4&&U(e.game.gameNr)}if(e.game.isBlindfold=e.game.customData.ruleVariants.blindfold,e.game.isGhostBoard=e.game.customData.ruleVariants.ghostBoard,t.rated||e.game.chat.unshift({type:"info",message:"This game is not rated."}),/^wta/.test(e.game.customData.rated)&&e.game.chat.unshift({type:"info",message:"This game is rated winner-takes-all!"}),c)e.game.chat.unshift({type:"info",message:"You are spectating a game."+(e.game.customData.showObserverChat?"":" Only other spectators will see your messages.")});else{var h="Type /all and then your message to chat to everyone (default is your teammate).";"singles"===e.game.gameType&&(h=e.game.rated?"Type /stop-chat to deactivate chat for everyone.":""),h&&e.game.chat.unshift({type:"info",message:h})}e.loadingGame=!1,clearTimeout(r),e.game.playRandomMove&&(n=setTimeout(function(){var e=P.getRandomMove();K.b.onUserMove(e.from,e.to,!1,!1,!0)},1e3*Math.random()*20))},SOCKET_UPDATE_GAME:function(){var e=u()(l.a.mark(function e(t,a){var r,o,c,u,h,m,p,v,f,g,y,_,b,w,R,N,x;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(s),clearTimeout(i),clearTimeout(n),a.gameNr===t.game.gameNr){e.next=7;break}return t.socket.emit("game",{gameNr:a.gameNr,action:"exit",uid:window.context.user.id}),k("error got update for wrong game",a.gameNr,t.game.gameNr,a),e.abrupt("return");case 7:if(a.movePlayed){e.next=11;break}return k("Error: movePlayed is null",a),t.socket.emit("game",{gameNr:a.gameNr,action:"exit",uid:window.context.user.id}),e.abrupt("return");case 11:if(t.game.turn=a.turn,t.game.canClaim=a.canClaim,t.game.eliminated=a.eliminated,t.game.times=a.times,t.game.lastmoveTimestamp=a.lastmoveTimestamp,t.game.emitTimestamp=a.emitTimestamp,t.clientTimeOffset=Date.now()-a.emitTimestamp,t.game.gameOver=a.gameOver,r=a.serverfen,o=a.movePlayed,c=a.matingMoves,u=t.game.moves.length,(h=u>0?t.game.moves[u-1].fen:t.game.startFen)===r){e.next=35;break}if(console.log("clientfen !== serverfen",h,r),h.split("-").slice(0,6).join("-")===r.split("-").slice(0,6).join("-")){e.next=34;break}return console.log("clientfen[0-6] !== serverfen[0-6]",h,r),console.log("update:",a),console.log("state:",t),t.socket.emit("game",{gameNr:t.game.gameNr,action:"join",uid:window.context.user.id}),e.abrupt("return");case 34:console.log("flexData mismatch");case 35:for(o.inVariation=-1,o.atVariationMove=-1,S.addSanHtml(o,K.b.colors),t.game.moves.push(o),o.is3foldRepetition&&P.set3foldRepetition(!0),t.game.fen=o.fen,void 0===t.game.movesList[o.fullMoveNr]&&(t.game.movesList[o.fullMoveNr]=[]),t.game.movesList[o.fullMoveNr][o.player]=o,m=!0,p=!1,v=void 0,e.prev=46,f=d()(c);!(m=(g=f.next()).done);m=!0)(y=g.value).inVariation=-1,y.atVariationMove=-1,S.addSanHtml(y,K.b.colors),t.game.moves.push(y),void 0===t.game.movesList[y.fullMoveNr]&&(t.game.movesList[y.fullMoveNr]=[]),t.game.movesList[y.fullMoveNr][y.player]=y,t.game.fen=y.fen;e.next=54;break;case 50:e.prev=50,e.t0=e.catch(46),p=!0,v=e.t0;case 54:e.prev=54,e.prev=55,!m&&f.return&&f.return();case 57:if(e.prev=57,!p){e.next=60;break}throw v;case 60:return e.finish(57);case 61:return e.finish(54);case 62:t.game.hasNewMoves=!0,K.b.forceMovesUpdate(),_=50;case 65:if(!(_-- >0&&P.turn()!==t.game.turn)){e.next=70;break}return e.next=68,C(40);case 68:e.next=65;break;case 70:H.setAllowPlay(t),t.game.gameOver||t.game.turn!==t.seat||t.game.eliminated[t.seat]||(b=Date.now()-t.clientTimeOffset-t.game.lastmoveTimestamp,w=t.game.timeControlIsDelay&&t.game.timeControlIncrement>0?1e3*t.game.timeControlIncrement:0,R=Math.random()>.3?1e3*Math.random():5e3*Math.random(),N=t.game.times[t.seat]+w-b-2e3,R>N&&(R=.8*N),t.game.playRandomMove&&(n=setTimeout(function(){var e=P.getRandomMove();K.b.onUserMove(e.from,e.to,!1,!1,!0)},R)),setTimeout(function(){Q.play()},500),o.atMove<3?U(t.game.gameNr):((x=t.game.times[t.seat]+w-b-1e4)<1&&(x=1),clearTimeout(s),s=setTimeout(function(){L.play()},x)));case 72:case"end":return e.stop()}},e,B,[[46,50,54,62],[55,,57,61]])}));return function(t,a){return e.apply(this,arguments)}}(),SOCKET_CHAT_MESSAGE:function(e,t){e.game.chat.push(t)},SOCKET_SET_CHAT:function(e,t){e.game.chat=t},SOCKET_GAME_STARTING:function(e,t){var a=t.delay;L.play(),e.gameStarting=!0,e.showGameOverModal=!1,e.analysisMode=!1,e.game.gameNr&&H.exitGame(e,e.game.gameNr),setTimeout(function(){K.b.gameStartAnimation(a)},80)},SOCKET_GAME_CANCELLED:function(e,t){e.gameStarting=!1,t&&t===e.game.gameNr&&H.exitGame(e,t)},SOCKET_GAME_NOT_FOUND:function(e,t){e.loadingGame=!1},SOCKET_GAME_OVER_FAIL:function(e,t){e.game.gameOverData=t,e.game.timersStarted=!1,e.game.gameOver=!0,z.play(),e.showGameOverModal=!0},SOCKET_GAME_OVER:function(e,t){},SOCKET_SET_OBSERVERS:function(e,t){e.observers=t},SOCKET_shared_ip_spectator:function(e,t){e.game.shared_ip_spectator=!0},SOCKET_USER_SETTINGS:function(e,t){e.soundVolume=t.soundVolume,void 0!==t.premove&&(e.premove=t.premove)},SOCKET_SETTING_CHANGED:function(e,t){"soundVolume"===t.setting&&(e.soundVolume=t.value),"premove"===t.setting&&(e.premove=t.value,H.setAllowPlay(e))},SOCKET_REMATCH:function(e,t){if(void 0!==e.seat){var a=!1,s=!0,i=!1,n=void 0;try{for(var r,o=d()(e.game.players);!(s=(r=o.next()).done);s=!0){r.value.playerId===t&&(a=!0)}}catch(e){i=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw n}}if(a&&(e.rematchReady.includes(t)||e.rematchReady.push(t),4===e.rematchReady.length&&window.context.user.id===t)){var l=[];if("singles"===e.game.gameType){for(var c=[0,1,2,3],u=0;u<c.length;u++){var h=c[u];l.push(e.game.players[h].playerId)}l=x.shuffle(l)}else if("teams"===e.game.gameType){var m=P.getTeammate(),p=[[],[2,2,0,0],[1,2,3,0],[1,3,3,1]][m][0],v=P.getPartner(p);l[0]=e.game.players[p].playerId,l[m]=e.game.players[v].playerId;var f=Math.random()>.5;l[p]=e.game.players[f?0:m].playerId,l[v]=e.game.players[f?m:0].playerId}e.socket.emit("game",{action:"startRematch",playerIds:l,gameType:e.game.gameType,timeControlInitial:e.game.timeControlInitial,timeControlIncrement:e.game.timeControlIncrement,timeControlIsDelay:e.game.timeControlIsDelay,gameNr:e.game.gameNr,rated:e.game.rated,customData:e.game.customData,uid:window.context.user.id})}}}};t.a={state:T,getters:$,mutations:H}},yTeE:function(e,t,a){"use strict";var s=a("k4++"),i=a("uGO6"),n=a("XyMi");var r=function(e){a("bF2X"),this.$style=a("30vV")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-93cbbae6",null);t.a=o.exports},"yW6+":function(e,t){e.exports={icon:"icon_27AOGWwD_1",closeIcon:"closeIcon_2tmW5DEo_1"}},ymSa:function(e,t,a){"use strict";var s=a("HJWK");t.a={name:"PanelLeaderboard",components:{Leaderboard:s.a}}},ys0V:function(e,t){e.exports={component:"component_iVw46BJz",small:"small_1ckgQvVX",large:"large_S7M9vJVa","x-large":"x-large_3DTnRbCZ",basic:"basic_1N0BzcCz",dark:"dark_uVW3o_MC","dark-alternate":"dark-alternate_2V-edZsL",primary:"primary_337Vx6_K",info:"info_hACs0VCY",danger:"danger_3HN_QRbJ",facebook:"facebook_2GF0yWGt"}},z1to:function(e,t,a){"use strict";var s=a("cw4I"),i=a("Ki9n"),n=a("XyMi");var r=function(e){a("MRz0"),this.$style=a("t800")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-124748f1",null);t.a=o.exports},z7bA:function(e,t,a){"use strict";var s=a("utHB"),i=a("afeW"),n=a("XyMi");var r=function(e){a("tAm7")},o=Object(n.a)(s.a,i.a,i.b,!1,r,"data-v-01063027",null);t.a=o.exports},z8mp:function(e,t,a){"use strict";var s=a("1vU/");t.a={name:"Tabs",components:{Tab:s.a},computed:{}}},zcSD:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tabs"},[t("tab",{attrs:{title:"watch",iconName:"binoculars"}}),this._v(" "),t("tab",{attrs:{title:"leaderboard",iconName:"trophy-podium"}}),this._v(" "),t("tab",{attrs:{title:"archive",iconName:"chess-board-folder"}}),this._v(" "),t("tab",{attrs:{title:"friends",iconName:"users"}}),this._v(" "),t("tab",{attrs:{title:"chat",iconName:"chat"}}),this._v(" "),t("tab",{attrs:{title:"rules",iconName:"circle-question"}})],1)},i=[]},zscW:function(e,t){e.exports={"form-label":"form-label_3t9_k2Mv","form-input":"form-input_1ekExtg_",large:"large_cxnqsuNb",small:"small_rXAmhc9f",white:"white_2hMHrojv","form-help":"form-help_3EJh1eHW"}}},["NHnr"]);